\renewcommand\chapterimg{../Pictures/7.png}
\chapter{模（一）}

设$M$和$N$都是左$R$-模，记$\Hom_R(M,N)$为所有左$R$-模同态的集合，如果$R$是清楚的，则可以简单记作$\Hom(M,N)$. $\Hom(M,N)$具有清楚的交换群结构，所以可以看成双边$\zz$-模，并且可以等同$fn=nf$，其中$f\in \Hom_R(M,N)$，而$n\in \zz$.

如果$M$是左$R$-模也是右$S$-模，而$N$是左$R$-模，那么任取$f\in \Hom_R(M,N)$以及$s\in S$，可以通过$(sf)(m)=f(ms)$定义出$\Hom_R(M,N)$上的一个左$S$-模结构。实际上，
\[
	((st)f)(m)=(s(tf))(m)=(tf)(ms)=f(mst)=f(m(st)).
\]
同样，如果$M$只是左$R$-模，但$N$是左$R$-模兼右$S$-模，那么任取$f\in \Hom_R(M,N)$以及$s\in S$，可以通过$(sf)(m)=f(m)s$定义出$\Hom_R(M,N)$上的一个右$S$-模结构。实际上
\[
	(fst)(m)=(fst)(m)=(fs)(m)t=f(m)st.
\]

假设下面出现的环都是交换环，此时，每一个左$R$-模$M$，都可以通过$rf=fr$定义出一个右$R$-模结构而成为一个双边$R$-模，当$M$具有这样诱导的双边$R$-模结构时，我们简单称呼$M$是一个$R$-模。如果$M$和$N$都是$R$-模，上面的推理告诉我们，$\Hom_R(M,N)$也是一个$R$-模。

除非在讨论$\Hom_R(M,N)$的结构时，将$M$和$N$只看成一个左$R$-模并不会有什么损失，我们将采用这种观点。

\section{链条件}

\para 设$P$是一个偏序集，如果他的任意非空子集都有极大元，则$P$称为满足极大条件。对偶地，还有极小条件。

极大条件的一个有趣应用是Noether归纳原理：设$\mathcal{P}$是关于$P$中元素的一个命题，如果对固定的$a$，任意的$\mathcal{P}(x)$对任意的$x>a$成立可以推出$\mathcal{P}(a)$成立，则$\mathcal{P}$对所有$x\in P$都成立。

证明是简单的，假设$\mathcal{P}$至少对某个元素不成立，则所有使得$\mathcal{P}$不成立的元素的集合非空，由极大条件，这个集合中存在极大元$a$使得$\mathcal{P}(a)$不成立。任取$x>a$，由于$a$的极大性，$\mathcal{P}(x)$都成立，再由条件，可知$\mathcal{P}(a)$成立，矛盾。

\para 设$P$是一个偏序集，他的全序子集被称为一个链。如果给定一条链$S$，存在一个元素$a$，使得所有$S$中所有满足$a\leq x\in S$都成立$x=a$，则该链被称为是（向上）稳定的，简写成a.c.c. 类似的，还有（向下）稳定的，简写成d.c.c.

\pro 极大条件等价于所有链都是a.c.c.

\proof
	如果$P$满足极大条件，则任取一条链$S$，他都有极大元$a$，任意的$a\leq x\in S$都可以推出$x=a$. 反过来，如果$P$不满足极大条件，则存在$S\subset P$中没有极大元。则给定一个$x_0\in S$，可以找到一个$x_1\in S$满足$x_0<x_1$，再对$x_1$可以找到$x_2$使得$x_1<x_2$，如是进行下去，我们就找到了一条不稳定的链。
\qed

可见极大条件和a.c.c.是等价的，在应用中极大条件往往比较方便，而在证明/证伪Noether性的时候，构造一个具体的升链就比较简单。

\para 一个$R$-模$M$，如果他的子模集满足极大条件，则他称为Noether模，如果满足极小条件，则他称为Artin模。环$R$看成$R$-模时，如果他是Noether(Artin)模，则他称为Noether(Artin)环。

Noether模远比Artin模应用广泛，比如我们后面会断言Artin环一定是一个Noether环，反之不然。Noether性是有限性条件之一，下面一个命题展现了这一点。

\pro 如果三个$R$-模$P$, $M$和$Q$有一个短正合列$0\to P\to M\to Q\to 0$，则$M$是Noether(Artin)模当且仅当$P$和$Q$都是Noether(Artin)模。\notprove

作为推论，设$N$是$M$的一个子模，那么有自然的短正合列$0\to N\hookrightarrow M\to M/N\to 0$，因此$M$是Noether(Artin)模当且仅当$N$和$M/N$是Noether(Artin)模。

设$M=\bigoplus_{i=1}^nM_i$，因为有短正合列
\[
	0\to M_n\to \bigoplus_{i=1}^nM_i\to \bigoplus_{i=1}^{n-1}M_i\to 0,
\]
如果每一个$M_i$都是Noether(Artin)模，由归纳法，可知$M=\bigoplus_{i=1}^nM_i$是Noether(Artin)模。

\pro 一个模是Noether模当且仅当它的任意子模是有限生成的。\notprove

\theo Hilbert基定理：如果$R$是一个Noether环，则$R[x]$也是一个Noether环。\notprove

作为推论，如果$R$是一个Noether环，而$S$是一个有限生成$R$-代数，则$S$也是一个Noether环。

\para 下面的观察来自于Noether，他与拓扑上的不可约性对应。设$M$是一个Noether模，而$N$是它的一个子模，如果$N$不能写成两个$M$的子模$P$和$Q$的交，其中$N$是$P$和$Q$的真子模，则称$N$是一个不可约子模。

\pro \label{irrde}设$M$是一个Noether模，则每一个$M$的真子模都可以写成$M$的有限个不可约子模的交的形式，这被称为不可约分解。

\proof
	假设命题不对，考虑所有不能写成有限个不可约子模的交的那些真子模构成的集合，它按包含关系构成一个偏序集。由于这个集合非空，而且$M$是一个Noether模，所以存在极大元$N$。由于$N$是可约的，所以可以写成$P\cap Q$的形式。由于$P$和$Q$都严格比$N$大，所以它们可以写成有限个不可约子模的交，进而$N$可以写成有限个不可约子模的交。矛盾。
\qed

\section{有限生成模}

\para 一个$R$-模$M$是有限生成的当且仅当存在某个正整数$n$使得$M$是$R^n$的商模，或者用正合列写作
\[
	R^n \xrightarrow{\pi} M\to 0.
\]
考虑$M$的一组有限的生成元$\{m_i\,:\, 1\leq i\leq n\}$，他们生成了一个$R$模，满射通过将$\pi:1_i\mapsto m_i$来线性扩张得到，即定义
\[
	\pi\left(\sum_i r_i 1_i\right)=\sum_i r_i m_i.
\]
反过来，如果$M$可以写成某个$R^n$的商模，他自然被$\pi(1_i)$生成。

\para Noether(Artin)环上的有限生成模是Noether(Artin)模。可以将其归结到有限生成自由模的情况即可，因为Noether(Artin)模的商模或者子模都是Noether(Artin)模。而这是因为在上节我们看到了，有限个Noether(Artin)模直和后还是Noether(Artin)模。

\para 从自由模模去一些关系是构造一些模的常用手段。比如我们希望构造一个由所有满足$(a,b)=(b,a)$的$(a,b)$构成的一个模，那么最方便的方式就是从$R^2$出发，模去所有$(a,b)-(b,a)$生成的子模。后者被称为一个关系。

自由模模去一个关系得到一个模这个过程，抽象来说，就是存在正合列
\[
	R^I\to R^J \to M\to 0.
\]
这被称为模$M$的free presentation，如果$I$和$J$都是有限的，则$M$被称为finitely presented.

finitely presented模一定是有限生成模，但一般而言，有限生成模不是finitely presented，比如取一个非Noether环$R$以及它的一个非有限生成理想$I$使得$R/I$是一个有限生成模，那么有短正合列$0\to I\to R \to R/I\to 0$，此处由于$I$不是有限生成的，所以$R/I$就不是finitely presented.

但是到了Noether环上的模就不会如此，考虑任意的有限生成模$M$，他可以写成$R^n$的商模，即有短正合列$0\to N \hookrightarrow R^n \to M\to 0$，由于$N$是$R^n$的子模，而$R^n$是$R$上的有限生成模，所以$R^n$是Noether模，继而推知$N$是有限生成的，所以存在满同态$R^m\to N$，这样我们就得到了正合列$R^m\to R^n\to M\to 0$.

\para 设$\mathfrak{a}$是$R$的一个理想，而$M$是一个$R$-模，记$\mathfrak{a}M$是所有形如$am$，其中$a\in \mathfrak{a}$以及$m\in M$的元素生成的。

作为例子，设$N$是$M$的一个子模，这里来计算$\mathfrak{a}(M/N)$. $\mathfrak{a}(M/N)$由$\sum_{i=1}^n a_i\bar{m}_i$生成，其中$\bar{m}_i\in M/N$. 观察$\sum_{i=1}^n a_i m_i$，为得到$\sum_{i=1}^n a_i\bar{m}_i$，需要模去$N$，但是$N$未必是$\mathfrak{a}M$的子模，所以可以先把$\mathfrak{a}M$扩张为$\mathfrak{a}M+N$，再模去$N$，添进去的多余的$N$里面的元素也一道模掉了，这样就得到了想要的$\mathfrak{a}(M/N)=(\mathfrak{a}M+N)/N$. 或者，可以通过先将$N$缩小到$\mathfrak{a}M$的一个子模$N\cap \mathfrak{a}M$，于是$\mathfrak{a}(M/N)=\mathfrak{a}M/(N\cap \mathfrak{a}M)$.

\theo Hamilton-Cayley定理：设$M$是一个有限生成$R$-模，他能被$n$个元素生成. 再设$\mathfrak{a}$是$R$的一个理想，$\varphi:M\to M$是一个自同态。如果$\varphi(M)\subset \mathfrak{a}M$，则存在首一多项式
\[
	p(x)=x^n+p_1x^{n-1}+\cdots+p_n,
\]
其中$p_i\in I$，使得$p(\varphi)=\varphi^n+p_1\varphi^{n-1}+\cdots+p_n$是一个零映射，即任取$m\in M$，有$p(\varphi)(m)=0$. 一般写作$p(\varphi)=0$.

\proof
	设$\{m_1,\cdots,m_n\}$是$M$的生成元。考虑$\varphi(m_i)\in M$，因为$M$是有限生成的，所以
	\[
	\varphi(m_i)=\sum_{j}r_{ij}m_j,
	\]
	其中$r_{ij}\in I$. 将其写作$\sum_{j}(\delta_{ij}\varphi-r_{ij})m_i=0$，其中$\delta_{ij}$当$i=j$的时候为$1$，其他时候为$0$.

	将$M$看作$R[x]$-模，其中$xm=\varphi(m)$，则$\sum_{j}(\delta_{ij}x-r_{ij})m_i=0$. 左乘$x\delta_{ij}-r_{
	ij}$的伴随矩阵，就得到了
	\[
	\det\left(x\delta_{ij}-r_{ij}\right)m_i=0,
	\]
	对任意的$m_i$都成立。所以也对任意的$m\in M$都成立，而$\det\left(x\delta_{ij}-\sum_{j}r_{ij}\right)$就是我们需要的多项式。
\qed

\para 作为Hamilton-Cayley定理的应用，我们可以断言，有限生成模的任意满自同态是同构。

\proof
	把$M$看出$R[x]$-模，其中$xm=\varphi(m)$，他是有限生成的，因为作为$R$-模是有限生成的。令$I=(x)$是$x$在$R[x]$中生成的主理想。由于$\varphi$是满射，则$IM=M$. 选则映射$\id_M=1:M\to M$，这显然是一个$R[x]$-模同态，由于$\id_M(M)\subset IM$，利用Hamilton-Cayley定理，存在一个多项式$p$，系数属于$I$使得
	\[
	p(1)m=\left(1^n+xf_1(x)1^{n-1}+\cdots+xf_n(x)\right)m=(1-xq(x))m=0,
	\]
	其中$q\in R[x]$. 或者写作，$1-q(\varphi)\varphi=0$. 因此$q(\varphi)$是$\varphi$的一个逆，进而$\varphi$是一个同构。
\qed

\para 设$M$是一个模，一组元素$\{x_1$, $\cdots$, $x_n$, $\cdots\}$被称为线性无关的，如果任取其中有限个元素$x_{i_1}$, $\cdots$, $x_{i_k}\in M$，以及对任意的$r_{i_1}$, $\cdots$, $r_{i_k}\in R$，使得如果$r_{i_1}x_{i_1}+\cdots+r_{i_k}x_{i_k}=0$可以推出$r_{i_1}=\cdots=r_{i_k}=0$. 如果有一组线性无关的元素可以生成$M$，则$M$同构于那族元素生成的自由模，此时$M$称为被$\{x_1$, $\cdots$, $x_n$, $\cdots\}$自由生成的，这组元素被称为自由生成元，或者叫做一组基。

\para 将上述命题应用到自由模。设$M\cong R^n$，而$I=\{x_1$, $\cdots$, $x_n\}$自由生成了$M$，则$M$同构于$I=\{x_1$, $\cdots$, $x_n\}$生成的自由模$\bigoplus_{x\in I} R$.

\proof
	$\bigoplus_{x\in I} R$自然可以看成$R^n$，从$\bigoplus_{x\in I} R=R^n$到$M$有自然的满射$\alpha$，他将生成元映到生成元，由于$M\cong R^n$，所以有同构$\beta:M\to R^n$，因此就有了满同态$\alpha\beta:M\to M$，进而是同构。所以$\alpha =(\alpha\beta)\beta^{-1}$就是一个同构。
\qed

利用上面这个命题，可以证明当$m\neq n$时$R^m\not\cong R^n$. 设$m<n$，反证即可，如果$R^m\cong R^n$，则在$R^m$中可以取$n$个自由生成元，但这$n$个自由生成元都由$R^m$的自由生成元生成，所以他们不是自由的，矛盾。

因此，一个有限生成自由模的基的元素个数总是一定的。

\pro 域$k$上的有限生成模$M$都是自由模。

\proof
	归纳法。如果$M$由一个非零元素$x$生成，由于$\ann(x)=(0)$，所以$M=kx$是自由模。设由$n$个元素生成的$k$-模是自由模，此时考虑由$n+1$个元素生成的$k$-模。设这$n+1$个非零元素为$\{x_1$, $\cdots$, $x_{n+1}\}$，如果这组生成元是自由生成元，则没什么要证的，如果不是，则存在一组系数$a_1$, $\cdots$, $a_{n+1}$使得等式$a_1x_1+\cdots+a_{n+1}x_{n+1}=0$成立，系数中至少有一个不是零，不妨设为$a_{n+1}$，于是
	\[
	a_{n+1}x_{n+1}=-a_1x_1-\cdots-a_nx_n,
	\]
	两边除以$a_{n+1}$得出$x_{n+1}$可以由$\{x_1$, $\cdots$, $x_{n}\}$生成，于是$M$也可以由$\{x_1$, $\cdots$, $x_{n}\}$生成，由归纳假设，$M$是一个自由模。
\qed

利用选择公理，实际上，域上的模（矢量空间）都是自由模，但是这里暂时用不到这点。

\theo Nakayama引理：设$M$是一个有限生成$R$-模，$\mathfrak{a}$是$R$的一个理想，则$M=\mathfrak{a}M$可以推出存在一个$a\in \mathfrak{a}$使得$am=m$对任意的$m\in M$都成立。

\proof
	在Hamilton-Cayley定理中，取$\varphi=\id_M$，因此，存在$a_1$, $\cdots$, $a_n\in \mathfrak{a}$使得$x=1+a_1+\cdots+a_n=1-a$左乘在$M$上是一个零映射，于是$(1-a)m=0$或者$am=m$对任意的$m\in M$都成立。
\qed

特别地，当$\mathfrak{a}$包含于$R$任意的极大理想中时，$1-a$不处于任意的极大理想中，所以必然是可逆，因此$(1-a)m=0$推出了$m=0$. 因此Nakayama引理在局部环（只有一个极大理想的环）上会特别有用，因为此时包含于每一个极大理想中就变成了一个平凡的条件。

作为推论，令$M$是一个有限生成$R$-模，而$N$是$M$的一个子模，而$\mathfrak{a}$是包含于每一个极大理想中的一个理想，那么$M=\mathfrak{a}M+N$可以推出$M=N$. 实际上，将Nakayama引理应用到$M/N$上，注意到$\mathfrak{a}(M/N)=(\mathfrak{a}M+N)/N$即可。

\pro 将上面的推论稍微推广一下。设$M$是一个有限生成$R$-模，而$\mathfrak{a}$还是包含于每一个极大理想中的一个理想，设$\varphi:M\to M/\mathfrak{a}M$是商同态。如果$M$中的一组元素$\{m_1$, $\cdots$, $m_n\}$使得$\{\varphi(m_1)$, $\cdots$, $\varphi(m_n)\}$生成$M/\mathfrak{a}M$，则$\{m_1$, $\cdots$, $m_n\}$生成$M$.

证明只需要将上面的推论应用到$N=\sum_{i=1}^n Rm_i$即可。

\para 作为Nakayama引理的一个应用，我们谈谈余切空间。将在流形$M$上一点$p$的某个邻域$U$光滑的函数$f$记作一个偶对$(f,U)$，并在两个偶对上定义如下等价关系：$(f,U)\sim (g,V)$，如果存在一个开集$W\subset U\cap V$使得$f|_W=g|_V$. 这样，所有等价类构成了一个环$\mathcal{F}_p$，这是一个局部环，唯一的极大理想由那些在点$p$上为零的光滑函数构成，因为如果$f$不在点$p$为零，由连续性，在足够小的一个邻域上，$f$存在逆。将$\mathcal{F}_p$的极大理想记作$\mathfrak{m}$. 流形上点$p$处的余切空间$T_p^*M$定义为$\mathfrak{m}/\mathfrak{m}^2$，这是一个$\mathcal{F}_p/\mathfrak{m}$-矢量空间。而商同态$d:\mathfrak{m}\to \mathfrak{m}/\mathfrak{m}^2$正是微分算子，或者说从$0$-阶到$1$-阶的外微分算子。为方便起见，设流形为$\mathbb{R}^n$，点$p$是原点$0$.

$\mathfrak{m}$是一个清楚的有限生成$\mathcal{F}_p$-模，生成元为$\{x_1$, $\cdots$, $x_n\}$. 现在设一族元素$\{f_1$, $\cdots$, $f_n\}$，使得$\{df_1$, $\cdots$, $df_n\}$生成了作为$\mathcal{F}_p/\mathfrak{m}=\mathbb{R}$-模的余切空间$\mathfrak{m}/\mathfrak{m}^2$.

应用Nakayama引理，我们可以知道$\{f_1$, $\cdots$, $f_n\}$生成了$\mathfrak{m}$. 所以此时，$\{f_1$, $\cdots$, $f_n\}$表现得就像局部坐标函数一样。这是在说什么呢？为此，将$\{df_1$, $\cdots$, $df_n\}$按照$\{dx_1$, $\cdots$, $dx_n\}$展开，有
\[
	df_i=\sum_{j=1}^n\partial_jf_i dx_j,
\]
其中展开系数构成的矩阵$(\partial_jf_i)$就是所谓的Jacobian. $\{df_1$, $\cdots$, $df_n\}$生成$\mathfrak{m}/\mathfrak{m}^2$，此时当且仅当$(\partial_jf_i)$可逆。因此，Nakayama引理告诉我们，如果$(\partial_jf_i)$可逆，则$\{f_1$, $\cdots$, $f_n\}$生成了$\mathfrak{m}$. 于是，对每一个$x_i$，我们有
\[
	x_i=\sum_{j=1}^n a_{ij}f_j.
\]
于是，我们就得到了$\{f_1$, $\cdots$, $f_n\}$的“反函数”。这并不是真正的反函数，是因为系数$a_{ij}\in \mathcal{F}_p$还没写成$\{f_1$, $\cdots$, $f_n\}$的函数形式。

注意到这与反函数定理的相似性，反函数定理就是在说：如果在一点处如果一族函数线性化后（微分后）性质足够好（Jacobian可逆），则非微分的函数在那点附近性质也非常好（可逆，有反函数）。因此，Nakayama引理此时和反函数定理是相近的。

\section{张量积}

\para 张量抽象了多线性函数，尤其是双线性函数。设$A$是右$R$-模，$B$是左$R$-模，那么我们称$f:A\times B\to G$，其中$G$是一个交换群，为一个双线性函数，如果他满足
\[
	f(a+b,a')=f(a,a')+f(b,a'),\quad f(a,a'+b')=f(a,a')+f(a,b'),
\]
以及对$r\in R$满足$f(ar,b)=f(a,rb)$.

特别地，如果我们存在一个双线性函数$\varphi$，以及一个交换群$G$，使得每一个$A\times B$上的双线性函数$f:A\times B\to H$都可以唯一分解为
\[
	f:A\times B\xrightarrow{\varphi} G\xrightarrow{h_f}H,
\]
其中$h_f$对每一个双线性函数$f$存在且唯一，则称呼$G$为$A$与$B$的张量积，记做$A\otimes_R B$，而$\varphi(a,b)$记做$a\otimes_R b$，如果下标$R$不重要，那么我们可以省略他。

设$R$是交换环，$A$和$B$都是$R$-模，那么$A\times B$具有$R$-模结构，即$r(a,b)=(ra,b)$. 通过将$r(a\otimes b)$可以定义为$(ra)\otimes b$，$A\otimes_R B$显然有一个$R$-模结构，这样，$\varphi$将是一个$R$-模同态。而上面的泛性质，也可以改成相应的$R$-模和$R$-模同态。

\lem 在模范畴内，张量积存在。而且由上面的泛性质，他确定到一个同构。

\proof 对于唯一性，我们考虑两个张量积$(G,\varphi)$和$(G',\varphi')$，那么根据张量积的性质，有分解
\[
	\varphi:A\times B\xrightarrow{\varphi'} G'\xrightarrow{h_{\varphi}}G,\quad \varphi':A\times B\xrightarrow{\varphi} G\xrightarrow{h_{\varphi'}}G',
\]
所以只要验证$h_\varphi\circ h_{\varphi'}=\id_{G}$和$h_{\varphi'}\circ h_{\varphi}=\id_{G'}$就好了，这样我们就得到了$G$和$G'$之间的同构。而上述等式来自于分解的唯一性，显然，我们有分解
\[
	A\times B\xrightarrow{\varphi'} G'\xrightarrow{h_{\varphi}}G\xrightarrow{h_{\varphi'}}G',\quad A\times B\xrightarrow{\varphi'} G'\xrightarrow{\id_{G'}}G',
\]
显然，所以由唯一性得到了$h_{\varphi'}\circ h_{\varphi}=\id_{G'}$，同理有另一个等式。

对于存在性，我们可以直接构造。首先，我们知道在交换群范畴（作为$\zz$-模）有直和存在，那么我们可以构造自由交换群
\[
	F=\bigoplus_{(a,b)\in A\times B} \zz=\sum_{(a,b)\in A\times B}n_{(a,b)}1_{a,b}.
\]
这是一个形式和，系数只有有限项非零，其中$1_{a,b}$是对应指标$(a,b)$的那个$\zz$中的$1$。我们令$H$是由
\[
	1_{a,b}+1_{a',b}-1_{a+a',b},\quad 1_{a,b}+1_{a,b'}-1_{a,b+b'},\quad 1_{ar,b}-1_{a,rb}
\]
生成的子群，那么我们$A\otimes B$就可以构造为$F/H$，令$\varphi(a,b)=a\otimes b=[1_{a,b}]$，即$1_{a,b}$的陪集。这确实是张量积，具体的检验这里就不进行了。\qed

\para 有了两个模的张量积，我们自然也可以拓展为三个模的张量积，我们可以通过模仿两个模的张量积的泛性质\footnote{即三线性的函数可以唯一分解。}，定义一个新的三个模之间的张量积$A\otimes B\otimes C$，然后可以检验$(A\otimes B)\otimes C$和$A\otimes (B\otimes C)$同时也满足泛性质，所以他们之间是同构的。在这层意义上，我们可以认为张量积满足结合律，因此我们自然也有了有限个模的张量积。

\para 下面讨论张量积在同态下的表现。设$\varphi:M\to M'$是右$R$-模同态和$\psi:N\to N'$是左$R$-模同态，则它诱导了一个交换群同态
\[
	\alpha(\varphi,\psi):M\otimes N\to M'\otimes N',
\]
使得复合公式
\[
	\alpha(\varphi'\varphi,\psi'\psi)=\alpha(\varphi',\psi')\alpha(\varphi,\psi)
\]
成立。大家经常将$\alpha(\varphi,\psi)$记作$\varphi\otimes \psi$，两个模同态的张量积的意义后面会阐述，这里看成形式的符号即可。

\proof
	映射
	\[
	\begin{array}{ccc}
		M\times N&\to& M'\otimes N'\\
		(m,n)&\mapsto& \varphi(m)\otimes \psi(n)
	\end{array}
	\]
	显然是双线性的，所以它诱导了映射$M\otimes N\to M'\otimes N'$，而张量积的泛性质中的唯一性给出了复合公式，于是这就是我们想要的$\alpha(\varphi,\psi)$.
\qed

注意到复合公式成立意味着成立交换图
\[
\begin{xy}
	\xymatrix
	{
		M\otimes N\ar[rr]^{\alpha(\id_M,\psi)}\ar[d]_{\alpha(\varphi,\id_{N})}&&M\otimes N'\ar[d]^{\alpha(\varphi,\id_{N'})}\\
		M'\otimes N\ar[rr]^{\alpha(\id_{M'},\psi)}&&M'\otimes N'
	}
\end{xy}
\]
成立。

上面的交换图用范畴论的语言来表述就是，$-\otimes N$以及$-\otimes \id_N:=\alpha(-,\id_N)$一起构成了一个函子，而同态$N\to N'$将诱导出一个函子间的态射（即自然变换）。这样的同态我们称为自然同态或者函子式同态，描述同态其实就是建立范畴论的初衷，为了抽象出自然变换才定义了范畴等概念。然后到了教科书上，逻辑就反了过来。同理，$(N\otimes -,\id_N\otimes -)$也是一个函子。

\para 上一个命题给出了如下映射：
\[
	\alpha:\Hom(M,M')\times \Hom(N,N')\to \Hom(M\otimes N,M'\otimes N').
\]
由于$\Hom(M,M')$和$\Hom(N,N')$都是$R$-模，并且上述映射是双线性的，所以他自然诱导了一个映射
\[
	\Hom(M,M')\otimes \Hom(N,N')\to \Hom(M\otimes N,M'\otimes N').
\]
这也就是为什么大家将$\alpha(\varphi,\psi)$记作$\varphi\otimes \psi$. 

\pro 记左$R$-模范畴之间的态射集为$\Hom_R(-,*)$. 则成立双函子同构
\[
	\Hom_{\mathbb{Z}}(M\otimes_R N,G)\cong \Hom_R(M,\Hom_\mathbb{Z}(N,G)),
\]
其中$M$和$N$是可以变动的。因此，$-\otimes_R N$就是一个左伴随函子，而$\Hom_\mathbb{Z}(N,*)=h^N$是一个右伴随函子。\notprove

根据左伴随函子与逆极限可交换，而直和是模范畴的一种逆极限，我们可以得知同构
\[
	\left(\bigoplus_i M_i\right)\otimes N\cong \bigoplus_i \left(M_i\otimes N\right).
\]

\pro 成立交换群的同构$R\otimes M\cong M$以及$(R/\mathfrak{a})\otimes M\cong M/\mathfrak{a}M$，其中$\mathfrak{a}$是$R$的一个理想。

\proof
	记$(r,m)\mapsto rm$为映射$\varphi$，毫无疑问这是一个双线性映射，所以诱导了一个交换群同态$\psi:R\otimes M\to M$，使得分解$\varphi:R\times M\xrightarrow{h} R\otimes M\xrightarrow{\psi} M$成立。毫无疑问，$\psi$是一个满射，因为对任意的$m$都有$m=\varphi(1,m)$，所以$m=\psi(h(1,m))$. 注意到$R\otimes M$里面的元素可以写成这样的有限和
	\[
	\sum_i r_i\otimes m_i=\sum_i 1\otimes r_im_i=1\otimes \left(\sum_i r_i m_i\right),
	\]
	因此，$\psi\left(\sum_i r_i\otimes m_i\right)=0$推出$\sum_i r_i m_i=0$，再利用上面的等式推出$\sum_i r_i\otimes m_i$. 所以$\psi$是一个单射。

	第二个同构，依然是记$(\bar{r},m)\mapsto \overline{rm}\in M/\mathfrak{a}M$为映射$\varphi$. 这是一个定义良好的映射，选取$\bar{r}$的不同代表元$r'=r+a$，其中$a\in\mathfrak{a}$，所以$r'm=rm+am$，由于$am\in \mathfrak{a}M$，所以$\overline{r'm}=\overline{rm}$. 双线性性从定义看是显然的，所以诱导了一个交换群同态$\psi:(R/\mathfrak{a})\otimes M\to M/\mathfrak{a}M$，使得分解$\varphi:R/\mathfrak{a}\times M\xrightarrow{h} (R/\mathfrak{a})\otimes M\xrightarrow{\psi} M/\mathfrak{a}M$成立。

	先检验$\psi$是一个满射，这只要检验$\varphi$是一个满射。任取$\bar{m}\in M/\mathfrak{a}M$，则有$\varphi(\bar{1},m)=\bar{m}$. 最后要检验$\psi$是一个单射，
	如果$\psi(\sum_i \bar{r}_i\otimes m_i)=0$，可以推出$\sum_i \overline{r_im_i}=0$，于是$\sum_i r_im_i \in \mathfrak{a}M$，这意味着$r_i\in \mathfrak{a}$，所以$\sum_i \bar{r}_i\otimes m_i=\sum_i 0\otimes m_i=0$.
\qed

当$R$是一个交换环，$M$是一个$R$-模，此时上面证明的同态实际上都是$R$-模同态，所以也自然是$R$-模同构。这两个同构不仅仅是同构，改变$M$的时候，还是一个自然同构。这里就略去检验了。很多时候，这不是检验不检验的问题，这是一个相信不相信的问题。

\para 上面我们已经看到了，$-\otimes N$构成一个函子，而实际上，它是右正和函子。

\para 从这里开始，以后讨论的张量积都是$R$-模范畴的张量积，所以两个$R$-模的张量积依然是$R$-模，所有出现的同态都是$R$-模同态。并且，我们有函子性同构$-\otimes N\cong N\otimes -$.

\section{标量扩张与局部化}

\para 设$M$是$R$-模，$S$是$R$-代数，那么$M_S=S\otimes_R M$就是一个$S$-模，通过$s(t\otimes a)=(st)\otimes a$，我们称这个$S$-模$M_S$为$M$经过标量扩充而来的。

\lem 有以下同构：

\no{1} $M_S\otimes_S N_S\cong (M\otimes_R N)_S$.

\no{2} 设$N$是一个$S$-模，有同构$\Hom_R(M,N)\cong \Hom_S(M_S,N)$

\proof 第一个同构。实际上，$(s_1\otimes_R a,s_2\otimes_R b)\mapsto s_1s_2\otimes_R(a\otimes_R b)$是一个双线性映射，所以他唯一诱导了$\varphi:M_S\otimes_S N_S\to (M\otimes_R N)_S$. 反过来，映射$(s,a\otimes_R b)\mapsto (s\otimes_R a)\otimes_S (1\otimes_R b)=(1\otimes_R a)\otimes_S (s\otimes_R b)$也是一个双线性映射，所以他唯一诱导了$\psi:(M\otimes_R N)_S\to M_S\otimes_S N_S$.容易验证他们互逆。

第二个同构。设$\phi\in \Hom_R(M,N)$，我们可以通过$\Phi(s\otimes a)=s\phi(a)$定义$\Phi\in \Hom_S(M_S,N)$，反过来，已知$\Phi\in \Hom_S(M_S,N)$，我们可以通过$\phi(a)=\Phi(1\otimes a)$来定义$\phi\in \Hom_R(M,N)$.不难检验，这是一个同构。 \qed

对有限个$\{M_i\}_{i\in I}$，那么反复利用\no{1}我们就得到了同构
\[
	\bigotimes_{i\in I} \left(S\otimes_RM_i\right)\cong S\otimes_R\bigotimes_{i\in I} M_i.
\]

\para 设$S$是一个$R$-代数，我们有下面三个小命题：

\no{1}设$V$是一个$R$-模，$W$是一个$S$-模，$f:V\to W$是$R$-模同态，则他可以唯一扩张为一个$S$-模同态$V_S\to W$.

\no{2}设$V$和$W$都是$R$-模，$f:V\to W$是$R$-模同态，则他可以唯一扩张为一个$S$-模同态$V_S\to W_S$.

\no{3}设$V$和$W$都是$R$-模，$f:V\times\cdots\times V\to W$是$R$-多线性映射，则他可以唯一扩张为一个$S$-多线性映射$V_S\times\cdots\times V_S\to W_S$.

\proof 
	因为$\Hom_R(V,W)\cong \Hom_S(V_S,W)$，所以\no{1}得证。对于\no{2}，我们有$i:W\hookrightarrow W_S$，那么$i\circ f:V\to W_S$就满足\no{1}题设，由\no{1}自然得证。对于\no{3}，因为多线性映射他可以唯一分解出一个$V^k\to W$，然后由\no{2}，可以唯一扩张为$(V^k)_S\to W_S$，因为$(V^k)_S=V_S\otimes_S \cdots\otimes_S V_S$，引理得证。
\qed

注意到，零映射扩张成的映射依然是零映射，这可以用来给出一些等式。比如在实Lie代数$V$中有Jacobi恒等式$B(u,v,w)=0$对任意的$u$, $v$, $w\in V$成立，其中$B$是一个多线性映射，所以经过复化后依然有$B_\cc (u,v,w)=0$对任意的$u$, $v$, $w\in V_\cc$成立。

\para 注意到$M$和$N$如果都是$R$-模，则$\Hom_R(M,N)$也可以看成一个$R$-模，通过定义$(rf)(m)=rf(m)$. 这样我们自然可以问$\Hom_R(M,N)$关于标量扩张的表现。

设$S$是一个$R$-代数，那么存在一个自然的$S$-模同态
\[
	\alpha:S\otimes\Hom_R(M,N)\to \Hom_S(S\otimes M,S\otimes N).
\]
由于$\alpha$是$S$-模同态，所以只要考察$\alpha(1\otimes \varphi)$即可，其中$\varphi\in \Hom_R(M,N)$. 所谓自然，就是说满足交换图
\[
\begin{xy}
	\xymatrix
	{
		S\otimes\Hom_R(M,N)\ar[rr]^{\alpha_S}\ar[d]&&\Hom_S(S\otimes M,S\otimes N)\ar[d]\\
		T\otimes\Hom_R(M,N)\ar[rr]^{\alpha_T}&&\Hom_T(T\otimes M,T\otimes N)
	}
\end{xy}
\]
如果$S$是一个平坦$R$-模且$M$具有有限表示，则$\alpha$还是一个同构。

\para 一个环$R$中的元素一般不是可逆的，那一个自然的问题就出现了，是否存在一个比这个环大一点的环$S$使得$R$中的某些元素（因为0自然不会是可逆的）在环$S$中是可逆的。一个经典的构造是从整数环$\mathbb{Z}$构造出有理数域$\mathbb{Q}$. 下面以整环的语境复述一遍。

设$R$是一个整环，而$R^{*}=R-\{0\}$是$R$中除去$0$得到的集合，考虑集合$R\times R^{*}$，即所有的二元组$(r,s)$的集合，其中$s\neq 0$. 其中$r$被称为分子，而$s$被称为分母。

分数里面很重要的是消去率，比如$8/4$应该等同于$2/1$. 于是上面构造的集合还太大，应该适当构造等价关系来完成上面的等同。实际上，这个等价关系就是：$(r,s)\sim (r',s')$当且仅当$rs'=r's$，即一个二元组消去同一因子或者乘以一个相同的元素都是等价的。此时，包含$(r,s)$的等价类记作$r/s$.

剩下的就是定义运算，
\[
	\frac{r}{s}+\frac{r'}{s'}=\frac{rs'+r's}{ss'},\quad \frac{r}{s}\frac{r'}{s'}=\frac{rr'}{ss'}.
\]
不难检验这个运算的定义这和代表元的选取无关。注意到整环的条件会用到乘法里面，因为如果不是整环，两个分母相乘可能得到零，而零并不能作为分母。这个环记作$F(R)$，乘法单位元是$1/1$，而零元是$0/1$，通过建立$r\in R$与$r/1\in F(R)$的等同，可以将$R$看成$F(R)$的子环。$F(R)$还是一个域，实际上，任取$r/s$，其中$r\neq 0$，则$s/r$是它的逆。称$F(R)$是整环$R$的分式域。

\para 这里我们来看另一种构造。设$R$是一个整环，记$R^*=R-\{0\}$，可以构造一个多项式环$R[R^*]$，对应于$r\in R^*$，$R[R^*]$中的元素我们记作$x_r$. 那么$F(R)$可以定义为
\[
	R[R^*]\big/\bigl\langle\{rx_r-1\,:\, r\in R^*\}\bigr\rangle.
\]
换而言之，$x_r$就是$r$的逆。在$F(R)$中的等号记作$\equiv$. 从构造，$rx_s$应该对应$r/s$.

下面我们来检验分子分母消去律，即计算$rx_{rs}$. 由于$s(rx_{rs})\equiv (sr)x_{rs}\equiv 1$，所以$rx_{rs}\equiv x_s$. 两边乘以$x_r$，就得到了$x_rx_s\equiv x_{rs}$. 这个环的加法就是
\[
	ax_{b}+cx_d\equiv a(dx_d)x_{b}+c(bx_{b})x_d\equiv (ad+bc)x_bx_d \equiv (ad+bc)x_{bd},
\]
乘法就是
\[
	(ax_{b})(cx_d)\equiv acx_bx_d\equiv acx_{bd}.
\]

\para 下面要推广分式域的概念，假设$R$是一个环，不一定是一个整环。考虑$S$是$R$的任意子集，我们可以类比定义一个环$S^{-1}R$或者$R[S^{-1}]$，称之为$R$关于$S$的分式环，
\[
	S^{-1}R=R\bigl[\{x_s\,:\, s\in S\}\bigr]\big/\bigl\langle\{sx_s-1\,:\, s\in S\}\bigr\rangle.
\]
这个环的加法就是
\[
	ax_{b}+cx_d\equiv a(dx_d)x_{b}+c(bx_{b})x_d\equiv (ad+bc)x_bx_d,
\]
乘法就是
\[
	(ax_{b})(cx_d)\equiv acx_bx_d.
\]
并且从
\[
	bd(ax_{b}-cx_d)\equiv ad-bc
\]
可知$ax_{b}\equiv cx_d$当且仅当$ad-bc\equiv 0$. 因此，如果$s$, $t$, $st\in S$，则分子分母消去律$sx_{st}\equiv x_t$顺道也是成立的。利用消去率，我们有$x_{st}\equiv sx_s x_{st}\equiv x_s x_t$.

观察上面构造的分式乘法。由于我们想要$ax_b$对应$a/b$，$cx_d$对应$c/d$，那么是否$(ax_{b})(cx_d)\equiv acx_bx_d$对应$(ac)/(bd)$？如果$bd\in S$，那么这是对的，因为$x_bx_d\equiv x_{bd}$. 但是一般而言这是不对的，所以对$S$我们希望是对乘法封闭的。此外，观察加法也是，只有在$bd\in S$的时候才有对应$a/b+c/d=(ad+bc)/(bd)$. 为了，将$T$看成一个$R$-代数，即建立环同态$r\mapsto r/1$，最好还需要假设$1\in S$.

如果$S$是$R$的一个子集，满足$1\in S$且$S$对乘法封闭，这样一个集合称之为乘性子集。乘性子集有两个特别重要的例子，对应着两个重要的分式环。

首先，设有非零$x\in R$，则$S=\{1$, $x$, $x^2$, $\cdots\}$是一个乘性子集，这时候，$S^{-1}R$记作$R_x$.

其次，设$\mathfrak{p}$是$R$的一个素理想，此时$S=R-\mathfrak{p}$是一个乘性子集，此时$S^{-1}R$记作$R_\mathfrak{p}$. 这类分式环被称为环$R$关于素理想$\mathfrak{p}$的局部化。

\lem 设$a\in R$，则$a\equiv 0$当且仅当存在$s \in S$使得$as=0$.

\proof 
	如果存在$s \in S$使得$as=0$，则$a\equiv asx_s\equiv 0$. 反过来，假设$a\equiv 0$但$as\neq 0$对任意$s\in S$都成立。由于$a\equiv 0$，则$a\in \bigl\langle\{sx_s-1\,:\, s\in S\}\bigr\rangle$. 逐次比较，唯一可能的选择就是关于$x$的一次项的线性组合，即
	\[
	a=\sum_{i=1}^n a_i(s_ix_{s_i}-1),
	\]
	其中求和是有限的。所以$a_is_i=0$对任意的$i$都成立，且$\sum_i a_i=-a$. 将$\sum_i a_i=-a$两边乘以$s_1\cdots s_n$，得到$as_1\cdots s_n=0$，由于$S$对乘法封闭，所以$s_1\cdots s_n\in S$，然后利用$as\neq 0$的假设就得到了矛盾。
\qed

\para 利用上面这个引理，可以给出$S^{-1}R$的另一个定义。它是在$R\times S$中引入等价关系得到的，这个等价关系写作：$(r,s)\sim (r',s')$当且仅当存在一个$t\in S$使得$t(rs'-r's)=0$. 将包含$(r,s)$的等价类记作$r/s$，加法和乘法定义的检验这里就略去了。一般教科书上，会直接使用这个定义而并不给出为什么这样定义等价关系，而这里给出了一个启发。

通过$r\mapsto r/1$，就给出了一个环同态$\varphi:R\to S^{-1}R$. 利用上面的引理，可以看到$R\to S^{-1}R$不一定是单同态，$a/1=0$并不在只在$a=0$的时候才成立，在存在$s\in S$使得$sa=0$的时候也成立。不管怎样，$S^{-1}R$是一个$R$-代数。设$M$是一个$R$-模，则$S^{-1}R\otimes_R M$是一个$S^{-1}R$-模，记作$S^{-1}M$. 这又是一个标量扩张的例子。

$S^{-1}M$也可以通过在$M\times S$上加上等价关系定义：$(m,s)\sim (m',s')$当且仅当存在一个$t\in S$使得$t(s'm-sm')=0$. 将包含$(m,s)$的等价类记作$m/s$，加法和乘法定义的检验这里同样略去了。两种定义的一致性这里也略去证明了。

\para 设$f:M\to N$是一个$R$-模同态，则$\id_{S^{-1}R}\otimes f:S^{-1}M\to S^{-1}N$是一个$S^{-1}R$-模同态，不妨将$\id_{S^{-1}R}\otimes f$也记作$S^{-1}f$. 如果把$S^{-1}f$用元素来表示，就是$S^{-1}f(m/s)=f(m)/s$. 结合这两点，$S^{-1}f$构成了$R$-模范畴到$S^{-1}R$-模范畴的一个函子。

下面我们要说明，这还是一个正合函子。设$M_1\xrightarrow{f} M_2\xrightarrow{g} M_3$是$R$-模的正合列，则$S^{-1}M_1\xrightarrow{S^{-1}f} S^{-1}M_2\xrightarrow{S^{-1}g} S^{-1}M_3$是$S^{-1}R$-模的正合列。

实际上，由于$gf=0$，所以$S^{-1}(gf)=S^{-1}g\circ S^{-1}f=0$，于是$\im S^{-1}f\subset \ker S^{-1}g$. 反过来，任取$m/s\in \ker S^{-1}g$，则$g(m)/s=0$，于是存在一个$t\in S$使得$g(m)t=g(mt)=0$，所以$mt\in \ker g=\im f$，于是存在$n$使得$mt=f(n)$，于是$m/s=mt/(st)=f(n)/(st)=S^{-1}f(n/(st))\in \im S^{-1}f$.

\pro $S^{-1}$或者说$S^{-1}R\otimes -$是正合函子，等价于说$S^{-1}R$是平坦$R$-模。

\pro 设$S$是$R$的一个乘性子集，记同态$R\to S^{-1}R$为$i_S$. 再设$T$是一个环，如果$\varphi:R\to T$是一个环同态，且使得$\varphi(S)=\{\varphi(s)\,:\, s\in S\}$中的元素都是$T$中的可逆元，则存在唯一的环同态$\pi:S^{-1}R\to T$使得分解$\varphi:R\xrightarrow{i_S}S^{-1}R\xrightarrow{\pi} T$成立。

换句话说，如果一个$R$-代数$T$中$S\cdot 1$都是可逆的，则$T$是一个$S^{-1}R$-代数。这被称为分式环的泛性质，这就指出分式环的实质在于将某个乘性子集搞成可逆的。

\proof
	令$\pi(r/s)=\varphi(r)\varphi(s)^{-1}$. 下面检验$\pi$是一个环同态，关键不在乘法上，而在于分式不同代表元的选取。令$r'/s'=r/s$，则存在一个$t\in S$使得$t(r's-rs')=0$，于是
	\[
		\pi(t)(\pi(r')\pi(s)-\pi(r)\pi(s'))=0,
	\]
	由于$\pi(t)$可逆，所以$\pi(r')\pi(s)=\pi(r)\pi(s')$或者$\pi(r)\pi(s)^{-1}=\pi(r')\pi(s')^{-1}$. 所以$\pi$是一个环同态。至于唯一性，由构造，$\pi(r/s)=\varphi(r)\varphi(s)^{-1}$，所以它由$\varphi$唯一决定。最后，$\pi i_S(r)=\pi(r/1)=\varphi(r)$，所以分解成立。
\qed

\para 固定环$R$，以及设$S$是$R$的一个子集。任取环同态$\varphi:R\to T$，如果$S$是可逆元构成的集合，则$\varphi(S)$也是可逆元构成的集合，如果$S$是乘性子集，则$\varphi(S)$也是乘性子集。

已知，$R$-代数构成了一个范畴，它的对象是二元组$(T,\varphi_T)$. 设$S$是$R$的一个乘性子集，如果$\varphi_T(S)$中的元素都是可逆的，这样的代数构成了一个范畴，我们记作$\mathsf{Alg}_{(R,S)}$，它的态射就是普通的$R$-代数的同态，因为同态自然将可逆元变成了可逆元。由于$T$是一个$R$-代数，它本身就是一个$R$-模，给定乘性子集$S\subset R$，通过标量扩张，$S^{-1}T=S^{-1}R\otimes_R T$就得到了一个$S^{-1}R$-代数，实际上$S^{-1}T$作为环同构于$\varphi_T(S)^{-1}T$. 记$i_T=i_S\otimes 1:T\to S^{-1}T$是自然诱导的同态。

任取$(T,\varphi_T)\in \mathsf{Alg}_R$，则分式环将给出一个函子$S^{-1}:T\mapsto S^{-1}T$，对于态射$\Psi:(T,\varphi_T)\to (U,\varphi_U)$，即满足$\varphi_U=\Psi\varphi_T$的环同态$\Psi:T\to U$. 考虑复合同态$i_{U}\Psi:T\to S^{-1}U$，由于$i_{U}\Psi(\varphi_T(s))=i_{U}\varphi_U(s)=s/1\in S^{-1}U$是可逆元，所以由分式环$S^{-1}T=\varphi_T(S)^{-1}T$的泛性质，存在同态
\[
	S^{-1}(\Psi):S^{-1}T\to S^{-1}U.
\]
使得交换图成立
\[
\begin{xy}
	\xymatrix{
		T\ar[rr]^-{i_T} \ar[d]_-{\Psi}&&S^{-1}T \ar@{.>}[d]^-{S^{-1}(\Psi)}\\
		U\ar[rr]^-{i_U} &&S^{-1}U
	}
\end{xy}
\]
因此，$S^{-1}$确实是一个函子。

反过来，从范畴$\mathsf{Alg}_{(R,S)}$到$\mathsf{Alg}_R$有自然的遗忘函子$f$，他忘掉了$S\cdot 1$在相应的$R$-代数中是可逆的。

\theo 存在双函子同构：
\[
	F(-,\star):\mathsf{Alg}_R\bigl(-,f(\star)\bigr)\to \mathsf{Alg}_{(R,S)}\bigl(S^{-1}(-),\star\bigr).
\]
因此$S^{-1}$是遗忘函子的左伴随函子，继而是一个自由函子。这也可以看成$S^{-1}R$的另一种定义，只要将$f$的左伴随函子作用在$R$上就得到了$S^{-1}R$.

\proof
	首先构造同构，任取同态$R$-代数同态$\Psi:X\to f(Y)$，其中$Y$使得$\varphi_Y(S)$在$Y$中是可逆的。由于是$R$-代数同态，所以$\varphi_Y=\Psi\varphi_X$. 任取$s\in S$，有$\varphi_Y(s)=\Psi\varphi_X(s)$可逆，通过分式环的泛性质，有唯一的同态$F(X,Y)(\Psi):\varphi_X(S)^{-1}X=S^{-1}X\to Y$. 于是$F(X,Y)$就是我们构造的同构。由构造，这是一个单射，反过来，任取$\rho:\mathsf{Alg}_{(R,S)}(S^{-1}(X),Y)$，我们有$F(X,Y)(i_X\circ \rho)=\rho$，因此这是一个满射。

	最后要验证函子性同构，分别对$X$和$Y$检验自然变换即可。这点过于琐碎，这里就略去了。
\qed

任取$X\in \mathsf{Alg}_{(R,S)}$，它可以自然地看成一个$S^{-1}R$-代数，这由分式环的泛性质保证，反过来，任意的$S^{-1}R$-代数都可以看成$\mathsf{Alg}_{(R,S)}$里面的元素，所以有理由认为$\mathsf{Alg}_{S^{-1}R}$和$\mathsf{Alg}_{(R,S)}$作为范畴等价。事实上，可以定义一个函子$\mathsf{Alg}_{(R,S)}\to \mathsf{Alg}_{S^{-1}R}$，对对象，将任意的$R$-代数$X$看作$S^{-1}R$-代数$X$，对态射，任取$\varphi\in \mathsf{Alg}_{(R,S)}(X,Y)$，它也可以看作$S^{-1}R$-代数同态（请检查）。在上面的等同下，由泛性质，$\mathsf{Alg}_{(R,S)}(X,Y)=\mathsf{Alg}_{S^{-1}R}(X,Y)$，所以这是一个完全且忠实的函子。同样，任取$S^{-1}R$-代数$X$，他也可以看成$\mathsf{Alg}_{(R,S)}$里面的对象。所以由Proposition \eqref{equivcat}，$\mathsf{Alg}_{S^{-1}R}$和$\mathsf{Alg}_{(R,S)}$是等价范畴。

也正是如此，因此上面的双函子同构可以写成
\[
	F(-,\star):\mathsf{Alg}_R\bigl(-,f(\star)\bigr)\to \mathsf{Alg}_{S^{-1}R}\bigl(S^{-1}(-),\star\bigr).
\]
但是，范畴$\mathsf{Alg}_{(R,S)}$并不需要$S^{-1}R$的构造，所以我们才谈论的是这个范畴，然后才可以通过自由函子给出$S^{-1}R$的一个定义。当然，这里已经可以事后诸葛亮地说，函子$S^{-1}$是与$S^{-1}R$-代数到$R$-代数的遗忘函子左伴随的自由函子。

\para 上面讨论了分式环几个定义。下面讨论分式环的几个重要实例。从一个事实开始，设$S\subset R$是一个乘性子集，而$S'$是$S$中元素的全部因子构成的乘性子集，则$S^{-1}R=S'^{-1}R$.

\para 设$M$是一个$R$-模，$S$是$R$的一个乘性子集，记$\varphi:M\to S^{-1}M$是局部化自然的同态，满足$\varphi(m)=m/1$. 设$N\subset M$是一个子模，则$S^{-1}N$是$S^{-1}M$的一个子模。由于子模的原像是子模，所以如果$L$是$S^{-1}M$的子模，则$\varphi^{-1}(L)$是$M$的子模。如果$N$是$M$的一个子模，则$N\subset \varphi^{-1}(S^{-1}N)$. 特别地，如果$N=\varphi^{-1}(L)$，则$L=S^{-1}N$.

这些关系非常类似Galois联络，只不过这里都不是逆序的而是保持顺序的。

\proof
	除去最后一点都是简单的。令$N$是$M$的一个子模，任取$a\in N$，我们有$a=\varphi^{-1}(a/1)$，所以$N\subset \varphi^{-1}(S^{-1}N)$. 现在设$N=\varphi^{-1}(L)$，于是前面的包含关系给出$\varphi^{-1}(L)\subset \varphi^{-1}(S^{-1}N)$或者$L\subset S^{-1}N$. 反过来，令$a\in N$以及$s\in S$，则$a/s=(a/1)(1/s)=\varphi(a)/s$，因为$\varphi(a)\in L$，而$L$是一个$S^{-1}R$-模，所以$a/s\in L$，这就给出了$S^{-1}N=L$.
\qed

利用这个结论，我们可以发现，$S^{-1}M$的每一个子模$L$，实际上都可以写成$M$中的子模$\varphi^{-1}(L)$的分式模$L=S^{-1}(\varphi^{-1}(L))$. 

\para 反过来，如果$M$的子模$N$满足$\ann(M/N)\cap S=\varnothing$，或者说，任取$s\in S$以及$m\in M-N$，都有$sm\not\in N$，则$N$可以写成$\varphi^{-1}(L)$的形式，其中$L=S^{-1}(\varphi^{-1}(L))=S^{-1}N$. 

$\ann(M/N)\cap S=\varnothing$这个条件可以写成：任取$s\in S$以及$m\in M-N$，都有$sm\not\in N$. 或者写成逆否的形式，设$s\in S$以及$m\in M$，如果$sm\in N$，则$m\in N$. 应用这个条件的理由是，在一般的模里面，$a/1\in S^{-1}N$并不能推出$a\in N$，因为如果存在一个$s\in S$使得$sa\in N$，就可以推出$a/1=sa/s\in S^{-1}N$. 而这又是因为$M-N$一般不是一个模。

\proof
	包含关系$N\subset \varphi^{-1}(S^{-1}N)$已经是清楚的，任取$a\in \varphi^{-1}(S^{-1}N)$或者说$\varphi(a)=a/1\in S^{-1}N$. 于是存在$s\in S$使得$(sa)/s$的分子$sa\in N$，继而根据条件$\ann(M/N)\cap S=\varnothing$可以推知$a\in N$. 
\qed

\pro 结合上面的结论，这里做出断言：$S^{-1}M$的子模一一对应于$M$中满足$\ann(M/N)\cap S=\varnothing$的子模$N$，通过$N\mapsto S^{-1}N$以及$L\mapsto \varphi^{-1}(L)$.

应用到环$R$的理想上面，$S^{-1}R$的理想一一对应着$R$中那些满足$\ann(R/\mathfrak{a})\cap S=\varnothing$的理想$\mathfrak{a}$. 由于$\ann(R/\mathfrak{a})=\mathfrak{a}$，所以$S^{-1}R$的理想一一对应着$R$中与$S$不相交的理想。由于素理想的原像是素理想，所以$S^{-1}R$中的素理想一一对应着$R$中与$S$不相交的素理想。

\pro 如果$M$是一个Noether或者Artin模，$S$是一个$R$的乘性子集，则$S^{-1}M$是一个Noether或者Artin模。

\proof
	只要证明$S^{-1}M$中的非空子模族$\mathcal{F}$有极大/极小元即可。利用一一对应，$\varphi^{-1}(\mathcal{F})$是$M$的非空子模族，所以存在一个极大/极小元$N\in \varphi^{-1}(\mathcal{F})$，继而对应回$S^{-1}M$中就得到了$\mathcal{F}$中的极大/极小元。
\qed

\pro 设$f:M\to N$是一个$R$-模同态，则$f$是单同态（满同态）的充分必要条件是对每一个素理想$\mathfrak{p}$，$f_{\mathfrak{p}}=(R-\mathfrak{p})^{-1}f$是单同态（满同态）.

\proof
	如果$f$是单的，则$\ker(f)$
\qed

\section{有限长模}

\para 设$M$是一个$R$-模，如果$M$没有非平凡子模，则称$M$是一个单模。任取非零元$x\in M$，考虑子模$Rx\subset M$，如果$M$是单模，我们只有两个可能，$Rx=\{0\}$或者$Rx=M$. 但是由于$x=1x\in Rx$非零，所以$Rx=M$. 于是任意的一个单模都是由一个元素生成的。反过来，单元素生成的模是不是单模？答案是不一定的。

设$Rx$是一个$R$-单模，考虑自然的$R$-模同态$f:r\mapsto rx$，于是$f^{-1}(0)=\ann(x)$，由同构基本定理，$Rx\cong R/\ann(x)$. 由于$Rx$是单模，所以$Rx$没有非平凡子模，再由同构，$R/\ann(x)$没有非平凡理想，因此$R/\ann(x)$是一个域，于是$\ann(x)$是极大理想。反过来也对，如果$\ann(x)$是极大理想，则$Rx$是单模。

考虑$R=k$是一个域，设$x\in M$是一个非零元，此时$\ann(x)$作为$k$的理想只可能是$(0)$，否则$x=1x=0$. 域中唯一的极大理想就是$(0)$，于是$kx$一定是一个单模。

\para 设$M$是一个$R$-模，如果它同时是Artin模和Noether模，那他就被称为一个有限长模。对于严格递增链$0=M_0\subset M_1\subset \cdots\subset M_n=M$，$n$被称为这条链的长度。有限长模的任意链都是有限的，因为向上有Noether条件，向下有Artin条件。设有一条严格递增链$M_0\subset M_1\subset \cdots\subset M_n \subset \cdots $，任取$i\in \mathbb{Z}^+$，如果$M_{i}/M_{i-1}$都是单模，则这样一条链被称为$M$的一条合成列。有限长模的合成列一定是有限长的。同时，合成列当然是不一定唯一的。

给定任意一个$R$-模的包含$N\subset M$，考虑任意的中间模$N'$，即满足$N\subset N'\subset M$的$R$-模$N'$，则他在商模$M/N$中的像$N'/N$是$M/N$的一个子模。反过来，$M/N$的子模在商映射下的原像就是一个中间模。因此如果$N\subset M$中间不能再插入任意的一个子模等价于$M/N$中没有非平凡子模，即$M/N$是一个单模。于是合成列的定义就是说这是一个不能再插入一些子模让它变得更长的链，换而言之，极大链。

\pro 有限长模的合成列的长度是一定的，因此可以定义有限长模的长度为其中任意一条合成列的长度。如果一个模不是有限长，则定义它的长度为无穷。此外，如果一条严格递增链不是合成列，则可以再其中插入子模得到合成列。

以长度的视角，单模等价于说模的长度为1.

\proof
	记$l(M)$是$M$所有的合成列中最短那条的长度。设$N$是$M$的一个真子模，我们先证明$l(N)<l(M)$.

	给定一个合成列$0=M_0\subset M_1\subset \cdots\subset M_n=M$，记$N$的子模$N\cap M_i$为$N_i$，进而有$N$的子模链$0=N_0\subset N_1\subset \cdots\subset N_n=N$. 由同构\eqref{modiso1}
	\[
	N_i/N_{i-1}=(N\cap M_i)/(N\cap M_{i-1})\cong (M_{i-1}+N\cap M_i)/M_{i-1},
	\]
	显然，$M_{i-1}+N\cap M_i$是$M_i$的一个子模，由于$M_i/M_{i-1}$是一个单模，于是$M_{i-1}+N\cap M_i=M_{i-1}$或者$M_i$，前者意味着$N\cap M_i\subset M_{i-1}$或者$N_i/N_{i-1}=\{0\}$再或者$N_i=N_{i-1}$，后者意味着$N_i/N_{i-1}\cong M_i/M_{i-1}$是一个单模。在$0=N_0\subset N_1\subset \cdots\subset N_n=N$中去掉那些相等的项，我们就得到了$N$的一条合成列，长度小于等于$l(M)$. 由于$l(N)$是$N$所有的合成列中最短那条的长度，所以$l(N)\leq l(M)$. 然后设$l(N)=l(M)$，这意味着对每一个$i$都成立$M_{i-1}+N_i=M_{i-1}+N\cap M_i=M_i$. 对$i=1$，可以推知$N_1=M_1$，然后对$i=2$有$M_2=M_1+N_2=N_1+N_2=N_2$，经过有限归纳，可以得知$N=N_n=M_n=M$，这和$N$是$M$的一个真子模矛盾。于是$l(N)<l(M)$.

	然后任取一条完全递增链$0=M_0\subset M_1\subset \cdots\subset M_k=M$，我们有
	\[
	l(0)<l(M_1)<\cdots<l(M_k)=l(M),
	\]
	由于$l(0)=0$，所以$l(M)\geq k$. 最后考虑任意一条合成列，我们有$l(M)$大于等于它的长度，又$l(M)$是$M$所有的合成列中最短那条的长度，因此$M$的任意合成列的长度都是$l(M)$.

	最后，考虑$M$的任意的严格递增链，如果他的长度等于$l(M)$，则这是一条合成列。否则，在其中插入子模，直到长度等于$l(M)$，我们就得到了一条合成列。
\qed

\pro 一个$R$-模$M$是有限长模当且仅当它存在一个有限长合成列。

\proof
	$(\Rightarrow)$部分是自然的。反过来，如果$M$不是一个有限长模，则它或者Artin模或者Noether模，于是存在向上不稳定的严格递增链或者向下不稳定的严格递减链，那一个都会使得$M$的合成列长度不有限，于是逆否得证。
\qed

\pro 设有短正合列$0\to U\to V\to W\to 0$，则$V$是有限长的，当且仅当$U$和$W$是有限长的，且$l(V)=l(U)+l(W)$.

\proof
	第一点来自于定义。不妨假设$U$是$V$的一个子模，而$W=V/U$. 实际上，因为同构的模有着相同的子模结构，所以同构的模的长度相同。考虑严格递增链$0\subset U\subset V$，然后由于$V$是有限长的，我们可以将其扩张为一条合成列，写作
	\[
	0\subset U_1\subset \cdots \subset U_k=U\subset V_{k+1}\subset \cdots \subset V_n=V,
	\]
	于是$0\subset U_1\subset \cdots \subset U_k=U$是$U$的一条合成列，以及
	\[
	0\subset V_{k+1}/U\subset \cdots \subset V_n/U=V/U
	\]
	是$V/U$的一条合成列，因为$(V_{i+1}/U)/(V_{i}/U)\cong V_{i+1}/V_i$. 所以等式$n=k+(n-k)$就给出了$l(V)=l(U)+l(V/U)$.
\qed

设$f:M\to N$是有限长模之间的一个满同态，我们有短正合列$0\to \ker(f)\to M\to N\to 0$，于是上面的命题给出了$l(M)=l(\ker f)+l(N)$. 如果$f:M\to N$不是满同态，那么可以构造出$f:M\to \im(f)$，这是一个满同态，于是$l(M)=l(\ker f)+l(\im f)$. 

\para 域上的有限长模是最常用的一个有限长模。设$k$是一个域，定义$k$-矢量空间$V$的维度$\dim_k(V)$为$V$的长度。维度是线性代数理论中一个很重要的不变量，以后我们会看到维度的其他等价定义。

设$M$是域$k$上的有限生成模，它是自由模，不妨直接写作$k^n$，一组自由生成元写作$\{1_1$, $\cdots$, $1_n\}$，那么对小于$n$的正整数$m$，$\{1_1$, $\cdots$, $1_m\}$自由生成了它的一个子模$k^m$. 于是我们有链
\[
	0\subset k^1\subset  k^2 \subset \cdots \subset k^n,
\]
其中$k^m/k^{m-1}\cong k$，这是一个合成列。因此$\dim_k(k^n)=n$. 

由于自由模的自由生成元的个数与生成元的选取无关，所以有限维矢量空间的维度也就是自由生成元的个数。

如果$k$-模$M$不是有限生成的，则$\dim_k(M)=\infty$. 实际上，给定一个$x_1\in M$，他生成的子模$\langle x_1\rangle=kx_1\cong k^1$，然后再从$M-\langle x_1\rangle$选出一个非零元$x_2$，得到$\langle x_1,x_2\rangle\cong k^2$，接着再从$M-\langle x_1,x_2\rangle$选出一个非零元$x_3$，如是进行下去，我们就得到了一个严格递增升链
\[
	0\subset k^1\subset k^2\subset \cdots \subset k^n\subset \cdots,
\]
按构造$k^m/k^{m-1}\cong k$，于是这是一个无限长合成列。

所以，一个$k$-矢量空间是有限生成的当且仅当他是有限维的。

\pro 线性代数基本定理：设$f:V\to W$是两个有限维$k$-矢量空间的同态，由于有限维$k$-矢量空间都是有限长$k$-模，则$l(M)=l(\ker f)+l(\im f)$给出维度的等式：
\[
	\dim_k(V)=\dim_k(\ker f)+\dim_k(\im f).
\]

\pro 如果$k$-矢量空间$V$是Artin或者Noether模，则$V$是有限维的。即在矢量空间上，Artin性等价于Noether性等价于有限维。

\proof
	假设$V$不是有限维的，则我们可以构造出一条合成列，
	\[
	0\subset \langle x_1\rangle\subset \langle x_1,x_2\rangle\subset \cdots \subset \langle x_1,\,\cdots\!,x_n\rangle\subset \cdots,
	\]
	因此这自然不是Noether模。然后考察
	\[
		\bigoplus_{i=1}^\infty kx_i \supset \bigoplus_{i=2}^\infty kx_i \supset \bigoplus_{i=3}^\infty kx_i\supset \cdots,
	\]
	因此这也不是Artin模。逆否即得证。
\qed


\theo 设$M$是一个有限长$R$-模，长度为$n$. 对于$M$的任意合成列$0=M_0\subset M_1\subset \cdots\subset M_n=M$，$M_i/M_{i-1}\cong R/\mathfrak{m}_i$都是域，$\mathfrak{m}_i$都是极大理想，但集合$I=\{\mathfrak{m}_i\,:\,1\leq i\leq n\}$与选取的合成列无关，并且有同构
\[
	M\cong \bigoplus_{\mathfrak{m}\in I} M_\mathfrak{m}.
\]

\proof
	我们局部化处理，因为如果在每一个极大理想局部同构，则整体也同构。任取$R$的一个极大理想$\mathfrak{n}$. 先考虑长度为1的情况，此时$M$是一个单模，于是$M\cong R/\mathfrak{m}$，其中$\mathfrak{m}$是一个极大理想，不妨就直接写成$M=R/\mathfrak{m}$. 如果$\mathfrak{n}=\mathfrak{m}$，此时$\mathfrak{n}$外的元素在$R/\mathfrak{m}=R/\mathfrak{n}$中都是可逆元，于是$M_{\mathfrak{n}}=(R/\mathfrak{m})_{\mathfrak{n}}=R/\mathfrak{m}=M$. 

	如果$\mathfrak{n}\neq \mathfrak{m}$，因此$\mathfrak{m}$是极大理想，所以$\mathfrak{m}\not\subset \mathfrak{n}$以及$\mathfrak{n}\not\subset \mathfrak{m}$，因此$\mathfrak{m}_\mathfrak{n}=R_\mathfrak{n}$. 于是$M_\mathfrak{n}=(R/\mathfrak{m})_\mathfrak{n}=R_\mathfrak{n}/\mathfrak{m}_\mathfrak{n}=0$. 由$(M_\mathfrak{m})_\mathfrak{n}=R_\mathfrak{n}\otimes R_\mathfrak{m} \otimes M$，其中张量积都是$R$-模的张量积. 于是有同构$(M_\mathfrak{m})_\mathfrak{n}\cong R_\mathfrak{n}\otimes M\otimes R_\mathfrak{m}$，任取一个$a\in \mathfrak{m}$但$a\not\in \mathfrak{n}$，于是任取$(r/p)\otimes m \in R_\mathfrak{n}\otimes M$有
	\[
		\frac{r}{p}\otimes a=\frac{ra}{pa}\otimes m =\frac{r}{pa}\otimes (am),
	\]
	因为$a\in \mathfrak{m}$，但$m\in M=R/\mathfrak{m}$，所以$am=0$. 所以$R_\mathfrak{n}\otimes M=0$也就推出了$(M_\mathfrak{m})_\mathfrak{n}=0=M_\mathfrak{n}$. 由于已经遍历了极大理想，都有$(M_\mathfrak{m})_\mathfrak{n}=M_\mathfrak{n}$，于是$M_\mathfrak{m}=M$.

	现在考虑一般的情况，设$0=M_0\subset M_1\subset \cdots\subset M_n=M$是一个合成列。对任意一个极大理想$\mathfrak{m}$进行局部化，我们有
	\[
	0=(M_0)_\mathfrak{m}\subset (M_1)_\mathfrak{m}\subset \cdots\subset (M_n)_\mathfrak{m}=M_\mathfrak{m}.
	\]
	由于$M_i/M_{i-1}$是单模，长度为1，所以当$\mathfrak{m}=\ann(M_i/M_{i-1})$时，$(M_i/M_{i-1})_\mathfrak{m}\cong M_i/M_{i-1}\cong R/\mathfrak{m}$，否则$(M_i/M_{i-1})_{\mathfrak{m}}=(M_i)_{\mathfrak{m}}/(M_{i-1})_{\mathfrak{m}}=0$给出了$(M_i)_{\mathfrak{m}}=(M_{i-1})_{\mathfrak{m}}$. 如果$\mathfrak{m}$在$I$中不出现，则上面的推理给出$M_\mathfrak{m}=(M_n)_\mathfrak{m}=(M_0)_\mathfrak{m}=0$. 反过来，只有当$\mathfrak{m}$在$I$中出现，在链中将重复项删去就得到了$M_\mathfrak{m}$的一个合成列
	\[
	0=(M_0)_\mathfrak{m}\subset (M_{i_1})_\mathfrak{m}\subset \cdots\subset (M_{i_k})_\mathfrak{m}=M_\mathfrak{m}.
	\]
	任取单模$(M_{i_k})_\mathfrak{m}/(M_{i_{k-1}})_\mathfrak{m}$都有
	\[
	(M_{i_k})_\mathfrak{m}/(M_{i_{k-1}})_\mathfrak{m}=(M_{i_k}/M_{i_{k-1}})_\mathfrak{m}=M_{i_k}/M_{i_{k-1}}\cong R/\mathfrak{m}.
	\]

	取不同于$\mathfrak{m}$的另一个极大理想$\mathfrak{n}$，然后再局部化，可以得到另一条链
	\[
	0=((M_0)_\mathfrak{m})_\mathfrak{n}\subset ((M_{i_1})_\mathfrak{m})_\mathfrak{n}\subset \cdots\subset ((M_{i_k})_\mathfrak{m})_\mathfrak{n}=(M_\mathfrak{m})_\mathfrak{n},
	\]
	由于$((M_{i_k})_\mathfrak{m})_\mathfrak{n}/((M_{i_{k-1}})_\mathfrak{m})_\mathfrak{n}=((M_{i_k})_\mathfrak{m}/(M_{i_{k-1}})_\mathfrak{m})_{\mathfrak{n}}\cong R/\mathfrak{m}=((M_{i_k}/M_{i_{k-1}})_\mathfrak{m})_\mathfrak{n}=((R/\mathfrak{m})_{\mathfrak{m}})_\mathfrak{n}=0$，所以推出了$(M_\mathfrak{m})_\mathfrak{n}=0$. 正如长度为1的情况一般。

	现在来看命题，有限长模$M$的一个极大理想$\mathfrak{m}$是否属于$I$，只取决于$M_\mathfrak{m}$是否为零，而与合成列的选取无关。现在只剩下那个同构了，设$i_\mathfrak{m}:M\to M_{\mathfrak{m}}$是局部化诱导的同态，进而定义$\alpha=\sum_{\mathfrak{m}\in I}i_{\mathfrak{m}}:M\to \bigoplus_{\mathfrak{m}\in I} M_{\mathfrak{m}}$. 这检验这是一个同构，只要对每一个极大理想$\mathfrak{n}$进行局部化即可，而这由已知的，对不同的两个极大理想$\mathfrak{m}$和$\mathfrak{n}$有$(M_\mathfrak{m})_\mathfrak{n}=0$，以及如果$\mathfrak{m}\not\in I$则$M_\mathfrak{m}=0$这两点是清楚的。
\qed

\pro 设$M$是一个有限长模，而$\mathfrak{m}$是一个极大理想，则$M=M_{\mathfrak{m}}$当且仅当存在一个正整数$n$使得$\mathfrak{m}^nM=0$.

\proof
	任取另一个极大理想$\mathfrak{n}$，那么$\mathfrak{m}$存在一个不属于$\mathfrak{n}$中的元素$a$，这个元素在$M_\mathfrak{n}$中是可逆的，但是$a^n\in \mathfrak{m}^n$给出$a^nM_\mathfrak{n}=0$，由可逆性就得到了$M_\mathfrak{n}=0$. 所以只有可能$M_\mathfrak{m}\neq 0$，由上面的命题，$M\cong M_\mathfrak{m}$.

	反过来，由于$M\cong M_\mathfrak{m}$，所以对于任意的合成列$0=M_0\subset M_1\subset \cdots\subset M_n=M$都有$M_i/M_{i-1}\cong R/\mathfrak{m}$或者$\ann(M_i/M_{i-1})=\mathfrak{m}$再或者$\mathfrak{m}M_{i}\subset M_{i-1}$，于是
	\[
	\mathfrak{m}^nM=\mathfrak{m}^nM_{n}\subset \mathfrak{m}^{n-1}M_{n-1}\subset \cdots \subset \mathfrak{m}M_1\subset M_0=0,
	\]
	因此$\mathfrak{m}^nM=0$.
\qed

\para 由于$R$本身就是一个$R$-模，如果$R$是有限长$R$-模，已经知道，在$R$的任何合成列中出现的极大理想不依赖于合成列的选取，个数不大于$R$的长度。记这些极大理想的集合为$I$，作为$R$-模成立同构$R\cong\bigoplus_{\mathfrak{m}\in I}R_\mathfrak{m}$.

\lem 回忆\eqref{oka}里面的定义，这里再指出一个理想族是Oka理想族，这个理想族由$R$中所有使得$R/\mathfrak{a}$是有限长$R$-模的理想$\mathfrak{a}$组成。

\proof 
	给定$\mathfrak{a}$和$a\in R$，如果$R/(\mathfrak{a}+(a))$和$R/(\mathfrak{a}:a)$都是有限长$R$-模，要证明$R/\mathfrak{a}$是有限长$R$-模。可以假设$a\not\in \mathfrak{a}$，否则$R/(\mathfrak{a}+(a))=R/\mathfrak{a}$. 首先注意到短正合列
	\[
		0\to R/(\mathfrak{a}:a)\xrightarrow{\times a} R/\mathfrak{a} \to R/(\mathfrak{a}+(a))\to 0,
	\]
	其中第二个箭头是乘以$a$，是单射，因为如果$(r+(\mathfrak{a}:a))a=ar+\mathfrak{a}\in R/\mathfrak{a}$为零，则$r\in (\mathfrak{a}:a)$，第三个箭头是商环的泛性质诱导的，显然是满射。

	检验正和性最好回到$R$中，由于商同态$R\to R/(\mathfrak{a}:a)$是一个满射，所以$R/(\mathfrak{a}:a)\xrightarrow{\times a} R/\mathfrak{a}$的像就是$R\xrightarrow{\times a} R/\mathfrak{a}$的像，也就是$(a)$在$R/\mathfrak{a}$的像。另一方面，考虑$R/\mathfrak{a} \to R/(\mathfrak{a}+(a))$的核，任取$r+\mathfrak{a}\in R/\mathfrak{a}$，如果他在$R/(\mathfrak{a}+(a))$中为零，则$r\in (a)$，因此$R/\mathfrak{a} \to R/(\mathfrak{a}+(a))$的核也是$(a)$在$R/\mathfrak{a}$的像，正和性得证。

	由于短正合列正中一个模是Noether/Artin模当且仅当两边的模是Noether/Artin模，所以从正合列两边都是有限长模，就得到了$R/\mathfrak{a}$是有限长模。因此$R$中所有使得$R/\mathfrak{a}$是有限长$R$-模的理想$\mathfrak{a}$构成的理想族是Oka理想族。
\qed

\pro 一个Noether环$R$，如果所有的素理想都是极大理想，则他是一个有限长$R$-模。

\proof
	由于是Noether环，非空理想族满足极大性条件，考虑$R$中所有使得$R/\mathfrak{a}$是有限长$R$-模的理想$\mathfrak{a}$构成的Oka理想族$\mathcal{F}$. 假设$R$不是有限长模，则$(0)$就在其中，因此$\mathcal{F}^c$非空，由极大性条件，$\mathcal{F}^c$中存在极大元$\mathfrak{p}$，并且由$\mathcal{F}$是一个Oka理想族，$\mathfrak{p}$是一个素理想，进而由条件是一个极大理想。由于$R/\mathfrak{p}$是一个单模，长度为1. 但是$\mathfrak{p}\not\in \mathcal{F}$，所以$R/\mathfrak{p}$不是有限长模，矛盾。
\qed

\pro 一个环$R$如果是Artin环，则$R$的每一个素理想都是极大理想且$R$极大理想数目有限。

\proof
	令$\mathfrak{p}$是$R$的一个素理想，则$R/\mathfrak{p}$是一个Artin整环。取非零$x\in R/\mathfrak{p}$，有降链$(x)\supset (x^2)\cdots$，由于是Artin整环，所以存在正整数$n$使得$(x^n)=(x^{n+1})$，因此$x^n=x^{n+1}y$，由整环的消去律得到$xy=1$. 所以$R/\mathfrak{p}$是一个域。

	剩下我们考虑所有有限个极大理想的交构成的理想族，由极小条件，这个理想族有极小元$\mathfrak{m}_1\cap \cdots \cap \mathfrak{m}_n$. 任取极大理想$\mathfrak{m}$，由于$\mathfrak{m}\cap\mathfrak{m}_1\cap \cdots \cap \mathfrak{m}_n\subset \mathfrak{m}_1\cap \cdots \cap \mathfrak{m}_n$，因此极小性给出$\mathfrak{m}\cap\mathfrak{m}_1\cap \cdots \cap \mathfrak{m}_n=\mathfrak{m}_1\cap \cdots \cap \mathfrak{m}_n$，故$\mathfrak{m}_1\cap \cdots \cap \mathfrak{m}_n\subset \mathfrak{m}$. 由Proposition \eqref{primeau}，存在$i$使得$\mathfrak{m}_i\subset \mathfrak{m}$，由于是极大理想，所以$\mathfrak{m}=\mathfrak{m}_i$.
\qed

\pro 一个环$R$是Artin环，当且仅当，$R$是一个Noether环且所有素理想都是极大理想。

\proof
	一个环$R$是Noether环且所有素理想都是极大理想，我们已经看到这是一个有限长$R$-模，进而是一个Artin环。反过来，我们也已经看到，Artin环的所有素理想都是极大理想。

	Artin性就是极小性条件。考虑$R$所有极大理想的任意有限乘积构成的理想族，它存在极小元$\mathfrak{a}$. 由于$\mathfrak{a}^2\subset \mathfrak{a}$也是有限个极大理想的乘积，由极小性$\mathfrak{a}^2=\mathfrak{a}$. 类似地，任取极大理想$\mathfrak{m}$，有$\mathfrak{m}\mathfrak{a}=\mathfrak{a}$. 这就是说，$\mathfrak{a}$中的元素在任意的极大理想$\mathfrak{m}$中。我们下面证明$\mathfrak{a}$只能为零。

	如果$\mathfrak{a}$非零，在所有使得$\mathfrak{b}\mathfrak{a}\neq 0$的理想$\mathfrak{b}$中选择极小的那个，我们有$(\mathfrak{b}\mathfrak{a})\mathfrak{a}=\mathfrak{b}\mathfrak{a}^2=\mathfrak{b}\mathfrak{a}\neq 0$，于是$\mathfrak{b}\mathfrak{a}\subset \mathfrak{b}$，由极小性，$\mathfrak{b}\mathfrak{a}=\mathfrak{b}$. 必然存在一个$b\in\mathfrak{b}$使得$b\mathfrak{a}\neq 0$，于是由极小性$\mathfrak{b}=(b)$，因此$\mathfrak{b}\mathfrak{a}=\mathfrak{b}$，所以存在一个$a\in \mathfrak{a}$使得$ab=b$，或者$(a-1)b=0$. 由于$a$在任意的极大理想中，所以$a-1$是可逆的，故$b=0$. 矛盾。

	现在已经知道，$0$可以写成有限个极大理想的乘积，不妨写作$0=\mathfrak{m}_1\cdots \mathfrak{m}_n$. 考虑链
	\[
	0=\mathfrak{m}_1\cdots \mathfrak{m}_n\subset \mathfrak{m}_1\cdots \mathfrak{m}_{n-1}\subset \cdots\subset \mathfrak{m}_1\subset R,
	\]
	有$(\mathfrak{m}_1\cdots \mathfrak{m}_{k-1})/(\mathfrak{m}_1\cdots \mathfrak{m}_{k})$是一个$R/\mathfrak{m}_{k}$-矢量空间。由于$(\mathfrak{m}_1\cdots \mathfrak{m}_{k-1})/(\mathfrak{m}_1\cdots \mathfrak{m}_{k})$作为一个Artin模子模的商模也是一个Artin模。看作$R/\mathfrak{m}_{k}$-矢量空间时，Artin性与Noether性等价，所以这是一个Noether模。

	考虑正合列
	\[
	0\to \mathfrak{m}_1\cdots \mathfrak{m}_{k}\hookrightarrow\mathfrak{m}_1\cdots \mathfrak{m}_{k-1}\to (\mathfrak{m}_1\cdots \mathfrak{m}_{k-1})/(\mathfrak{m}_1\cdots \mathfrak{m}_{k})\to 0,
	\]
	正中间的Noether性来自于两边的Noether性，所以有限次归纳后，可以得到$R$是一个Noether模。
\qed

\para 结合上面两个命题，一个环$R$是Artin环等价于他是一个有限长$R$-模，也当且仅当他是Noether环且所有的素理想都是极大理想。因此，与模的情况不一样，到了环这里，Artin性就是一个远比Noether性强的一个性质。附带的，还断言了，Artin环的素理想（极大理想）有限。

由于Artin环是一个有限长模，所以可以把有限长模的结构定理用到Artin环上，这里就不表了。
