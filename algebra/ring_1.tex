%!TEX root = main.tex
\chapter{环（一）}
\ThisULCornerWallPaper{1}{../Pictures/12.png}

\section{环范畴}

环范畴记作$\mathsf{Ring}$，交换环范畴记作$\mathsf{CRing}$. 

\begin{para}[始对象与终对象]
始对象是$\zz$，映射即$n\mapsto 1+\cdots+1$，其中$1$相加$n$次。终对象是$0$，在这个环里面$1=0$. 映射即$0$映射。由于零环和$\zz$都在$\mathsf{CRing}$中，所以它们也分别是$\mathsf{CRing}$的始对象和终对象。
\end{para}

从这里，我们就可以得知$\mathsf{Ring}$或者$\mathsf{CRing}$不是Abel范畴。因为在Abel范畴（乃至准加性范畴中），始对象与终对象是等价的。

\begin{para}[积]
设$\{R_i\}_{i\in I}$是一族环，则在$\zz$-模意义上，我们有积$R=\prod_{i\in I}R_i$. 现在，在$R$上如下定义乘法
\[
	(r_i)_{i\in I}(r'_i)_{i\in I}=(r_ir'_i)_{i\in I},
\]
这$R$构成一个环。不难检验，这就是$\mathsf{Ring}$的积。如果$\{R_i\}_{i\in I}$是一族交换环，则从构造，$R=\prod_{i\in I}R_i$也交换，所以这也是$\mathsf{CRing}$的积。
\end{para}

如果积的个数比较少，比如$R_1$和$R_2$的积，时常记作$R_1\times R_2$. 与模的积是类似的，$R_1\times R_2$和$R_2\times R_1$是典范同构的。

\begin{para}[余积]
我们首先考虑两个环的情况。记$A_n$是所有$\{1,\dots,n\}$到$\{R,S\}$的函数的集合。设$R$和$S$是两个环，它们都是自然的双边$\zz$-模，所以，我们考虑如下交换群
\[
	T_0=\zz,\quad T_n=\bigoplus_{f\in A_n}f(1)\otimes \cdots \otimes f(n),
\]
其中$n\geq 1$，特别地，如果$n=1$，则$T_1=R\oplus S$. 再记$T=\bigoplus_{n\geq 0} T_n$，以张量积为乘法，$T$可能并没有一个乘法恒元。再考虑
\[
	r\otimes r'-rr',\quad s\otimes s'-ss',\quad 1_R-1_S
\]
生成的双边理想$I$，其中$r$, $r'\in R$而$s$, $s'\in S$. 于是，余积$R*S$可以定义为$T/I$. 此时，$R*S$的单位元就是$1=\overline{1_R}=\overline{1_S}$. 而泛性质的检验是直接的。形象地来说，$R*S$中的乘法就是$R$和$S$中元素的形式积。
\end{para}


\begin{para}[核与余核]
在$\mathsf{Ring}$内，设$f:R\to S$，不难检验$\ker f=f^{-1}(0)$以及典范含入$i:\ker(f)\to R$是环范畴的核。实际上，只需检查$f^{-1}(0)$是个环即可，加法没什么好说的，对于环乘法，我们如果有$r_1$, $r_2\in \ker f$，则$f(r_1r_2)=f(r_1)f(r_2)=0$告诉我们$r_1r_2\in \ker f$，因而同时典范含入也是一个环同态。泛性质的检查就略去了。

同样，不难检验$\coker(f)=S/\langle f(R)\rangle$以及典范商同态就是余核，其中$\langle f(R)\rangle$是$f(R)$生成的理想。
\end{para}

于是，在$\mathsf{Ring}$和$\mathsf{CRing}$中，任意的等值子与余等值子都存在。它们可以直接定义为
\[
	\eq(f,g)=\ker(f-g),\quad \coeq(f,g)=\coker(f-g).
\]

\begin{thm}
$\mathsf{Ring}$和$\mathsf{CRing}$是完备与余完备的，即任意的极限与余极限存在。
\end{thm}

这直接来自于Theorem \ref{wanbei}, \ref{yuwanbei}.

\section{唯一分解整环}

现在开始，回到我们的假设：下面出现的环都是交换环。

\begin{para}
首先回忆，在整数环中，任取一个整数$N$，我们都可以唯一分解为一族素数的乘积
\[
	N=\pm p_1^{n_1}\cdots p_k^{n_k}.
\]
在这节中，我们希望可以拓展这个良好的性质。

首先，因子的定义依然是直接的，如果$b\in (a)$，则称$a$是$b$的一个因子，因为此时$b=ac$. 其次，我们需要推广素数的概念。在整数环中，（正）素数$p$有两个等价的定义，一是他只有$1$和$p$两个正因子。二是，如果$bc$可以被$p\neq 1$整除，则$b$或者$c$中至少有一个可以被$p$整除。

但是在任意的环中，这两个定义并不等价。对于前者，我们定义：称不可逆元$a\neq 0$是一个不可约元，如果$a$不能写成两个不可逆元的乘积。所以，如果不可约元$a$可以写成$a=bc$，则$b$或者$c$中有且只有一个不可逆元。如果用理想描述：主理想$(a)$是由不可约$a$生成的，当且仅当对非零的$b\in (a)$都有$(b)=(a)$.

对于后者，我们已经知道，这可以推广到素理想。尤其是如果主理想$(a)$是素理想，则称$a$是一个素元。
\end{para}

下面我们将在整环中将不可约元与素元联系起来。

\begin{lem}
在整环$R$中，如果$a$是一个素元，则$a$是不可约元。
\end{lem}

\begin{proof}
给定素理想$(a)$. 对于$a$，如果我们有$bc=a\in (a)$，因此$b$或者$c$至少有一个在$(a)$中，现在假设$b$, $c\in (a)$，则我们有$bc=dea^2=a$，即$dea=1$给出了$a$可逆，与$(a)$是一个素理想矛盾。现在假设$b\in (a)$但$c\not\in (a)$，记$b=da$，则$cda=a$给出$cd=1$，即$c$可逆，因此$a$是一个不可约元。
\end{proof}

\begin{para}[唯一分解整环]
现在我们定义唯一分解整环(unique factorization domain)，当然，一般会简写成UFD. 一个整环$R$被称为唯一分解整环，如果任取$x\in R$，则他可以写成
\[
	x=up_1p_2\cdots p_n,
\]
其中$u$可逆，且$p_i$都是不可约元（可以相同），其中$n$可以为零。如果$x$还有另一个表示
\[
	x=vq_1q_2\cdots q_m,
\]
则$m=n$，且适当重排$\{q_i\}$的指标之后（更形式地说就是置换一下），我们有$q_i=w_ip_i$，其中$w_i$可逆。
\end{para}

\begin{para}[最大公因子]
	设$R$是一个UFD，对任意两个元素$x$, $y$，它们的分解写作
	\[
		x=x_1\cdots x_rx_{r+1}\cdots x_m,\quad
		y=y_1\cdots y_ry_{r+1}\cdots x_n,
	\]
	如果$\langle x_i\rangle=\langle y_i\rangle$对$1\leq i\leq r$都成立，且$\langle x_i\rangle\neq \langle y_j\rangle$对$i,j>r$都成立，则$x$, $y$的最大公因子定义为$\operatorname{GCD}(x,y)=x_1\cdots x_r$.
	此外，如果$r=0$，我们定义最大公因子$\operatorname{GCD}(x,y)=1$.

	对一族元素$r_1$, $\dots$, $r_k$，我们可以递归定义
	\[
		\operatorname{GCD}(r_1,\dots,r_k)=
		\operatorname{GCD}(r_1,\operatorname{GCD}(r_2,\dots,r_k))=\cdots,
	\]
	不难验证，$\operatorname{GCD}$对变量$\{r_1,\dots,r_k\}$是交换的。
\end{para}

从上可见，最大公因子并不唯一，可以差一个可逆元。之所以叫最大公因子，是因为，如果有$x$, $y$的公因子$d$，则$d$也是$\operatorname{GCD}(x,y)$的因子。在一般的环中，这被用作最大公因子的定义。

\begin{pro}
一个整环$R$是唯一分解整环，当且仅当，他的不可约元是素元且$R$中的任意主理想升链稳定。
\end{pro}

\begin{proof}
首先，假设$R$是一个UFD，而$p$是不可逆元。考虑$ab\in (p)$，则$ab=pq$，由于$R$是UFD，由分解的唯一性，则$ab$的分解中具有不可约元$p$，将$a$和$b$分解，则$p$必然来自于$a$和$b$的分解中，故$a\in (p)$或者$b\in (p)$. 所以，$p$是一个素元。

现在考虑主理想升链
\[
	(a_1)\subset (a_2)\subset \cdots,
\]
由于$a_n\in (a_{n+1})$，即$a_n=b_na_{n+1}$，所以$a_{n+1}$分解中的不可约元的个数不多于$a_n$分解中的不可约元。由于$a_1$分解中的不可约元个数有限，所以升链稳定。

反过来，假设在整环$R$中，不可约元是素元且$R$中的任意主理想升链稳定。首先，利用任意主理想升链稳定，对$a\in R$，我们都可以保证一个不可约元分解的存在。

实际上，如果$a_1\in R$是不能分解的，所以$a_1$不是不可约的，因此存在分解$a_1=b_1a_2$，其中$b_1$和$a_2$都不可逆。显然$b_1$和$a_2$两个中至少有一个不能分解，否则$a_1=b_1a_2$就可分解了，不妨设$a_2$是那个不能分解的，对$a_2$也做同样的操作，如此往复。我们就得到了一个主理想的严格升链
\[
	(a_1)\subset (a_2)\subset \cdots,
\]
矛盾。所以任取$a\in R$，我们都可以保证一个分解的存在。

而唯一性来自于不可约元是素元这个假设。首先，对$x\in R$，假设我们有分解
\[
	x=up_1p_2\cdots p_n=vq_1q_2\cdots q_m,
\]
其中$u$, $v$可逆，而$\{p_i\}$, $\{q_i\}$都是不可约元。

由于$q_1q_2\cdots q_m\in (p_1)$，而$p_1$由假设是素的，所以必然存在$q_i$使得$q_i \in (p_1)$，方便起见，适当重排$\{q_i\}$的指标之后，可以假设$q_1\in (p_1)$. 所以$q_1=w_1p_1$，由于$q_1$, $p_1$都不可约，所以$w_1$可逆。现在由整环的假设，可以在$up_1p_2\cdots p_n=vq_1q_2\cdots q_m$两边消去$p_1$，将可逆元$w_1$吸入$v$中，记$v_1=w_1v$，得到
\[
	u p_2\cdots p_n= v_1q_2\cdots q_m.
\]
重复前面的过程（这个过程需要不断重排$\{q_i\}$的指标），设$m<n$，对$i\leq m$，我们可以得到$q_i=w_ip_i$，其中$w_i$可逆，且
\[
	u p_{m+1}\cdots p_n= v_m.
\]
因此$p_{m+1}\cdots p_n=u^{-1}v_m$可逆，但它们是一族素元的乘积，矛盾。同理，$m>n$也可以得到矛盾，所以$m=n$.
\end{proof}

一个整环如果所有的理想都是主理想，则他被称为一个主理想整环(principal ideal domain)，通常我们会简单记作PID. PID的出现为我们提供了大量的UFD，因为上一个命题可以告诉我们，PID是UFD.

\begin{pro}
主理想整环是唯一分解整环。
\end{pro}

\begin{proof}
假设$R$是一个主理想整环。我们首先考虑任意的主理想升链
\[
	(a_1)\subset (a_2)\subset \cdots,
\]
由于$\bigcup_i (a_i)$是一个理想，所以存在一个$b\in R$使得$\bigcup_i (a_i)=(b)$，也因此$b\in \bigcup_i (a_i)$. 由构造，存在一个正整数$k$使得对所有正整数$n\geq k$，我们都有$b\in (a_n)$，所以$(a_n)=(b)$. 故主理想升链稳定。

最后，考虑一个不可约元$r$，由于$(r)$是一个真理想，所以存在\footnote{由于主理想整环任意的理想升链都稳定，所以实际上对非空理想族，它是满足极大条件的。因此，无需使用Zorn引理，我们依然可以保证极大理想的存在性。}一个极大理想$(p)$包含$(r)$，即$r=pq$. 由于$r$不可约，$q$可逆。所以，$(r)=(q)$是一个素理想。 

结合上述两点以及上一个命题，我们就得到了结论。
\end{proof}

域是最简单的PID. 稍复杂一些，整数环$\zz$也是一个PID. 实际上，对$\zz$的非零理想$\mathfrak{a}$，取$\mathfrak{a}$中最小的正整数$a$，（利用Euclidean division）可以证明$\mathfrak{a}=(a)$. 再稍微复杂一些的例子如下。

\begin{pro}
如果$R$是一个整环，则$R[x]$是主理想整环当且仅当$R$是一个域。
\end{pro}

\begin{proof}
	首先假设$R=k$是一个域。设$\mathfrak{a}$是$k[x]$的一个理想，由于单位理想和零理想都是主理想，所以假设$\mathfrak{a}$不是单位理想也不是零理想，这样$k$中的非零元素都不在$\mathfrak{a}$中。取一个$\mathfrak{a}$中幂次最小的非零多项式$f$，由构造，$f$存在且不可能是一个常数。显然，我们有包含关系$(f)\subset \mathfrak{a}$.

	对于反向包含。任取$g\in \mathfrak{a}$，由多项式除法算法$g=pf+r$，其中$\deg(r)<\deg(f)$. 由于$r=g-pf\in \mathfrak{a}$，而$f$是$\mathfrak{a}$中幂次最小的非零多项式，所以$r=0$. 于是$g=pf\in (f)$给出了的反向包含关系$\mathfrak{a}\subset (f)$. 

	反过来，假设$R[x]$是主理想整环。我们下面证明$(x)$是极大理想，因此$R=R[x]/(x)$是一个域。

	如果$(x)$不是极大理想，则存在$f\in R[x]$使得$(f,x)$是包含$(x)$的一个真理想。令$f=f_0+f_+$，其中$f_+$是没有零次项的一个多项式而$f_0\in R$，由$f_+\in(x)$，$(f,x)=(f_0,x)$. 所以我们假设$f=r\in R$. 由于$R[x]$是主理想整环，所以$(r,x)=(g)$，其中$g\in R[x]$. 所以$r=pg$，由于$R$是整环，
	\[
		0=\deg(r)=\deg(pg)=\deg(p)+\deg(g). 
	\]
	只有当$\deg(p)=\deg(g)=0$的时候上式才有可能，即$g\in R$. 同时，因为$(r,x)=(g)$是真理想，所以$g$都是$R$中的不可逆元。此外，由于$x\in (g)$，所以存在一个$q\in R[x]$使得$x=gq$. 比较两边的次数，可以发现$\deg(q)=1$，即$q=sx$. 所以$x=gsx$给出$gs=1$，但这与$g$不可逆矛盾。
\end{proof}

我们后面会证明，$\zz[x]$是UFD，由上面的命题$\zz[x]$显然不是PID. 这就找到了一个是UFD但不是PID的例子。

\begin{thm}\label{ufd}
如果$R$是UFD，则$R[x]$也是UFD.
\end{thm}

为证明这个定理，我们需要Gauss引理。首先，对$R[x_1,\dots,x_n]$中的多项式$f=\sum_{i}a_ix^{r_1}_{i_1}\cdots x_{i_k}^{r_k}$，我们定义
\[
	\operatorname{Content}(f)=\langle a_1,\dots,a_n\rangle.
\]

\begin{lem}
	设$R$是一个环，对$R$上的多项式$f$, $g$，有
	\[
		\operatorname{Content}(fg)\subset
		\operatorname{Content}(f)\operatorname{Content}(g)
		\subset \sqrt{\operatorname{Content}(fg)}.
	\]
\end{lem}

\begin{proof}
	记$f=\sum_I a_I x^I$, $g=\sum_J b_J x^J$，则
	\[
		fg=\sum_{I,J}a_Ib_J x^Ix^J
		=\sum_{K}\left(\sum_{I+J=K}a_Ib_J\right)x^K
		=\sum_{K}c_Kx^K,
	\]
	所以$\operatorname{Content}(fg)$是由这些$c_K=\sum_{I+J=K}a_Ib_J$生成的，
	而$\operatorname{Content}(f)\operatorname{Content}(g)=\langle \{a_Ib_J\}_{I,J}\rangle$
	告诉我们第一个包含是显然的。

	方便起见，对每个多重指标$(i_1,\dots,i_n)$，我们都可以用字典序（先比$i_n$再比$i_{n-1}$如此继续下去）给出一个全序，再记$I^\text{m}=(i^\text{m}_1,\dots,i^\text{m}_n)$, $J^\text{m}=(j^\text{m}_1,\dots,j^\text{m}_n)$，为$\{I\}$, $\{J\}$中最大的那个指标。

	现在考虑一个包含$\operatorname{Content}(fg)$的素理想$\pp$，这就意味着所有$c_K$都在$\pp$中。我们首先考虑$K^\text{m}=I^\text{m}+J^\text{m}$，这当然只有一项
	\[
		c_{K^\text{m}}=a_{I^\text{m}}b_{J^\text{m}}\in \pp.
	\]
	然后考虑次高的那个$K_1$, 即
	\[
		K_{1}=(i^\text{m}_1+j^\text{m}_1-1,i^\text{m}_2+j^\text{m}_2,\dots,
		i^\text{m}_n+j^\text{m}_n),
	\]
	则
	\[
		c_{K_{1}}=a_{(i^\text{m}_1-1,i^\text{m}_2,\dots,
		i^\text{m}_n)}b_{J^\text{m}}+a_{I^\text{m}}b_{(j^\text{m}_1-1,j^\text{m}_2,\dots,j^\text{m}_n)}\in \pp,
	\]
	由于$a_{I^\text{m}}b_{J^\text{m}}\in \pp$，所以$a_{I^\text{m}}$, $b_{J^\text{m}}$中至少有一个属于$\pp$，故$c_{K_{1}}$
	中也至少有一项属于$\pp$，而$c_{K_{1}}\in \pp$告诉我们另一项也在$\pp$中。类似的事情可以一直做下去，这样，所有的$a_Ib_J$都在$\pp$中，这就意味着$\operatorname{Content}(f)\operatorname{Content}(g)\subset\pp$.
	而这样的包含$\operatorname{Content}(fg)$的素理想$\pp$是任意的，考虑这些所有素理想的交，立刻得到了第二个包含，因为根就是素理想的交。
\end{proof}

\begin{para}[本原多项式]
	设$R$是一个UFD，如果$R$上的多项式$f=\sum_{I}a_Ix^I$满足$\operatorname{Content}(f)$不被包含于任何主理想中，或等价地，$\operatorname{GCD}(\{a_I\})$可逆，则称$f$是一个本原多项式。
\end{para}

\begin{lem}
	设$R$是一个UFD，$f$和$g$都是$R$上的多项式，则$fg$是本原多项式当且仅当$f$和$g$都是。
\end{lem}

\begin{proof}
	如果$f$, $g$其中有一个不是，则存在一个主理想$\mathfrak a$使得
	\[
		\operatorname{Content}(f)\subset \mathfrak a\quad \text{or}\quad \operatorname{Content}(g)\subset \mathfrak a,
	\]
	不管怎样，这都导致了
	\[
		\operatorname{Content}(fg)\subset \operatorname{Content}(f)\operatorname{Content}(g)\subset \mathfrak a,
	\]
	所以$fg$也不是。

	如果$fg$不是，假设存在一个主理想$\langle a\rangle$使得
	$
		\operatorname{Content}(fg)\subset \langle a\rangle
	$，进一步我们可以挑$a$的某个不可约因子得到一个比$\langle a\rangle$更大的主理想，所以我们可以假设$a$是不可约元，继而
	$\langle a\rangle$是素理想。于是
	\[
		\operatorname{Content}(f)\operatorname{Content}(g)\subset \sqrt{\operatorname{Content}(fg)}\subset \sqrt{\langle a\rangle}=\langle a\rangle,
	\]
	因为$\langle a\rangle$是素理想，利用Proposition \ref{primeau}立刻有
	\[
	\operatorname{Content}(f)\subset \langle a\rangle\quad \text{or}\quad \operatorname{Content}(g)\subset \langle a\rangle,
	\]
	此即所证。
\end{proof}

\begin{lem}[Gauss引理]
	如果$R$是UFD，其分式域为$k$，则若$f$在$R[x]$中不可约，则$f$在$k[x]$中也不可约。
\end{lem}

\begin{proof}
	只要证明逆否命题即可。首先，我们可以假设$f$是本原多项式，否则除去其系数的最大公因子即可。如果$f$在$k[x]$中可约，可以分解为$f=gh/r$，其中$g$, $h\in R[x]$而$r\in R$，我们可以进一步将$g$, $h$写作$g=ag'$, $h=bh'$，其中$g'$和$h'$都是$R$上的本原多项式，进而$g'h'$也是本原多项式。于是
	\[
		rf=abg'h',
	\]
	由于$f$, $g'h'$都是本原多项式，求两边系数的最大公因子，所以$\langle r\rangle =\langle ab\rangle$，所以$f=r'g'h'$，其中$r'$是$R$中的可逆元，进而$f$在$R$中可约。
\end{proof}

最后我们来证明Theorem \ref{ufd}.
\begin{proof}[The proof of Theorem \ref{ufd}]
	$R[x]$中的不可约元就是那些不可约多项式，继而这直接来自于Gauss引理以及$k[x]$是一个PID（继而是一个UFD）.
\end{proof}

一开始Gauss引理是用到$R=\zz$上的，在$\zz$上，我们如果给出了一个$f$不可约的充分条件，则这也应该是$f$在$\mathbb{Q}[x]$上不可约的充分条件。为此，我们给一个这样的充分条件。

\begin{pro}[Eisenstein判别法]
	对整系数多项式
	\[
		f=a_nx^n+\cdots+a_1x+a_0,
	\]
	如果存在一个素数$p$使得$p$可以整除除了$a_n$外的所有$a_i$，且$p^2$不能整除$a_0$，则$f$在$\zz[x]$上不可约。
\end{pro}

\begin{proof}
	我们在$(\zz/p\zz)[x]$上考虑，由条件，$f=a_nx^n$. 由于$\zz/p\zz$是一个域，所以$(\zz/p\zz)[x]$是一个UFD. 现在，如果$f$可约，写作$f=gh$. 那么，
	$g$, $h$只能具有形式$g=b_m x^m$, $h=c_{n-m}x^{n-m}$的形式，这意味着在$\zz[x]$中，$g$和$h$的常数项都可以整除$p$，进而$f$的常数项可以整除$p^2$，矛盾。
\end{proof}

\section{域扩张与单扩张}

如果$k$是一个域，则任意的$k$-代数都是$k$-矢量空间。与此同时，赋予$k$-代数的$k$-模结构的那个同态的核$\ker(f)$作为域$k$中的理想，他只能是$k$本身或者$\{0\}$，前者太平凡，我们不考虑，后者得出了$f:k\to f(k)$是一个域同构。

\para 如果域$K$是一个$k$-代数，称$K$是$k$的一个域扩张，记作$K/k$。如果域$K$还是一个有限生成$k$-代数，称$K$是$k$的一个有限生成扩张。

因为$K$是$k$-矢量空间，我们定义域扩张的大小为$[K:k]=\dim_k(K)$.若$[K:k]$有限，称这个扩张是有限扩张。
\endpara

前面说了，对于任意的$k$-代数$K$，$k$都同构于$K$中的一个子域，所以通常也将域扩张定义为包含$k$的更大的域。为了行文的简练，我们就假设域扩张为包含我们的域更大的域。

\para 设$B$是环，$A$是他的子环，如果对$a\in B$，存在$f\in A[x]$使得$f(a)=0$，称$a$在$A$上代数。如果$B$中任意的元素都在$A$上代数，则称$B$在$A$上代数。特别地，设$K/k$是一个扩张，若$K$在$k$上代数，则$K$被称为$k$的一个代数扩张。\endpara

每一个$k$中元素当然在$k$上代数，因为他是线性多项式的根。如果$\alpha$有逆且在$k$上代数，那么他的逆$1/\alpha$也在$k$上代数。实际上，因为$\alpha$在$k$上代数，所以存在多项式$f=\sum_{i=0}^na_ix^i$使得$f(\alpha)=0$。很容易检验，多项式$g=\sum_{i=0}^na_{n-i}x^i$使得$g(1/\alpha)=0$成立，所以$1/\alpha$在$k$上代数。

作为域扩张的例子，考虑多项式环$k[x_1$, $\dots$, $x_n]$是一个$k$-代数，他的商域$F(k[x_1,\dots,x_n])$就是$k$的一个扩张，并且$\dim_k(F(k[x_1$, $\dots$, $x_n]))=\infty$，实际上，比如$\{x_1$, $\dots$, $x_1^n,\dots\}$是线性无关的。或者，如果$\mm$是$k[x_1$, $\dots$, $x_n]$的一个极大理想，则$k[x_1$, $\dots$, $x_n]/\mm$也是$k$的一个扩张，后面我们会看到这个扩张是一个有限扩张。

\begin{pro}
设$K/k$是$L/K$都是扩张，则$[L:k]\leq[K:k]$. 特别地，如果$K/k$和$L/K$都是有限扩张且$[K:k]=m$以及$[L:K]=n$，则$L/k$是有限扩张且$[L:k]=mn$. 这就是说，有限扩张的有限扩张还是有限扩张。
\end{pro}

\begin{proof} 
	设$\{a_1$, $\dots$, $a_r\}$是$K$中的任意$k$-代数无关组，而$\{b_1$, $\dots$, $b_s\}$是$L$中的任意$K$-代数无关组，我们来证明$\{a_ib_j\}$是$k$-线性无关组。设$\alpha=\sum_{i,j}c_{ij}a_ib_j$，其中$c_{ij}\in k$，因为$\sum_i c_{ij}a_i\in K$，所以如果$\alpha=0$，那么由$\{b_1$, $\dots$, $b_s\}$的$K$-线性无关性，所以$\sum_i c_{ij}a_i=0$，然后再应用一次$\{a_1$, $\dots$, $a_r\}$的$k$-线性无关性，就得到了对于任意的$i$, $j$都成立$c_{ij}=0$，于是$\{a_ib_j\}$是$k$-线性无关组。由此，维度的结论显然。
\end{proof}

利用这个结论，比如$[K:k]$是一个素数，任意的域$L$如果满足$k\subset L\subset K$（他被称为扩张$K/k$的中间域）一定满足$[K:k]=[K:L][L:k]$，所以要么$[K:L]=[K:k]$要么$[K:k]=[L:k]$，分别对应$L=k$以及$L=K$. 

\para 设$K/k$是一个域扩张，$X$是$K$的一个子集，记$k[X]$为所有包含$k$和$X$的$K$的子环的交，令$k(X)$为所有包含$k$和$X$的$K$的子域的交。换而言之，$k[X]$即$K$中包含$k$和$X$的极小子环，而$k(X)$则是极小子域。由于$k[X]$是整环，所以由商域$F(k[X])$，因此$k(X)\subset F(k[X])$. 但是$F(k[X])$包含于任意包含$k$和$X$的子域，所以$F(k[X])\subset k(X)$. 所以$k(X)$就是$k[X]$的商域。所以下面我们研究$k[X]$.

我们特别关注$X$是单点集$\{\alpha\}$的情况，此时$k(\alpha)$被称为单扩张。下面两个命题把任意的$X$的情况约化到单扩张上面。

\begin{pro}
设$X$是$K$的任意子集，考虑指标集$I$为$X$的任意有限子集，则
\[
	k[X]=\bigcup_{\{a_1,\dots,a_n\}\in I} k[a_1,\dots,a_n].
\]
\end{pro}

\begin{proof}
	设右边为$A$. 显然，任取有限子集$\{a_1$, $\dots$, $a_n\}$，$k(a_1$, $\dots$, $a_n)\subset k[X]$，因此$A\subset k[X]$. 反过来要证$k[X]\subset A$，只要证明$A$是一个环即可，则极小性将得到结论。任取$x$, $y\in A$，则存在有限集使得
	\[
		x\in k[a_1,\dots,a_m],\quad y\in k[b_1,\dots,b_n],
	\]
	因此$x+y$, $xy\in k[a_1$, $\dots$, $a_m,b_1$, $\dots$, $b_n]\subset A$，所以这是一个环。
\end{proof}

类似地，还可以证明
\[
	k(X)=\bigcup_{\{a_1,\dots,a_n\}\in I} k(a_1,\dots,a_n).
\]
这就说明了，$k(X)$中的任意一个元素$\alpha$都可以找到有限个$X$中的元素$\{a_1$, $\dots$, $a_n\}$使得$\alpha\in k(a_1$, $\dots$, $a_n)$.

\begin{pro}
对$k$单扩张$\alpha_1$得到了$k(\alpha_1)$，再对其单扩张$\alpha_2$就得到了$k(\alpha_1)(\alpha_2)$，他也是$k$的一个扩张，则$k(\alpha_1)(\alpha_2)= k(\alpha_2)(\alpha_1)=k(\alpha_1,\alpha_2)$.
\end{pro}

\begin{proof} 显然$k(\alpha_1,\alpha_2)\subset k(\alpha_1)(\alpha_2)$，因为$k(\alpha_1)(\alpha_2)$是一个域且同时包含$\alpha_1$和$\alpha_2$. 反过来，因为$k(\alpha_1,\alpha_2)$是一个域，而$\alpha_1$是他的元素，所以$k(\alpha_1)$是$k(\alpha_1,\alpha_2)$的子域，然后再对$k(\alpha_1)$做$\alpha_2$的单扩张，因为单扩张$k(\alpha_1)(\alpha_2)$是$k(\alpha_1,\alpha_2)$中包含$\alpha_2$的最小的域，所以$k(\alpha_1)(\alpha_2)\subset k(\alpha_1,\alpha_2)$.\end{proof}

这个简单的命题顺便还告诉我们，有限次单扩张的顺序无关紧要。经过有限归纳，则$X$是有限集的情况就变成了有限次单扩张。

\para 现在考虑单扩张$k(\alpha)$. 显然
\[
	\{f(\alpha)\,:\, f\in k[x]\}\subset k[\alpha],
\]
但又由$k[\alpha]$的极小性，也就得到了$\{f(\alpha)\,:\, f\in k[x]\}=k[\alpha]$. 通过$\ev_{\alpha}:f\mapsto f(\alpha)$定义映射$\ev_{\alpha}:k[x]\to K$，不难检验这是一个$k$-线性映射以及一个环同态，他被称为赋值同态。利用赋值同态我们就可以将上面的结论总结为$k[\alpha]=\ev_{\alpha}(k[x])$.

$X$是有限集的情况是类似的，可以定义出多重赋值同态
\[
	\ev_{a_1,\dots,a_n}:k[x_1,\dots,x_n]\to K,
\]
然后可以检验$k[a_1$, $\dots$, $a_n]=\ev_{a_1,\dots,a_n}(k[x_1$, $\dots$, $x_n])$.

在单扩张上，下面要证明，如果$k[\alpha]$在$k$上代数，则$k(\alpha)=k[\alpha]$.

\para 设$K/k$是一个扩张，$\alpha\in K$在$k$上代数，则存在多项式$f\in k[x]$使得$f(\alpha)=0$，取$g$是$k[x]$中以$\alpha$为零点的次数最低的首一多项式，称为$\alpha$的极小多项式。

\begin{lem}
极小多项式不可约。如果$f$也以$\alpha$为零点，则存在$h\in k[x]$使得$f=gh$.
\end{lem}

\begin{proof} 
	假设可约，设$g=g_1g_2$，其中$g_1$和$g_2$都是次数比$g$低的多项式。那么在$\alpha$处，我们有$g_1(\alpha)g_2(\alpha)=0$，所以$g_1(\alpha)$和$g_2(\alpha)$中至少有一个为零，而他们都是次数比$g$低的在$\alpha$处为零的多项式，和极小多项式的选取矛盾。

	辗转相除，我们有分解$f=gh+r$，其中$r$是比$g$次数更低的多项式或者$r=0$。如果是前者，在$\alpha$处$r(\alpha)=f(\alpha)-g(\alpha)h(\alpha)=0$，所以$r$和极小多项式的选取矛盾。
\end{proof}

我们已经知道了环同态$\ev_\alpha:k[x]\to k[\alpha]$，他当然是满的，他的核是那些在$\alpha$为零的多项式所构成的理想，从引理可以知道，他就是极小多项式生成的极大理想\footnote{若$k$是一个域，则多项式环$k[x]$是一个主理想整环，他的极大理想被不可约多项式生成。}$(g)$，所以$k[\alpha]\cong k[x]/(g)$是一个域。因而$k[\alpha]$就是我们想要的域$k(\alpha)$，他同构于$k[x]/(g)$，其中$g$是$\alpha$的极小多项式。

\para 如果$\alpha$不在$k$上代数，则称$\alpha$在$k$上超越。而单扩张$k(\alpha)$此时称为超越扩张。因为不存在多项式$f\in k[x]$以$\alpha$为跟，所以$\ker \ev_\alpha=\{0\}$，这就意味着$k[\alpha]\cong k[x]$，所以$k(\alpha)\cong F(k[x])=k(x)$.

至此，对单扩张，我们已经分成两种情况得到了$k[\alpha]$和$k(\alpha)$. 当$\alpha$在$k$上代数的时候，而他的极小多项式为$f$，则$k(\alpha)=k[\alpha]=k[x]/(f)$，当$\alpha$在$k$上超越的时候，$k[\alpha]\cong k[x]$.

\begin{pro}
两个单扩张同构，即$k(\alpha)\cong k(\beta)$，当且仅当$\alpha$和$\beta$都在$k$上代数且极小多项式相同，或者同为超越扩张。
\end{pro}

\begin{proof} 
	如果$k(\alpha)$是超越扩张，而$k(\beta)$是代数扩张。前面已经知道$\dim_k(k(\alpha))=\infty$。如果$\beta$的极小多项式是$n$次的，那么$k[x]/\mm$中$\{1,x$, $\dots$, $x^{n-1}$, $x^n\}$是线性相关的，即$\dim_k(k(\beta))\leq n<\infty$，所以$k(\alpha)\not\cong k(\beta)$.

	现在，如果两者都是超越扩张，则$k(\alpha)\cong F(k[x])\cong k(\beta)$.如果两者都是代数扩张，则$k[x]/\mm_\alpha\cong k[x]/\mm_\beta$，即可推出$\mm_\alpha=\mm_\beta$，继而拥有相同的极小多项式。反过来，如果有相同的极小多项式，则$k(\alpha)\cong k[x]/\mm\cong k(\beta)$.
\end{proof}

\begin{para}
	在研究代数方程的时候，域扩张的出现是自然的。给定域$k$，以及上面的一个多项式$f$，由于$k[x]$是唯一分解整环，所以不妨设$f$是不可约的。我们总是可以找到一个域$K$使得$f$在$K$中有根，实际上，令$K=k[x]/(f)$即可。稍微一般些，对一族多项式$\{f_1$, $\dots$, $f_n\}$，我们也可以找到一个域使得它们在这个域中都可以保证根的存在。但是，当我们考虑一族无限个不可约多项式的时候，这个问题就变得严峻起来了，特别地，如果能找到一个域$K$使得$k[x]$中所有的不可约多项式都至少有一个根时，那在$K$中处理代数方程总是方便的。
\end{para}

在下一节，我们将构造这样的一个域。

\section{环的整扩张}

\para 设$A$和$B$是环，且$A$是$B$的子环。称$x\in B$在$A$上整，如果他是某个$A[x]$中的首一多项式的根。如果$B$中任意的元素都在$A$上整，则称$B$在$A$上整。

设$k$是一个域，如果$\alpha$在$k$上整，则他在$k$上代数。反之，如果$\alpha$在$k$上代数，则存在一个多项式$f=\sum_{i=0}^na_ix^i$使得$f(\alpha)=0$，此时首一多项式$g=f/a_n$也满足$g(\alpha)$，所以$\alpha$在$k$上整。通过上面的讨论，我们发现在域上代数和在域上整等价。于是我们证明的关于整的结论，因为在域上面的等价性，他们也可以自然应用到域扩张上。

如果$B$在$A$上整，我们也称$B$是$A$的一个整扩张。下面一个命题告诉我们，如果一个整环是域的整扩张，则这是一个域扩张。

\begin{pro}\label{p2:1}
	设$A$和$B$是环，且$A$是$B$的子环。以下命题等价：
	\begin{compactenum}[~~~(1)]
		\item $\alpha$在$A$上整。
		\item $A[\alpha]$是一个有限生成$A$-模。
		\item $A[\alpha]$包含在$B$的一个子环$C$中，$C$是一个有限生成$A$-模。
		\item 存在忠实$A[\alpha]$-模$M$，他作为$A$-模时是有限生成的。
	\end{compactenum}
\end{pro}	

\begin{proof} 
	\no{1} $\Rightarrow$ \no{2} ：由于$\alpha$在$A$上代数，他的满足方程$\alpha^n+a_1\alpha^{n-1}+\cdots+a_n=0$，那么通过$\alpha^{n+r}=-(a_1\alpha^{n+r-1}+\cdots+a_n\alpha^r)$即可知$A[\alpha]$是一个有限生成$A$-模。

	\no{2} $\Rightarrow$ \no{3} ：取$C=A[\alpha]$.

	\no{3} $\Rightarrow$ \no{4} ：取$M=C$，这是一个忠实$A[\alpha]$-模，因为如果$aC=0$，由$C$有单位元，所以$a\cdot 1=a=0$.

	\no{4} $\Rightarrow$ \no{1} ：因为$M$是$A[\alpha]$-模，所以$\alpha M\subset M$。因为$M$是有限生成$A$-模，设$M$被$\{x_1,\cdots,x_m\}$生成，则$\alpha M\subset M$告诉我们对任意的$i$都成立$\alpha x_i=\sum_{j=1}^m a_{ij} x_j$，其中$a_{ij}\in A$。所以
	\[
		\sum_{j=1}^m (\alpha\delta_{ij} -a_{ij})x_j=0,
	\]
	左乘$(\alpha\delta_{ij} -a_{ij})$的伴随矩阵，则$\det(\alpha\delta_{ij} -a_{ij})x_j=0$对任意的$1\leq j \leq m$都成立，也即$\det(\alpha\delta_{ij} -a_{ij})M=0$。由$M$的忠实性，$\det(\alpha\delta_{ij} -a_{ij})=0$，将行列式展开就是我们需要的首一多项式。
\end{proof}

如果$\{\alpha_1,\cdots,\alpha_n\}\subset B$都在$A$上整，那么$k[\alpha_1,\cdots,\alpha_n]$也是一个有限生成$k$-模，这只要利用$k[\alpha_1,\cdots,\alpha_n]=k[\alpha_1,\cdots,\alpha_{n-1}][\alpha_n]$经过有限次归纳即可。

\para \label{iope}设$A$和$B$是环，且$A$是$B$的子环。则所有在$A$上整的元素构成$B$的一个子环。如果这个子环就是$A$，那么称呼$A$在$B$中是整闭的。

\begin{proof} 如果$\alpha$和$\beta$在$A$上面整，$A[\alpha,\beta]$有限生成。因为$A[\alpha\pm\beta]\subset A[\alpha,\beta]$和$A[\alpha\beta]\subset A[\alpha,\beta]$，由上一个命题的\no{3}，$\alpha\pm\beta$和$\alpha\beta$在$A$上面整。\end{proof}

设$K/k$是一个扩张，这个命题告诉我们$K$中在$k$上代数的元素构成$K$中的子环。并且，因为如果$\alpha$代数，那么$1/\alpha$也代数，所以$K$中在$k$上代数的元素构成$K$中的子域。特别地，如果$\{\alpha_1,\cdots,\alpha_n\}$都在$k$上代数，则扩张$k(\alpha_1,\cdots,\alpha_n)$是代数扩张。再特别地，关于一个代数元的单扩张是代数扩张。

\para 唯一分解整环在他的商域中是整闭的。一般而言，如果整环$R$在他的商域$F(R)$中是整闭的，则$R$就直接被称为是整闭的。

\begin{proof} 
	设$R$是唯一分解整环，$F(R)$是$R$是他的商域，再设$x\in F(R)$在$R$上整，对于唯一分解整环有分解$x=r/s$，其中$r$和$s$互素，那么就有方程
	\[
		r^n+a_1r^{n-1}s+\cdots+a_n s^n=0,
	\]
	其中$a_i\in R$，因此$s$需要整除$r^n$，而$r$和$s$互素，所以只能有$s=\pm 1$.这就说明了$x=\pm r\in R$.
\end{proof}

\begin{pro}
设$A\subset B\subset C$是环，且$B$在$A$上整，$C$在$B$上整，则$C$在$A$上整。这就是整的传递性。
\end{pro}

\begin{proof} 
	设$x\in C$，因为$x$在$B$上整，所以存在方程$x^n+\cdots+b_{n-1}x+b_n=0$，因为$b_i\in B$都在$A$上整，所以$B'=A[b_1,\cdots,b_n]$是有一个有限生成$A$-模。由同一个首一多项式，$x$也在$B'$上整，于是$B'[x]$是一个有限生成$B'$-模，由模的有限生成的传递性，则$B'[x]$是一个有限生成$A$-模，所以$x$在$A$上整。
\end{proof}

回到域的情况，如果$K/k$是$L/K$都是扩张，则$L/k$是一个扩张。由整的传递性，如果$K/k$和$L/K$都是代数扩张，则$L/k$是代数扩张。

\begin{pro}\label{p:2.4}
设环$A\subset B\subset C$，$A$是Norther环，$C$是有限生成$A$-代数，以及$C$或者是一个有限生成$B$-模，或者$C$在$B$上整，那么，$B$是一个有限生成$A$-代数。
\end{pro}

\begin{proof} 
	在题目的条件下，由Proposition \ref{p2:1}，$C$是一个有限生成$B$-模与$C$在$B$上整等价。所以只对$C$是一个有限生成$B$-模的情况证明。

	令$C=A[\bar{x}_1,\cdots,\bar{x}_m]\cong A[x_1,\cdots,x_m]/\mathfrak{a}$，以及令$y_1$, $y_2,\cdots,y_n$是$C$作为有限生成$B$-模的生成元，那么存在
	\begin{equation}
		\bar{x}_i=\sum_i\alpha_{ij}y_j,\quad y_iy_j=\sum_{k}\beta_{ijk}y_k,
	\end{equation}
	令$B_0$是由$\alpha_{ij}\in B$和$\beta_{ijk}\in B$生成的$A$-代数，由于$A$是Norther环，所以$B_0$是Norther环，以及$A\subset B_0 \subset B$.

	由于$C$中的元素都是关于$\{\bar{x}_i\}$的、系数处于$A$中的多项式，那么式(\theequation)告诉我们，这个元素可以写成$\sum_i b_i y_i$，其中$b_i\in B_0$，所以$C$是一个有限生成$B_0$-模。而$B_0$是Norther环就保证了$C$是一个Norther $B_0$-模。因为$B$又是$C$的子模，所以$B$是一个有限生成$B_0$-模。又$B_0$是一个有限生成$A$-代数，所以$B$是一个有限生成$A$-代数。
\end{proof}

下面我们研究理想在整扩张下的表现。

\begin{pro}
    \label{intfield} 设$A\subset B$是两个整环，$B$在$A$上整，则$B$是域当且仅当$A$是域。
\end{pro}

\begin{proof}
    设$A$是域，$y\neq 0$在$A$上整，则存在一个首一多项式
    \[
        y^n+a_1y^{n-1}+\cdots+a_n=0,
    \]
    因为$B$是一个整环，我们可以假设$a_n\neq 0$，因为如果等于零，则利用消去律我们依然可以得到一个首一多项式。于是可以直接构造出
    \[
        y^{-1}=-a_n^{-1}(y^{n-1}+a_1y^{n-2}+\cdots+a_{n-1}).
    \]

    反过来，如果$B$是域，对非零的$x\in A$有$x^{-1}\in B$. 所以$x^{-1}$有首一多项式
    \[
        x^{-m}+b_1x^{-m+1}+\cdots+b_m=0,
    \]
    所以有
    \[
        x^{-1}=-(b_1+b_2x+\cdots+b_mx^{m-1})\in A.
    \]
\end{proof}

\begin{lem}考虑一个整扩张$R\subset S$，
    \begin{compactenum}[~~~(1)]
        \item 设$\aaa$是$S$的一个理想，则$R\cap \aaa$是$R$的一个理想。此时，$R/(R\cap \aaa)\subset S/\aaa$是一个整扩张。
        \item 设$T$是$R$的一个乘性子集，则也是$S$的乘性子集。此时，$T^{-1}R\subset T^{-1}S$是一个整扩张。
    \end{compactenum}
\end{lem}

\begin{proof}
    对于第一点，任取$\bar{s}\in S/\aaa$，它在$S$中找一个原像$s$有首一的多项式方程成立
    \[
        s^n+r_1s^{n-1}+\cdots+r_n=0,
    \]
    其中系数属于$R$，然后将两边模掉$\aaa$就得到了$\bar{s}$的首一多项式方程，系数属于$R/(R\cap \aaa)$.

    对于第一点，任取$s/t\in T^{-1}S$，由于$s$满足一个$R$系数的首一多项式
    \[
        s^n+r_1s^{n-1}+\cdots+r_n=0,
    \]
    故成立$T^{-1}R$系数的首一多项式
    \[
        (s/t)^n+r_1/t (s/t)^{n-1}+\cdots+ r_n/t^n=0,
    \]
    所以$T^{-1}R\subset T^{-1}S$是一个整扩张。
\end{proof}

作为推论，$\mm$是$S$的极大理想当且仅当$R\cap \mm$是$R$的极大理想。这点只要利用Proposition \ref{intfield}即可。

\begin{pro}
    设$R\subset S$是一个整扩张，令$\mathfrak{q}\subset \mathfrak{q'}$是$S$的两个理想，如果$\mathfrak{q}\cap R=\mathfrak{q}'\cap R$，则$\mathfrak{q}=\mathfrak{q}'$.
\end{pro}

\begin{proof}
    令$\mathfrak{p}=\mathfrak{q}\cap R=\mathfrak{q}'\cap R$，上面的引理告诉我们，$S_\pp$在$R_\pp$上整。$R_\pp$中的极大理想为$\mm=\pp R_\pp$，现在记$\mathfrak{n}=\mathfrak{q}_\pp$和$\mathfrak{n}'=\mathfrak{q}'_\pp$. 于是我们有$\mm=\mathfrak{n}\cap R_\pp=\mathfrak{n}'\cap R_\pp$以及$\mathfrak{n}\subset \mathfrak{n}'$. 由上一个引理的推论，$\mathfrak{n}$和$\mathfrak{n}'$都是$S_\pp$的极大理想\footnote{注意，此时$S_\pp$不一定是局部环，实际上，它只是$R_\pp\otimes S$.}，所以$\mathfrak{n}=\mathfrak{n}'$. 又由于$S_\pp$的理想结构，$\mathfrak{q}=\mathfrak{q'}$.
\end{proof}

注意，$\mathfrak{q}\subset \mathfrak{q'}$是一个必须的条件。比如，考虑整扩张$\zz\subset \zz[i]$，此时$(1+2i)\cap \zz=(1-2i)\cap \zz =(5)$.

\begin{pro}
    设$R\subset S$是一个整扩张，令$\pp$是$R$的一个素理想，则存在一个$S$的素理想$\mathfrak{q}$使得$\mathfrak{q}\cap R=\pp$.
\end{pro}

反过来也是对的，因为素理想的原像也是素的。这个性质非常类似于所谓的子空间拓扑，素理想可以理解成开集或者闭集。

\begin{proof}
    由于$S_\pp$在$R_\pp$上整，令$\mathfrak{n}$是$S_\pp$的一个极大理想，则$\mathfrak{n}\cap R_\pp$是$R_\pp$的极大理想。由于$R_\pp$是局部环，所以$\mathfrak{n}\cap R_\pp=\pp_\pp$. 设$\varphi:S\to S_\pp$是自然的含入，则$\mathfrak{q}=\varphi^{-1}(\mathfrak{n})$是一个素理想，且$\mathfrak{q}\cap R=\pp$.
\end{proof}

\section{域的有限扩张}

这节的目标是分类有限扩张，核心的定理是Zariski引理。让我们从一个非常简单的定理出发。

\begin{pro}
有限扩张等价于有限次单代数扩张。
\end{pro}

\begin{proof} 注意到单代数扩张是有限扩张，这是因为，如果他的极小多项式为$n$次的，那么$\{1,x,\cdots,x^n\}$线性相关，而有限次有限扩张是有限扩张。

反之，设$K/k$不是代数扩张，那么存在一个元素$\alpha\in K$是超越的。因为$k\subset k(\alpha)\subset K$，所以$[K:k]\geq [k(\alpha):k]=\infty$. 如果$K/k$是代数扩张，但不是有限次单代数扩张，则对于任何的$n\in \zz^+$，一定存在一组$n$个元素的线性无关组，这和$\dim_k K$有限矛盾。所以一个有限扩张由有限次单代数扩张而成。\end{proof}

如果加强条件，比如中间域有限，我们甚至可以得到有限扩张是单代数扩张的情况，这就是所谓的本原元定理，以后我们会遇到。

\begin{thm}[Zariski引理]
有限生成扩张是有限扩张。具体地，设$\mm$是$A=k[x_1,\dots,x_n]$的一个极大理想，则$A(\mm)=A/\mm$是$k$的一个有限扩张。
\end{thm}

在证明之前，可以注意到如下事实：设$x_i$在$A(\mm)$中的像为$\alpha_i$，则$A(\mm)=k(\alpha_1,\dots,\alpha_n)$. 因此，如果$A(\mm)$如果是代数扩张，则它就是有限扩张，所以只要证明是一个代数扩张就行了。

\begin{proof} 
	归纳证明这个命题。$n=1$的时候是简单的，$k[x]$中任意的极大理想$\mm$都是由一个不可约多项式$f$生成的，所以$\mm=(f)$，而单扩张的知识告诉我们，$k[x]/(f)$是一个代数扩张，他给$k$添加上了$f$的一个根。

	对$n$个变元的情况，假设对任意的$\mm$有$A(\mm)=k[x_1,\dots,x_n]/\mm$是一个代数扩张。对$n+1$个变元的情况，设$k(\alpha_0,\dots,\alpha_{n})=k[x_0,\dots,x_n]/\mm$是$k$的一个有限生成扩张，考虑如下同态
	\[
		\ev_{(\alpha_1,\dots,\alpha_n)}:k(\alpha_0)[x_1,\dots,x_{n}]\to k(\alpha_0,\dots,\alpha_{n})=k[x_0,\dots,x_n]/\mm,
	\]
	其中$k(\alpha_0)$是一个$k$的单扩张。对映射到域上的满同态，其核$\ker\left(\ev_{(\alpha_1,\dots,\alpha_n)}\right)$是$k(\alpha_0)[x_1,\cdots,x_{n}]$的极大理想，由归纳假设$k(\alpha_0)(\alpha_1,\cdots,\alpha_{n})$是$k(\alpha_0)$的代数扩张。如果$k(\alpha_0)$在$k$上是代数的，则$k(\alpha_0,\dots,\alpha_{n})$是$k$的代数扩张了。

	假设$k(\alpha_0)$是超越扩张，即$k(\alpha_0)=F(k[\alpha_0])$，$k(\alpha_0)$是$k[\alpha_0]$的商域。因为$\alpha_i$在$k(\alpha_0)$上是代数的，所以存在多项式
	\[
		a_{i0}\alpha_i^{N_i}+a_{i1}\alpha_i^{N_i-1}+\cdots +a_{i,N_i+1}=0,
	\]
	其中$a_{ij}\in k(\alpha_0)=F(k[\alpha_0])$。将其通分，可以得到一个新的等式，系数属于$k[\alpha_0]$，所以不妨直接设$a_{ij}\in k[\alpha_0]$.

	将等式两边乘以$a_0^{N_i-1}$后可以看到$a_{i0}\alpha_i$在$k[\alpha_0]$上是整的，实际上，对所有的$i>0$和$\alpha_0$都可以找到这么一个$a_{i0}$. 由于在$k[\alpha_0]$上整的元素构成一个环，而且$k[\alpha_0]$是他的一个子环，特别地，所有的$a_{i0}\in k[\alpha_0]$以及$\alpha_0\in k[\alpha_0]$都是整的，所以可以说存在一个元素$a=\prod_{i>0}a_{i0}\in k[\alpha_0]$，对每一个$\alpha_i$都成立$a\alpha_i$在$k[\alpha_0]$上是整的。

	现在任取一个$y\in k[\alpha_0,\dots,\alpha_n]$，写作$y=\sum y_{i_0 \cdots i_n}\alpha_0^{N_{i_0}}\cdots\alpha_{n}^{N_{i_n}}$.
	因为在$k[\alpha_0]$上整的元素构成一个环，两边乘以$a^N$后可以得到$a^Ny$在$k[\alpha_0]$上是整的，其中$N$足够大，因为所有的求和都是有限的，所以$N$总是可以选出来的。

	我们已经证明了，随便取一个$y\in k(\alpha_0)$，则存在$N\in \mathbb{Z}^+$使得$a^Ny\in k(\alpha_0)$在$k[\alpha_0]$上整。由于$k[\alpha_0]$作为域上的多项式环是唯一分解整环，是整闭的，所以$a^Ny=f\in k[\alpha_0]$，因此
	\[
		y=\frac{f}{a^N}\in k(\alpha_0),
	\]
	其中$f\in k[\alpha_0]$. 而$y$是任意的，考虑$y=1/b$，其中$b\not\in \{1,a,a^2,\dots\}$，他不能写成$f/a^N$的形式，这就完成了矛盾。故$k(\alpha_0)$不可能是超越扩张，$k(\alpha_0)$是代数扩张。所以$k(\alpha_0,\dots,\alpha_{n})$是$k$的代数扩张。
\end{proof}

下面我们再提供一个Zariski引理的证明，他比上面的证明要短一些，用到了Proposition \ref{p:2.4}.

\begin{proof} 设$A(\mm)=k(\alpha_1,\dots,\alpha_n)$，如果$A(\mm)$关于$k$不是代数扩张，假设$\alpha_1,\dots,\alpha_r$关于$k$超越。我们可以先单扩张这些超越元，至于剩下的则关于域$B=k(\alpha_1,\dots,\alpha_r)$代数。

现在因为$A(\mm)$是$B$的有限扩张，根据包含关系$k\subset B\subset A(\mm)$和Proposition \ref{p:2.4}，可以得知$B$是一个有限生成$k$-代数，设$B=k[\beta_1,\dots,\beta_s]$，其中每一个$\beta_i$都有着形式$f_i/g_i$，而$f_i$, $g_i\in k[\alpha_1,\dots,\alpha_r]$。但是，$k[\alpha_1,\dots,\alpha_r]$中有多项式$h=g_1g_2\cdots g_{s}+1$使得$h^{-1}$不能写成$\beta_1,\dots,\beta_s$的多项式，矛盾。\end{proof}

\begin{pro}
有限扩张、有限次单代数扩张和有限生成扩张相互等价。
\end{pro}

\begin{proof} 前二者的等价已经知道了。对有限次单代数扩张而成的域$k(\alpha_1$, $\dots$, $\alpha_m)$，由$x_i\mapsto \alpha_i$可以构造一个满的$k$-代数同态$\varphi:k[x_1$, $\dots$, $x_m]\to k(\alpha_1$, $\dots$, $\alpha_m)$，根据同构基本定理，
\[
	k(\alpha_1,\dots,\alpha_m)\cong k[x_1,\dots,x_m]/\ker \varphi,
\]
所以$k(\alpha_1$, $\dots$, $\alpha_m)$是一个有限生成扩张。

反之，因为$A(\mm)=k[x_1$, $\dots$, $x_n]/\mm=k(\alpha_1$, $\dots$, $\alpha_n)$，由Zariski引理，$A(\mm)$是一个代数扩张，即$\alpha_i$都在$k$上代数，所以$A(\mm)=k(\alpha_1)\cdots(\alpha_m)$，其中每一次单扩张都是代数的。\end{proof}

在某些书上，有限生成扩张被定义为有限次单代数扩张，通过上面的命题，我们知道了这两个定义是等价的。至此，我们完全分类了有限扩张。对于无限扩张，我们以后再研究。

\begin{para}[代数闭域]
一个域$k$，如果它的任意代数扩张$K$都成立$K\cong k$，则$k$称为代数闭域。
\end{para}

代数闭域有许多等价判据，为了描述它，我们需要不少实用的概念。首先称形如$x-a$形状的多项式为一个线性因子。下面的小命题将线性因子与多项式的根联系在了一起：如果$f\in k[x]$在$k$中有一个$a$，则存在唯一的$g\in k[x]$使得$f=(x-a)g$.

实际上，如果多项式$f\in k[x]$如果在$k$中有一个根$a$，由多项式除法算法，我们可以分解得到
\[
	f=(x-a)g+h,
\]
其中$0\leq \deg(h)<\deg(x-a)=1$，即$h$是一个常数。然后两边作用赋值同态$\ev_a:k[x]\to k$得到$0=0+h$，即$h=0$，因此，$f$可以分解为
\[
	f=(x-a)g.
\]
进而我们有推论，如果$\deg f=n$，则$\deg f$在$k$中至多只有$n$个根。

考虑多项式$(x-a)^2$，显然$a$是它的根，而对任意$b\neq a$都不是$(x-a)$的根。按照一般常识，这样的根$a$应该被称为重数为$2$的根，那么对于一个任意的多项式$f$，我们怎么判断它的一个根$a$的重数呢？下面的多项式导数概念解决了这个问题。

\para 设$f\in k[x]$是一个多项式，写作$f=\sum_{i=0}^n a_ix^i$，则它的导数定义为
\[
	f'=\sum_{i=1}^n ia_ix^{i-1}.
\]
高阶导数定义如下：$f$的第$n$阶导数$f^{(n)}$定义为其第$n-1$阶导数$f^{(n-1)}$的导数。同时记$f^{(0)}=f$. 不难检验，如果$f$和$g$是多项式，则$(f+g)'=f'+g'$以及$(fg)'=f'g+fg'$，与我们常规的导数性质一致。此外，直接的计算即可得到所谓的Leibniz公式
\[
	(fg)^{(n)}=\sum_{k=0}^n {n \choose k}f^{(k)}g^{(n-k)}.
\]

观察多项式$f=(x-a)^ng$，其中$g$在$a$处不为零。按照我们的习惯，$a$往往被称为$f$的$n$重零点，这里来看看$f^{(k)}$在点$a$处的表现，首先是计算
\[
	f^{(k)}=\sum_{i=0}^k {k \choose i} \frac{n!}{(n-i)!}(x-a)^{n-i}g^{(k-i)}.
\]
所以不难看到，对于$0\leq k\leq n-1$，$a$都是$f^{(k)}$的根，而对于$f^{(n)}$，$a$就不是它的根。

\begin{para}
设$a$是$f$的一个根，如果对于$f'$, $f^{(2)}$, $\dots$, $f^{(n-1)}$，$a$都是它们的根，而$f^{(n)}$并没有根$a$，则$a$被称为$f$的$n$重根。
\end{para}

\begin{thm}设$k$是一个域，以下命题等价：
\begin{compactenum}[~~~(1)]
\item $k$是代数闭域。
\item $k$的有限扩张是它本身。
\item 如果$K$是他的一个扩张，则$k=\{\alpha\in K$ $:$ $\alpha$在$k$上代数$\}$.
\item 任意首一多项式$f$都可以分解为线性因子的乘积。
\item 任意多项式$f\in k[x]$都在$k$中有一个根。
\item $k$上的不可约多项式的次数都为$1$.
\end{compactenum}
\end{thm}

\begin{proof}
	稍微困难的是，$(3)\Rightarrow (4)$, $(5)\Rightarrow (6)$以及$(6)\Rightarrow (1)$.

	对$(3)\Rightarrow (4)$，将首一多项式$f$分解为不可约多项式的乘积，然后对那些不可约多项式，找一个$k$的扩张$K$使得$K$中包含那些不可约多项式的所有根（有限个，所以$K$总是存在的），由$(3)$，这些根都在$k$中，所以$f$在$k$上可以分解为线性因子的乘积。

	对$(5)\Rightarrow (6)$，对不可约多项式$f\in k[x]$，因为他有一个根$\alpha$，所以$f=(x-\alpha)g$，因为$f$是不可约的，因此$g\in k$保证了$\deg(f)=1$.

	对$(6)\Rightarrow (1)$，令$K/k$是代数扩张，取$\alpha\in K$，以及令$p\in k[x]$是$\alpha$的极小多项式。极小多项式都是不可约的，故$(6)$保证了$\deg(p)=1$，即$[k(\alpha):k]=1$，再即$\alpha\in k$. 所以$K=k$.
\end{proof}

\begin{thm}
对于任意一个域$k$，一定存在一个包含他的代数闭域$\bar{k}$，称为$k$的代数闭包。
\end{thm}

\begin{proof}
	这个定理的证明相当多，下面描述的构造由E. Artin首先提出的。设$\Sigma$是$k[x]$中所有不可约首一多项式的集合，然后考虑多项式环$k[\Sigma]$，对应于$f\in\Sigma$，$k[\Sigma]$中的不定元是$x_f$. 令$\mathfrak{a}$是所有形如$f(x_f)$的多项式构成的理想，其中$f\in\Sigma$. 首先指出，$\mathfrak{a}$不是单位理想。

	实际上，如果$\mathfrak{a}=k[\Sigma]$，则存在$g_1$, $\dots$, $g_n\in k[\Sigma]$和$f_1(x_{f_1})$, $\dots$, $f_n(x_{f_n})$使得
	\[
	1=g_1f_1(x_{f_1})+\cdots +g_nf_n(x_{f_n}).
	\]
	现在，由于$f_1$, $\dots$, $f_n$是有限多项式族，我们可以找一个$k$的扩张$L$使得每一个$f_i$都在$L$上有根$\alpha_i$，将上式在$L$中赋值$x_{f_i}=\alpha_i$就会得到$1=0$，矛盾。

	因此令$\mm$是包含$\mathfrak{a}$的极大理想，然后令$k_1=k[\Sigma]/\mm$，这是一个$k$的一个扩张，并且每个$f\in \Sigma$都在$k_1$中都有一个根，故$k[x]$中的任意多项式都在$k_1$中有根。对$k_1$同样进行构造得到$k_2$，不断继续下去得到$k_3$, $k_4$等等。令$K=\bigcup_{n=1}^\infty k_n$, 显然$K$是一个域，并且每一个$f\in \Sigma$都可以完全分裂成线性因子。然后令$\bar{k}$是$K$中在$k$上代数的元素构成的集合，从 \ref{iope}，它们构成一个环，进而是一个域。这就是我们需要的代数闭域。
\end{proof}

\section{Noether正规化与维数}

这节讲Noether正规化，几何来看，Noether正规化告诉我们一个仿射簇基本是一个仿射空间的“覆叠”。进而，仿射簇的维数应该与这个仿射空间相同。

\begin{pro}[Noether正规化引理]
设$R$是一个有限生成$k$-代数，则存在一个整数$d\geq 0$和一个$k$-代数单同态$k[t_1,\dots,t_d]\hookrightarrow R$使得$R$是有限生成$k[t_1,\dots,t_d]$-模。
\end{pro}

注意到，此时$R$在$k[t_1,\dots,t_d]$上整，因为任取$r\in R$，都有$k[t_1,\dots,t_d][r]$是有限生成的$k[t_1,\dots,t_d]$-模，作为Noether $k[t_1,\dots,t_d]$-模$R$的子模。

\begin{proof}
$R$可以写作$k[x_1,\dots,x_n]/\mathfrak a$. 我们对$n$进行归纳，对$n=0$或者$\mathfrak a=0$是平凡的。我们下面假设$n>0$且$\mathfrak a\neq 0$. 取一个非零的$f\in \mathfrak a$，写作
\[
	f=\sum_{\nu \in \mathbb N^n}\alpha_\nu x^\nu,
\]
我们可以通过适当重定义$x_i\mapsto x_i-x_n^{m_i}$，其中$i\neq n$且$m_i$是自然数，使得$f$作为$x_n$的多项式，$x_n$的最高次系数属于$k$. 注意，重定义并不会使得$k[x_1,\dots,x_n]$变化，即$k[x_1-x_n^{m_1},\dots,x_{n-1}-x_n^{m_{n-1}},x_n]=k[x_1,\dots,x_n]$. 这是一个纯粹的几何问题，每项非零的$\alpha_\nu x^\nu$都会产生一项$\alpha_\nu x_n^{(m,\nu)}$，这里的$(m,\nu)$是$(m_1,\dots,m_{n-1},1)$和$(\nu_1,\dots,\nu_n)$的内积。所以只要$m$保证一个严格极大值的存在即可，这样的$m$显然存在，因为非零的$\alpha_\nu$有限。

现在，考虑$R$的子代数$S=k[x_1,\dots,x_{n-1}]/(\mathfrak a\cap k[x_1,\dots,x_{n-1}])$，则$R$是一个有限生成$S$-模。实际上，唯一可能造成不有限生成的$x_n$满足一个$k[x_1,\dots,x_{n-1}]$系数多项式方程$f(x_n)=0$. 进而，从归纳假设，存在一个$k$-代数单同态$k[t_1,\dots,t_d]\hookrightarrow S$. 于是，复合$k[t_1,\dots,t_d]\hookrightarrow S\hookrightarrow R$就是想要的$k$-代数单同态。
\end{proof}

下面我们再给一个Zariksi引理的证明。

\begin{coro}[Zariski引理]
一个有限生成$k$-代数如果是域，则其为有限维$k$-矢量空间。
\end{coro}

\begin{proof}
我们只要证明$d=0$. 若$d>0$，则$t_1$的像$r_1$的逆$1/r_1$满足一个首一多项式方程$r_1^{-n}+r_1^{-n+1}p_1(r)+\cdots=0$，两边乘以$r_1^{n-1}$，就得到$1/r_1\in k[r_1,\dots]$，这与$k[r_1,\dots]$是多项式环矛盾。
\end{proof}

几何上，Noether正规化引理告诉了我们如何对有限生成$k$-代数定义其维度。考虑最简单的多项式环$k[x_1,\dots,x_n]$，这里要求$k$是代数闭域，则我们注意到，$k[x_1,\dots,x_n]$的极大理想一一对应着$k^n$中的每一个点（详见后面的章节），进而，对$k[x_1,\dots,x_n]$，我们定义其维度为$n$. Noether正规化引理告诉我们，每一个有限生成$k$-代数都包含了一个多项式环$k[x_1,\dots,x_d]$，并且在这个多项式环上，是一个有限生成模，于是我们可以定义这个有限生成$k$-代数的维度为$d$. 但对于不是有限生成$k$-代数的交换环，它们的维数如何定义呢？

\begin{para}[维数]
设$R$是一个环，素理想链$\mathfrak p_0\subset \mathfrak p_1\subset \cdots \subset \mathfrak p_k$的长度我们定义为$k$. 则$R$的维数（Krull维数）定义为$R$中素理想链的长度的上确界，若上确界不存在则定义为是无限维。对每个素理想$\mathfrak p$，$R_{\mathfrak p}$的维数被称为$\mathfrak p$的高度，记作$\operatorname{ht}(\mathfrak p)$. 等价地，$\operatorname{ht}(\mathfrak p)$即包含在$\mathfrak p$中素理想链的长度的上确界。
\end{para}

\begin{pro}
设$R$是一个Noether环，则$\dim R=0$当且仅当$R$是一个Artin环。
\end{pro}

\begin{proof}
注意到$\dim R=0$等价于$R$的任意素理想都是极大理想，于是这是Proposition \ref{pro:3.4.16} 的直接应用。
\end{proof}


\begin{lem}[Krull]
令$R$是一个Noether环，$\mathfrak a$是一个理想，而$M$是一个有限生成$R$-模，则$\bigcap_{n\geq 0}\mathfrak a^nM$就是$M$中满足$(1+a)x=0$的所有$x$的几何，其中$a\in \mathfrak a$.
\end{lem}

\begin{proof}
如果$(1+a)x=0$，则$x=-ax$，所以$x\in \mathfrak a^n M$对任何$n\geq 0$都成立。反过来，如果$x \in \bigcap_{n\geq 0}\mathfrak a^nM$，我们对$\langle x\rangle$应用Proposition \ref{artin-rees}，则对足够大的$n$都有$\mathfrak a^n M\cap \langle x\rangle \subset \mathfrak a \langle x\rangle$. 于是$x\in \mathfrak a \langle x\rangle=x\mathfrak a$，此即所需。
\end{proof}

\begin{thm}[Krull主理想定理]
令$R$是一个Noether环，而$r\in R$不可逆，再令$\mathfrak p$为包含$r$的素理想集中的一个极小元，则$\operatorname{ht}(\mathfrak p)\leq 1$.
\end{thm}

\begin{proof}
我们可以局部化之，此时$\mathfrak p$是极大理想。如有必要，还可以模去一个极小素理想，此时，我们还可以假设$R$是整环，于是我们要证明，素理想$\mathfrak q$如果真包含在$\mathfrak p$中，则$\mathfrak q = 0$.

首先，从假设，可以看到$\dim R/\langle r\rangle=0$，所以这是一个Artin环。考虑降链$\{\mathfrak q_n:=\mathfrak q^n R_r\cap R\}$，它在$R/\langle r\rangle$中的像稳定，所以对于足够大的$n$有
$\mathfrak q_n\subset \mathfrak q_{n+1}+\langle r\rangle$. 
对足够大的$n$，令$x\in \mathfrak q_n$，则存在一个$y\in R$使得$x-ry\in \mathfrak q_{n+1}\subset \mathfrak q_n$. 于是$ry\in \mathfrak q_n$，进而$y \in \mathfrak q_n$.
所以，$\mathfrak q_n\subset \mathfrak q_{n+1}+f\mathfrak{q_n}\subset \mathfrak q_{n+1}+\mathfrak p \mathfrak q_n$. 于是，Nakayama引理告诉我们，$\mathfrak q_n=\mathfrak q_{n+1}$. 因为$\mathfrak q_n R_r=\mathfrak q^n R_r$，于是我们有
\[
	\mathfrak q^n R_r=\bigcap_{k\geq n}\mathfrak q^n R_r=0,
\]
利用上面的Krull引理，我们立刻得到$\mathfrak q=0$.
\end{proof}

\section{Jacobson环}

\begin{para}[Jacobson环]
	Jacobson环即是指每个素理想都是一族极大理想的交的一个环。此时，每个素理想也是所有包含他的极大理想的交。从商环的理想的结构，可知Jacobson环的商环还是一个Jacobson环。
\end{para}

域显然是一个Jacobson环，因为$(0)$是唯一的理想、素理想、极大理想。

\begin{lem}
	如果$k$是一个域，$k[x]$是Jacobson环。
\end{lem}

\begin{proof}
	$k[x]$是主理想整环，所以每个非零素理想都是极大理想。只要证明$(0)$是非零素理想的交即可。由于$k[x]$是唯一分解整环，它的每一个非零元素$f$都可以分解成唯一的几个素元的乘积，即$f$只可能同时处于有限个素理想之中。所以只要素理想有无数个，则所有素理想的交就不能有非零元。而这是古希腊人就知道的结论：假设素元有有限个，记作$p_1,\cdots,p_n$，则$1+p_1p_2\cdots p_n$不能被$p_1,\cdots,p_n$整除，也是素的，矛盾。
\end{proof}

\begin{pro}[Robinowitch's trick]
环$R$是Jacobson环，当且仅当，如果$R$的素理想$\pp$不是极大理想，则所有$R$中严格包含$\pp$的素理想的交为$\pp$.
\end{pro}

\begin{proof} $\Rightarrow$: 由于$R$是Jacobson环，所以$\pp$是一族包含它的极大理想的交。反证，如果所有严格包含$\pp$的素理想的交之中存在一个$a\not\in \pp$，则$a$属于所有包含$\pp$的极大理想，所以所有包含$\pp$的极大理想的交就不是$\pp$，矛盾。

$\Leftarrow$: 设$\pp$是$R$的一个素理想，令$\aaa$是所有包含$\pp$的极大理想的交，即证$\aaa=\pp$. 若不，取$a\in \aaa-\pp$，用Zorn引理，可以在不包含$a$但是包含$\pp$的所有理想中找到一个极大的，这是一个素理想，记作$\mathfrak{b}$. 由于$a$在所有包含$\pp$的极大理想里，所以$\mathfrak{b}$不是极大理想，严格包含$\mathfrak{b}$的所有素理想的交是$\mathfrak{b}$. 但是由构造，$\mathfrak{b}$是不包含$a$但是包含$\pp$的所有理想中极大的，这就意味着，严格包含$\mathfrak{b}$的素理想都包含$a$，矛盾。因此$\aaa=\pp$.\end{proof}

为了应用Robinowitch's trick，我们将它的一部分做适当改写。设$R$是一个环，而$\pp$是它的一个素理想，于是有整环$S=R/\pp$，以及其商域$K(S)$. 如果任意严格包含$\pp$的素理想都包含一个$a\not\in \pp$，设$a$在$S$中的像为$\bar{a}$，则有$S[x]/(x\bar{a}-1)\cong K(S)$.

\begin{proof} 显然，$S[x]/(x\bar{a}-1)$同构于$K(S)$中所有形如$\bar{b}/\bar{a}^n$的元素构成的子环$P$，并且它包含$S$，所以只要证明这是一个域即可。为此，可以选择考察$P$中所有的素理想，由于$P$是域的子环，所以$P$是整环，零理想是素理想。

设$\mathfrak{a}$是$P$的一个非零素理想，作为非零素理想的原像，$\mathfrak{a}\cap S$是$S$中的非零素理想，并且$\mathfrak{a}\cap S$并不包含$\bar{a}$，因为如果包含，则$1=\bar{a}\bar{a}^{-1}\in \mathfrak{a}$就推出$\mathfrak{a}$是单位理想。 但是由商环的结构，$S$中的任意非零素理想都包含$\bar{a}$，矛盾。所以$P$中没有非零素理想，因此零理想是唯一的素理想，也就是唯一的极大理想，因此$P$是一个域。\end{proof}

我们将$S[x]/(x\bar{a}-1)$在$K(S)$中对应的子环记作$S_a$，于是上述命题即：如果任意严格包含$\pp$的素理想都包含一个$a\not\in \pp$，则$S_a=K(S)$. 

\begin{pro}
设$S$是$R$的一个整扩张，$S$是Jacobson环当且仅当$R$是Jacobson环。
\end{pro}

\begin{proof}
	设$R$不是Jacobson环，则存在一个非极大的素理想$\pp\subset R$使得以及一个$r\in R-\pp$使得$(R/\pp)_r$是一个域。由于$S$在$R$上整，所以存在一个$\mathfrak{q}$使得$\mathfrak{q}\cap R=\pp$，并且$S/\mathfrak{q}$在$R/\pp$上整。由Proposition \ref{intfield}，$\pp$是极大理想当且仅当$\mathfrak{q}$是极大理想。所以$\mathfrak{q}$不是极大理想。

	任取$\bar{s}\in S/\mathfrak{q}$，则$\bar{s}\bar{r}^{-1}\in (S/\mathfrak{q})_r$，由于$\bar{s}$在$R/\pp$上整，所以满足一个首一多项式
	\[
	\bar{s}^n+\bar{a}_1\bar{s}^{n-1}+\cdots+ \bar{a}_n=0,
	\]
	其中系数属于$R/\pp$，两边乘以$\bar{r}^{-n}$后，就得到了一个$\bar{s}\bar{r}^{-1}$的首一多项式，系数属于$(R/\pp)_r$. 因此$(S/\mathfrak{q})_r$在$(R/\pp)_r$上整。由Proposition \ref{intfield}，$(R/\pp)_r$是一个域推出$(S/\mathfrak{q})_r$是一个域。因为$\mathfrak{q}$不是极大理想，利用Robinowitch's trick，我们就得到了$S$不是一个Jacobson环。

	以上的逆否即是：若$S$是Jacobson环，则$R$是Jacobson环。

	反过来，假设$\pp$是$S$的一个素理想，但不是极大理想，以及任意包含$\pp$的素理想都包含一个$s\not\in \pp$，那么我们知道$(S/\pp)_{s}=K(S/\pp)$. 并且，$\pp \cap R$不是$R$的极大理想。

	我们考虑包含关系$R/(R\cap \pp)\subset S/\pp\subset (S/\pp)_{s}$. 由于$S$在$R$上整，$S/\pp$在$R/(R\cap \pp)$上整。所以$\bar{s}\in S/\pp$满足首一多项式方程
	\[
	f(\bar{s})=\bar{s}^n+\bar{r}_1\bar{s}^{n-1}+\cdots+\bar{r}_n=0,
	\]
	可以假设$\bar{r}_n$不为零，因为$S/\pp$是整环。

	由于$(S/\pp)_{\bar{s}}$是域，所以
	\[
	\bar{s}^{-1}=-\bar{r}_n^{-1}(\bar{s}^{n-1}+\cdots+\bar{r}_{i_1}).
	\]
	其中$i_i$是$f$的次高级项的序数。通过将右侧的常数项移到左边再两边乘以$\bar{s}^{-1}$，可以得到
	\[
	\bar{s}^{-1}(\bar{s}^{-1}+\bar{r}_n^{-1}\bar{r}_{i_1})=-\bar{r}_n^{-1}(\bar{s}^{n-2}+\cdots+\bar{r}_{i_2}),
	\]
	其中$i_2$是$f$的第三高级项的序数。不断如此的进行下去，进行至多$n$次后，左边将得到一个$\bar{s}^{-1}$的首一多项式，系数属于$(R/(R\cap \pp))_{r}$，其中$\bar{r}$是$f$所有非零系数的乘积，右边将变成零。

	所以$(S/\pp)_{s}$在$(R/(R\cap \pp))_{r}$上整，由Proposition \ref{intfield}，$(R/(R\cap \pp))_{r}$是一个域。因为$R\cap \pp$不是极大理想，利用Robinowitch's trick，我们就得到了$S$不是一个Jacobson环。
\end{proof}

\begin{thm}
如果$R$是Jacobson环，则任意的有限生成$R$-代数$S$是Jacobson环。并且，任意的$S$的极大理想在$R$中的原像依然是极大理想。
\end{thm}

\begin{proof} 关于第一部分，可以去证明$R[x]$是Jacobson环，然后通过有限归纳就得到了$R[x_1,\dots,x_n]$也是Jacobson环，继而他的商环，即有限生成$R$-代数也是Jacobson环。

对于第二部分。假设$S=R[x_1,\dots,x_n]/\aaa$，$\mathfrak{n}$是$S$的极大理想，那么在$R[x_1,\dots,x_n]$中可以找到极大理想$\mm$，使得$\mm$是$S$中的$\mathfrak{n}$的原像，所以可以假设$S=R[x_1,\dots,x_n]$. 如果可以证明$R[x]$的极大理想$\mm$的原像$R\cap \mm$是极大理想，然后通过$R[x_1,\dots,x_{n}]=R[x_1,\dots,x_{n-1}][x_n]$，而由第一部分$R[x_1,\dots,x_{n-1}]$是Jacobson环，所以可以得到$\mm\cap R[x_1,\dots,x_{n-1}]$是极大理想，然后有限归纳就得到了$\mm \cap R$是一个极大理想。所以我们也将问题归结到了$S=R[x]$.

假设素理想$\pp\subset R[x]$不是极大理想，但所有严格包含$\pp$的素理想都包含一个$f\not\in \pp$. 那么考虑整环$R'=R[x]/\pp$的商域$K(R')=R'_f$以及
整环$R/(R\cap \pp)$的商域$k=K(R/(R\cap \pp))$，我们有如下包含关系
\[
	R/(R\cap \pp)\subset k \subset R'_{f}.
\]
因此$R'_f$可以自然地看成$k$的一个扩张，或者说$R'_f$是一个$k$-代数。

使用商同态的泛性质，由于$R'=R[x]/\pp$可以看成$(R/(R\cap \pp))[x]$的一个商环。如果$R\cap \pp$是极大理想，则$R/(R\cap \pp)[x]$作为域上的一元多项式环是一个Jacobson环，$R'$作为它的商环也是Jacobson环。$R'$是整环，所以$(0)$是素理想，$\bar{f}$作为$f$在$R'$中的像，包含于所有$R'$的非零素理想里，由Robinowitch's trick，矛盾。所以我们可以假设$R\cap \pp$不是$R$的极大理想。

由于$R'_f\cong R'[x]/(x\bar{f}-1)$，$R'_f$是一个有限生成$R'$-代数，而$R'$又是一个有限生成$R/(R\cap \pp)$-代数，所以$R'_{f}$也是一个有限生成$R/(R\cap \pp)$-代数。因此$R'_f$中的任意元素都可以写成$R/(R\cap \pp)$系数的多项式的形式，也自然是$k$-系数的多项式的形式，因此$R'_f$是一个有限生成$k$-代数。

$R'_f$是一个域，而且$R'_f$是一个有限生成$k$代数，Zariski引理告诉我们$R'_f$是一个有限扩张，因此$\bar{f}^{-1}\in R'_f$满足一个代数方程
\[
	\bar{a}_0\bar{f}^{-n}+\bar{a}_{1}\bar{f}^{-n+1}+\cdots+\bar{a}_n=0,
\]
系数属于$k$，将系数通分之后，可以假设系数属于$R/(R\cap \pp)$. 两边除以$\bar{a}_0$，我们就得到了一个首一多项式
\[
	\bar{f}^{-n}+\bar{a}_0^{-1}\bar{a}_{1}\bar{f}^{-n+1}+\cdots+\bar{a}_0^{-1}\bar{a}_n=0,
\]
系数属于$(R/(R\cap \pp))_{a_0}$，所以$\bar{f}^{-1}$在$(R/(R\cap \pp))_{a_0}$上整。

设$p$是$\pp$里面的一个非零多项式，再设$\bar{x}$是$x$在$R'$里面的像，由于
\[
	0=\bar{p}=p(\bar{x})=\bar{p}_0\bar{x}^n+\cdots+\bar{p}_n,
\]
其中系数在$R/(R\cap \pp)$中. 两边除以首项系数$\bar{p}_0$，得到一个系数在$(R/(R\cap \pp))_{\bar{p}_0}$中的首一多项式，因此$R'$在$(R/(R\cap \pp))_{p_0}$上整。

显然，$(R/(R\cap \pp))_{aa_0}\subset k$同时包含$(R/(R\cap \pp))_{a}$和$(R/(R\cap \pp))_{a_0}$，所以$R'_f$在$(R/(R\cap \pp))_{aa_0}$上整。因为$R'_f$是域，且$(R/(R\cap \pp))_{aa_0}$作为$k$的子环是整环，由Proposition \ref{intfield}，$(R/(R\cap \pp))_{aa_0}$也是域，故$(R/(R\cap \pp))_{aa_0}=k$.

但是$R$是Jacobson环，Robinowitch's trick告诉我们，如果$R\cap \pp$不是$R$中的极大理想，则不能有$(R/(R\cap \pp))_{aa_0}=k$. 矛盾。至此，命题第一部分证明完毕。下面证明第二部分，即极大理想的原像是极大理想。

假设$\mm$是$R[x]$的极大理想，但是$R\cap \mm$不是极大理想。同上，我们已经知道$R[x]/\mm$在$(R/(R\cap \mm))_{p_0}$上整，但是$R[x]/\mm$是域，由Proposition \ref{intfield}，$(R/(R\cap \mm))_{p_0}$是一个域，利用Robinowitch's trick，我们就知道这与$R$是一个Jacobson环矛盾。\end{proof}

作为推论，当$k$是一个域，有限生成$k$-代数是Jacobson环，这有时候被称为Hilbert's Nullstellensatz.

\begin{pro}
设$R$是一个环，$K$是一个有限生成$R$-代数，如果$K$是一个域，则$R$是Jacobson环当且仅当$K$在$R$上有限（即作为$R$-模是有限生成的）。
\end{pro}

当$R$是一个域，这个命题就变成了Zariski引理。

\begin{proof} 如果$K$在$R$上有限，即$K$作为$R$-模是有限生成的，所以$K$在$R$上整，$K$作为域是一个Jacobson环，所以$R$是一个Jacobson环。

反过来，如果$R$是一个Jacobson环，设定义$R$-代数结构的同态为$\varphi:R\to K$，由于$K$是有限生成$R$-代数，作为极大理想的原像，$\ker\varphi$是极大理想，所以有域$k=R/\ker\varphi$，以及单同态$k\to K$，这是一个域扩张。由于$K$是有限生成$R$-代数，所以也是有限生成$k$-代数。由Zariski引理，$K$是一个有限扩张，或者，作为$k$-模是有限生成的。因此，作为$R$-模也是有限生成的。\end{proof}

