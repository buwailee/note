\chapter{基本构造}
\ThisULCornerWallPaper{1}{../Pictures/4.png}

\section{极限与余极限}

\para 在很久以前，我们在有限积范畴上定义了所谓的对角函子。在这节，我们需要拓展这个概念。设$\mathcal{J}$是一个小范畴，$\mathcal{C}$是一个范畴，我们如下定义函子$\Delta:\mathcal{C}\to [\mathcal{J},\mathcal{C}]$：
\begin{itemize}
\item 任取$X$和$j\in \mathcal{J}$以及$\mathcal{J}$中的态射$\varphi$，我们定义$\Delta(X)(j)=X$且$\Delta(X)(\varphi)=\id_X$.
\item 对态射$\psi:X\to Y$，态射$\Delta\psi:\Delta(X)\to \Delta(Y)$这里应是一个自然变换，任取$j\in \mathcal{J}$，我们定义$\Delta\psi(j)=\psi$，它们都将$\Delta(X)(j)=X$映射成$\Delta(Y)(j)=Y$.
\end{itemize}

\para 设$I$是一个小范畴（即范畴对象的全体能够构成一个集合），我们称函子$D:I\to \mathcal{C}$为$\mathcal{C}$中的一个$I$-图，或者简略叫做图。对于$i\in I$，$D(i)$称为该图的一个顶点（经常改用下标写作$D_i$），而对任意的态射$\alpha_{ij}:i\to j$，态射$D(\alpha_{ij})$称为该图的一条边。

作为例子，当$I$是一个指标集，即不同的$i$, $j\in I$之间不存在态射时，一个$I$-图就是一族以$I$为指标集的对象。此外，给定小范畴$I$及任取$X\in \mathcal{C}$，$\Delta X$就是一个$I$-图。

\para 这里考虑$I$-图之间的自然变换（因为它们是函子）。设$I$是一个小范畴，$\mathcal{C}$是一个范畴，而$D:I\to \mathcal{C}$是$\mathcal{C}$上的一个$I$-图。

给定$X\in\mathcal{C}$，现在考虑$\varphi\in [I,\mathcal{C}](\Delta X,D)$，它可以表为如下的交换图
\[
	\xymatrix{
		X\ar@{=}[rr]\ar[d]_{\varphi(i)}&&X\ar[d]^{\varphi(j)}\\
		D(i)\ar[rr]^-{D(\alpha_{ij})}&&D(j)
	}
\]
其中$i$, $j\in I$以及$\alpha_{ij}:i\to j$任意。通常，我们会把交换图画成
\[
	\xymatrix{
		&X\ar[dl]_{\varphi(i)}\ar[dr]^{\varphi(j)}&\\
		D(i)\ar[rr]^-{D(\alpha_{ij})}&&D(j)
	}
\]
此时，自然变换$\varphi$被称为$I$-图$D$的一个以$X$为顶点的\idx{锥形}。

\para 设$I$是一个小范畴，$\mathcal{C}$是一个范畴，而$D:I\to \mathcal{C}$是$\mathcal{C}$上的一个$I$-图。现在考虑反变函子
\[
	X\mapsto [I,\mathcal{C}](\Delta X,D):\mathcal{C}^{\text{op}}\to \mathsf{Set},
\]
如果他是可表的，则称$I$-图$D$存在极限，其表示对象记作${\varprojlim}_{i\in I} D(i)$，他被称为$I$-图$D$的\idx{极限}。从表示函子的知识可知，如果极限存在，则它在同构意义上唯一。

现在，我们来考察可表条件。为方便起见，我们记$A={\varprojlim}_{i\in I} D(i)$. 可表条件就是说存在同构$\lambda:h_{A}\to [I,\mathcal{C}](\Delta -,D)$. 具体到$X$，即存在同构
\[
	\lambda(X):\mathcal{C}\left(X,{\varprojlim}_{i\in I} D(i)\right)\to [I,\mathcal{C}](\Delta X,D).
\]
他就是在说，任取映射$f:X\to {\varprojlim}_{i\in I} D(i)$，都存在一个锥形$\mu=\lambda(X)(f):\Delta X\to D$. 反之亦然，因此，我们可以用如下的泛性质来表述这个事实：
\[
	\xymatrix{
		&&D(i)\ar[dd]^{D(\alpha_{ij})}\\
		X\ar@{.>}[r]|-{f}\ar@/^/[rru]^-{\mu(i)}\ar@/_/[rrd]_{\mu(j)}&{\varprojlim}_{i\in I} D(i)\ar[ru]\ar[rd]&\\
		&&D(j)
	}
\]
途中略去的箭头是极限自带的态射族，即锥形$\lambda(A)(\id_A)$，虚线代表唯一存在（来自于态射族之间的同构）。

可以看到，如果$I$-图$D$的极限$A$存在，我们都有一个固有的锥形$\lambda(A)(\id_A)$. 通常地，我们会将这个锥形定义成极限，并且，将锥形$\mu$记作$(A,\mu)$的形式，其中$A$是顶点。此时，极限可以定义为：设$(A,\lambda)$是一个锥形，如果对于任意的锥形$(X,\mu)$，都存在唯一的态射$f:X\to A$使得如下分解$\mu(j):X\xrightarrow{f}A\xrightarrow{\lambda(j)}D(i)$成立，则锥形$\lambda$被称为$I$-图$D$的极限。这个定义的直观化即上面的交换图。

作为例子，一族集合的直积是一个极限。设$\{X_i\,:\, i\in I\}$是一族集合，它的直积记作$\prod_{i\in I}X_i$，且到每个分量都有一个投影函数$\pi_i:\prod_{i\in I}X_i\to X_i$. 这两个数据构成了这一族集合的极限。

\begin{para}
锥形和极限都有对偶的概念，在交换图中，无外乎就是将箭头完全反过来。余极限定义为函子
\[
	X\mapsto [I,\mathcal{C}](D,\Delta X):\mathcal{C}\to \mathsf{Set}
\]
的表示对象。对$\lambda\in [I,\mathcal{C}](D,\Delta X)$，他是一个形如
\[
	\xymatrix{
		&X&\\
		D(i)\ar[rr]^-{D(\alpha_{ij})}\ar[ur]^{\varphi(i)}&&D(j)\ar[ul]_{\varphi(j)}
	}
\]
的交换图，他被称为$I$-图的一个\idx{余锥形}，类似锥形，我们会特别写出其顶点$X$，将其记作$(X,\lambda)$.

称呼一个余锥形$(A,\lambda)$是$I$-图的一个{余极限}，如果对于任意的余锥形$(B,\mu)$，都存在唯一的态射$f:A\to B$使得如下分解$\mu(j):D(i)\xrightarrow{\lambda(j)}A\xrightarrow{f}B$成立。一般将$I$-图$D$的余极限写作${\varinjlim}_{i\in I} D(i)$. 类似极限，如果余极限存在，则它在同构意义上唯一。
\end{para}

\begin{pro}\label{homlimit}
设$\mathcal{C}$是一个范畴，而$I$是一个小范畴，再设$X:i\mapsto X_i$是一个$I$-图，如果极限与余极限存在，则有自然同构
\[
	{\varprojlim} \mathcal{C}(-,X_i)\cong \mathcal{C}\left(-,{\varprojlim} X_i\right),\quad {\varprojlim} \mathcal{C}(X_i,-)\cong  \mathcal{C}\left({\varinjlim} X_i,-\right)
\]
其中极限与余极限都是对$I$-图进行的。
\end{pro}

\begin{proof}
	仅证第一点，第二点是类似的。从极限的定义，我们知道
	\[
	\mathcal{C}\left(-,{\varprojlim}_i X_i\right)\cong [I,\mathcal{C}](\Delta -,X),
	\]
	所以只要证明
	\[
	[I,\mathcal{C}](\Delta -,X)\cong {\varprojlim}_i \mathcal{C}(-,X_i).
	\]

	给定$Y$. 我们下面构造同构$\alpha(Y):[I,\mathcal{C}](\Delta Y,X)\to {\varprojlim}_i \mathcal{C}(Y,X_i)$. 首先任取锥形$(Y,\mu)\in [I,\mathcal{C}](\Delta Y,X)$，以及集合范畴里面的一个单元素集$\{*\}$，定义映射$h(i):*\mapsto \mu(i)$，于是我们就有了映射$h(i):\{*\}\to \mathcal{C}(Y,X_i)$，不难验证，它构成了一个锥形
	\[
		\xymatrix{
			&\{*\} \ar[dl]_{h(i)}\ar[dr]^{h(j)}&\\
			\mathcal{C}(Y,X_i)\ar[rr]^{X(\alpha_{ij})_*}&&\mathcal{C}(Y,X_j)
		}
	\]
	因为$X(\alpha_{ij})_*(h(i))(*)=X(\alpha_{ij})\circ h(i)(*)=X(\alpha_{ij})\circ \mu(i)=\mu(j)=h(j)(*)$.

	由${\varprojlim}_i \mathcal{C}(Y,X_i)$的泛性质，我们可以知道，从$\{*\}$到${\varprojlim}_i \mathcal{C}(Y,X_i)$有唯一的映射$h_\mu$，使得分解
	\[
	h(i):\{*\}\xrightarrow{h_\mu} {\varprojlim}_i \mathcal{C}(Y,X_i) \xrightarrow{p(i)} \mathcal{C}(Y,X_i)
	\]
	成立，其中$p(i)$是极限自带的映射。现在我们定义$\alpha(Y)(\mu)=h_\mu(*)$.

	现在我们来直接构造$\alpha(Y)$的逆映射$\beta(Y):{\varprojlim}_i \mathcal{C}(Y,X_i)\to [I,\mathcal{C}](\Delta Y,X)$. 任取$a\in {\varprojlim}_i \mathcal{C}(Y,X_i)$，设$p(i):{\varprojlim}_i \mathcal{C}(Y,X_i)\to \mathcal{C}(Y,X_i)$是极限自带的映射，则$p(i)(a)\in \mathcal{C}(Y,X_i)$. 由于$X(\alpha_{ij})\circ (p(i)(a))=p(j)(a)$，所以我们有锥形
	\[
		\xymatrix{
			&Y \ar[dl]_{p(i)(a)}\ar[dr]^{p(j)(a)}&\\
			X_i\ar[rr]^{X(\alpha_{ij})}&&X_j
		}
	\]
	记这个锥形为$\mu_a$，我们定义$\beta(Y)(a)=\mu_a$.

	不难验证$\alpha(Y)(\mu_a)=a$. 实际上$\mu_a(i)=p(i)(a)$，因此$h(i)(*)=p(i)(a)$. 定义$h_{\mu_a}(*)=a$，则分解
	\[
	h(i):\{*\}\xrightarrow{h_{\mu_a}} {\varprojlim}_i \mathcal{C}(Y,X_i) \to \mathcal{C}(Y,X_i)
	\]
	成立。由$h_{\mu_a}$的唯一性，我们知道$\alpha(Y)(\mu_a)=a$. 反过来，不难验证$\beta(Y)(h_\mu(*))=\mu$. 实际上，令$\beta(Y)(h_\mu(*))=\lambda$，则$\lambda(i)=p(i)(h_\mu(*))=h(i)(*)=\mu(i)$. 所以$\lambda=\mu$. 综上，$\alpha(Y)$和$\beta(Y)$互逆。

	最后，可以直接检验$\alpha(Y)$和$\beta(Y)$是自然变换。
\end{proof}

极限很好地抽象了许多有用的概念，我们列一些在下面。

\begin{para}[终对象与始对象]
没有对象以及态射的范畴，我们记作$\varnothing$. 考虑任意范畴$\mathcal{C}$，$\mathcal{C}$中$\varnothing$-图的极限就是所谓的\idx{终对象}. 对偶地，有\idx{始对象}。由极限的唯一性，可知一个范畴中终对象和始对象在同构意义下是唯一的。

如果用泛性质来表述：若$X\in \mathcal{C}$满足任意的$Y\in \mathcal{C}$都有唯一的态射$Y\to X$，则称$X$是一个终对象。反过来，如果任取$Y\in \mathcal{C}$都有唯一的态射$X\to Y$，则称$X$是一个始对象。

如果一个对象即是始对象又是终对象，则称它是一个零对象。零对象往往会记作$0$，从零对象出发或者到零对象的唯一态射也会被记作$0$.

始对象和终对象是不一定存在的，比如在域构成的范畴中，没有始对象与终对象。在集合范畴，始对象是任意单点集，而终对象是空集。在左$R$-模范畴中，零模$0$是零对象。
\end{para}

\begin{para}[积与余积]
设$I$是一个集合，如果附加上所有的恒等态射，则$I$构成一个范畴。考虑任意范畴$\mathcal{C}$，此时$\mathcal{C}$中$I$-图的极限就是所谓的\idx{积}. 对偶地，有\idx{余积}。由极限的唯一性，可知一个范畴中积和余积在同构意义下是唯一的。如果$I$是一个空集，则积变成终对象，而余积变成始对象。

考虑一个$I$-图$D$，$D(i)=D_i\in \mathcal{C}$，此时积往往记作$\prod_{i\in I} D_i$，对应着还有投影态射$p_i:\prod_{i\in I} D_i\to D_i$. 它可以用泛性质重新表示如下：设$X$是$\mathcal{C}$中的一个对象，他到每一个$D_i$都有一个态射$f_i$，则存在唯一的态射$f:X\to \prod_{i\in I} D_i$使得分解$p_if=f_i$对$i\in I$都成立。余积的泛性质也类似。

显然，集合的直积是一个积。

如果$I$是一个$n$元素集，则称$I$-图的极限为$n$元积。它们统称为有限积。有限积记作$X_1\times \cdots \times X_n$的形式。显然，存在二元积，就存在任意的有限积，为此，只需要检查$X_1\times (X_2\times (X_3 \times \cdots (X_{n-1}\times X_n)))$满足泛性质即可。
\end{para}

\begin{para}[等值子与余等值子]
考虑$\mathcal{J}$是这样一个范畴，它有两个对象，除了自己到自己的恒等态射外，两个对象之间还有同向的两个态射，我们记作$\xymatrix{\cdot\ar@<0.3ex>[r] \ar@<-0.3ex>[r]&\cdot}$. 设$D:\mathcal{J}\to\mathcal{C}$是一个协变函子，他将两个态射变为$f$, $g:X\to Y$，于是在$\mathcal{C}$中关于$J$-图$D$的极限就是对象$\mathrm{eq}(f,g)$以及态射$i:\mathrm{eq}(f,g)\to X$，满足：$fi=gi$，任取对象$A\in \mathcal{C}$以及态射$p:A\to X$使得$fp=gp$，则存在唯一的态射$h:A\to \mathrm{eq}(f,g)$使得下面的交换图成立：
\[
\begin{xy}
	\xymatrix{
		\mathrm{eq}(f,g)\ar[r]^-{i}&X\ar@<0.3ex>[r]^-{f} \ar@<-0.3ex>[r]_-{g}&Y\\
		A\ar@{.>}[u]^-{h}\ar[ur]_-{p}
	}
\end{xy}
\]

集合范畴的等值子很简单，设$f$, $g:X\to Y$是两个映射，则$\mathrm{eq}(f,g)=\{x\in X\,:\, f(x)=g(x)\}$. 不难检验，对于模范畴，$0$可以看成任意两个模之间的同态（比如看作左乘$0$），此时$\ker(f)=\mathrm{eq}(f,0)$. 

对偶地，可以定义余等值子，它使得如下交换图成立
\[
\begin{xy}
	\xymatrix{
		X\ar@<0.3ex>[r]^-{f} \ar@<-0.3ex>[r]_-{g}&Y\ar[r]^-{\pi}\ar[dr]_-{q}&\mathrm{coeq}(f,g)\ar@{.>}[d]^-{h}\\
		&&A
	}
\end{xy}
\]
类似地，在模范畴里面，$\coker(f)=\mathrm{coeq}(f,0)$.
\end{para}

\begin{para}[纤维积]
另一个极限的例子如下。考虑范畴$\mathcal{J}=\cdot \to \cdot \leftarrow \cdot$，即$\mathcal{J}$只有三个对象，除去恒等态射外，剩下的还有两边指向中间的态射。那么$\mathcal{J}$-图$X\xrightarrow{f} Z \xleftarrow{g} Y$的极限$X\times_Z Y$用泛性质表述就是如下交换图
\[
\begin{xy}
	\xymatrix{
		A\ar@/_/[rdd]\ar@/^/[drr]\ar@{.>}[dr]&&\\
		&X\times_Z Y\ar[d]_{\pi_2}\ar[r]_{\pi_1}&X\ar[d]^f\\
		&Y\ar[r]_g&Z
	}
\end{xy}
\]
这样的极限$X\times_Z Y$，被称为$X$, $Y$关于$Z$的\idx{纤维积}，或者叫\idx{拉回}。

如果$X=Y$，则我们回到了等值子的情况。假设$X$, $Y$和$Z$都是集合，不难检验，$X\times_Z Y=\{(x,y)\in X \times Y\,:\,f(x)=g(y)\in Z\}$. 于是若$Z$是单点集，则$X\times_Z Y=X\times Y$，若$X$和$Y$的子集，它们到$Z$都是标准的含入映射，则$X\times_Z Y=X\cap Y$.
\end{para}

下面几个引理试图给出以上几个特殊极限之间的关系。

\begin{lem}
如果范畴$\mathcal{C}$中二元积与等值子总存在，则在该范畴中纤维积也总存在。
\end{lem}

\begin{proof}
考虑$X\xrightarrow{f} Z \xleftarrow{g} Y$, $X\xleftarrow{p_X}X\times Y\xrightarrow{p_Y} Y$. 将$X\times_Z Y$定义为映射$fp_X$, $gp_Y: X\times Y\to Z$的等值子即可。
\end{proof}

\begin{lem}
如果范畴$\mathcal{C}$中纤维积与终对象总存在，当且仅当在该范畴中有限积和等值子总存在。
\end{lem}

\begin{proof}
从右往左从上一个引理是清楚的。现在只需要证从左往右的部分。终对象方便起见我们记作$0$，然后定义$X\times Y=X\times_0 Y$. 有了二元积和终对象，则所有的有限积也都存在了。

最后，考虑$f$, $g:X\to Y$. 连同$\id_X$和$\id_Y$，由积的泛性质，存在唯一的态射$\id_X\times f:X \to X\times Y$以及$\id_X\times g:X \to X\times Y$. 最后，考虑它们的纤维积
\[
\begin{xy}
	\xymatrix{
	X\times_{X\times Y} X\ar[d]_{\pi_2}\ar[r]^-{\pi_1}&X\ar[d]^{\id_X\times f}\\
	X\ar[r]_{\id_X\times g}& X\times Y
	}
\end{xy}
\]
$X\times_{X\times X} Y$即我们所求的等值子。实际上，
\[
	\pi_1=\id_X\pi_1=p_1(\id_X\times f)\pi_1=p_1(\id_X\times g)\pi_2=\pi_2,
\]
\[
	f\pi_1=p_2(\id_X\times f)\pi_1=p_2(\id_X\times g)\pi_2=g\pi_2=g\pi_1.
\]
再由纤维积的泛性质就给出了等值子的泛性质。
\end{proof}

\begin{para}
一个范畴中，如果对象与态射都是有限的，则称这个范畴是有限范畴。有限范畴的图的极限被称为有限极限。如果一个范畴中任意（有限）极限都存在，则称这个范畴是（有限）完备的。
\end{para}

下一个定理告诉我们，只需要积和等值子这俩个特殊的极限存在，则任意极限都存在。

\begin{thm}
设$\mathcal{C}$是一个范畴，则以下命题等价：
\begin{compactenum}[~~~~(1)]
\item $\mathcal{C}$是（有限）完备的。
\item $\mathcal{C}$中的（有限）积与等值子总存在。
\end{compactenum}
\end{thm}

在有限完备的情况下，第二点可以替换为存在任意纤维积与终对象。

\section{准加性范畴与正合列}

\begin{para}
设$\mathcal{C}$是一个范畴，如果函子$\mathcal{C}(-,*)$是一个从$\mathcal{C}^\text{op}\times \mathcal{C}$到交换群范畴$\mathsf{Ab}$的函子，则称范畴$\mathcal{C}$是一个准加性范畴，有些时候也叫做$\mathsf{Ab}$-范畴。模范畴显然是一个准加性范畴。

对于准加性范畴$\mathcal{C}$，$\mathcal{C}(X,Y)$是一个交换群，交换群的运算我们一如既往写作加法。这就意味着，在$\mathcal{C}(X,Y)$中至少存在一个零元，我们称为零态射，统统记作$0$. 注意，此时$0$的定义域和值域需要看语境确定。

同时，任取$f:Y_1\to Y_2$，则$\mathcal{C}(X,f):\mathcal{C}(X,Y_1)\to \mathcal{C}(X,Y_2)$是一个交换群同态。因此，$f(g+h)=fg+fh$. 同理，右复合也满足这样的“分配律”。应用到零元上，我们有$f0=0$以及$0f=0$.
\end{para}

注意，虽然这里的零态射总是似乎在暗示我们存在一个零对象，可事实并非如此。考虑域的范畴，他显然是一个准加性范畴，但却没有零对象。

如果准加性范畴$\mathcal{C}$中有一个零对象$0$，则对任意的$X$, $Y\in\mathcal{C}$，我们都有唯一的态射$0': X\to 0 \to Y$. 很自然的想法是$0=0'$，即零态射是相同的，而这也是正确的。实际上，由于$\mathcal{C}(X,0)$是单点集，此时$0=0':X\to 0$. 因此$0':X\xrightarrow{0'=0} 0\xrightarrow{0'}Y$给出了$0'=0'0=0$.

\begin{para}
在准加性范畴$\mathcal{C}$中，定义$\ker(f)=\mathrm{eq}(f,0)$以及$\coker(f)=\mathrm{coeq}(f,0)$. 注意到，作为极限或者余极限，实际上，除了对象外，还有一个态射。比如，对$f:M\to N$有一个态射$\pi_f:N\to \coker(f)$，这是构成余核的一个资料。再比如，对于$\ker f$，就有一个态射$i_f:\ker f\to M$. 因此，谈论两个核是同构的时候，不应只认为存在同构$\varphi:\ker(f)_1\to \ker(f)_2$，还应把极限包含的态射拿进来一起看，即满足如下交换图
\[
\begin{xy}
	\xymatrix{
	\ker(f)_1\ar[d]_{\varphi}\ar[r]^{i_1} &X\\
	\ker(f)_1\ar[ru]^{i_1}
	}
\end{xy}
\]
余核也是类似的。

作为例子，设$0:X\to Y$是零态射，通过直接验证泛性质，可知$\ker(0)=X$以及$i_0=\id_X$.
\end{para}

在准加性范畴中，核与余核与单态满态联系密切。

\begin{lem}
设$\mathcal{C}$是一个准加性范畴，而$f:X\to Y$是其中的一个态射，如果$\ker f$存在，则$i_f:\ker f\to X$是一个单态。对偶地，如果$\coker f$存在，则$\pi_f:Y\to\coker(f)$是一个满态。
\end{lem}

\begin{proof}
对偶的论断是对偶原理保证的。任取$g_1$, $g_2:Z\to \ker(f)$，对$i_fg_1=i_fg_2=k:Z\to X$，由$\ker$的泛性质，存在唯一的态射$g:Z\to \ker(f)$使得分解$i_fg_1=i_fg_2=i_fg$成立。由分解的唯一性，则$g_1=g=g_2$.
\end{proof}

\begin{lem}
设$\mathcal{C}$是一个准加性范畴，且存在零对象$0$. 如果$0:X\to Y$是一个单态，则$X=0$. 如果$0:X\to Y$是一个满态，则$Y=0$.
\end{lem}

\begin{proof}
由$0\id_X =00=0$，单态的左可消性保证了第一点。由$\id_Y =00=0$，满态的右可消性保证了第二点。
\end{proof}

\begin{para}
再一个抽象的例子，考察复合态射的核。设$f:X\to Y$以及$g:Y\to Z$是两个态射，那么按照在模范畴中的直觉，应当有一个单同态$h:\ker(f)\hookrightarrow \ker(gf)$. 放到范畴里，这也是正确的，只不过应该把单同态改成单态。存在性是由$\ker(gf)$的泛性质保证的，并且成立分解$i_f=i_{gf}h$，如果$hk_1=hk_2$，则$i_fk_1=i_fk_2$，因为$i_f$是单态，所以$k_1=k_2$. 于是$h$是单态。
\end{para}

\begin{para}
类比熟知的$\coker f$的定义$N/\im f$，可以定义$\im f=\ker\left(\pi_f\right)$. 

为使得这个定义是良定的，我们需要证明选取不同的$\pi_f$，我们将得到同构的$\im f$. 为此，如果选取不同的$\pi_1$和$\pi_2$，则我们存在同构$\psi$使得$\pi_2=\psi\pi_1$. 由上一段，可知存在单态$h:\ker(\pi_1)\hookrightarrow \ker(\pi_2)$，同理$\pi_1=\psi^{-1}\pi_2$给出了单态$k:\ker(\pi_2)\hookrightarrow \ker(\pi_1)$，直接的验证将给出$h$和$k$是互逆的一对态射。这就是我们需要的同构。
\end{para}

由于$\pi_f f=0$，所以由$\ker$的泛性质，我们得到了唯一的态射$M\to \im f$，这个态射往往依旧记作$f$.

\begin{pro}
设$\mathcal{C}$是一个准加性范畴，如果$\mathcal{C}$中含有零对象$0$，则
\begin{compactenum}[~~~(1)]
\item $f:X\to Y$是一个单态当且仅当$\ker(f)=0$.
\item $f:X\to Y$是一个满态当且仅当$\coker(f)=0$.
\end{compactenum}
\end{pro}

\begin{proof}
只证第一个，第二个是类似的。如果$f:X\to Y$是一个单态，考虑任意的$fg=0$，由于$f$是单态，所以$fg=0=f0$给出了$g=0$. 由此，不难检验$0$满足核的泛性质。

反过来，如果$\ker(f)=0$. 假设$fg_1=fg_2$或等价的$fh=f(g_1-g_2)=0$，其中$h=g_1-g_2$. 由于$\ker(f)=0$，由核的泛性质，存在唯一的态射$k$使得分解$h=0k$成立，于是$h=0$.
\end{proof}

% \para 设$R:\mathcal{C}\to \mathcal{D}$与$L:\mathcal{D}\to \mathbb{C}$是一对伴随函子，其中$R$是右伴随函子，而$L$是左伴随函子。此外，假设$\mathcal{C}$与$\mathcal{D}$中都有零对象$0$，并且假设$R(0)=0$以及$L(0)=0$对零对象与零态射都成立。由于右伴随函子与极限可交换，所以$R\mathrm{eq}(f,0)\cong \mathrm{eq}(Rf,0)$，或者说$R(\ker f)\cong \ker(Rf)$. 对偶地，$L(\coker g)\cong \coker(Lg)$.

首先回顾正合列的相关知识，我们这里从左$R$-模范畴中的正合列开始。若有一族同态$f_i:A_i\to A_{i+1}$满足$\im f_i=\ker f_{i+1}$，则列
\[
	\cdots \xrightarrow{f_{i-1}}A_i \xrightarrow{f_i} A_{i+1} \xrightarrow{f_{i+1}} A_{i+1}\xrightarrow{f_{i+1}}\cdots
\]
被称为正合的。

% \para 在模范畴里面，如果把核看成子模，核是唯一的：设$f:M\to N$是左$R$-模范畴的同态，$(\ker f,i)$显然是它的核，其中$i:\ker f\hookrightarrow M$. 类似地，如果有另一个核$(P,j)$，其中$P$是$M$的一个子模且$j:P\hookrightarrow M$. 由泛性质，存在唯一的同态$g:\ker f\to P$使得$j=ig$以及同态$h:P\to \ker f$使得$i=jh$. 任取$m\in \ker f$，可知$j(m)=i(g(m))=m\in M$，所以$g(m)=m\in M$，于是$g$就是普通的含入映射，进而$\ker f\subset P$，同理$P\subset \ker f$，所以$\ker f = P$以及$i=j$.

% \para 设$R:\mathcal{C}\to \mathcal{D}$是一个右伴随函子，范畴$\mathcal{C}$和$\mathcal{D}$中有零对象且任意态射的核与余核存在，此外$R$将零对象映成零对象，于是他也将零态射映射零态射。取$f:X\to Y$，因为$R$与$\ker$（作为极限）可以交换，所以$R(\im f)=R(\ker \pi_f)\cong \ker(R(\pi_f))$，其中$R(\pi_f):R(M)\to R(\coker(f))$. 另一方面，$\im(Rf)=\ker\left(\pi_{Rf}\right)$. 因此，考虑$\pi_{Rf}$与$R(\pi_{f})$的关系是有趣的。

% 由于交换图$\xymatrix{R(X)\ar@<0.3ex>[r]^{Rf} \ar@<-0.3ex>[r]_0&R(Y)\ar[r]-^{R(\pi_{f})}&R(\coker(f))}$成立，所以存在一个态射
% \[
% 	h:\coker(\pi_{R(f)})\to R(\coker(f))
% \]
% 使得分解$R(\pi_{f})=h\pi_{Rf}$成立，于是存在单态$\ker(\pi_{Rf})\hookrightarrow \ker(R(\pi_{f}))$，或者说存在单态$\im(Rf)\hookrightarrow R(\im f)$. 

\begin{pro}
设$0\to M_1\xrightarrow{f_1} M_2\xrightarrow{f_2} M_3$是一列左$R$-模的正合列，则函子$\Hom_R(N,-)$将给出$\mathbb{Z}$-模的正合列
\[
	0\to \Hom_R(N,M_1)\xrightarrow{(f_1)_*} \Hom_R(N,M_2)\xrightarrow{(f_2)_*} \Hom_R(N,M_3).
\]
\end{pro}

\begin{proof}
	首先，由于$0$是终对象，所以$\Hom_R(N,0)=0$，于是上面的列成立，且$f_2f_1=0$给出了$(f_2)_*(f_1)_*=(f_2f_1)_*=0_*=0$. 所以$\im ((f_1)_*)\subset \ker ((f_2)_*)$. 任取$g_1$, $g_2\in \Hom_R(N,M_1)$，$(f_1)_*(g_1)=(f_1)_*(g_2)$等价于$f_1g_1=f_1g_2$，由于$f_1$是单态，$g_1=g_2$，于是$(f_1)_*$是单射。最后只要检验$\ker ((f_2)_*)\subset \im ((f_1)_*)$. 任取$g\in \Hom_R(N,M_2)$使得$(f_2)_*g=f_2g=0$. 任取$n\in N$，$f_2(g(n))=0$给出$g(n)\in \ker(f_2)=\im(f_1)$，于是$g(N)\subset \im(f_1)$，由于$f_1:M_1\to \im(f_1)$是单同态，所以有同态$i=f_1^{-1}g\in \Hom_R(N,M_1)$使得$g=(f_1)_*(i)\in \im ((f_1)_*)$.
\end{proof}

\begin{pro}
如果$R$是一个从左$R$-模范畴到左$S$-模范畴的右伴随函子，对对象有$R(0)=0$，于是对态射有$R(0)=0$. 则对正合列$0\to M_1\xrightarrow{f_1} M_2\xrightarrow{f_2} M_3$，他将诱导一个正合列
\[
	0\to R(M_1)\xrightarrow{R(f_1)} R(M_2)\xrightarrow{R(f_2)} R(M_3).
\]
\end{pro}

\begin{proof}
	我们首先证明$R(f_1)$是一个单同态，或者说$\ker(R(f_1))=0$. 由于$\ker$是一种极限，右伴随函子与它可以交换，所以$\ker(R(f_1))\cong R(\ker f_1)=0$. 因此$R(f_1)$是一个单同态。粗略来说，右伴随函子把单同态变成单同态。于是考虑模$M$与它的子模$P$以及$i:P\hookrightarrow M$，于是单同态$R(i):R(P)\hookrightarrow M$就可以将$R(P)$看作$R(M)$的子模，当然更准确地说法是，我们有同构$R(i):R(P)\to R(i)(R(P))$. 

	现在设$f:M\to N$是一个普通的模同态，由于$R(i)\left(R(\ker f)\right)$与$\ker (R(f))$同构，于是他们都是$R(f)$的核，以及都是$R(M)$的子模，所以$R(i)\left(R(\ker f)\right)= \ker (R(f))$，或者说$R(i)$是$R(\ker f)$到$\ker(R(f))$的同构。

	最后，只要检验$\ker (R(f_2))=\im (R(f_1))$即可。由于$\ker f_2=\im f_1$，所以$R(\ker f_2)=R(\im f_1)$，因此存在同构$R(k):R(\im f_1)\to \ker (Rf_2)$.

	任取$a\in R(M_2)$使得$R(f_2)(a)=0$，由于存在唯一的$b\in R(\ker f_2)$使得$R(i)(b)=a$
\end{proof}

\section{模范畴中的极限与余极限}

\para 首先介绍模范畴里的积，他被称为直积。下面重新描述一下泛性质：设$\{M_i\,:\, i\in I\}$是一族左$R$-模，则存在一个左$R$-模$M$以及一族同态$\pi_i:M\to M_i$使得，如果存在另一个模$N$和一族同态$\rho_i:N\to M_i$，那么就唯一存在同态$\rho:N\to M$使得分解$\rho_i:N\xrightarrow{\rho} M \xrightarrow{\pi_i} M_i$成立对任意的$i\in I$都成立。这样的一个模$M$被称为$\{M_i\,:\, i\in I\}$的直积，而$\pi_i$被称为典范投影，通常将$M$记作$\prod_{i\in I}M_i$. 

存在性的证明是简单的，考虑$\{M_i\,:\, i\in I\}$作为集合的直积，很容易检验它有一个$R$-模结构，且投影是同态。更详细的检查这里就略去了。

\para 对偶地，这里描述一下模范畴里的余积，他就是直和。设$\{M_i\,:\, i\in I\}$是一族$R$-模，则存在一个$R$-模$M$以及一族同态$\pi_i:M_i\to M$使得，如果存在另一个模$N$和一族同态$\rho_i:M_i\to N$，那么就唯一存在同态$\rho:M\to N$使得分解$\rho_i:M_i\xrightarrow{\pi_i} M \xrightarrow{\rho} N$成立对任意的$i\in I$都成立。这样的一个模$M$被称为$\{M_i\,:\, i\in I\}$的直和，而$\pi_i$被称为典范内射，通常将$M$记作$\bigoplus_{i\in I}M_i$. 

直和存在性的构造并不如同直积那么容易。我们考虑$\{M_i\,:\, i\in I\}$的形式和$M$，即
\[
	M=\left\{\sum_{i\in I} a_i m_i\,:\, m_i\in M_i\right\},
\]
其中的求和只有有限项，或者说系数$a_i$只有有限项非零（这被称为几乎处处为零，注意到，如果没有拓扑，求和总应该是有限的）。不难看到这是一个模。定义$\pi_i:M_i\to M$为$\pi_i(m_i)=m_i$，可以检验这是一个模同态。

现在任取$N$和一族同态$\rho_i:M_i\to N$，我们将其扩展为$\rho_i:M\to N$通过补充定义$\rho_i(m)=0$，如果$m\notin M_i$. 随后我们定义$\rho = \sum_{i\in I} \rho_i$，需要检验这个求和对任意的$m\in M$是有限的。为此，任取$m\in M$，由于他可以分解成$m=\sum_i a_i m_i$，所以
\[
	\rho(m)=\sum_i a_i \rho_i(m_i),
\]
求和是有限求和因为$a_i$只有有限项非零。有了构造，泛性质的检验就是直接的了。

由构造，有限直和与有限直积在模范畴里面是等价的。考虑两个$R$-模$M_1$和$M_2$，那么$M_1$可以看成$M_1\oplus M_2$的子模，通过$m\to (m,0)$. 反过来，设$M_1$和$M_2$是一个模$M$的两个子模，则我们有如下短正合列
\[
	0\to M_1\cap M_2 \xrightarrow{\mu} M_1\oplus M_2\xrightarrow{\nu} M_1+M_2\to 0,
\]
其中$\mu:m\mapsto (m,m)$，$\nu:(m_1,m_2)\mapsto m_1-m_2$. 所以在$M_1\cap M_2=\{0\}$的时候，我们有同构$\nu: M_1\oplus M_2\to M_1+M_2$. 如果$M_1+M_2=M$，那么就是有同构$M\cong M_1\oplus M_2$.

\para 注意到交换群为$\zz$-模，所以我们也证明了交换群有直和与直积。

\para 前面已经看到，左$R$-模范畴内，$\ker(f)=\mathrm{eq}(f,0)$以及$\coker(f)=\mathrm{coeq}(f,0)$，存在性都是清楚的。更一般地，设$f$, $g:M\to N$是两个模同态，则
\[
	\mathrm{eq}(f,g)=\ker(f-g)
\]
就是等值子，而
\[
	\mathrm{coeq}(f,g)=\coker (f-g)
\]
就是余等值子。

\begin{thm}
在左$R$-模范畴，任意的极限与余极限存在。 \notprove
\end{thm}

\section{偏序集上的极限}

\para 回忆一下偏序集，设$I$是一个偏序集，偏序关系为$\leq$，那么通过定义态射
\[
	{I}\left(x,y\right)=\begin{cases}
	(x,y)&\text{, if }x\leq y\text{;}\\
	\varnothing&\text{, otherwise}.
	\end{cases}
\]
则$I$是一个小范畴，如果我们定义$x\geq y$当且仅当$y\leq x$，那么新的偏序集$(I,\geq)$就是偏序集$(I,\leq)$的对偶范畴，略去偏序符号，有时候会记作$I^{\mathrm{op}}$.

$D:I\to \mathcal{C}$是一个协变函子，就是对$i\leq j\leq k$成立$D(j\leq k)\circ D(i\leq j)=D(i\leq k)$，就是说从小到大有映射。反之，反变函子$D:I\to \mathcal{C}$对$i\leq j\leq k$成立$D(i\leq j)\circ D(j\leq k)=D(i\leq k)$，就是说从大到小有映射。

对于一个反变函子$D:I\to \mathcal{C}$，我们可以定义一个协变函子$D^{\mathrm{op}} :I^{\mathrm{op}}\to \mathcal{C}$通过$D^{\mathrm{op}}(j\geq i)=D(i\leq j)$，此时对$k\geq j\geq i$成立$D^{\mathrm{op}}(j\geq i)\circ D^{\mathrm{op}}(k\geq j)=D^{\mathrm{op}}(k\geq i)$，可见这确实是一个协变函子。

\para 设$I$是一个指标集，即只存在关系$x\leq x$. 此时构成的$I$-图的极限称为\idx{积}（\idx{product}），余极限称为\idx{余积}（\idx{coproduct}）。前面提到过的集合的直积就是一种积。

\para 称$I$是一个滤相的偏序集，即对于任意的$i$, $j\in I$都存在$k\in I$使得$k\leq i$和$k\leq j$同时成立。称$I$是一个定向的偏序集，即对于任意的$i$, $j\in I$都存在$k\in I$使得$i\leq k$和$j\leq k$同时成立。很容易看到，如果偏序集$I$是滤相的（定向的），那么$I^{\mathrm{op}}$就是定向的（滤相的），反之亦然。所以下面的讨论，将固定$I$是一个滤相偏序集，而$I^{\mathrm{op}}$则是一个定向偏序集。

作为例子，考虑拓扑空间中所有非空开集按照包含构成的偏序集，即$U\leq V$当且仅当$U\subset V$，那么这个偏序集是定向的，但不是滤相的，因为对于任意的$U$和$V$总有$U\leq U\cup V$和$V\leq U\cup V$成立，但对于不交的$U$和$V$，并不存在非空开集同时包含于他们其中。同样是拓扑的例子，考虑所有包含$p$的非空开集按照包含构成的偏序集，那么这个偏序集既是滤相的又是定向的。

\para 将滤相的（定向的）偏序集$I$看作一个范畴，对任意的范畴$\mathcal{C}$，如果一个$I$-图$D$，$D:I\to \mathcal{C}$是协变函子，则这称为一个$C$上的一个{逆系统}（{定向系统}）。对偶地，如果$D$是反变函子，那么$I^{\mathrm{op}}$-图$D^{\mathrm{op}}$是定向系统（逆系统）。

逆系统一般谈论极限${\varprojlim}_{i\in I} D(i)$，而定向系统一般谈论${\varinjlim}_{i\in I} D(i)$，为了思考这个原因，我们考虑如下交换图
\[
	\xymatrix{
		&A \ar[dl]_{\lambda_{i}}\ar[dr]^{\lambda_{j}}\ar[dd]^{\lambda_{k}}&\\
		D(i)&&D(i)\\
		&D(k)\ar[ul]^{D(k\leq i)}\ar[ur]_{D(k\leq j)}&
	}
	\quad
% \xymatrix{
% 	&A \ar[dl]_{\lambda_{i}}\ar[dr]^{\lambda_{j}}\ar[dd]^{\lambda_{k}}&\\
% 	D(i)\ar[dr]_{D(i\leq k)}&&D(i)\ar[dl]^{D(j\leq k)}\\
% 	&D(k)&
% }
	\xymatrix{
		&A &\\
		\ar[ur]^{\mu_{i}}D(i)\ar[dr]_{D(i\leq k)}&&D(i)\ar[ul]_{\mu_{j}}\ar[dl]^{D(j\leq k)}\\
		&D(k)\ar[uu]_{\mu_{k}}&
	}
\]
左边是对逆系统考虑锥形，右边是对定向系统考虑余锥形。从左边来看，如果$i\leq j\leq k$成立，则$D(k)$构成了一个锥形的顶点，当我们考虑极限的时候，这时候极限就应该表现得像那些“极小”的元素$D(k)$一样。而且如果$A$是极限，那么箭头$A\to D(k)$也构成了唯一分解。类似地考虑右边的图，那些“极大”的元素$D(k)$构成了余锥形的顶点，如果$A$是余极限，那么箭头$D(k)\to A$也构成了唯一分解。

\para 设$I$是一个偏序集，如果$i\in I$有，$i>j$对所有$j\in I$不成立，或者说，与可以比较的元素$j\in I$都有$i\leq j$，则称$i$是$I$的一个极小元。如果$i\leq j$对所有$j\in I$都成立，则称$i\in I$是$I$的最小元。

在滤相的偏序集中，极小元和最小元等价。最小元是极小的，这是显然的。反之，因为如果存在极小元$i$，那么任取一个$j\in I$都存在一个$k\in I$使得$k\leq i$和$k\leq j$都成立，然而$i$是极小元，所以$i=k$，所以$i\leq j$. 同理我们可以定义极大元与最大元，在定向的偏序集中，此二者等价。

更广义地，对于一个偏序集$I$的子集$J$，如果对于任意的$i\in I$，都存在$j\in J$使得$j\leq i$，则称$J$和$I$是共尾的。显然，滤相的偏序集中的极小元构成的单点集就和原来的偏序集共尾。

\begin{pro}
设$I$-图$D$是一个逆系统，如果$I$存在一个与其共尾的子集$J$，则$J$-图$D$是一个逆系统，且${\varprojlim}_{i\in I} D(i)={\varprojlim}_{i\in J} D(i)$. 对偶地，设$I$-图$D$是一个定向系统，如果$I^{\mathrm{op}} $存在一个与其共尾的子集$J^{\mathrm{op}} $，则$J$-图$D$是一个定向系统，且${\varinjlim}_{i\in I} D(i)={\varinjlim}_{i\in J} D(i)$. \notprove
\end{pro}

所以对于逆系统，如果存在极小元，那么极小元就是它的极限，对偶地，对于定向系统，如果存在极大元，那么极大元就是它的余极限。这符合我们上面的直观。

\para 一个拓扑空间$X$能被看成一个范畴，对象取作他的所有开集，而态射取作
\[
	{X}(U,V)=\begin{cases}
	\bigl\{i^U_V:U\hookrightarrow V\bigr\}&\text{, if }U\subset V\text{;}\\
	\varnothing&\text{, otherwise}.
	\end{cases}
\]

考虑拓扑空间$X$中一个非空开集族$\mathfrak{B}$，对于任意的两个$U$, $V\in \mathfrak{B}$，都存在一个$W\in \mathfrak{B}$使得$U\cup V\subset W$成立，这样的$\mathfrak{B}$按照包含构成了定向的偏序集。现在定义函子$i:\mathfrak{B}\to X$通过$i(U)=U$以及$i(U\leq V)=i^U_V:U\hookrightarrow V$，它显然成立复合$i(U\leq W)=i(V\leq W)\circ i(U\leq V)$，所以这个$\mathfrak{B}$-图$i$是一个定向系统。可以看到它的余极限${\varinjlim}_{U\in \mathfrak{B}} U$实际上就是$\bigcup_{U\in \mathfrak{B}} U$，而态射族就是$i_U:U\hookrightarrow \bigcup_{U\in \mathfrak{B}} U$.

同样考虑拓扑空间$X$中一个包含一个点$p\in X$的所有非空开集构成的族$\mathfrak{B}$，它按照包含构成一个滤相的偏序集。同样可以定义函子$i:\mathfrak{B}\to X$通过$i(U)=U$以及$i(U\leq V)=i^U_V:U\hookrightarrow V$，同样显然成立复合$i(U\leq W)=i(V\leq W)\circ i(U\leq V)$，所以这个$\mathfrak{B}$-图$i$是一个逆系统。但它的极限${\varprojlim}_{U\in \mathfrak{B}} U$就不一定存在，因为类比于上一个例子，它的极限应该类似于所有$\mathfrak{B}$中元素的交，但这不一定是一个开集。

\para 设我们有一个$X$上的$\mathcal{K}$-预层$\calf$，他是$X\to \mathcal{K}$的一个反变函子。赋予$X$一个偏序，此时函数$U\leq V$即$U\hookrightarrow V$. 那么$X$的那些包含$p\in X$的非空开集构成的子集族$\mathfrak{B}$继承了偏序结构，也是一个范畴，而预层$\calf$限制在$\mathfrak{B}$给出了反变函子$\mathfrak{B}\to \mathcal{K}$.

由于$\mathfrak{B}$是滤相的偏序集，而$\calf$是反变函子，因此$\mathfrak{B}^{\mathrm{op}}$-图$\calf^{\mathrm{op}}$是定向系统，进而我们会考虑余极限
\[
	{\varinjlim}_{U\in \mathfrak{B}^{\mathrm{op}}} \calf^{\mathrm{op}}(U)={\varinjlim}_{U\in \mathfrak{B}^{\mathrm{op}}} \calf(U),
\]
如果这个余极限存在，那么就称为预层$\calf$在点$p$处的纤维，记作$\calf_p$.

\section{自由对象}

一句话来概括自由对象，它是遗忘函子的左伴随函子的像，遗忘函子的左伴随函子称为自由函子，所以自由对象是自由函子作用在一个对象上得到的。何谓伴随函子？给定一个函子$f:\mathcal{C}\to \mathcal{D}$，它的伴随函子从某种程度上来说就是它的逆$g:\mathcal{D}\to \mathcal{C}$. 但是远不如逆那么强，准确来说，就是存在函子同态（自然变换）$\sigma:fg\to \id_{\mathcal{D}}$以及$\tau:\id_{\mathcal{C}}\to gf$使得自然变换的复合
\[
	f\xrightarrow{f\tau}fgf\xrightarrow{\sigma f}f,\quad g\xrightarrow{\tau g}gfg\xrightarrow{g\sigma}g
\]
都得到恒等自然变换。此时$f$被称为$g$的左伴随函子，$g$被称为$f$的右伴随函子，而$f$和$g$被称为一对函子。

% 稍微解释一下上面的复合条件。考虑$\mathcal{C}$中所有形如$g(Y)$的对象构成的类$g(\mathcal{D})$，选$g(\mathcal{D})$中对象之间的态射都形如$g(\varphi)$，则$g(\mathcal{D})$构成了$\mathcal{C}$的一个子范畴。类似地，我们有$\mathcal{D}$的子范畴$f(\mathcal{C})$. 它们就大概类似于函数的像。

% 于是$\tau$实际上就是一个从$\mathcal{C}$到$g(\mathcal{D})$的函子

以遗忘函子举例，如果一个函子$g:\mathcal{C}\to \mathsf{Set}$使得$\mathcal{C}$中的对象$X$忘掉了某代数结构，变成了集合$|X|$。那么怎么样的函子才是它的伴随函子？必然是一个赋予$\mathsf{Set}$中对象代数结构的函子$f$，但是从一个结构少的对象到结构多的对象，我们不一定能还原出$X$，比如我们忘掉了$2+4=6$，那么在从$|X|$赋予代数结构得到的$f(|X|)$中，只能把$2$, $4$, $6$单独处理，引入一个新的元素`$2+4$'来表示$f(|X|)$中$2+4$的结果，而不与$6$建立联系。所以$f(|X|)=f(g(X))$作为集合，即$g(f(g(X)))$，一般来说应该比$g(X)$大。那么如何使得$f(|X|)$回忆其原本的代数结构？最方便的，就是找一个态射$f(|X|)\to X$，这样`$2+4$'就映射到了$6$. 改变$X$，就得到了自然变换$\sigma:fg\to \id_\mathcal{C}$.

类似地，给定一个集合$S\in \mathsf{Set}$，生成一个$f(S)\in \mathcal{C}$. 为了满足代数结构，必须得添进去一些元素，比如要生成一个群，得添进去逆元。所以，作为集合，$S$是$g(f(S))$的子集，或者说存在映射$S\to g(f(S))$，改变$S$就得到了自然变换$\tau:\id_{\mathsf{Set}}\to gf$.

现在来审查条件
\[
	f\xrightarrow{f\tau}fgf\xrightarrow{\sigma f}f,\quad g\xrightarrow{\tau g}gfg\xrightarrow{g\sigma}g.
\]
设$S$是一个集合，则
\[
	f(S)\xrightarrow{f(\tau(S))}f(g(f(S)))\xrightarrow{\sigma(f(S))}f(S),
\]
其中$f(\tau(S))$意味着$f(S)$看成$f(g(f(S)))$的子对象，而$\sigma(f(S))$意味着从$f(g(f(S)))$回忆起$f(S)$的代数结构，他们的复合将得到$f(S)$. 另一个条件也是类似的，这里就不说了。

但是这个定义并不是最常用的，一般而言，我们会使用下面这个定义。

\para 设$f:\mathcal{C}\to \mathcal{D}$和$g:\mathcal{D}\to \mathcal{C}$是一对函子，如果对任意的$T\in\mathcal{C}$和$Y\in\mathcal{D}$存在自然同构
\[
	\alpha(T,Y):\mathcal{C}(T,g(Y))\to \mathcal{D}(f(T),Y),
\]
则$(f,g)$被称为一对\idx{伴随函子}（\idx{adjoint functor})。$f$被称为$g$的左伴随函子，$g$被称为$f$的右伴随函子。

固定$Y$，对$T$的那个自然同构说明$g(Y)$是反变函子$\mathcal{D}(f(\star),Y)$的表示对象。反过来其实也对，如果对每一个$Y$，反变函子$T\mapsto {\mathcal{D}}(f(T),Y)$都是可表的，则我们可以构造出他的一个右伴随函子。所以实际上，双函子同构可以减弱为对$T$的。下面我们证明这一点。

\begin{proof} 
	设$\mathcal{C}$和$\mathcal{D}$是两个范畴，而$f:\mathcal{C}\to \mathcal{D}$是一个函子。对于给定的$Y\in\mathcal{D}$，反变函子$T\mapsto {\mathcal{D}}(f(T),Y)$属于$\hat{\mathcal{C}}$. 如果他是可表函子，被$g(Y)$所表示，于是就有函子同构$\alpha(Y):h_{g(Y)}\to {\mathcal{D}}(f(\star),Y)$：给出$S$, $T\in \mathcal{C}$以及同态$\psi:S\to T$，有交换图
	\[
	\begin{xy}
		\xymatrix{
			h_{g(Y)}(T)\ar[rr]^-{\alpha(Y,T)} \ar[d]_{\psi^*}&&{\mathcal{D}}(f(T),Y) \ar[d]^{f(\psi)^*}\\
			h_{g(Y)}(S)\ar[rr]^-{\alpha(Y,S)}&&{\mathcal{D}}(f(S),Y)
		}
	\end{xy}
	\]
	其中$\alpha(Y,T)$用来简记$\alpha(Y)(T)$. 任取$u:T\to {g(Y)}$，有$\alpha(Y,S)(u\psi)=\alpha(Y,T)(u)f(\psi)$. 特别地，当$T=g(Y)$时，取$u=\id_{g(Y)}$，记$\alpha(Y,g(Y))\bigl(\id_{g(Y)}\bigr)=\sigma_Y:f(g(Y))\to Y$，则$\alpha(Y,S)(\psi)=\sigma_Y f(\psi)$，其中$\psi:S\to g(Y)$.

	改变$Y$，即给出一个态射$v:Y\to Y'$，$g(v)=\alpha^{-1}{Y}\left(v\sigma_Y\right):g(Y)\to g(Y')$是一个态射。于是$g:Y\mapsto g(Y)$，以及$g:v\mapsto \alpha^{-1}_{g(Y)}\left(v\sigma_Y\right)$就构成了一个函子$g:\mathcal{D}\to \mathcal{C}$. 再记$\beta_T(Y)=\alpha(Y,T)$，对每一个$T$，$\beta_T$将给出了函子同构
	\[
		\beta_T:\mathcal{C}(T,g(\star))\to \mathcal{D}(f(T),\star).
	\]
	自然变换的检验是直接的。于是$\alpha(Y,T)$就是一个双函子同构。
\end{proof}

\begin{pro}
设$L:\mathcal{C}\to \mathcal{D}$是一个左伴随函子，而$R:\mathcal{D}\to \mathcal{C}$是一个右伴随函子。设有一个$\mathcal{C}$中的$I$-图$X:I\to \mathcal{C}$以及一个$\mathcal{D}$中的$J$-图$Y:J\to \mathcal{D}$，于是，$LX$是$\mathcal{D}$中的$I$-图，$RY$是$\mathcal{C}$中的一个$J$图，并且存在同构
\[
	L{\varinjlim}_{i\in I} X_i\cong {\varinjlim}_{i\in I} (LX_i),\quad
	R{\varprojlim}_{j\in J} Y_j\cong {\varprojlim}_{j\in J} (RY_j).
\]
\end{pro}

粗略来说，就是左伴随函子与余极限可交换，而右伴随函子与极限可交换。

\begin{proof}
	命题的证明是利用Yoneda引理，他有协变和反变两个版本：协变的是，如果函子$\mathcal{C}(X,-)$与函子$\mathcal{C}(X',-)$同构，则$X\cong X'$. 反变的是，如果函子$\mathcal{C}(-,X)$与函子$\mathcal{C}(-,X')$同构，则$X\cong X'$.

	由Proposition \eqref{homlimit}，我们知道如下函子同构
	\[
	\mathcal{C}\left(-,{\varprojlim} RX_i\right)\cong {\varprojlim} \mathcal{C}(-,RX_i),
	\]
	连同伴随函子的函子同构，有如下同构链
	\[
	\mathcal{C}\left(-,{\varprojlim} RX_i\right)\cong {\varprojlim} \mathcal{C}(-,RX_i)\cong {\varprojlim} \mathcal{D}(L-,X_i)\cong \mathcal{D}\left(L-,{\varprojlim} X_i\right)\cong \mathcal{C}\left(-,R{\varprojlim} X_i\right),
	\]
	所以${\varprojlim} RX_i\cong R{\varprojlim} X_i$.

	同样由Proposition \eqref{homlimit}，有如下函子同构
	\[
	\mathcal{D}\left({\varinjlim} LX_i,-\right)\cong {\varprojlim} \mathcal{D}(LX_i,-),
	\]
	连同伴随函子的函子同构，有如下同构链
	\[
	\mathcal{D}\left({\varinjlim} LX_i,-\right)\cong {\varprojlim} \mathcal{D}(LX_i,-)\cong {\varprojlim} \mathcal{C}(X_i,R-)\cong \mathcal{C}\left({\varinjlim} X_i,R-\right)\cong \mathcal{D}\left(L{\varinjlim} X_i,-\right),
	\]
	所以${\varinjlim} LX_i\cong L{\varinjlim} X_i$.
\end{proof}

\para 首先介绍$R$-模范畴的自由对象，遗忘函子是$R$-模到集合。设$I$是一个指标集，我们定义$R^I=\bigoplus_{i\in I}R$，他被称为自由$R$-模，或者当$R$是清楚地时候，称为自由模。自由模是$R$-模范畴的自由对象。从构造，检查是清楚的。

如果$I$是有限集，$n=|I|$，则我们通常将自由模$R^I$记作$R^n$. 记$1_i$为第$i$个指标的$R$中的$1$.

\para 设$M$是一个$R$-模，$S$是他的一个子集，称呼$M$被$S$生成，就是说$M$中的元素可以写成$S$中元素的有限线性组合。即任取$m\in M$，存在一个系数集$\{a_s\in R\,:\, s\in S\}$，其中只有有限个系数非零，使得
\[
	m=\sum_{s\in S}a_s s.
\]
称呼一个$R$-模$M$是有限生成的，就是说存在一个$M$的有限子集生成他。

显然$R^I$由$\{1_i\,:\,i\in I\}$生成，其中$1_i$代表的是第$i$个指标的$R$中的$1$，所以$R^n$是有限生成模。

\para 设$U$是一个集合，上面有乘法运算，满足结合律，这样的代数结构被称为\idx{半群}（\idx{semigroup}）. 如果半群含有乘法单位元，则称他为\idx{幺半群}（\idx{monoid}）. 群是特殊的幺半群，一个环除去加法结构也是一个幺半群。半群之间的同态依然定义为满足$f(ab)=f(a)f(b)$的映射$f$. 所以所有半群构成一个范畴，所有幺半群也构成一个范畴。

从幺半群到集合有自然的遗忘函子。反过来，下面从一个集合构造一个幺半群，这就构成了幺半群范畴的自由对象。

设$S$是一个集合，设$U(S)$作为集合是$S$中所有有限长序列（或者说有序组）的集合，其中空序列也看成有限长序列。对于序列$(a_1$, $\cdots$, $a_n)$，我们通常记作$a_1\cdots a_n$，将其称为一个字符串，而空字符串记作$1$. 两个字符串之间的乘法就定义成字符串的连接，即
\[
	(a_1\cdots a_n)(b_1\cdots b_m)=a_1\cdots a_nb_1\cdots b_m,
\]
空字符串因此自然地成为该乘法的单位元，结合律由构造也是显然的。因此$U(S)$就构成了一个幺半群，他被称为被$S$生成的自由幺半群。泛性质的检验是直接的。

自由交换幺半群的构造也是类似的，可以理解成所有有限长无序组，乘法定义为无序组的拼接。

\para 类似于幺半群，从集合$S$出发，可以构造自由群$G(S)$，他是群范畴的自由对象。首先从每个$s\in S$出发，新建一个符号$s^{-1}$，这样就有了一个新的集合$S^{-1}=\{s^{-1}\,:\, s\in S\}$. 然后考虑自由幺半群$U(S\cup S^{-1})$. 通过$\mu: ss^{-1}\mapsto 1$以及$\mu: s^{-1}s\mapsto 1$定义一个半群自同态$\mu:U(S\cup S^{-1})\to U(S\cup S^{-1})$，则我们需要的自由群$G(S)$就是$\mu$在$U(S\cup S^{-1})$中的像。$G(S)$确确实实是一个群的检验是直接的，这里略去。

上面这个构造也可以看成从一个幺半群构造一个群的过程，这点直接令$S$是一个幺半群即可。

\para 设$S$是群$G$的一个子集，考虑自由群$G(S)$，通过任取$s\in S$，$\mu(s)=s$将给给出一个群同态$\mu:S\mapsto G$，定义子群$\langle S\rangle=\mu(G(S))$，他被称为集合$S$生成的子群。

\para 当然也有不是到集合范畴的忘却函子，比如将一个交换群看成一个群的忘却函子。那么反过来，我们要从群构造一个交换群，这就构成了群的交换化的过程。这是上面那个忘却函子的自由对象。

设$G$是一个群，记$[G,G]$是$G$中所有形如$aba^{-1}b^{-1}$的元素构成的集合生成的子群。这是一个正规子群，任取$b\in G$，存在形如$aba^{-1}b^{-1}\in [G,G]$使得$(aba^{-1}b^{-1})b=aba^{-1}=b(b^{-1}aba^{-1})\in b[G,G]$，所以$[G,G]b=b[G,G]$. 考虑商群$G/[G,G]$，可以看到，这是一个交换群，因为在这个商群中，$aba^{-1}b^{-1}$和$e$看成是一样的，即$ab$和$ba$看成是一样的。

从一个集合$S$，可以构造自由群$G(S)$，然后将其交换化得到了一个交换群$A(S)=G(S)/[G(S),G(S)]$. 这被称为自由交换群，他是交换群范畴到集合范畴的遗忘函子伴随的自由对象。而这又可以通过看成自由$\mathbb{Z}$-模。

\section{张量积}

\para 张量抽象了多线性函数，尤其是双线性函数。设$A$是右$R$-模，$B$是左$R$-模，那么我们称$f:A\times B\to G$，其中$G$是一个交换群，为一个双线性函数，如果他满足
\[
	f(a+b,a')=f(a,a')+f(b,a'),\quad f(a,a'+b')=f(a,a')+f(a,b'),
\]
以及对$r\in R$满足$f(ar,b)=f(a,rb)$.

特别地，如果我们存在一个双线性函数$\varphi$，以及一个交换群$G$，使得每一个$A\times B$上的双线性函数$f:A\times B\to H$都可以唯一分解为
\[
	f:A\times B\xrightarrow{\varphi} G\xrightarrow{h_f}H,
\]
其中$h_f$对每一个双线性函数$f$存在且唯一，则称呼$G$为$A$与$B$的张量积，记做$A\otimes_R B$，而$\varphi(a,b)$记做$a\otimes_R b$，如果下标$R$不重要，那么我们可以省略他。

设$R$是交换环，$A$和$B$都是$R$-模，那么$A\times B$具有$R$-模结构，即$r(a,b)=(ra,b)$. 通过将$r(a\otimes b)$可以定义为$(ra)\otimes b$，$A\otimes_R B$显然有一个$R$-模结构，这样，$\varphi$将是一个$R$-模同态。而上面的泛性质，也可以改成相应的$R$-模和$R$-模同态。

\begin{lem}
在模范畴内，张量积存在。而且由上面的泛性质，他确定到一个同构。
\end{lem}

\begin{proof} 对于唯一性，我们考虑两个张量积$(G,\varphi)$和$(G',\varphi')$，那么根据张量积的性质，有分解
\[
	\varphi:A\times B\xrightarrow{\varphi'} G'\xrightarrow{h_{\varphi}}G,\quad \varphi':A\times B\xrightarrow{\varphi} G\xrightarrow{h_{\varphi'}}G',
\]
所以只要验证$h_\varphi\circ h_{\varphi'}=\id_{G}$和$h_{\varphi'}\circ h_{\varphi}=\id_{G'}$就好了，这样我们就得到了$G$和$G'$之间的同构。而上述等式来自于分解的唯一性，显然，我们有分解
\[
	A\times B\xrightarrow{\varphi'} G'\xrightarrow{h_{\varphi}}G\xrightarrow{h_{\varphi'}}G',\quad A\times B\xrightarrow{\varphi'} G'\xrightarrow{\id_{G'}}G',
\]
显然，所以由唯一性得到了$h_{\varphi'}\circ h_{\varphi}=\id_{G'}$，同理有另一个等式。

对于存在性，我们可以直接构造。首先，我们知道在交换群范畴（作为$\zz$-模）有直和存在，那么我们可以构造自由交换群
\[
	F=\bigoplus_{(a,b)\in A\times B} \zz=\sum_{(a,b)\in A\times B}n_{(a,b)}1_{a,b}.
\]
这是一个形式和，系数只有有限项非零，其中$1_{a,b}$是对应指标$(a,b)$的那个$\zz$中的$1$。我们令$H$是由
\[
	1_{a,b}+1_{a',b}-1_{a+a',b},\quad 1_{a,b}+1_{a,b'}-1_{a,b+b'},\quad 1_{ar,b}-1_{a,rb}
\]
生成的子群，那么我们$A\otimes B$就可以构造为$F/H$，令$\varphi(a,b)=a\otimes b=[1_{a,b}]$，即$1_{a,b}$的陪集。这确实是张量积，具体的检验这里就不进行了。\end{proof}

\para 有了两个模的张量积，我们自然也可以拓展为三个模的张量积，我们可以通过模仿两个模的张量积的泛性质\footnote{即三线性的函数可以唯一分解。}，定义一个新的三个模之间的张量积$A\otimes B\otimes C$，然后可以检验$(A\otimes B)\otimes C$和$A\otimes (B\otimes C)$同时也满足泛性质，所以他们之间是同构的。在这层意义上，我们可以认为张量积满足结合律，因此我们自然也有了有限个模的张量积。

\para 下面讨论张量积在同态下的表现。设$\varphi:M\to M'$是右$R$-模同态和$\psi:N\to N'$是左$R$-模同态，则它诱导了一个交换群同态
\[
	\alpha(\varphi,\psi):M\otimes N\to M'\otimes N',
\]
使得复合公式
\[
	\alpha(\varphi'\varphi,\psi'\psi)=\alpha(\varphi',\psi')\alpha(\varphi,\psi)
\]
成立。大家经常将$\alpha(\varphi,\psi)$记作$\varphi\otimes \psi$，两个模同态的张量积的意义后面会阐述，这里看成形式的符号即可。

\begin{proof}
	映射
	\[
	\begin{array}{ccc}
		M\times N&\to& M'\otimes N'\\
		(m,n)&\mapsto& \varphi(m)\otimes \psi(n)
	\end{array}
	\]
	显然是双线性的，所以它诱导了映射$M\otimes N\to M'\otimes N'$，而张量积的泛性质中的唯一性给出了复合公式，于是这就是我们想要的$\alpha(\varphi,\psi)$.
\end{proof}

注意到复合公式成立意味着成立交换图
\[
\begin{xy}
	\xymatrix
	{
		M\otimes N\ar[rr]^{\alpha(\id_M,\psi)}\ar[d]_{\alpha(\varphi,\id_{N})}&&M\otimes N'\ar[d]^{\alpha(\varphi,\id_{N'})}\\
		M'\otimes N\ar[rr]^{\alpha(\id_{M'},\psi)}&&M'\otimes N'
	}
\end{xy}
\]
成立。

上面的交换图用范畴论的语言来表述就是，$-\otimes N$以及$-\otimes \id_N:=\alpha(-,\id_N)$一起构成了一个函子，而同态$N\to N'$将诱导出一个函子间的态射（即自然变换）。这样的同态我们称为自然同态或者函子式同态，描述同态其实就是建立范畴论的初衷，为了抽象出自然变换才定义了范畴等概念。然后到了教科书上，逻辑就反了过来。同理，$(N\otimes -,\id_N\otimes -)$也是一个函子。

\para 上一个命题给出了如下映射：
\[
	\alpha:\Hom(M,M')\times \Hom(N,N')\to \Hom(M\otimes N,M'\otimes N').
\]
由于$\Hom(M,M')$和$\Hom(N,N')$都是$R$-模，并且上述映射是双线性的，所以他自然诱导了一个映射
\[
	\Hom(M,M')\otimes \Hom(N,N')\to \Hom(M\otimes N,M'\otimes N').
\]
这也就是为什么大家将$\alpha(\varphi,\psi)$记作$\varphi\otimes \psi$. 

\begin{pro}
记左$R$-模范畴之间的态射集为$\Hom_R(-,*)$. 则成立双函子同构
\[
	\Hom_{\mathbb{Z}}(M\otimes_R N,G)\cong \Hom_R(M,\Hom_\mathbb{Z}(N,G)),
\]
其中$M$和$N$是可以变动的。因此，$-\otimes_R N$就是一个左伴随函子，而$\Hom_\mathbb{Z}(N,*)=h^N$是一个右伴随函子。\notprove
\end{pro}

根据左伴随函子与逆极限可交换，而直和是模范畴的一种逆极限，我们可以得知同构
\[
	\left(\bigoplus_i M_i\right)\otimes N\cong \bigoplus_i \left(M_i\otimes N\right).
\]

\begin{pro}
成立交换群的同构$R\otimes M\cong M$以及$(R/\mathfrak{a})\otimes M\cong M/\mathfrak{a}M$，其中$\mathfrak{a}$是$R$的一个理想。
\end{pro}

\begin{proof}
	记$(r,m)\mapsto rm$为映射$\varphi$，毫无疑问这是一个双线性映射，所以诱导了一个交换群同态$\psi:R\otimes M\to M$，使得分解$\varphi:R\times M\xrightarrow{h} R\otimes M\xrightarrow{\psi} M$成立。毫无疑问，$\psi$是一个满射，因为对任意的$m$都有$m=\varphi(1,m)$，所以$m=\psi(h(1,m))$. 注意到$R\otimes M$里面的元素可以写成这样的有限和
	\[
	\sum_i r_i\otimes m_i=\sum_i 1\otimes r_im_i=1\otimes \left(\sum_i r_i m_i\right),
	\]
	因此，$\psi\left(\sum_i r_i\otimes m_i\right)=0$推出$\sum_i r_i m_i=0$，再利用上面的等式推出$\sum_i r_i\otimes m_i$. 所以$\psi$是一个单射。

	第二个同构，依然是记$(\bar{r},m)\mapsto \overline{rm}\in M/\mathfrak{a}M$为映射$\varphi$. 这是一个定义良好的映射，选取$\bar{r}$的不同代表元$r'=r+a$，其中$a\in\mathfrak{a}$，所以$r'm=rm+am$，由于$am\in \mathfrak{a}M$，所以$\overline{r'm}=\overline{rm}$. 双线性性从定义看是显然的，所以诱导了一个交换群同态$\psi:(R/\mathfrak{a})\otimes M\to M/\mathfrak{a}M$，使得分解$\varphi:R/\mathfrak{a}\times M\xrightarrow{h} (R/\mathfrak{a})\otimes M\xrightarrow{\psi} M/\mathfrak{a}M$成立。

	先检验$\psi$是一个满射，这只要检验$\varphi$是一个满射。任取$\bar{m}\in M/\mathfrak{a}M$，则有$\varphi(\bar{1},m)=\bar{m}$. 最后要检验$\psi$是一个单射，
	如果$\psi(\sum_i \bar{r}_i\otimes m_i)=0$，可以推出$\sum_i \overline{r_im_i}=0$，于是$\sum_i r_im_i \in \mathfrak{a}M$，这意味着$r_i\in \mathfrak{a}$，所以$\sum_i \bar{r}_i\otimes m_i=\sum_i 0\otimes m_i=0$.
\end{proof}

当$R$是一个交换环，$M$是一个$R$-模，此时上面证明的同态实际上都是$R$-模同态，所以也自然是$R$-模同构。这两个同构不仅仅是同构，改变$M$的时候，还是一个自然同构。这里就略去检验了。很多时候，这不是检验不检验的问题，这是一个相信不相信的问题。

\para 上面我们已经看到了，$-\otimes N$构成一个函子，而实际上，它是右正和函子。

\para 从这里开始，以后讨论的张量积都是$R$-模范畴的张量积，所以两个$R$-模的张量积依然是$R$-模，所有出现的同态都是$R$-模同态。并且，我们有函子性同构$-\otimes N\cong N\otimes -$.


\section{代数与多项式环}

设有两个环$A$, $B$和一个环同态$f:A\to B$，再设$a\in A$, $b\in B$，我们可以通过$f$定义他们的乘法为$a\cdot b=f(a)b\in B$，这样环$B$就被赋予了一个$A$-模结构。环$B$若被赋予一个$A$-模结构，则称$B$是一个$A$-\idx{代数}（\idx{algebra}）。

设$B$是$A$-代数，有$f:A\to B$，设$C$也是$A$-代数，有$g:A\to C$，那么$A$-代数之间的同态$h:B\to C$，首先是$B$和$C$之间的环同态，还要和$A$-模结构相容，即$g=h\circ f$. 所有$A$-代数构成一个范畴，记作$\mathsf{Alg}_A$，其中的对象由一个环$B$和一个环同态$\mu:A\to B$构成。

多项式环是幺半群环的一种，所以直接从幺半群环开始。

\para 设$U$是一个幺半群，而$R$是一个环，将其看成一个集合，那么从$U$出发可以构造一个自由$R$-模$R(U)$. 任取$a\in R(U)$，他可以写成$a=\sum_{i\in I} r_i u_i$，其中$I$是一个有限指标集。类似地，同样任取$b\in R(U)$可以写成$b=\sum_{i\in J} s_i v_i$，而$J$同样是一个有限指标集。定义乘法
\[
	ab=\sum_{i\in I,\, j\in J}r_is_j u_i v_j,
\]
结合律与分配律是自然成立的，于是$R(U)$是一个环。

如果$U$是一个交换幺半群，则$R(U)$是一个交换环。此时$R(U)$是一个$R$-代数。

\para 设$S$是一个集合，他生成的自由交换幺半群为$U(S)$，记$R[S]=R(U(S))$，称其为$R$上由集合$S$生成的多项式环。特别地，如果$S$是有限集$\{x_1$, $\cdots$, $x_n\}$，则$R[S]$记作$R[x_1$, $\cdots$, $x_n]$. 

当$S=\{x\}$，$R[x]$中的元素写成$f=\sum_{i=0}^na_ix^i$的形式，这就是熟悉的一元多项式。$x$称之为不定元，不定元只是一个符号，在不发生歧义的情况下可以任意选取。这即如下事实的体现：如果两个集合存在双射，则他们生成的多项式环同构。

从定义，不难发现作为$R$-代数，$R[S\cup T]$与$R[S][T]$同构，所以完全可以把这两个$R$-代数等同。

与从$R$-代数范畴到集合范畴的忘却函子伴随的，正是从一个集合构造多项式。所以多项式是$R$-代数范畴的自由对象。

\para 设$A$是$R$-代数，如果存在满同态$R[x_1,\cdots ,x_n]\to B$，或者说$B$同构于$R[x_1$, $\cdots$, $x_n]/\mathfrak{a}$，其中$\mathfrak{a}$是$R[x_1,\cdots ,x_n]$的一个理想，则我们称呼$B$是有限生成$R$-代数。一个环称为有限生成的就是指他作为$\zz$-代数是有限生成的。如果$B$作为$R$-模是有限生成的，则称$B$作为$A$-代数是有限的。

\para 一个一元多项式$f=\sum_{i=0}^na_ix^i$使得$a_i$不为零的最大的$i$记作$\deg(f)$，称为多项式$f$的幂次，$0$的幂次补充定义为$0$. 最高幂次的系数我们称之为最高次系数，或者首项系数。其余的项目通常我们会指出具体的指标，比如说$k$-次项，就是指$a_kx^k$，而$k$-此项系数就是指$a_k$. 如果最高次系数为$1$，这个多项式称为首一多项式。

对于首一多项式而言$f$，$\deg(fg)=\deg(f)+\deg(g)$. 但是一般的多项式并不如此，比如在$\zz/4\zz$上的多项式$2x$，有$(2x)(2x)=0$.

对于$\deg(f+g)$，我们有估计$\deg(f+g)\leq \max\{\deg(f),\deg(g)\}$，不等号是可以取严格的，同样比如在$\zz/4\zz$上的多项式$2x$，有$2x+2x=0$.

\begin{thm}
多项式除法算法：设$f$, $g\in R[x]$，而且$g$的首项系数可逆，则存在唯一的多项式$p$, $r\in R[x]$使得$f=pg+r$，且$\deg(r)<\deg(g)$.
\end{thm}

\begin{proof}
	可以假设$g$是首一多项式，因为如果设$g$的首项系数为$a$，则$g/a$是一个首一多项式，如果命题对首一多项式成立，即存在$q$, $r\in R[x]$使得$f=q(g/a)+r$，则$f=(q/a)g+r=pg+r$，其中$p=q/a$和$r$都是多项式。这样就得到了我们的命题。

	首先假设存在，证明唯一性。设$f=p'g+r'$以及$f=pg+r$成立，则$(p'-p)g=r'-r$，由于$g$是首一的，且$p'-p$非零，所以$\deg((p'-p)g)\geq \deg(g)$，但是$\deg(r'-r)< \deg(g)$，这就造成了矛盾。下面证明存在性。

	设$\deg(f)=n$, $\deg(g)=m$，如果$n<m$，则取$p=0$, $r=f$. 考虑$n\leq m$的情况，设$f$的首项系数为$a_0$，考虑多项式$f_1=f-a_0x^{n-m}g$，由于$f$和$a_0x^{n-m}g$的最高次项相同，所以$\deg(f_1)<\deg(f)$，如果$\deg(f_1)<\deg(g)$，那么$f=a_0x^{n-m}g+f_1$就给出了分解。

	否则继续对$f_1$进行这样的操作，得到$f_2=f_1-a_1x^{\deg(f_1)-m}g$，再比较$\deg(f_2)$与$\deg(g)$. 不断如是进行下去，由于$f$的幂次有限，而每次操作，幂次都至少减一，所以该过程在进行至多$n-m+1$次后就会停止。设该过程在第$k$次后停止，则我们就得到了
	\[
	f_{k}=f-a_0x^{n-m}g-a_1x^{\deg(f_1)-m}g-\cdots-a_{k-1}x^{\deg(f_{k-1})-m}g
	\]
	使得$\deg(f_k)< \deg(g)$. 即$f=f_0$，则我们就得到了分解
	\[
	f=f_k+a_0x^{n-m}g+a_1x^{\deg(f_1)-m}g+\cdots+a_{k-1}x^{\deg(f_{k-1})-m}g=\left(\sum_{i=0}^{k-1}a_{i}x^{\deg(f_{i})-m}\right)g+f_k.
	\]
	因此$p=\sum_{i=0}^{k-1}a_{i}x^{\deg(f_{i})-m}$以及$r=f_k$就是我们需要的多项式。
\end{proof}

存在性的证明就是整个算法，从算法来看，这个命题即使是对非交换环上的多项式环也是成立的。

\section{矩阵与行列式}

\para 记$1_i=(0,\,\cdots\!,\,1,\,\cdots\!,\,0)\in R^m$，即只有第$i$个位置是一，其他都是零的那个元素。考虑一个模同态$\varphi:R^m\to R^n$，由于
\[
	\varphi\left(\sum_{i} r_i1_i\right)=\sum_{i} r_i\varphi\left(1_i\right),
\]
所以它由所有$\varphi\left(1_i\right)$描述，由于他在$R^n$中，将其写作
\[
	\varphi\left(1_i\right)=\sum_{j}\varphi_{ji}1_j.
\]
于是$\{\varphi_{ij}\,:\, 1\leq i \leq p,\,\,1\leq j \leq q\}$这$p\times q$个数构成的整体称为$\varphi$的矩阵，记作$(\varphi)$，他完全描述了整个同态$\varphi$.

设$\psi:R^n\to R^l$的矩阵是$(\psi)_{ij}$，我们下面计算$\psi\circ\varphi$的矩阵：
\[
	\psi\circ\varphi(1_i)=\psi\left(\sum_{j=1}^n\varphi_{ji}1_j\right)=\sum_{j=1}^n\varphi_{ji}\psi(1_j)=\sum_{j=1}^n\sum_{k=1}^l\psi_{kj}\varphi_{ji}1_k,
\]
所以$\psi\circ\varphi$的矩阵$(\psi\circ\varphi)$为
\[
	(\psi\circ\varphi)_{ki}=\sum_{j=1}^n\psi_{kj}\varphi_{ji},
\]
这被称为矩阵乘法法则。

\para 通常会使用一张表来表示矩阵
\[
(\varphi)=
\begin{pmatrix}
	\varphi_{11} & \varphi_{12} & \cdots & \varphi_{1m}\\
	\varphi_{21} & \varphi_{22} & \cdots & \varphi_{2m}\\
	\vdots & \vdots & \ddots & \vdots \\
	\varphi_{n1} & \varphi_{n2} & \cdots & \varphi_{nm}\\
\end{pmatrix}
\]
可以看到$\varphi(1_i)$关于$\{1_j\in R^n\}$中展开的系数出现在$(\varphi)$的第$i$列。

下面将单独研究矩阵，而不将其看成某个自由模的矩阵。之所以这样，因为有时候我们处理的矩阵并不能很好地表为自由模之间的同态。记号上，表示矩阵时可加或不加括号，比如$\varphi$或者$(\varphi)$. 相应的，表示矩阵元时写作$\varphi_{ij}$或者$(\varphi)_{ij}$. 如果需要以矩阵元来表述矩阵，写作$(\varphi_{ij})$. 

按照习惯，我们下面依旧假设$R$是一个交换环，虽然在非交换环上谈论矩阵也是可能的。称呼一个矩阵是$R$上的矩阵，如果他的矩阵元都属于$R$.

所有环$R$的$m\times n$矩阵构成一个$R$-模，实际上，任取$r\in R$以及矩阵$\varphi$，定义矩阵$r\varphi= (r\varphi_{ij})$. 另取矩阵$\psi$，定义矩阵加法$\psi+\varphi=(\psi_{ij}+\varphi_{ij})$.

矩阵乘法就按照自由模里面推出的法则来定义：
\begin{equation}
\begin{pmatrix}
	\psi_{11} & \psi_{12} & \cdots & \psi_{1n}\\
	\psi_{21} & \psi_{22} & \cdots & \psi_{2n}\\
	\vdots & \vdots & \ddots & \vdots \\
	\psi_{l1} & \psi_{l2} & \cdots & \psi_{ln}
\end{pmatrix}
\begin{pmatrix}
	\varphi_{11} & \varphi_{12} & \cdots & \varphi_{1m}\\
	\varphi_{21} & \varphi_{22} & \cdots & \varphi_{2m}\\
	\vdots & \vdots & \ddots & \vdots \\
	\varphi_{n1} & \varphi_{n2} & \cdots & \varphi_{nm}\\
\end{pmatrix}
=
\begin{pmatrix}
	\sum_{i=1}^n \psi_{1i}\varphi_{i1} & \cdots & \sum_{i=1}^n \psi_{1i}\varphi_{im}\\
	\sum_{i=1}^n \psi_{2i}\varphi_{i1} & \cdots & \sum_{i=1}^n \psi_{2i}\varphi_{im}\\
	\vdots & \ddots & \vdots \\
	\sum_{i=1}^n \psi_{li}\varphi_{i1} & \cdots & \sum_{i=1}^n \psi_{li}\varphi_{im}
\end{pmatrix}
\end{equation}
即$(\psi\varphi)_{ij}$由第一个矩阵的第$i$行和第二个矩阵的第$j$列逐个相乘然后相加而得，矩阵乘法把$l\times n$和$n \times m$的矩阵变成了$l \times m$的矩阵。矩阵乘法满足结合律是直接的计算。

尤其重要的情况是$m=1$的时候，此时，$n\times 1$的矩阵称为一个列，一个列我们直接记成一个$n$-元组$\varphi=(\varphi_1$, $\cdots$, $\varphi_n)$. 其中，记$1_i=(0$, $\cdots$, $1$, $\cdots$, $0)$，即只有第$i$个位置为$1$，其他位置都为零的那个列。所有的列都可以看成$\{1_i\,:\, 1\leq i \leq n\}$的线性组合，
\[
	(\varphi_1,\,\cdots\!,\,\varphi_n)=\sum_{i=1}^n\varphi_i1_i.
\]
特别地，记矩阵$I_n=\begin{pmatrix}1_{1} & 1_{2} & \cdots & 1_{n}\end{pmatrix}$，称之为单位矩阵。由矩阵乘法，对任意的$m\times n$矩阵$\varphi$有$\varphi I_n=\varphi$以及$I_m\varphi =\varphi$成立。单位矩阵具体写出来就是
\[
	I_n=
		\begin{pmatrix}
			1 & & &\\
			& 1 & &\\
			& & \ddots &\\
			& & & 1
		\end{pmatrix}
	=(\delta_{ij}),
\]
其中$\delta_{ij}$被称为Kronecker符号，或者叫Kronecker delta，定义为
\[
	\delta_{{ij}}=
	\begin{cases}
	1,&\text{if } i=j,\\
	0,&\text{if } i\neq j.
	\end{cases}
\]

设$\varphi_{i}=(\varphi_{1i}$, $\cdots$, $\varphi_{ni})$，则一个矩阵可以看成一些列的并列，
\[
	\begin{pmatrix}
	\varphi_{11} & \varphi_{12} & \cdots & \varphi_{1m}\\
	\varphi_{21} & \varphi_{22} & \cdots & \varphi_{2m}\\
	\vdots & \vdots & \ddots & \vdots \\
	\varphi_{n1} & \varphi_{n2} & \cdots & \varphi_{nm}\\
	\end{pmatrix}
	=
	\begin{pmatrix}
	\varphi_{1} & \varphi_{2} & \cdots & \varphi_{m}
	\end{pmatrix},
\]
其中$\varphi_i=(\varphi_{1i}$, $\cdots$, $\varphi_{ni})$. 

关于列的矩阵乘法为
\begin{equation}
\begin{pmatrix}
	\psi_{11} & \psi_{12} & \cdots & \psi_{1n}\\
	\psi_{21} & \psi_{22} & \cdots & \psi_{2n}\\
	\vdots & \vdots & \ddots & \vdots \\
	\psi_{l1} & \psi_{l2} & \cdots & \psi_{ln}
\end{pmatrix}
\begin{pmatrix}
	\varphi_{1} \\
	\varphi_{2}  \\
	\vdots \\
	\varphi_{n} \\
\end{pmatrix}
=
\begin{pmatrix}
	\sum_{i=1}^n \psi_{1i}\varphi_{i}\\
	\sum_{i=1}^n \psi_{2i}\varphi_{i} \\
	\vdots \\
	\sum_{i=1}^n \psi_{li}\varphi_{i}
\end{pmatrix}
\end{equation}
通常将其右侧写作$\psi\varphi$. 那么一般的矩阵乘法则写作：
\[
	\psi
	\begin{pmatrix}
	\varphi_{1} & \varphi_{2} & \cdots & \varphi_{m}
	\end{pmatrix}
	=
	\begin{pmatrix}
	\psi\varphi_{1} & \psi\varphi_{2} & \cdots & \psi\varphi_{m}
	\end{pmatrix}.
\]

\para 下面要讨论行列式函数，行列式函数是对方阵定义的函数，所谓方阵就是$n\times n$矩阵。将所有矩阵元属于环$R$的$n\times n$矩阵构成的集合记作$M_n(R)$. $M_n(R)$通过矩阵加法和乘法构成一个环，但不是交换环，单位元是$I_n$. 

对$M(R,1)$可以通过$(r)\mapsto r$定义一个函数$f_1:M_n(R)\to R$. 然后对$M_n(R)$里面的矩阵$\varphi$，记$\varphi$除去第$i$行第$j$列得到的$(n-1)\times (n-1)$矩阵为$\Phi_{ij}$，定义
\[
	f_n(\varphi)=\sum_{i=1}^n (-1)^{i+j}\varphi_{ij}f_{n-1}(\Phi_{ij}).
\]
这个展开被称为按第$j$列展开，这个归纳定义的目前的缺陷在于，似乎按照不同的两列展开会有不同的结果。其实并不会这样，首先考虑$n=2$的情况，设$\varphi=\begin{pmatrix}a&b\\c&d\end{pmatrix}$，按第一列展开会得到$ad-bc$，按第二列展开也会得到$ad-bc$. 然后假设当$i<n$的时候，$f_i$都已经定义良好了，即并不依赖于按列展开的选取。那么考虑$f_n(\varphi)$的按第$i$列和按第$j$列的两个展开，可以假设$i<j$。对按照第$i$列展开的式子，对所有$f_{n-1}(\Phi_{kl})$按第$(j-1)$列展开。对按照第$j$列展开的式子，对所有$f_{n-1}(\Phi_{kl})$按第$i$列展开。这两个展开将会得到相同的结果。所以$f_n(\varphi)$的定义并不依赖于对列的展开。

这样，对每一个$n$，我们归纳定义了$f_n:M_n(R)\to R$，这个函数对每一个$n$统一记作$\det:M_n(R)\to R$，称之为行列式。设$n\times n$矩阵为$\varphi=\begin{pmatrix}\varphi_{1} & \varphi_{2} & \cdots & \varphi_{n}\end{pmatrix}$，他的行列式记作$\det(\varphi)=\det(\varphi_1$, $\cdots$, $\varphi_n)$，其中每一个$\varphi_i$都是一个$n\times 1$的列。如果矩阵要把他所有的元素写出来，则行列式会记作
\[
\det(\psi)=\begin{vmatrix}
	\psi_{11} & \psi_{12} & \cdots & \psi_{1n}\\
	\psi_{21} & \psi_{22} & \cdots & \psi_{2n}\\
	\vdots & \vdots & \ddots & \vdots \\
	\psi_{l1} & \psi_{l2} & \cdots & \psi_{ln}
\end{vmatrix}.
\]

\begin{pro}
行列式具有以下性质：

\begin{compactenum}[(1)]
\item 行列式对每一个列线性。
\item 行列式中如果有两列相同，则行列式为零。
\item $\det(I_n)=1$对每一个$n$都成立。
\end{compactenum}
\end{pro}

\begin{proof}
	第一点由按列展开的定义可得。对于第二点，我们采用对$n$归纳，当$n=2$的时候，
	\[
		\begin{vmatrix}a&a\\b&b\end{vmatrix}=ab-ab=0.
	\]
	当$n>3$的时候，选不同于该两列的第三列展开，就可以归结到$n-1$的情况，随后由归纳法就得到了结论。

	第三点是直接的计算，对第$n$列展开，我们就得到了
	\[
		\det(I_n)=\det(1_1,\,\cdots\!,\,1_{n-1})=\det(I_{n-1}),
	\]
	最后由$\det(I_1)=\det(1_1)=1$就得到了结论。
\end{proof}

应用第一、第二点，我们有
\[
	0=\det(\cdots\!,\psi+\varphi,\,\cdots\!,\,\psi+\varphi,\cdots)=\det(\cdots\!,\psi,\,\cdots\!,\,\varphi,\cdots)+\det(\cdots\!,\varphi,\,\cdots\!,\,\psi,\cdots),
\]
所以，调换行列式的两列，行列式的值变成相反数。

满足上列性质第一、第二点的函数$M_n(R)\to R$被称为反对称多线性函数。反对称的意思就是调换任意两列将得到相反的结果。

\para 给定一个给定矩阵$\psi=\begin{pmatrix}\psi_{1} & \psi_{2} & \cdots & \psi_{n}\end{pmatrix}$，由于每一个$\psi_i$都可以写成$\psi_i=\sum_{j=1}^n\psi_{ji}1_j$，所以任取一个反对称多线性函数$F$，则
\[
	F(\psi_1,\,\cdots\!,\,\psi_n)=\sum_{j_1=1}^n\cdots \sum_{j_n=1}^n \psi_{j_11}\cdots \psi_{j_n n} F(1_{j_1},\,\cdots\!,\,1_{j_n}),
\]
所以对反对称多线性函数的计算，只要计算所有形如$F(1_{i_1}$, $\cdots$, $1_{i_n})$的式子即可。同时，上面的式子也说明了，多线性函数是矩阵元的多项式函数。

\begin{pro}
设$F:M_n(R)\to R$是一个反对称多线性函数，则$F=F(I_n)D$. 作为推论，行列式的三点性质将完全决定行列式函数。
\end{pro}

\begin{proof} 
	从上面看到的，只要证明
	\[
		F(1_{i_1},\,\cdots\!,\,1_{i_n})=F(I_n)D(1_{i_1},\,\cdots\!,\,1_{i_n}).
	\]
	如果$\{i_1$, $\cdots$, $i_n\}$中有重复指标，两边都为零。如果没有重复指标，采用冒泡排序\footnote{先比较相邻的元素，如果第一个比第二个大，就交换他们两个。对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。在这一点，最后的元素应该会是最大的数。针对所有的元素重复以上的步骤，除了最后一个。持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。}，可以通过不断两两调换两列，将$(i_1$, $\cdots$, $i_n)$变成$(1$, $\cdots$, $n)$，对等式两边进行同样的调换两列的操作，等式依旧成立，所以最后只要检验$F(I_n)=F(I_n)D(I_n)$，而这来自于$D(I_n)=1$.
\end{proof}

\begin{pro}[行列式乘法公式]
$\det(\varphi \psi)=\det(\varphi)\det(\psi)$.
\end{pro}

\begin{proof} 
	由矩阵乘法，
	\[
	\varphi
	\begin{pmatrix}
	\psi_{1} & \psi_{2} & \cdots & \psi_{n}\\
	\end{pmatrix}
	=
	\begin{pmatrix}
	\varphi\psi_{1} & \varphi\psi_{2} & \cdots & \varphi\psi_{n}\\
	\end{pmatrix}
	\]
	因此$\det (\varphi \psi)=\det (\varphi\psi_{1}$, $\cdots$, $\varphi\psi_{n})$.

	将$\det(\varphi\psi_{1}$, $\cdots$, $\varphi\psi_{n})$记作$F(\psi_{1}$, $\cdots$, $\psi_{n})$，可以看到这是一个反对称的多重线性映射，所以
	\[
	F(\psi_{1},\,\cdots\!,\,\psi_{n})=F(I_n)\det (\psi_{1},\,\cdots\!,\,\psi_{n})
	\]
	也就是说
	\[
	\det (\varphi\psi_{1},\,\cdots\!,\,\varphi\psi_{n})=\det(\varphi 1_1,\,\cdots\!,\,\varphi 1_n)\det(\psi_{1},\,\cdots\!,\,\psi_{n}).
	\]

	最后，只需要计算$\varphi 1_i=\begin{pmatrix}\varphi_{1} & \varphi_{2} & \cdots & \varphi_{n}\end{pmatrix}1_i$，由矩阵乘法$\varphi 1_i=\varphi_i$，所以
	\[
	\det(\varphi\psi)=\det(\varphi\psi_{1},\,\cdots\!,\,\varphi\psi_{n})=\det(\varphi_1,\,\cdots\!,\,\varphi_n)\det(\psi_{1},\,\cdots\!,\,\psi_{n})=\det(\varphi)\det(\psi).
	\]
\end{proof}

\para 矩阵的一个起源是线性方程组，这里暂时只考虑$n$个方程$n$个未知元的情况。所谓的线性方程组即如下的方程
\[
	\begin{cases}
	a_{11}x_1+\cdots+a_{1n}x_n=b_1,\\
	\qquad\qquad\,\vdots\\
	a_{n1}x_1+\cdots+a_{nn}x_n=b_n,
	\end{cases}
\]
其中$a_{ij}$, $b_i\in R$是已知的，而解线性方程组就是找到$x_i\in R$满足上述方程。

采用矩阵和矩阵乘法，上述的线性方程组可以写作$ax=b$，其中$a=(a_{ij})=\begin{pmatrix}a_{1} & a_{2} & \cdots & a_{n}\end{pmatrix}$, $x=(x_1$, $\cdots$, $x_n)$和$b=(b_1$, $\cdots$, $b_n)$. 下面将利用行列式给出一种可能的求解方式，其实也就是著名的Cramer法则。陈述如下：

将矩阵的第$i$列换作$b$，计算这个新矩阵的行列式，有
\[
	\det(a_1,\,\cdots\!,\,b,\,\cdots\!,\,a_n)=\det\left(a_1,\,\cdots\!,\,\sum_{j=1}^na_j x_j,\,\cdots\!,\,a_n\right)=\sum_{j=1}^n x_j \det(a_1,\,\cdots\!,\,a_j,\,\cdots\!,\,a_n),
\]
在求和中，除了$j=i$可能行列式$\det(a_1$, $\cdots$, $a_j$, $\cdots$, $a_n)$不为零，其他的行列式，由于有相同的两列都为零，于是
\[
	x_i \det(a)=\det(a_1,\,\cdots\!,\,b,\,\cdots\!,\,a_n).
\]
这就是Cramer法则。如果$\det(a)$可逆，则$x_i=\det(a_1$, $\cdots$, $b$, $\cdots$, $a_n)\det(a)^{-1}$.

\para 利用Cramer法则，可以谈论一个方阵的右逆。设$\varphi$是一个$n\times n$方阵，而$\psi$又是另一个$n\times n$方阵，如果$\varphi\psi=I_n$，则称$\psi$是$\varphi$的右逆，同样，也称$\varphi$是$\psi$的左逆。

设$\psi=\begin{pmatrix}\psi_{1} & \psi_{2} & \cdots & \psi_{n}\\\end{pmatrix}$，则
\[
	\varphi\psi=\begin{pmatrix}\varphi\psi_{1} & \varphi\psi_{2} & \cdots & \varphi\psi_{n}\end{pmatrix}=\begin{pmatrix}1_{1} & 1_{2} & \cdots & 1_{n}\end{pmatrix}=I_n,
\]
所以求右逆等价于求解$n$个线性方程组$\varphi\psi_i=1_i$. Cramer法则告诉我们，如果$\det(\varphi)$可逆，则$\varphi$存在右逆。

\para 设$\varphi$是一个方阵，将$\varphi$除去第$i$行第$j$列得到的矩阵记作$\Phi_{ij}$，则矩阵元$\varphi_{ij}$对应的代数余子式$\varphi_{ji}^*$定义为$(-1)^{i+j}\det(\Phi_{ij})$，定义矩阵$\varphi^*=(\varphi_{ji}^*)$，称作方阵$\varphi$的伴随矩阵。注意到上面$i$和$j$的顺序，伴随矩阵第$i$行第$j$列的矩阵元是原矩阵第$j$行第$i$列的代数余子式，即$(\varphi^*)_{ij}=\varphi_{ji}^*$. 将行列式的按列展开用伴随矩阵重写的话，就写做
\[
	\det(\varphi)=\sum_{j=1}^n\varphi_{ji}\varphi_{ji}^*=\sum_{j=1}^n(\varphi^*)_{ij}\varphi_{ji}.
\]

伴随矩阵给出了方阵左逆的存在性的一些判据，直接计算
\[
	(\varphi^*\varphi)_{ij}=\sum_{k=1}^n(\varphi^*)_{ik}\varphi_{kj}=\sum_{k=1}^n\varphi^*_{ki}\varphi_{kj},
\]
当$i=j$时，由按列展开有$(\varphi^*\varphi)_{ii}=\det(\varphi)$. 当$i\neq j$时，依然利用按列展开，将右边的和式还原成行列式，可以发现第$i$列和第$j$列都是$(\varphi_{1j}$, $\cdots$, $\varphi_{nj})$，所以当$i\neq j$时有$(\varphi^*\varphi)_{ij}=0$. 于是
\[
	\varphi^*\varphi=\det(\varphi)I_n.
\]
所以如果$\det(\varphi)$，他的左逆写作$\det(\varphi)^{-1}\varphi^*$.

\para 如果$\varphi$同时存在左逆和右逆，设$\psi$是$\varphi$的左逆，$\pi$是$\varphi$的右逆，于是
\[
\begin{aligned}
	\psi\varphi\pi&=(\psi\varphi)\pi=I_n \pi=\pi,\\
	\psi\varphi\pi&=\psi(\varphi\pi)=\psi I_n=\psi,
\end{aligned}
\]
所以$\pi=\psi$，此时$\pi=\psi$就被称为矩阵$\varphi$的逆，记作$\varphi^{-1}$. 因此，从Cramer法则与伴随矩阵，我们已经给出了方阵逆存在的一个充分条件：$\det(\varphi)$可逆。

\begin{pro}
方阵$\varphi$左（右）逆存在的充分必要条件是$\det(\varphi)$可逆。如果存在左（右）逆，则也存在右（左）逆，且左逆等于右逆。于是方阵$\varphi$逆存在的充分必要条件是$\det(\varphi)$可逆。
\end{pro}

\begin{proof}
上面已经证明了，如果$\det(\varphi)$可逆，则$\varphi$同时存在左逆以及右逆，且左逆等于右逆。反过来，如果$\varphi$有左逆$\psi$，则$\det(\psi\varphi)=\det(I_n)=1$，由行列式乘法公式，$1=\det(\psi\varphi)=\det(\psi)\det(\varphi)$，于是$\det(\varphi)$可逆。存在右逆同理可以推出$\det(\varphi)$可逆。从$\det(\varphi)$可逆就得出了结论。
\end{proof}

方阵存在逆时，我们会称呼该方阵是可逆的。上面的命题就是在说，环$R$上的方阵$\varphi$可逆当且仅当$\det(\varphi)$可逆。举个例子，整数环$\mathbb{Z}$上的方阵$\varphi$可逆当且仅当$\det(\varphi)=\pm 1$. 而域$k$上的方阵$\varphi$可逆当且仅当$\det(\varphi)\neq 0$. 随后如果可逆，伴随矩阵给出了逆的一个计算公式。

对于交换环，由于乘法可以交换，我们无需担心左逆不能推出右逆。但一般而言，在任意的非交换环里面，左逆存在不一定能推出右逆存在，反之亦然。但是交换环上的方阵构成的环$M_n(R)$中，行列式函数将逆的存在性等价于$R$中逆的存在性，继而保证了$M_n(R)$上左逆存在可以推出右逆存在。