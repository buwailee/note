\chapter{基本构造}
\ThisULCornerWallPaper{1}{../Pictures/4.png}

\section{模范畴}

设$M$是一个左$R$-模，通过$m\cdot n:=m+\cdots+m$可以定义出$M$的一个右$\zz$-模结构。同样，对右$R$-模，我们可以定义出一个左$\zz$-模结构。所以，在这里，我们考虑双边模范畴${}_R\mathsf{Mod}_S$，下面有时会简单称为模范畴。

设$M$, $N\in {}_R\mathsf{Mod}_S$，记${}_R\!\Hom_S(M,N)$为所有双边模同态的集合，如果$R$和$S$是清楚的，则可以简单记作$\Hom(M,N)$. $\Hom(M,N)$具有清楚的交换群结构，所以可以看成双边$\zz$-模，即等同$fn=nf$，其中$f\in \Hom(M,N)$，而$n\in \zz$. 因此，双边模范畴是一个准加性范畴。

\begin{lem}\label{lemmod}如下命题成立：
\begin{compactenum}[~~~(1)]
\item 设$M\in {}_R\mathsf{Mod}_S$，而$N\in {}_R\mathsf{Mod}$，则${}_R\!\Hom(M,N)\in {}_S\mathsf{Mod}$.
\item 设$M\in {}_R\mathsf{Mod}$，而$N\in {}_R\mathsf{Mod}_S$，则${}_R\!\Hom(M,N)\in \mathsf{Mod}_S$.
\item 设$M\in {}_R\mathsf{Mod}_S$，而$N\in {}_R\mathsf{Mod}_T$，则${}_R\!\Hom(M,N)\in {}_S\mathsf{Mod}_T$.
\item 设$M\in {}_R\mathsf{Mod}_S$，而$N\in \mathsf{Mod}_S$，则$\Hom_S(M,N)\in \mathsf{Mod}_R$.
\item 设$M\in \mathsf{Mod}_S$，而$N\in {}_R\mathsf{Mod}_S$，则$\Hom_S(M,N)\in {}_R\mathsf{Mod}$.
\item 设$M\in {}_R\mathsf{Mod}_S$，而$N\in {}_T\mathsf{Mod}_S$，则$\Hom_S(M,N)\in {}_T\mathsf{Mod}_R$.
\end{compactenum}
\end{lem}

\begin{proof}
一点一点对应来证明。
 吗            
\begin{compactenum}[(1)]
\item 那么任取$f\in {}_R\!\Hom(M,N)$以及$s\in S$，可以通过$(sf)(m)=f(ms)$定义出${}_R\!\Hom(M,N)$上的一个左$S$-模结构。实际上，
\[
	((st)f)(m)=(s(tf))(m)=(tf)(ms)=f(mst)=f(m(st)).
\]

\item 任取$f\in {}_R\!\Hom(M,N)$以及$s\in S$，可以通过$(fs)(m)=f(m)s$定义出${}_R\!\Hom(M,N)$上的一个右$S$-模结构。实际上
\[
	(fst)(m)=(fs)(m)t=f(m)st.
\]

\item 结合以上两点。

\item 任取$f\in \Hom_S(M,N)$以及$r\in R$，通过$(fr)(m)=f(rm)$可以定义出$\Hom_S(M,N)$上的一个右$R$-模结构。

\item 任取$f\in \Hom_S(M,N)$以及$r\in R$，通过$(rf)(m)=rf(m)$可以定义出$\Hom_S(M,N)$上的一个左$R$-模结构。

\item 结合以上两点。\qedhere
\end{compactenum}
\end{proof}

从(3)和(6)，我们知道，如果$M$, $N\in {}_R\mathsf{Mod}_S$，则${}_R\!\Hom(M,N)\in {}_S\mathsf{Mod}_S$且$\Hom_S(M,N)\in {}_R\mathsf{Mod}_R$. 这两个模都可以有双边模结构。

但是，如果考虑的是${}_R\!\Hom_S(M,N)$，则我们在上面只定义左$R$-模和右$S$结构，使得${}_R\!\Hom_S(M,N)\in {}_R\mathsf{Mod}_S$，和$M$, $N$一样。若取$f\in {}_R\!\Hom_S(M,N)$, $m\in M$, $r\in R$和$s\in S$，则
\[
	rfs(m)=rf(m)s=f(rms).
\]

假设下面出现的环都是交换环，此时，每一个左$R$-模$M$，都可以通过$rf=fr$定义出一个右$R$-模结构而成为一个双边$R$-模，当$M$具有这样诱导的双边$R$-模结构时，我们简单称呼$M$是一个$R$-模。$R$-模之间的态射集我们记作$\Hom_R$. 如果$M$和$N$都是$R$-模，上面的推理告诉我们，$\Hom_R(M,N)$也是一个$R$-模。

\begin{para}[零对象]
模范畴的零对象就是零模，作为交换群就是$\{0\}$，任意的环作用都是$r0=0$.
\end{para}

\begin{para}[直积]
首先介绍模范畴里的积，他被称为直积。下面重新描述一下泛性质：设$\{M_i\,:\, i\in I\}$是一族左$R$-模，则存在一个左$R$-模$M$以及一族同态$\pi_i:M\to M_i$使得，如果存在另一个模$N$和一族同态$\rho_i:N\to M_i$，那么就唯一存在同态$\rho:N\to M$使得分解$\rho_i:N\xrightarrow{\rho} M \xrightarrow{\pi_i} M_i$成立对任意的$i\in I$都成立。这样的一个模$M$被称为$\{M_i\,:\, i\in I\}$的直积，而$\pi_i$被称为典范投影，通常将$M$记作$\prod_{i\in I}M_i$. 

存在性的证明是简单的，考虑$\{M_i\,:\, i\in I\}$作为集合的直积，很容易检验它有一个$R$-模结构，且投影是同态。更详细的检查这里就略去了。
\end{para}

结合零对象与直积的存在性，现在可以断言，模范畴是一个加性范畴。

\begin{para}[直和]
对偶地，这里描述一下模范畴里的余积，他就是直和。设$\{M_i\,:\, i\in I\}$是一族$R$-模，则存在一个$R$-模$M$以及一族同态$\pi_i:M_i\to M$使得，如果存在另一个模$N$和一族同态$\rho_i:M_i\to N$，那么就唯一存在同态$\rho:M\to N$使得分解$\rho_i:M_i\xrightarrow{\pi_i} M \xrightarrow{\rho} N$成立对任意的$i\in I$都成立。这样的一个模$M$被称为$\{M_i\,:\, i\in I\}$的直和，而$\pi_i$被称为典范内射，通常将$M$记作$\bigoplus_{i\in I}M_i$. 
\end{para}

\begin{pro}
	模范畴中的任意直和都存在。
\end{pro}

\begin{proof}
考虑$\{M_i\,:\, i\in I\}$的形式和$M$，即
\[
	M=\left\{\sum_{i\in I} a_i m_i\,:\, m_i\in M_i\right\},
\]
其中的求和只有有限项，或者说系数$a_i$只有有限项非零（这被称为几乎处处为零，注意到，如果没有拓扑，求和总应该是有限的）。不难看到这是一个模。定义$\pi_i:M_i\to M$为$\pi_i(m_i)=m_i$，并且使得其称为一个模同态。

现在任取$N$和一族同态$\rho_i:M_i\to N$，我们将其扩展为$\rho_i:M\to N$通过补充定义$\rho_i(m)=0$，如果$m\notin M_i$. 随后我们定义$\rho = \sum_{i\in I} \rho_i$，需要检验这个求和对任意的$m\in M$是有限的。为此，任取$m\in M$，由于他可以分解成$m=\sum_i a_i m_i$，所以
\[
	\rho(m)=\sum_i a_i \rho_i(m_i),
\]
求和是有限求和因为$a_i$只有有限项非零。有了构造，泛性质的检验就是直接的了。
\end{proof}

由构造，有限直和与有限直积在模范畴里面是等价的。实际上，这直接来自于模范畴是一个加性范畴。

\begin{para}
考虑两个$R$-模$M_1$和$M_2$，那么$M_1$可以看成$M_1\oplus M_2$的子模，通过$m\to (m,0)$. 反过来，设$M_1$和$M_2$是一个模$M$的两个子模，则我们有如下短正合列
\[
	0\to M_1\cap M_2 \xrightarrow{\mu} M_1\oplus M_2\xrightarrow{\nu} M_1+M_2\to 0,
\]
其中$\mu:m\mapsto (m,m)$，$\nu:(m_1,m_2)\mapsto m_1-m_2$. 所以在$M_1\cap M_2=\{0\}$的时候，我们有同构$\nu: M_1\oplus M_2\to M_1+M_2$. 如果$M_1+M_2=M$，那么就是有同构$M\cong M_1\oplus M_2$.
\end{para}

% \para 注意到交换群为$\zz$-模，所以我们也证明了交换群有直和与直积。

\begin{para}[核与余核]
左$R$-模范畴内，设$f:M\to N$，不难检验
\[
	\ker(f)=f^{-1}(0)\subset M,
\]
作为核自带的态射取作典范含入同态$i:\ker(f)\to M$.

同样，不难检验
\[
	\coker(f)=N/f(M).
\]
作为余核自带的态射取作典范商同态$\pi:N\to N/f(M)$.
\end{para}

于是，在模范畴中，任意的等值子与余等值子都存在。同时，由于模范畴是准加性的，单态等价于$\ker(f)=0$，由$\ker$的构造，这又等价于$f$是单射。同样，可以检验，满态等价于满射。

\begin{thm}
模范畴是完备与余完备的，即任意的极限与余极限存在。
\end{thm}

这直接来自于Theorem \ref{wanbei}, \ref{yuwanbei}.

\begin{thm}
模范畴是Abel范畴。
\end{thm}

\begin{proof}
我们需要验证任意单态都是$\ker$，而任意满态都是$\coker$. 这并不困难，设$f:M\to N$是单的，记$\pi:N\to N/f(M)$是商同态，则$f=\ker(\pi)$. 实际上，考虑交换图
\[
\begin{xy}
	\xymatrix{
		M\ar[r]^-{f}&N\ar@<0.3ex>[r]^-{\pi} \ar@<-0.3ex>[r]_-{0}&N/f(M)\\
		X\ar@{.>}[u]^-{h}\ar[ur]_-{g}
	}
\end{xy}
\]
我们只需要构造$h:X\to M$即可。取$x\in X$，由于$\pi (g(x))=0\in N/f(M)$，所以$g(x)\in f(M)$. 定义$h(x)=f^{-1}(g(x))$，不难检验这是一个同态。最后，设$h'$也满足上图的分解，则$f(h'(x))=f(h(x))$，由$f$是单的，$h'=h$，所以分解唯一。

同理，如果$f:M\to N$是满射，考虑自然的含入同态$i:\ker(f)\hookrightarrow M$，不难检验$f=\coker(i)$.
\end{proof}

\section{自由对象}

% 一句话来概括自由对象，它是遗忘函子的左伴随函子的像，遗忘函子的左伴随函子称为自由函子，所以自由对象是自由函子作用在一个对象上得到的。何谓伴随函子？给定一个函子$f:\mathcal{C}\to \mathcal{D}$，它的伴随函子从某种程度上来说就是它的逆$g:\mathcal{D}\to \mathcal{C}$. 但是远不如逆那么强，准确来说，就是存在函子同态（自然变换）$\sigma:fg\to \id_{\mathcal{D}}$以及$\tau:\id_{\mathcal{C}}\to gf$使得自然变换的复合
% \[
% 	f\xrightarrow{f\tau}fgf\xrightarrow{\sigma f}f,\quad g\xrightarrow{\tau g}gfg\xrightarrow{g\sigma}g
% \]
% 都得到恒等自然变换。此时$f$被称为$g$的左伴随函子，$g$被称为$f$的右伴随函子，而$f$和$g$被称为一对函子。

% 稍微解释一下上面的复合条件。考虑$\mathcal{C}$中所有形如$g(Y)$的对象构成的类$g(\mathcal{D})$，选$g(\mathcal{D})$中对象之间的态射都形如$g(\varphi)$，则$g(\mathcal{D})$构成了$\mathcal{C}$的一个子范畴。类似地，我们有$\mathcal{D}$的子范畴$f(\mathcal{C})$. 它们就大概类似于函数的像。

% 于是$\tau$实际上就是一个从$\mathcal{C}$到$g(\mathcal{D})$的函子

自由对象的出现与遗忘函子联系紧密，某种程度上，他是遗忘函子的“逆”。另一方面，自由对象描述了“自由生成”这个现象。为给出直观，我们下面以左$R$-模范畴${}_R\mathsf{Mod}$到集合范畴$\mathsf{Set}$的遗忘函子$f$为例，它使得$M$忘掉了代数结构，变成了集合$f(M)=|M|$. 

\begin{para}
设$S\subset M$是群$M$的一个子集，如果任取$M$中的元素$m$，都存在有限个$s_1$, $\dots$, $s_n\in S$和$r_1$, $\dots$, $r_n\in R$使得$m=\sum_{i=1}^n r_is_i$，则称$S$生成了$M$.
\end{para}

这是一个非常自然的定义。反过来，如果我们给出一个集合$S$，不管是不是某个模的子集（这样就能有一个已知的运算），我们是否可以找到一个模$M$使得$S$作为$M$的子集生成了$M$？更进一步，如果$m$写成了两种有限和$\sum_{i=1}^p r_is_i$和$\sum_{j=1}^q r'_js'_j$，则$p=q$，且经过适当的指标重排有$r_i=r'_i$和$s_i=s'_i$. 则称$m$的分解唯一。如果$S$生成的模$M$中的任意元素到$S$的分解都唯一，这样的$M$，我们被称为被$S$自由生成的。如果一个模是被某个集合自由生成的，则称这个模是自由模。

当然，我们可以用态射的语言来表述这一点。在所有$S$生成的模中，自由生成的那个记作$g(S)$. 则对任意的$S$生成的模$N$，都存在唯一的满射$\varphi:g(S)\to N$使得$\varphi(s)=s$对$s\in S$都成立。因此，简单来说，$S$自由生成的模$M$是$S$所能生成的群中“极大”的。所谓的“自由”，也可以理解为生成元之间不存在“关系”。

特别地，如果$S$本身就是一个模，只不过忘掉模结构，即它具有形式$f(N)$. 那么$S$自由生成了一个群$g(S)$，这个过程就类似$S$回忆起了群结构。在这个角度，我们可以认为，这是遗忘函子的“逆”。

之所以不一定是真正的逆，考虑$2+4=6$，在遗忘函子的作用下，我们忘掉了$2+4=6$，那么在回忆起群结构的时候，只能把$2$, $4$, $6$单独处理，引入一个新的元素`$2+4$'来表示$2+4$的结果，而不与$6$建立联系。如果我们需要回忆其全部的结构，$\varphi$也是重要的，他将`$2+4$'就映回到了$6$.

\begin{para}[自由模的存在性]
设$S$是集合，我们定义$R^S=\bigoplus_{i\in S}R$，不难检查，$R^S$是由$S$生成的自由模。从直和的构造，这个检查是直接的。

如果$I$是有限集，$n=|I|$，则我们通常将自由模$R^I$记作$R^n$. 记$1_i$为第$i$个指标的$R$中的$1$.
\end{para}

\begin{para}
设$M$是一个$R$-模，$S$是他的一个子集，称呼$M$被$S$生成，就是说$M$中的元素可以写成$S$中元素的有限线性组合。即任取$m\in M$，存在一个系数集$\{a_s\in R\,:\, s\in S\}$，其中只有有限个系数非零，使得
\[
	m=\sum_{s\in S}a_s s.
\]
称呼一个$R$-模$M$是有限生成的，就是说存在一个$M$的有限子集生成他。

显然$R^I$由$\{1_i\,:\,i\in I\}$生成，其中$1_i$代表的是第$i$个指标的$R$中的$1$，所以$R^n$是有限生成模。
\end{para}

\begin{para}
现在，给定一个集合$S$，我们定义$g(S)=R^S$. 给定一个集合之间的映射$u:S\to T$，我们通过$g(u)(s)=u(s)$定义出一个模同态$g(u):g(S)\to g(T)$. 所以，$g$就构成了一个从$\mathsf{Set}$到${}_R\mathsf{Mod}$的函子。

给定一个模$M$，我们现在来考虑$g(f(M))$. 由自由模的定义，我们知道应该还有一个满同态$\varphi_M:g(f(M))\to M$. 改变$M$，我们就得到了一个自然变换$\varphi:gf\to \id_{{}_R\mathsf{Mod}}$. 实际上，只需要检验如下交换图
\[
	\xymatrix{
	M\ar[d]_{\varphi_M}\ar[r]^u&N\ar[d]^{\varphi_N}\\
	g(f(M))\ar[r]^{g(f(u))}&g(f(N))\\
	}
\]
即可。

类似地，给出一个集合$S$，我们来考虑$f(g(S))$，由于$S\subset g(S)$，所以存在自然的单同态（含入映射）$\psi_S:S\hookrightarrow f(g(S))$. 改变$S$，我们就得到了一个自然变换$\psi:\id_{\mathsf{Set}}\to fg$.

设$S$是一个集合，考虑如下映射复合
\[
	g(S)\xrightarrow{g(\psi_S)}g(f(g(S)))\xrightarrow{\varphi_{g(S)}}g(S),
\]
不难发现这就是$\id_{g(S)}$. 实际上，由于这是一个模同态，且$S$生成$g(S)$，所以只要验证$s\mapsto s$即可，其中$s\in S$. 这是直接的。

于是，从函子的抽象层次，这就是在说自然变换
\[
	g\xrightarrow{g \psi}gfg\xrightarrow{\varphi g}g
\]
就是$\id_g$. 同理，可以看到自然变换
\[
	f\xrightarrow{\psi f}fgf\xrightarrow{f \varphi}f
\]
就是$\id_f$.
\end{para}

\begin{para}
现在回到任意的范畴，如果对$f:\mathcal{C}\to \mathcal{D}$和$g:\mathcal{D}\to \mathcal{C}$存在自然变换$\varphi:gf\to \id_{\mathcal{C}}$以及$\psi:\id_{\mathcal{D}}\to fg$使得自然变换的分解
\[
	\id_g:g\xrightarrow{g \psi}gfg\xrightarrow{\varphi g}g
\]
和
\[
	\id_f:f\xrightarrow{\psi f}fgf\xrightarrow{f \varphi}f
\]
成立。则$(g,f)$被称为一对伴随函子，$g$是左伴随函子，而$f$是右伴随函子。
\end{para}

因此，从集合生成自由模的函子是模范畴到集合范畴的遗忘函子是一个伴随函子，前者是左伴随，后者是右伴随。一般地，遗忘函子的左伴随函子被称为自由函子。自由函子的像被称为一个自由对象，即如果$g$是自由函子，则形如$g(S)$的对象是自由对象。

上面这个伴随函子的定义并不是最常用的，一般而言，我们会使用下面这个定义。

\begin{para}
设$f:\mathcal{C}\to \mathcal{D}$和$g:\mathcal{D}\to \mathcal{C}$是一对函子，如果对任意的$T\in\mathcal{C}$和$Y\in\mathcal{D}$存在自然同构
\[
	\alpha(T,Y):\mathcal{C}(T,g(Y))\to \mathcal{D}(f(T),Y),
\]
则$(f,g)$被称为一对\idx{伴随函子}（\idx{adjoint functor})。$f$被称为$g$的左伴随函子，$g$被称为$f$的右伴随函子。
\end{para}

从模的遗忘函子和其左伴随的函子来看，这个同构应该是清楚的，这是自由生成的“极大性”保证的。这里就不检验了。

在定义中，固定$Y$，对$T$的那个自然同构说明$g(Y)$是反变函子$\mathcal{D}(f(\star),Y)$的表示对象。反过来其实也对，如果对每一个$Y$，反变函子$T\mapsto {\mathcal{D}}(f(T),Y)$都是可表的，则我们可以构造出他的一个右伴随函子。所以实际上，双函子同构可以减弱为对$T$的。下面我们证明这一点。

\begin{proof} 
	设$\mathcal{C}$和$\mathcal{D}$是两个范畴，而$f:\mathcal{C}\to \mathcal{D}$是一个函子。对于给定的$Y\in\mathcal{D}$，反变函子$T\mapsto {\mathcal{D}}(f(T),Y)$属于$\hat{\mathcal{C}}$. 如果他是可表函子，被$g(Y)$所表示，于是就有函子同构$\alpha(Y):h_{g(Y)}\to {\mathcal{D}}(f(\star),Y)$：给出$S$, $T\in \mathcal{C}$以及同态$\psi:S\to T$，有交换图
	\[
	\begin{xy}
		\xymatrix{
			h_{g(Y)}(T)\ar[rr]^-{\alpha(Y,T)} \ar[d]_{\psi^*}&&{\mathcal{D}}(f(T),Y) \ar[d]^{f(\psi)^*}\\
			h_{g(Y)}(S)\ar[rr]^-{\alpha(Y,S)}&&{\mathcal{D}}(f(S),Y)
		}
	\end{xy}
	\]
	其中$\alpha(Y,T)$用来简记$\alpha(Y)(T)$. 任取$u:T\to {g(Y)}$，有$\alpha(Y,S)(u\psi)=\alpha(Y,T)(u)f(\psi)$. 特别地，当$T=g(Y)$时，取$u=\id_{g(Y)}$，记$\alpha(Y,g(Y))\bigl(\id_{g(Y)}\bigr)=\sigma_Y:f(g(Y))\to Y$，则$\alpha(Y,S)(\psi)=\sigma_Y f(\psi)$，其中$\psi:S\to g(Y)$.

	改变$Y$，即给出一个态射$v:Y\to Y'$，$g(v)=\alpha^{-1}{Y}\left(v\sigma_Y\right):g(Y)\to g(Y')$是一个态射。于是$g:Y\mapsto g(Y)$，以及$g:v\mapsto \alpha^{-1}_{g(Y)}\left(v\sigma_Y\right)$就构成了一个函子$g:\mathcal{D}\to \mathcal{C}$. 再记$\beta_T(Y)=\alpha(Y,T)$，对每一个$T$，$\beta_T$将给出了函子同构
	\[
		\beta_T:\mathcal{C}(T,g(\star))\to \mathcal{D}(f(T),\star).
	\]
	自然变换的检验是直接的。于是$\alpha(Y,T)$就是一个双函子同构。
\end{proof}

\begin{pro}
伴随函子的两种定义是等价的。
\end{pro}

\begin{pro}
设$L:\mathcal{C}\to \mathcal{D}$是一个左伴随函子，而$R:\mathcal{D}\to \mathcal{C}$是一个右伴随函子。设有一个$\mathcal{C}$中的$I$-图$X:I\to \mathcal{C}$以及一个$\mathcal{D}$中的$J$-图$Y:J\to \mathcal{D}$，于是，$LX$是$\mathcal{D}$中的$I$-图，$RY$是$\mathcal{C}$中的一个$J$图，并且存在同构
\[
	L{\varinjlim}_{i\in I} X_i\cong {\varinjlim}_{i\in I} (LX_i),\quad
	R{\varprojlim}_{j\in J} Y_j\cong {\varprojlim}_{j\in J} (RY_j).
\]
\end{pro}

粗略来说，就是左伴随函子与余极限可交换，而右伴随函子与极限可交换。

\begin{proof}
	命题的证明是利用Yoneda引理，他有协变和反变两个版本：协变的是，如果函子$\mathcal{C}(X,-)$与函子$\mathcal{C}(X',-)$同构，则$X\cong X'$. 反变的是，如果函子$\mathcal{C}(-,X)$与函子$\mathcal{C}(-,X')$同构，则$X\cong X'$.

	由Proposition \ref{homlimit}，我们知道如下函子同构
	\[
	\mathcal{C}\left(-,{\varprojlim} RX_i\right)\cong {\varprojlim} \mathcal{C}(-,RX_i),
	\]
	连同伴随函子的函子同构，有如下同构链
	\[
	\mathcal{C}\left(-,{\varprojlim} RX_i\right)\cong {\varprojlim} \mathcal{C}(-,RX_i)\cong {\varprojlim} \mathcal{D}(L-,X_i)\cong \mathcal{D}\left(L-,{\varprojlim} X_i\right)\cong \mathcal{C}\left(-,R{\varprojlim} X_i\right),
	\]
	所以${\varprojlim} RX_i\cong R{\varprojlim} X_i$.

	同样由Proposition \ref{homlimit}，有如下函子同构
	\[
	\mathcal{D}\left({\varinjlim} LX_i,-\right)\cong {\varprojlim} \mathcal{D}(LX_i,-),
	\]
	连同伴随函子的函子同构，有如下同构链
	\[
	\mathcal{D}\left({\varinjlim} LX_i,-\right)\cong {\varprojlim} \mathcal{D}(LX_i,-)\cong {\varprojlim} \mathcal{C}(X_i,R-)\cong \mathcal{C}\left({\varinjlim} X_i,R-\right)\cong \mathcal{D}\left(L{\varinjlim} X_i,-\right),
	\]
	所以${\varinjlim} LX_i\cong L{\varinjlim} X_i$.
\end{proof}

下面我们给出一些对应的遗忘函子的自由对象。

\begin{para}
设$U$是一个集合，上面有乘法运算，满足结合律，这样的代数结构被称为\idx{半群}（\idx{semigroup}）. 如果半群含有乘法单位元，则称他为\idx{幺半群}（\idx{monoid}）. 群是特殊的幺半群，一个环除去加法结构也是一个幺半群。半群之间的同态依然定义为满足$f(ab)=f(a)f(b)$的映射$f$. 所以所有半群构成一个范畴，所有幺半群也构成一个范畴。

从幺半群到集合有自然的遗忘函子。反过来，下面从一个集合构造一个幺半群，这就构成了幺半群范畴的自由对象。

设$S$是一个集合，设$U(S)$作为集合是$S$中所有有限长序列（或者说有序组）的集合，其中空序列也看成有限长序列。对于序列$(a_1$, $\cdots$, $a_n)$，我们通常记作$a_1\cdots a_n$，将其称为一个字符串，而空字符串记作$1$. 两个字符串之间的乘法就定义成字符串的连接，即
\[
	(a_1\cdots a_n)(b_1\cdots b_m)=a_1\cdots a_nb_1\cdots b_m,
\]
空字符串因此自然地成为该乘法的单位元，结合律由构造也是显然的。因此$U(S)$就构成了一个幺半群，他被称为被$S$生成的自由幺半群。泛性质的检验是直接的。
\end{para}

自由交换幺半群的构造也是类似的，可以理解成所有有限长无序组，乘法定义为无序组的拼接。

\begin{para}
类似于幺半群，从集合$S$出发，可以构造自由群$G(S)$，他是群范畴的自由对象。首先从每个$s\in S$出发，新建一个符号$s^{-1}$，这样就有了一个新的集合$S^{-1}=\{s^{-1}\,:\, s\in S\}$. 然后考虑自由幺半群$U(S\cup S^{-1})$. 通过$\mu: ss^{-1}\mapsto 1$以及$\mu: s^{-1}s\mapsto 1$定义一个半群自同态$\mu:U(S\cup S^{-1})\to U(S\cup S^{-1})$，则我们需要的自由群$G(S)$就是$\mu$在$U(S\cup S^{-1})$中的像。$G(S)$确确实实是一个群的检验是直接的，这里略去。
\end{para}

上面这个构造也可以看成从一个幺半群构造一个群的过程，这点直接令$S$是一个幺半群即可。

\para 设$S$是群$G$的一个子集，考虑自由群$G(S)$，通过任取$s\in S$，$\mu(s)=s$将给给出一个群同态$\mu:S\mapsto G$，定义子群$\langle S\rangle=\mu(G(S))$，他被称为集合$S$生成的子群。

\begin{para}
当然也有不是到集合范畴的忘却函子，比如将一个交换群看成一个群的忘却函子。那么反过来，我们要从群构造一个交换群，这就构成了群的交换化的过程。这是上面那个忘却函子的自由对象。

设$G$是一个群，记$[G,G]$是$G$中所有形如$aba^{-1}b^{-1}$的元素构成的集合生成的子群。这是一个正规子群，任取$b\in G$，存在形如$aba^{-1}b^{-1}\in [G,G]$使得$(aba^{-1}b^{-1})b=aba^{-1}=b(b^{-1}aba^{-1})\in b[G,G]$，所以$[G,G]b=b[G,G]$. 考虑商群$G/[G,G]$，可以看到，这是一个交换群，因为在这个商群中，$aba^{-1}b^{-1}$和$e$看成是一样的，即$ab$和$ba$看成是一样的。

从一个集合$S$，可以构造自由群$G(S)$，然后将其交换化得到了一个交换群$A(S)=G(S)/[G(S),G(S)]$. 这被称为自由交换群，他是交换群范畴到集合范畴的遗忘函子伴随的自由对象。而这又可以通过看成自由$\mathbb{Z}$-模。
\end{para}

\section{张量积}

\begin{thm}\label{thmten}
对任意的环$R$, $S$和$T$，存在双函子$*\otimes_S -:{}_R\mathsf{Mod}_S\times {}_S\mathsf{Mod}_T\to {}_R\mathsf{Mod}_T$使得
\[
	{}_R\!\Hom_{T}(M\otimes_S N,P)\cong {}_R\!\Hom_S(M,\Hom_{T}(N,P)),
\]
对$M\in {}_R\mathsf{Mod}_S$, $N\in {}_S\mathsf{Mod}_T$, $P\in {}_R\mathsf{Mod}_T$是（到交换群范畴的）三函子同构。因此，固定$M$, $N$，函子$*\otimes_S N$或者$M\otimes_S -$都是一个左伴随函子，对应地，还有右伴随函子。
\end{thm}

这个定义是纯范畴式的，所有关于元素的细节实际上是利用Lemma \ref{lemmod}藏了起来。双函子的存在性我们慢慢来研究。

% 任意的环$R$都可以看成一个$\zz$-模，当然也可以看成一个$R$-模，所以$R\in {}_R\mathsf{Mod}_\zz$，此时再考虑一个右$S$-模$M$. 于是，$R\otimes_\zz M\in {}_R\mathsf{Mod}_S$且存在函子性同构
% \[
% 	{}_R\!\Hom_{S}(R\otimes_\zz M,-)\cong {}_R\!\Hom(R,\Hom_{S}(M,-)),
% \]
% 注意到左$R$-模的函子性同构$\varphi\mapsto \varphi(1)$
% \[
% 	{}_R\!\Hom(R,\star)\cong \star,
% \]
% 所以我们就得到了函子性同构
% \[
% 	{}_R\!\Hom_{S}(R\otimes_\zz M,-)\cong \Hom_{S}(M,-).
% \]

作为推论，根据左伴随函子与逆极限可交换，而直和是模范畴的一种逆极限，我们可以得知同构
\[
	\left(\bigoplus_i M_i\right)\otimes_S N\cong \bigoplus_i \left(M_i\otimes_S N\right).
\]
类似地，可以断言$-\otimes_S N$和$M\otimes_S *$都是左正和函子。

我们下面回到传统的张量定义，它显性地写出来关于元素的细节。

\para 张量抽象了多线性函数，尤其是双线性函数。设$M\in {}_R\mathsf{Mod}_S$, $N\in {}_S\mathsf{Mod}_T$, $P\in {}_R\mathsf{Mod}_T$，那么我们称$f:M\times N\to P$为一个双线性函数，如果他满足
\[
	f(m+n,m')=f(m,m')+f(n,m'),\quad f(m,m'+n')=f(m,m')+f(m,n'),
\]
以及对$r\in R$, $s\in S$, $t\in T$满足$f(rms,nt)=rf(m,sn)t$. 

特别地，如果对任意的一个$M\times N$上的双线性函数$f:M\times N\to P$，都存在一个双线性函数$\varphi$和一个$Q\in M\in {}_R\mathsf{Mod}_T$，可以唯一分解为
\[
	f:M\times N\xrightarrow{\varphi} Q\xrightarrow{h_f}P,
\]
其中$h_f$对每一个双线性函数$f$存在且唯一，则称呼$Q$为$M$与$N$的张量积，记做$M\otimes_S N$，而$\varphi(m,n)$记做$m\otimes_S n$，如果下标$S$不重要，那么我们可以省略他。

% 设$R$是交换环，$A$和$B$都是$R$-模，那么$A\times B$具有$R$-模结构，即$r(a,b)=(ra,b)$. 通过将$r(a\otimes b)$可以定义为$(ra)\otimes b$，$A\otimes_R B$显然有一个$R$-模结构，这样，$\varphi$将是一个$R$-模同态。而上面的泛性质，也可以改成相应的$R$-模和$R$-模同态。

\begin{lem}
张量积存在。而且由上面的泛性质，他确定到一个同构。
\end{lem}

\begin{proof} 

% 对于唯一性，我们考虑两个张量积$(G,\varphi)$和$(G',\varphi')$，那么根据张量积的性质，有分解
% \[
% 	\varphi:A\times B\xrightarrow{\varphi'} G'\xrightarrow{h_{\varphi}}G,\quad \varphi':A\times B\xrightarrow{\varphi} G\xrightarrow{h_{\varphi'}}G',
% \]
% 所以只要验证$h_\varphi\circ h_{\varphi'}=\id_{G}$和$h_{\varphi'}\circ h_{\varphi}=\id_{G'}$就好了，这样我们就得到了$G$和$G'$之间的同构。而上述等式来自于分解的唯一性，显然，我们有分解
% \[
% 	A\times B\xrightarrow{\varphi'} G'\xrightarrow{h_{\varphi}}G\xrightarrow{h_{\varphi'}}G',\quad A\times B\xrightarrow{\varphi'} G'\xrightarrow{\id_{G'}}G',
% \]
% 显然，所以由唯一性得到了$h_{\varphi'}\circ h_{\varphi}=\id_{G'}$，同理有另一个等式。

泛性质所以唯一，这点是很清楚的。对于存在性，我们直接构造。首先，我们知道在交换群范畴（作为$\zz$-模）有直和存在，那么我们可以构造自由交换群
\[
	F=\bigoplus_{(m,n)\in M\times N} \zz,
\]
$F$中对应指标$(m,n)$的那个$\zz$中的$1$我们记作$1_{m,n}$. 

我们令$H$是由
\[
	1_{m,n}+1_{m',n}-1_{m+m',n},\quad 1_{m,n}+1_{m,n'}-1_{m,n+n'},\quad 1_{ms,n}-1_{m,sn}
\]
生成的子群，那么我们$M\otimes N$就可以构造为$F/H$，令$\varphi(m,n)=m\otimes n=[1_{m,n}]$，即$1_{m,n}$的陪集。

$F/H$确实有一个自然的左$R$-模右$T$-模结构，实际上，我们任取$a=\sum_{i}k_i m_k\otimes n_k \in F/H$，再任取$r\in R$, $t\in T$，我们定义
\[
	rat=\sum_{i}k_i (rm_k)\otimes (n_kt).
\]

有了构造之后，可以直接检验这确实是张量积，具体的检验这里就不进行了。
\end{proof}

\para 有了两个模的张量积，我们自然也可以拓展为三个模的张量积，我们可以通过模仿两个模的张量积的泛性质\footnote{即三线性的函数可以唯一分解。}，定义一个新的三个模之间的张量积$A\otimes B\otimes C$，然后可以检验$(A\otimes B)\otimes C$和$A\otimes (B\otimes C)$同时也满足泛性质，所以他们之间是同构的。在这层意义上，我们可以认为张量积满足结合律，因此我们自然也有了有限个模的张量积。

\para 下面讨论张量积在同态下的表现，即张量积作为函子的表现。设$\varphi\in {}_R\!\Hom_S(M,M')$和$\psi\in {}_S\!\Hom_T(N,N')$，则它诱导了一个左$R$-模右$T$-模同态
\[
	\alpha(\varphi,\psi):M\otimes N\to M'\otimes N',
\]
使得复合公式
\[
	\alpha(\varphi'\varphi,\psi'\psi)=\alpha(\varphi',\psi')\alpha(\varphi,\psi)
\]
成立。大家经常将$\alpha(\varphi,\psi)$记作$\varphi\otimes \psi$，两个模同态的张量积的意义后面会阐述，这里看成形式的符号即可。

\begin{proof}
	映射
	\[
	\begin{array}{ccc}
		M\times N&\to& M'\otimes N'\\
		(m,n)&\mapsto& \varphi(m)\otimes \psi(n)
	\end{array}
	\]
	显然是双线性的，所以它诱导了映射$M\otimes N\to M'\otimes N'$，而张量积的泛性质中的唯一性给出了复合公式，于是这就是我们想要的$\alpha(\varphi,\psi)$.
\end{proof}

注意到复合公式成立意味着成立交换图
\[
\begin{xy}
	\xymatrix
	{
		M\otimes N\ar[rr]^{\alpha(\id_M,\psi)}\ar[d]_{\alpha(\varphi,\id_{N})}&&M\otimes N'\ar[d]^{\alpha(\varphi,\id_{N'})}\\
		M'\otimes N\ar[rr]^{\alpha(\id_{M'},\psi)}&&M'\otimes N'
	}
\end{xy}
\]
成立。

上面的交换图用范畴论的语言来表述就是，$-\otimes N$以及$-\otimes \id_N:=\alpha(-,\id_N)$一起构成了一个函子，而同态$N\to N'$将诱导出一个函子间的态射（即自然变换）。这样的同态我们称为自然同态或者函子式同态，描述同态其实就是建立范畴论的初衷，为了抽象出自然变换才定义了范畴等概念。然后到了教科书上，逻辑就反了过来。同理，$(N\otimes -,\id_N\otimes -)$也是一个函子。

\para 上一个命题给出了如下映射：
\[
	\alpha:{}_R\!\Hom_S(M,M')\times {}_S\!\Hom_T(N,N')\to {}_R\!\Hom_T(M\otimes N,M'\otimes N'),
\]
且上述映射是双线性的，所以他自然诱导了一个映射
\[
	\Hom(M,M')\otimes \Hom(N,N')\to \Hom(M\otimes N,M'\otimes N').
\]
这也就是为什么大家将$\alpha(\varphi,\psi)$记作$\varphi\otimes \psi$. 

\begin{para}
现在我们回到Theorem \ref{thmten}的证明，即存在三函子同构
\[
	{}_R\!\Hom_{T}(M\otimes_S N,P)\cong {}_R\!\Hom_S(M,\Hom_{T}(N,P)).
\]

\begin{proof}
记${}_RH_T(M\times N,P)$是所有从$M\times N$到$P$的双线性映射，从张量积的泛性质，我们知道有唯一的态射$\varphi_{M,N}:M\times N\to M\otimes_S N$使得
\[
	(\varphi_{M,N})^*:{}_RH_T(M\times N,P)\to {}_R\!\Hom_{T}(M\otimes_S N,P)
\]
是一个同构。

另一方面，给定$f\in {}_R\!\Hom_S(M,\Hom_{T}(N,P))$以及$m\in M$, $n\in N$，我们发现$f(m)(n)\in P$，因此它定义了$\psi(f):M\times N \to P$，通过$\psi(f)(m,n)=f(m)(n)$. 现在，任取$r\in R$, $s\in S$, $t\in T$，我们有
\[
	\psi(f)(rms,nt)=f(rms)(nt)=f(rms)(n)t=(rf(m)s)(n)t=r(f(m)(sn))t=r\psi(m,sn)f,
\]
其中$(f(m)s)(n)=f(m)(sn)$直接来自于$\Hom_{T}(N,P)$模结构的定义，见Lemma \ref{lemmod}. 并且，显然
\[
	\psi(f)(m+m',n)=\psi(f)(m,n)+\psi(f)(m',n),\quad \psi(f)(m,n+n')=\psi(f)(m,n)+\psi(f)(m,n'),
\]
所以$\psi:{}_R\!\Hom_S(M,\Hom_{T}(N,P))\to {}_RH_T(M\times N,P)$. 

反过来，任取双线性映射$g:M\times N \to P$，我们可以通过$\theta(g)(m)(n)=g(m,n)$来给出同态
\[
	\theta(g)\in {}_R\!\Hom_S(M,\Hom_{T}(N,P)).
\]
不难检验$\psi$和$\theta$互逆，所以是一对同构。

综上，我们得到了同构
\[
	{}_R\!\Hom_S(M,\Hom_{T}(N,P))\cong {}_RH_T(M\times N,P)\cong {}_R\!\Hom_{T}(M\otimes_S N,P),
\]
自然同构是不难的，这里就略去检验了。很多时候，这不是检验不检验的问题，这是一个相信不相信的问题。
\end{proof}
\end{para}

\begin{pro}
设$M\in {}_R\mathsf{Mod}_S$，则存在自然同构
\[
	R\otimes_R M\cong M\cong M\otimes_S S.
\]
\end{pro}

\begin{proof}
左边右边证明完全是类似的，我们就证明左边的情况。

记$(r,m)\mapsto rm$为映射$\varphi$，毫无疑问这是一个双线性映射，所以诱导了一个同态$\psi:R\otimes M\to M$，使得分解$\varphi:R\times M\xrightarrow{h} R\otimes M\xrightarrow{\psi} M$成立。毫无疑问，$\psi$是一个满射，因为对任意的$m$都有$m=\varphi(1,m)$，所以$m=\psi(h(1,m))$. 注意到$R\otimes M$里面的元素可以写成这样的有限和
\[
\sum_i r_i\otimes m_i=\sum_i 1\otimes r_im_i=1\otimes \left(\sum_i r_i m_i\right),
\]
因此，$\psi\left(\sum_i r_i\otimes m_i\right)=0$推出$\sum_i r_i m_i=0$，再利用上面的等式推出$\sum_i r_i\otimes m_i=0$. 所以$\psi$是一个单射。

自然同构是简单的。
\end{proof}

\para 从这里开始，以后讨论的张量积都是$R$-模范畴（交换环自然定义的双边$R$-模）的张量积，所以两个$R$-模的张量积依然是$R$-模，所有出现的同态都是$R$-模同态。并且，我们有双函子同构$-\otimes *\cong *\otimes -$.

\begin{pro}
$(R/\mathfrak{a})\otimes M\cong M/\mathfrak{a}M$，其中$\mathfrak{a}$是$R$的一个理想。
\end{pro}

\begin{proof}
	记$(\bar{r},m)\mapsto \overline{rm}\in M/\mathfrak{a}M$为映射$\varphi$. 这是一个定义良好的映射，选取$\bar{r}$的不同代表元$r'=r+a$，其中$a\in\mathfrak{a}$，所以$r'm=rm+am$，由于$am\in \mathfrak{a}M$，所以$\overline{r'm}=\overline{rm}$. 双线性性从定义看是显然的，所以诱导了一个交换群同态$\psi:(R/\mathfrak{a})\otimes M\to M/\mathfrak{a}M$，使得分解$\varphi:R/\mathfrak{a}\times M\xrightarrow{h} (R/\mathfrak{a})\otimes M\xrightarrow{\psi} M/\mathfrak{a}M$成立。

	先检验$\psi$是一个满射，这只要检验$\varphi$是一个满射。任取$\bar{m}\in M/\mathfrak{a}M$，则有$\varphi(\bar{1},m)=\bar{m}$. 最后要检验$\psi$是一个单射，
	如果$\psi(\sum_i \bar{r}_i\otimes m_i)=0$，可以推出$\sum_i \overline{r_im_i}=0$，于是$\sum_i r_im_i \in \mathfrak{a}M$，这意味着$r_i\in \mathfrak{a}$，所以$\sum_i \bar{r}_i\otimes m_i=\sum_i 0\otimes m_i=0$.
\end{proof}

\section{代数与多项式环}

设有两个环$A$, $B$和一个环同态$f:A\to B$，再设$a\in A$, $b\in B$，我们可以通过$f$定义他们的乘法为$a\cdot b=f(a)b\in B$，这样环$B$就被赋予了一个$A$-模结构。环$B$若被赋予一个$A$-模结构，则称$B$是一个$A$-\idx{代数}（\idx{algebra}）。

设$B$是$A$-代数，有$f:A\to B$，设$C$也是$A$-代数，有$g:A\to C$，那么$A$-代数之间的同态$h:B\to C$，首先是$B$和$C$之间的环同态，还要和$A$-模结构相容，即$g=h\circ f$. 所有$A$-代数构成一个范畴，记作$\mathsf{Alg}_A$，其中的对象由一个环$B$和一个环同态$\mu:A\to B$构成。

多项式环是幺半群环的一种，所以直接从幺半群环开始。

\para 设$U$是一个幺半群，而$R$是一个环，将其看成一个集合，那么从$U$出发可以构造一个自由$R$-模$R(U)$. 任取$a\in R(U)$，他可以写成$a=\sum_{i\in I} r_i u_i$，其中$I$是一个有限指标集。类似地，同样任取$b\in R(U)$可以写成$b=\sum_{i\in J} s_i v_i$，而$J$同样是一个有限指标集。定义乘法
\[
	ab=\sum_{i\in I,\, j\in J}r_is_j u_i v_j,
\]
结合律与分配律是自然成立的，于是$R(U)$是一个环。

如果$U$是一个交换幺半群，则$R(U)$是一个交换环。此时$R(U)$是一个$R$-代数。

\para 设$S$是一个集合，他生成的自由交换幺半群为$U(S)$，记$R[S]=R(U(S))$，称其为$R$上由集合$S$生成的多项式环。特别地，如果$S$是有限集$\{x_1$, $\cdots$, $x_n\}$，则$R[S]$记作$R[x_1$, $\cdots$, $x_n]$. 

当$S=\{x\}$，$R[x]$中的元素写成$f=\sum_{i=0}^na_ix^i$的形式，这就是熟悉的一元多项式。$x$称之为不定元，不定元只是一个符号，在不发生歧义的情况下可以任意选取。这即如下事实的体现：如果两个集合存在双射，则他们生成的多项式环同构。

从定义，不难发现作为$R$-代数，$R[S\cup T]$与$R[S][T]$同构，所以完全可以把这两个$R$-代数等同。

与从$R$-代数范畴到集合范畴的忘却函子伴随的，正是从一个集合构造多项式。所以多项式是$R$-代数范畴的自由对象。

\para 设$A$是$R$-代数，如果存在满同态$R[x_1,\cdots ,x_n]\to B$，或者说$B$同构于$R[x_1$, $\cdots$, $x_n]/\mathfrak{a}$，其中$\mathfrak{a}$是$R[x_1,\cdots ,x_n]$的一个理想，则我们称呼$B$是有限生成$R$-代数。一个环称为有限生成的就是指他作为$\zz$-代数是有限生成的。如果$B$作为$R$-模是有限生成的，则称$B$作为$A$-代数是有限的。

\para 一个一元多项式$f=\sum_{i=0}^na_ix^i$使得$a_i$不为零的最大的$i$记作$\deg(f)$，称为多项式$f$的幂次，$0$的幂次补充定义为$0$. 最高幂次的系数我们称之为最高次系数，或者首项系数。其余的项目通常我们会指出具体的指标，比如说$k$-次项，就是指$a_kx^k$，而$k$-此项系数就是指$a_k$. 如果最高次系数为$1$，这个多项式称为首一多项式。

对于首一多项式而言$f$，$\deg(fg)=\deg(f)+\deg(g)$. 但是一般的多项式并不如此，比如在$\zz/4\zz$上的多项式$2x$，有$(2x)(2x)=0$.

对于$\deg(f+g)$，我们有估计$\deg(f+g)\leq \max\{\deg(f),\deg(g)\}$，不等号是可以取严格的，同样比如在$\zz/4\zz$上的多项式$2x$，有$2x+2x=0$.

\begin{thm}
多项式除法算法：设$f$, $g\in R[x]$，而且$g$的首项系数可逆，则存在唯一的多项式$p$, $r\in R[x]$使得$f=pg+r$，且$\deg(r)<\deg(g)$.
\end{thm}

\begin{proof}
	可以假设$g$是首一多项式，因为如果设$g$的首项系数为$a$，则$g/a$是一个首一多项式，如果命题对首一多项式成立，即存在$q$, $r\in R[x]$使得$f=q(g/a)+r$，则$f=(q/a)g+r=pg+r$，其中$p=q/a$和$r$都是多项式。这样就得到了我们的命题。

	首先假设存在，证明唯一性。设$f=p'g+r'$以及$f=pg+r$成立，则$(p'-p)g=r'-r$，由于$g$是首一的，且$p'-p$非零，所以$\deg((p'-p)g)\geq \deg(g)$，但是$\deg(r'-r)< \deg(g)$，这就造成了矛盾。下面证明存在性。

	设$\deg(f)=n$, $\deg(g)=m$，如果$n<m$，则取$p=0$, $r=f$. 考虑$n\leq m$的情况，设$f$的首项系数为$a_0$，考虑多项式$f_1=f-a_0x^{n-m}g$，由于$f$和$a_0x^{n-m}g$的最高次项相同，所以$\deg(f_1)<\deg(f)$，如果$\deg(f_1)<\deg(g)$，那么$f=a_0x^{n-m}g+f_1$就给出了分解。

	否则继续对$f_1$进行这样的操作，得到$f_2=f_1-a_1x^{\deg(f_1)-m}g$，再比较$\deg(f_2)$与$\deg(g)$. 不断如是进行下去，由于$f$的幂次有限，而每次操作，幂次都至少减一，所以该过程在进行至多$n-m+1$次后就会停止。设该过程在第$k$次后停止，则我们就得到了
	\[
	f_{k}=f-a_0x^{n-m}g-a_1x^{\deg(f_1)-m}g-\cdots-a_{k-1}x^{\deg(f_{k-1})-m}g
	\]
	使得$\deg(f_k)< \deg(g)$. 即$f=f_0$，则我们就得到了分解
	\[
	f=f_k+a_0x^{n-m}g+a_1x^{\deg(f_1)-m}g+\cdots+a_{k-1}x^{\deg(f_{k-1})-m}g=\left(\sum_{i=0}^{k-1}a_{i}x^{\deg(f_{i})-m}\right)g+f_k.
	\]
	因此$p=\sum_{i=0}^{k-1}a_{i}x^{\deg(f_{i})-m}$以及$r=f_k$就是我们需要的多项式。
\end{proof}

存在性的证明就是整个算法，从算法来看，这个命题即使是对非交换环上的多项式环也是成立的。

\section{矩阵与行列式}

\para 记$1_i=(0,\,\cdots\!,\,1,\,\cdots\!,\,0)\in R^m$，即只有第$i$个位置是一，其他都是零的那个元素。考虑一个模同态$\varphi:R^m\to R^n$，由于
\[
	\varphi\left(\sum_{i} r_i1_i\right)=\sum_{i} r_i\varphi\left(1_i\right),
\]
所以它由所有$\varphi\left(1_i\right)$描述，由于他在$R^n$中，将其写作
\[
	\varphi\left(1_i\right)=\sum_{j}\varphi_{ji}1_j.
\]
于是$\{\varphi_{ij}\,:\, 1\leq i \leq p,\,\,1\leq j \leq q\}$这$p\times q$个数构成的整体称为$\varphi$的矩阵，记作$(\varphi)$，他完全描述了整个同态$\varphi$.

设$\psi:R^n\to R^l$的矩阵是$(\psi)_{ij}$，我们下面计算$\psi\circ\varphi$的矩阵：
\[
	\psi\circ\varphi(1_i)=\psi\left(\sum_{j=1}^n\varphi_{ji}1_j\right)=\sum_{j=1}^n\varphi_{ji}\psi(1_j)=\sum_{j=1}^n\sum_{k=1}^l\psi_{kj}\varphi_{ji}1_k,
\]
所以$\psi\circ\varphi$的矩阵$(\psi\circ\varphi)$为
\[
	(\psi\circ\varphi)_{ki}=\sum_{j=1}^n\psi_{kj}\varphi_{ji},
\]
这被称为矩阵乘法法则。

\para 通常会使用一张表来表示矩阵
\[
(\varphi)=
\begin{pmatrix}
	\varphi_{11} & \varphi_{12} & \cdots & \varphi_{1m}\\
	\varphi_{21} & \varphi_{22} & \cdots & \varphi_{2m}\\
	\vdots & \vdots & \ddots & \vdots \\
	\varphi_{n1} & \varphi_{n2} & \cdots & \varphi_{nm}\\
\end{pmatrix}
\]
可以看到$\varphi(1_i)$关于$\{1_j\in R^n\}$中展开的系数出现在$(\varphi)$的第$i$列。

下面将单独研究矩阵，而不将其看成某个自由模的矩阵。之所以这样，因为有时候我们处理的矩阵并不能很好地表为自由模之间的同态。记号上，表示矩阵时可加或不加括号，比如$\varphi$或者$(\varphi)$. 相应的，表示矩阵元时写作$\varphi_{ij}$或者$(\varphi)_{ij}$. 如果需要以矩阵元来表述矩阵，写作$(\varphi_{ij})$. 

按照习惯，我们下面依旧假设$R$是一个交换环，虽然在非交换环上谈论矩阵也是可能的。称呼一个矩阵是$R$上的矩阵，如果他的矩阵元都属于$R$.

所有环$R$的$m\times n$矩阵构成一个$R$-模，实际上，任取$r\in R$以及矩阵$\varphi$，定义矩阵$r\varphi= (r\varphi_{ij})$. 另取矩阵$\psi$，定义矩阵加法$\psi+\varphi=(\psi_{ij}+\varphi_{ij})$.

矩阵乘法就按照自由模里面推出的法则来定义：
\begin{equation}
\begin{pmatrix}
	\psi_{11} & \psi_{12} & \cdots & \psi_{1n}\\
	\psi_{21} & \psi_{22} & \cdots & \psi_{2n}\\
	\vdots & \vdots & \ddots & \vdots \\
	\psi_{l1} & \psi_{l2} & \cdots & \psi_{ln}
\end{pmatrix}
\begin{pmatrix}
	\varphi_{11} & \varphi_{12} & \cdots & \varphi_{1m}\\
	\varphi_{21} & \varphi_{22} & \cdots & \varphi_{2m}\\
	\vdots & \vdots & \ddots & \vdots \\
	\varphi_{n1} & \varphi_{n2} & \cdots & \varphi_{nm}\\
\end{pmatrix}
=
\begin{pmatrix}
	\sum_{i=1}^n \psi_{1i}\varphi_{i1} & \cdots & \sum_{i=1}^n \psi_{1i}\varphi_{im}\\
	\sum_{i=1}^n \psi_{2i}\varphi_{i1} & \cdots & \sum_{i=1}^n \psi_{2i}\varphi_{im}\\
	\vdots & \ddots & \vdots \\
	\sum_{i=1}^n \psi_{li}\varphi_{i1} & \cdots & \sum_{i=1}^n \psi_{li}\varphi_{im}
\end{pmatrix}
\end{equation}
即$(\psi\varphi)_{ij}$由第一个矩阵的第$i$行和第二个矩阵的第$j$列逐个相乘然后相加而得，矩阵乘法把$l\times n$和$n \times m$的矩阵变成了$l \times m$的矩阵。矩阵乘法满足结合律是直接的计算。

尤其重要的情况是$m=1$的时候，此时，$n\times 1$的矩阵称为一个列，一个列我们直接记成一个$n$-元组$\varphi=(\varphi_1$, $\cdots$, $\varphi_n)$. 其中，记$1_i=(0$, $\cdots$, $1$, $\cdots$, $0)$，即只有第$i$个位置为$1$，其他位置都为零的那个列。所有的列都可以看成$\{1_i\,:\, 1\leq i \leq n\}$的线性组合，
\[
	(\varphi_1,\,\cdots\!,\,\varphi_n)=\sum_{i=1}^n\varphi_i1_i.
\]
特别地，记矩阵$I_n=\begin{pmatrix}1_{1} & 1_{2} & \cdots & 1_{n}\end{pmatrix}$，称之为单位矩阵。由矩阵乘法，对任意的$m\times n$矩阵$\varphi$有$\varphi I_n=\varphi$以及$I_m\varphi =\varphi$成立。单位矩阵具体写出来就是
\[
	I_n=
		\begin{pmatrix}
			1 & & &\\
			& 1 & &\\
			& & \ddots &\\
			& & & 1
		\end{pmatrix}
	=(\delta_{ij}),
\]
其中$\delta_{ij}$被称为Kronecker符号，或者叫Kronecker delta，定义为
\[
	\delta_{{ij}}=
	\begin{cases}
	1,&\text{if } i=j,\\
	0,&\text{if } i\neq j.
	\end{cases}
\]

设$\varphi_{i}=(\varphi_{1i}$, $\cdots$, $\varphi_{ni})$，则一个矩阵可以看成一些列的并列，
\[
	\begin{pmatrix}
	\varphi_{11} & \varphi_{12} & \cdots & \varphi_{1m}\\
	\varphi_{21} & \varphi_{22} & \cdots & \varphi_{2m}\\
	\vdots & \vdots & \ddots & \vdots \\
	\varphi_{n1} & \varphi_{n2} & \cdots & \varphi_{nm}\\
	\end{pmatrix}
	=
	\begin{pmatrix}
	\varphi_{1} & \varphi_{2} & \cdots & \varphi_{m}
	\end{pmatrix},
\]
其中$\varphi_i=(\varphi_{1i}$, $\cdots$, $\varphi_{ni})$. 

关于列的矩阵乘法为
\begin{equation}
\begin{pmatrix}
	\psi_{11} & \psi_{12} & \cdots & \psi_{1n}\\
	\psi_{21} & \psi_{22} & \cdots & \psi_{2n}\\
	\vdots & \vdots & \ddots & \vdots \\
	\psi_{l1} & \psi_{l2} & \cdots & \psi_{ln}
\end{pmatrix}
\begin{pmatrix}
	\varphi_{1} \\
	\varphi_{2}  \\
	\vdots \\
	\varphi_{n} \\
\end{pmatrix}
=
\begin{pmatrix}
	\sum_{i=1}^n \psi_{1i}\varphi_{i}\\
	\sum_{i=1}^n \psi_{2i}\varphi_{i} \\
	\vdots \\
	\sum_{i=1}^n \psi_{li}\varphi_{i}
\end{pmatrix}
\end{equation}
通常将其右侧写作$\psi\varphi$. 那么一般的矩阵乘法则写作：
\[
	\psi
	\begin{pmatrix}
	\varphi_{1} & \varphi_{2} & \cdots & \varphi_{m}
	\end{pmatrix}
	=
	\begin{pmatrix}
	\psi\varphi_{1} & \psi\varphi_{2} & \cdots & \psi\varphi_{m}
	\end{pmatrix}.
\]

\para 下面要讨论行列式函数，行列式函数是对方阵定义的函数，所谓方阵就是$n\times n$矩阵。将所有矩阵元属于环$R$的$n\times n$矩阵构成的集合记作$M_n(R)$. $M_n(R)$通过矩阵加法和乘法构成一个环，但不是交换环，单位元是$I_n$. 

对$M(R,1)$可以通过$(r)\mapsto r$定义一个函数$f_1:M_n(R)\to R$. 然后对$M_n(R)$里面的矩阵$\varphi$，记$\varphi$除去第$i$行第$j$列得到的$(n-1)\times (n-1)$矩阵为$\Phi_{ij}$，定义
\[
	f_n(\varphi)=\sum_{i=1}^n (-1)^{i+j}\varphi_{ij}f_{n-1}(\Phi_{ij}).
\]
这个展开被称为按第$j$列展开，这个归纳定义的目前的缺陷在于，似乎按照不同的两列展开会有不同的结果。其实并不会这样，首先考虑$n=2$的情况，设$\varphi=\begin{pmatrix}a&b\\c&d\end{pmatrix}$，按第一列展开会得到$ad-bc$，按第二列展开也会得到$ad-bc$. 然后假设当$i<n$的时候，$f_i$都已经定义良好了，即并不依赖于按列展开的选取。那么考虑$f_n(\varphi)$的按第$i$列和按第$j$列的两个展开，可以假设$i<j$。对按照第$i$列展开的式子，对所有$f_{n-1}(\Phi_{kl})$按第$(j-1)$列展开。对按照第$j$列展开的式子，对所有$f_{n-1}(\Phi_{kl})$按第$i$列展开。这两个展开将会得到相同的结果。所以$f_n(\varphi)$的定义并不依赖于对列的展开。

这样，对每一个$n$，我们归纳定义了$f_n:M_n(R)\to R$，这个函数对每一个$n$统一记作$\det:M_n(R)\to R$，称之为行列式。设$n\times n$矩阵为$\varphi=\begin{pmatrix}\varphi_{1} & \varphi_{2} & \cdots & \varphi_{n}\end{pmatrix}$，他的行列式记作$\det(\varphi)=\det(\varphi_1$, $\cdots$, $\varphi_n)$，其中每一个$\varphi_i$都是一个$n\times 1$的列。如果矩阵要把他所有的元素写出来，则行列式会记作
\[
\det(\psi)=\begin{vmatrix}
	\psi_{11} & \psi_{12} & \cdots & \psi_{1n}\\
	\psi_{21} & \psi_{22} & \cdots & \psi_{2n}\\
	\vdots & \vdots & \ddots & \vdots \\
	\psi_{l1} & \psi_{l2} & \cdots & \psi_{ln}
\end{vmatrix}.
\]

\begin{pro}
行列式具有以下性质：

\begin{compactenum}[(1)]
\item 行列式对每一个列线性。
\item 行列式中如果有两列相同，则行列式为零。
\item $\det(I_n)=1$对每一个$n$都成立。
\end{compactenum}
\end{pro}

\begin{proof}
	第一点由按列展开的定义可得。对于第二点，我们采用对$n$归纳，当$n=2$的时候，
	\[
		\begin{vmatrix}a&a\\b&b\end{vmatrix}=ab-ab=0.
	\]
	当$n>3$的时候，选不同于该两列的第三列展开，就可以归结到$n-1$的情况，随后由归纳法就得到了结论。

	第三点是直接的计算，对第$n$列展开，我们就得到了
	\[
		\det(I_n)=\det(1_1,\,\cdots\!,\,1_{n-1})=\det(I_{n-1}),
	\]
	最后由$\det(I_1)=\det(1_1)=1$就得到了结论。
\end{proof}

应用第一、第二点，我们有
\[
	0=\det(\cdots\!,\psi+\varphi,\,\cdots\!,\,\psi+\varphi,\cdots)=\det(\cdots\!,\psi,\,\cdots\!,\,\varphi,\cdots)+\det(\cdots\!,\varphi,\,\cdots\!,\,\psi,\cdots),
\]
所以，调换行列式的两列，行列式的值变成相反数。

满足上列性质第一、第二点的函数$M_n(R)\to R$被称为反对称多线性函数。反对称的意思就是调换任意两列将得到相反的结果。

\para 给定一个给定矩阵$\psi=\begin{pmatrix}\psi_{1} & \psi_{2} & \cdots & \psi_{n}\end{pmatrix}$，由于每一个$\psi_i$都可以写成$\psi_i=\sum_{j=1}^n\psi_{ji}1_j$，所以任取一个反对称多线性函数$F$，则
\[
	F(\psi_1,\,\cdots\!,\,\psi_n)=\sum_{j_1=1}^n\cdots \sum_{j_n=1}^n \psi_{j_11}\cdots \psi_{j_n n} F(1_{j_1},\,\cdots\!,\,1_{j_n}),
\]
所以对反对称多线性函数的计算，只要计算所有形如$F(1_{i_1}$, $\cdots$, $1_{i_n})$的式子即可。同时，上面的式子也说明了，多线性函数是矩阵元的多项式函数。

\begin{pro}
设$F:M_n(R)\to R$是一个反对称多线性函数，则$F=F(I_n)D$. 作为推论，行列式的三点性质将完全决定行列式函数。
\end{pro}

\begin{proof} 
	从上面看到的，只要证明
	\[
		F(1_{i_1},\,\cdots\!,\,1_{i_n})=F(I_n)D(1_{i_1},\,\cdots\!,\,1_{i_n}).
	\]
	如果$\{i_1$, $\cdots$, $i_n\}$中有重复指标，两边都为零。如果没有重复指标，采用冒泡排序\footnote{先比较相邻的元素，如果第一个比第二个大，就交换他们两个。对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。在这一点，最后的元素应该会是最大的数。针对所有的元素重复以上的步骤，除了最后一个。持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。}，可以通过不断两两调换两列，将$(i_1$, $\cdots$, $i_n)$变成$(1$, $\cdots$, $n)$，对等式两边进行同样的调换两列的操作，等式依旧成立，所以最后只要检验$F(I_n)=F(I_n)D(I_n)$，而这来自于$D(I_n)=1$.
\end{proof}

\begin{pro}[行列式乘法公式]
$\det(\varphi \psi)=\det(\varphi)\det(\psi)$.
\end{pro}

\begin{proof} 
	由矩阵乘法，
	\[
	\varphi
	\begin{pmatrix}
	\psi_{1} & \psi_{2} & \cdots & \psi_{n}\\
	\end{pmatrix}
	=
	\begin{pmatrix}
	\varphi\psi_{1} & \varphi\psi_{2} & \cdots & \varphi\psi_{n}\\
	\end{pmatrix}
	\]
	因此$\det (\varphi \psi)=\det (\varphi\psi_{1}$, $\cdots$, $\varphi\psi_{n})$.

	将$\det(\varphi\psi_{1}$, $\cdots$, $\varphi\psi_{n})$记作$F(\psi_{1}$, $\cdots$, $\psi_{n})$，可以看到这是一个反对称的多重线性映射，所以
	\[
	F(\psi_{1},\,\cdots\!,\,\psi_{n})=F(I_n)\det (\psi_{1},\,\cdots\!,\,\psi_{n})
	\]
	也就是说
	\[
	\det (\varphi\psi_{1},\,\cdots\!,\,\varphi\psi_{n})=\det(\varphi 1_1,\,\cdots\!,\,\varphi 1_n)\det(\psi_{1},\,\cdots\!,\,\psi_{n}).
	\]

	最后，只需要计算$\varphi 1_i=\begin{pmatrix}\varphi_{1} & \varphi_{2} & \cdots & \varphi_{n}\end{pmatrix}1_i$，由矩阵乘法$\varphi 1_i=\varphi_i$，所以
	\[
	\det(\varphi\psi)=\det(\varphi\psi_{1},\,\cdots\!,\,\varphi\psi_{n})=\det(\varphi_1,\,\cdots\!,\,\varphi_n)\det(\psi_{1},\,\cdots\!,\,\psi_{n})=\det(\varphi)\det(\psi).
	\]
\end{proof}

\para 矩阵的一个起源是线性方程组，这里暂时只考虑$n$个方程$n$个未知元的情况。所谓的线性方程组即如下的方程
\[
	\begin{cases}
	a_{11}x_1+\cdots+a_{1n}x_n=b_1,\\
	\qquad\qquad\,\vdots\\
	a_{n1}x_1+\cdots+a_{nn}x_n=b_n,
	\end{cases}
\]
其中$a_{ij}$, $b_i\in R$是已知的，而解线性方程组就是找到$x_i\in R$满足上述方程。

采用矩阵和矩阵乘法，上述的线性方程组可以写作$ax=b$，其中$a=(a_{ij})=\begin{pmatrix}a_{1} & a_{2} & \cdots & a_{n}\end{pmatrix}$, $x=(x_1$, $\cdots$, $x_n)$和$b=(b_1$, $\cdots$, $b_n)$. 下面将利用行列式给出一种可能的求解方式，其实也就是著名的Cramer法则。陈述如下：

将矩阵的第$i$列换作$b$，计算这个新矩阵的行列式，有
\[
	\det(a_1,\,\cdots\!,\,b,\,\cdots\!,\,a_n)=\det\left(a_1,\,\cdots\!,\,\sum_{j=1}^na_j x_j,\,\cdots\!,\,a_n\right)=\sum_{j=1}^n x_j \det(a_1,\,\cdots\!,\,a_j,\,\cdots\!,\,a_n),
\]
在求和中，除了$j=i$可能行列式$\det(a_1$, $\cdots$, $a_j$, $\cdots$, $a_n)$不为零，其他的行列式，由于有相同的两列都为零，于是
\[
	x_i \det(a)=\det(a_1,\,\cdots\!,\,b,\,\cdots\!,\,a_n).
\]
这就是Cramer法则。如果$\det(a)$可逆，则$x_i=\det(a_1$, $\cdots$, $b$, $\cdots$, $a_n)\det(a)^{-1}$.

\para 利用Cramer法则，可以谈论一个方阵的右逆。设$\varphi$是一个$n\times n$方阵，而$\psi$又是另一个$n\times n$方阵，如果$\varphi\psi=I_n$，则称$\psi$是$\varphi$的右逆，同样，也称$\varphi$是$\psi$的左逆。

设$\psi=\begin{pmatrix}\psi_{1} & \psi_{2} & \cdots & \psi_{n}\\\end{pmatrix}$，则
\[
	\varphi\psi=\begin{pmatrix}\varphi\psi_{1} & \varphi\psi_{2} & \cdots & \varphi\psi_{n}\end{pmatrix}=\begin{pmatrix}1_{1} & 1_{2} & \cdots & 1_{n}\end{pmatrix}=I_n,
\]
所以求右逆等价于求解$n$个线性方程组$\varphi\psi_i=1_i$. Cramer法则告诉我们，如果$\det(\varphi)$可逆，则$\varphi$存在右逆。

\para 设$\varphi$是一个方阵，将$\varphi$除去第$i$行第$j$列得到的矩阵记作$\Phi_{ij}$，则矩阵元$\varphi_{ij}$对应的代数余子式$\varphi_{ji}^*$定义为$(-1)^{i+j}\det(\Phi_{ij})$，定义矩阵$\varphi^*=(\varphi_{ji}^*)$，称作方阵$\varphi$的伴随矩阵。注意到上面$i$和$j$的顺序，伴随矩阵第$i$行第$j$列的矩阵元是原矩阵第$j$行第$i$列的代数余子式，即$(\varphi^*)_{ij}=\varphi_{ji}^*$. 将行列式的按列展开用伴随矩阵重写的话，就写做
\[
	\det(\varphi)=\sum_{j=1}^n\varphi_{ji}\varphi_{ji}^*=\sum_{j=1}^n(\varphi^*)_{ij}\varphi_{ji}.
\]

伴随矩阵给出了方阵左逆的存在性的一些判据，直接计算
\[
	(\varphi^*\varphi)_{ij}=\sum_{k=1}^n(\varphi^*)_{ik}\varphi_{kj}=\sum_{k=1}^n\varphi^*_{ki}\varphi_{kj},
\]
当$i=j$时，由按列展开有$(\varphi^*\varphi)_{ii}=\det(\varphi)$. 当$i\neq j$时，依然利用按列展开，将右边的和式还原成行列式，可以发现第$i$列和第$j$列都是$(\varphi_{1j}$, $\cdots$, $\varphi_{nj})$，所以当$i\neq j$时有$(\varphi^*\varphi)_{ij}=0$. 于是
\[
	\varphi^*\varphi=\det(\varphi)I_n.
\]
所以如果$\det(\varphi)$，他的左逆写作$\det(\varphi)^{-1}\varphi^*$.

\para 如果$\varphi$同时存在左逆和右逆，设$\psi$是$\varphi$的左逆，$\pi$是$\varphi$的右逆，于是
\[
\begin{aligned}
	\psi\varphi\pi&=(\psi\varphi)\pi=I_n \pi=\pi,\\
	\psi\varphi\pi&=\psi(\varphi\pi)=\psi I_n=\psi,
\end{aligned}
\]
所以$\pi=\psi$，此时$\pi=\psi$就被称为矩阵$\varphi$的逆，记作$\varphi^{-1}$. 因此，从Cramer法则与伴随矩阵，我们已经给出了方阵逆存在的一个充分条件：$\det(\varphi)$可逆。

\begin{pro}
方阵$\varphi$左（右）逆存在的充分必要条件是$\det(\varphi)$可逆。如果存在左（右）逆，则也存在右（左）逆，且左逆等于右逆。于是方阵$\varphi$逆存在的充分必要条件是$\det(\varphi)$可逆。
\end{pro}

\begin{proof}
上面已经证明了，如果$\det(\varphi)$可逆，则$\varphi$同时存在左逆以及右逆，且左逆等于右逆。反过来，如果$\varphi$有左逆$\psi$，则$\det(\psi\varphi)=\det(I_n)=1$，由行列式乘法公式，$1=\det(\psi\varphi)=\det(\psi)\det(\varphi)$，于是$\det(\varphi)$可逆。存在右逆同理可以推出$\det(\varphi)$可逆。从$\det(\varphi)$可逆就得出了结论。
\end{proof}

方阵存在逆时，我们会称呼该方阵是可逆的。上面的命题就是在说，环$R$上的方阵$\varphi$可逆当且仅当$\det(\varphi)$可逆。举个例子，整数环$\mathbb{Z}$上的方阵$\varphi$可逆当且仅当$\det(\varphi)=\pm 1$. 而域$k$上的方阵$\varphi$可逆当且仅当$\det(\varphi)\neq 0$. 随后如果可逆，伴随矩阵给出了逆的一个计算公式。

对于交换环，由于乘法可以交换，我们无需担心左逆不能推出右逆。但一般而言，在任意的非交换环里面，左逆存在不一定能推出右逆存在，反之亦然。但是交换环上的方阵构成的环$M_n(R)$中，行列式函数将逆的存在性等价于$R$中逆的存在性，继而保证了$M_n(R)$上左逆存在可以推出右逆存在。