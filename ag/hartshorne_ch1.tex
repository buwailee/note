\documentclass[9pt]{extarticle}
\usepackage[zh]{noteheader}
\usepackage{ctex}

\theoremstyle{plain}%定理环境样式
\newtheorem{defi}{Definition}[section]% 定义定义环境
\newtheorem{pro}[defi]{Proposition}% 定义命题环境
\newtheorem{theo}[defi]{Theorem}% 定义定理环境
\newtheorem{lem}[defi]{Lemma}% 定义引理环境
\newtheorem*{rem}{Remark}% 定义注记环境
\newtheorem{exe}{Exercise}[section]% 定义例子环境

\usepackage{hyperref}%使用xetex引擎
	\hypersetup %一些选项
{
	pdftoolbar=true,  % 显示Acrobat工具栏
	pdfmenubar=true,  % 展开Acrobat目录
	pdfauthor={Unsinn},  % pdf作者，自己填
	bookmarksnumbered=true,%书签中章节编号
	bookmarksopen=true,%目录层次打开
	bookmarksopenlevel=1,%目录层次打开的级数，可选数字或者 \maxdimen最大
}
\input{../defs.tex}

\begin{document}
\title{代数几何（一）笔记}
\author{Buwai. Lee@School of Physics, NJU}
\date{2015年秋季学期}
\maketitle %标题

主要参考教材就是Hartshorne的GTM 052的第一章，可以理解为个人的抄书和翻译，但实际上还是有些个人的内容在里面的。

\section{Affine Varieties}
假设有一个域$k$，他的代数闭包为$\bar{k}$，定义$n$元有序组$\bba^n_k=\bar{k}\times \cdots \times \bar{k}$为（$\bar{k}$上的）$n$维仿射空间，其中的元素被称为点，对一个点$p=(a_1,\cdots ,a_n)$中的$a_i$被称为$p$的坐标。如果不是必须写出域$k$，则$n$维仿射空间通常直接写作$\bba^n$.

考虑域$k$上的多项式环$A=k[x_1,\cdots ,x_n]$，其中的元素都是函数$f:\bba^n\to k$，于是可以定义他的零点集：对于$A$中的一众元素，即一个集合$T$，定义$Z(T)$为$T$的共同零点集，即那些使集合$T$里面元素都为$0$的点。注意到集合$T$可以生成一个多项式环的理想，这个理想的共同零点集和$Z(T)$是一样的。

由于$k$是一个域，所以多项式环$A$是Noetherian环，他的每个理想都是有限生成的，所以任意的$Z(T)$都可以表示为有限个多项式的共同零点。

\begin{defi}
$\bba^n$中的一个子集$Y$，当他是某一个$A$的子集$T$的零点集的时候，即$Z(T)=Y$，此时$Y$被称为一个（仿射）代数集。
\end{defi}

考虑一个$\bba^n$中的子集$Y$，我们可以反过来去找$A$的元素$f$，使得$f$在$Y$中为零，于是有下面的定义：
\begin{defi}
$I(Y)$是那些使得$f$在$Y$上为零的点的函数的集合。这是一个理想。
\end{defi}

下面的定理归属于Hilbert，这个定理联系了代数集与（代数闭域上的）多项式环中的理想，可以说确立了几何和代数之间的基本关系，而代数几何正是建立在这一关联的基础之上的。
\begin{theo}Hilbert's Nullstellensatz：
设$k$是代数闭域，令$\mathfrak{a}$是$A=k[x_1,\cdots ,x_n]$中的一个理想，如果$f$在$Z(\mathfrak{a})$上为$0$，那么$f\in \sqrt{\mathfrak{a}}$，即存在正整数$n$使得$f^n\in \mathfrak{a}$.
\end{theo}
\begin{proof}
见补充，Proposition \ref{p1.10} 等连着的几个命题和定理。
\end{proof}
\begin{pro}
$I(Z(\mathfrak{a}))=\sqrt{\mathfrak{a}}$. 
\end{pro}
\begin{proof}
简单的是$\sqrt{\mathfrak{a}}\subseteq I(Z(\mathfrak{a}))$.首先$\forall f\in \sqrt{\mathfrak{a}}$，必然存在一个$n\in \mathbb{Z}^+$使得$f^n\in \mathfrak{a}$，所以$f^n(x)=0$如果$x\in Z(\mathfrak{a})$，推出$f(x)=0$，或者$f\in I(Z(\mathfrak{a}))$.

反过来的内容属于Hilbert's Nullstellensatz的推论。虽然
$\mathfrak{a}$是$A=k[x_1,\cdots,x_n]$中的理想，但他不一定是$\bar{A}=\bar{k}[x_1,\cdots,x_n]$中的理想，我们可以让$\mathfrak{a}$在$\bar{A}$生成一个理想$\bar{\mathfrak{a}}$.这时候Hilbert's Nullstellensatz告诉我们在$\bar{A}$中$\bar{I}(Z(\bar{\mathfrak{a}}))\subseteq\sqrt{\bar{\mathfrak{a}}}$，其中$\bar{I}$指在$\bar{A}$中取理想，于是
$
	\bar{I}(Z(\bar{\mathfrak{a}}))\cap A\subseteq\sqrt{\bar{\mathfrak{a}}}\cap A.
$

首先需要证明$\sqrt{\bar{\mathfrak{a}}}\cap A\subseteq \sqrt{\mathfrak{a}}$，对于$\forall f\in \sqrt{\bar{\mathfrak{a}}}\cap A$，则存在$n\in \mathbb{Z}^+$使得$f^n\in \bar{\mathfrak{a}}\cap A$，由于
\[
	\bar{\mathfrak{a}}\cap A=A\cap\bigcup_{f\in\mathfrak{a}}(f\bar{A})=\bigcup_{f\in\mathfrak{a}}((f\bar{A})\cap A)=\bigcup_{f\in\mathfrak{a}}fA=\mathfrak{a},
\]
所以$f^n\in \mathfrak{a}$也就是$f\in \sqrt{\mathfrak{a}}$，第一部分证毕。所以包含关系现在扩展为
\[
	\bar{I}(Z(\bar{\mathfrak{a}}))\cap A\subseteq\sqrt{\bar{\mathfrak{a}}}\cap A\subseteq \sqrt{\mathfrak{a}}.
\]

第二部分需要证明的是$I(Z(\mathfrak{a}))\subseteq \bar{I}(Z(\bar{\mathfrak{a}}))\cap A$，其实这是两个显然的部分构成的，一是$Z(\mathfrak{a})=Z(\bar{\mathfrak{a}})$.二是$\forall P\subseteq \bba^n_k=\bba^n_{\bar{k}}$成立$I(P)\subseteq \bar{I}(P)\cap A$，
于是就得到了
\[
	I(Z(\mathfrak{a}))=I(Z(\bar{\mathfrak{a}}))\subseteq \bar{I}(Z(\bar{\mathfrak{a}}))\cap A\subseteq \sqrt{\mathfrak{a}}.
\]
结合$\sqrt{\mathfrak{a}}\subseteq I(Z(\mathfrak{a}))$就最终得到了$I(Z(\mathfrak{a}))=\sqrt{\mathfrak{a}}$.
\end{proof}

对于素理想，或者任意$\mathfrak{a}=\sqrt{\mathfrak{a}}$的理想（称为根式理想），有$I(Z(\mathfrak{a}))=\mathfrak{a}$.

\begin{pro}
下面命题成立：

\no{1} 如果$T_1\subseteq T_2 \subseteq A$，则$Z(T_2)\subseteq Z(T_1)$.

\no{2} 如果$Y_1\subseteq Y_2 \subseteq \bba^n$，则$I(Y_2)\subseteq I(Y_1)$.

\no{3} 如果$Y_1$, $Y_2 \subseteq \bba^n$，则$I(Y_1\cup Y_2)=I(Y_1)\cap I(Y_2)$.

\no{4} 如果$Y \subseteq \bba^n$，则$Z(I(Y))=\bar{Y}$，即$Y$的闭包。
\end{pro}
\begin{proof}
除了最后一点都是显然的，就证最后一点。显然，$Y\subseteq Z(I(Y))$，因为$Z(I(Y))$是闭的，所以$\bar{Y}\subseteq Z(I(Y))$.反方向，让$\bar{Y}=Z(\mathfrak{a})$，所以$I(Z(\mathfrak{a}))\subseteq I(Y)$，即$\mathfrak{a}\subseteq \sqrt{\mathfrak{a}}=I(Z(\mathfrak{a}))\subseteq I(Y)$，两边取零点集即$Z(I(Y))\subseteq Z(\mathfrak{a})=\bar{Y}$。
\end{proof}
将$Z(I(Y))=\bar{Y}$两边取理想，那么$I(\bar{Y})=I(Z(I(Y)))=\sqrt{I(Y)}$，特别地，有包含关系$I(Y)\subseteq\sqrt{I(Y)}=I(\bar{Y})$，但是$Y\subseteq \bar{Y}$又告诉我们$I(\bar{Y})\subseteq I(Y)$，所以$I(\bar{Y})=I(Y)$。这就是说，如果一个多项式在$Y$上为$0$当且仅当他在$\bar{Y}$上为$0$.

可以直接验证，代数集满足闭集公理，所以这也就赋予了$\bba^n_k$一个拓扑，称为Zariski拓扑。这个拓扑不一定是Hausdorff的，比如考虑$\bba^1_k$的情况。他的单点集也不一定是闭集，但是单点集的闭包就是他的Galois轨道。特别地，在$k=\bar{k}$的时候，考虑$P=(a_1,\cdots ,a_n)$，那么存在理想$(x_1-a_1,\cdots,x_n-a_n)$在$P$上为零，所以此时单点集是闭集。

\begin{defi}
称$Y$的一个非空子集是不可约的，即是说他在$Y$的拓扑下不能写作两个非空闭集（且不等于$Y$）的并。
\end{defi}
在不可约空间内，一个开集必然是稠密的，否则他的闭包和他的补集的并构成了全集。可以证明，这样的开集自身也是不可约的。如果$Y$是$X$的不可约子集，那么$Y$的闭包也是$X$的不可约子集。这些都容易构造出两个闭集来证明。
 
\begin{defi}
一个仿射（代数）簇（affine variety），是$\bba^n$中的不可约闭子集，或者说是$\bba^n$中的不可约代数集。一个仿射簇的开子集被称为是拟仿射（代数）簇。
\end{defi}

下面这个命题可以使我们可以看到不可约代数集和素理想之间的联系：

\begin{pro}
一个代数集$Y$是不可约的当且仅当$I(Y)$是一个素理想。
\label{p1.2}
\end{pro}
\begin{proof}
令$\pp$是一个素理想，以及假设$Z(\pp)=Y_1\cup Y_2$，那么$\pp=I(Z(\pp))=I(Y_1)\cap I(Y_2)$，按照交换代数的结论，$\pp=I(Y_1)$或者$\pp=I(Y_2)$，因此$Z(\pp)$不可约。

反之，假设$Y$不可约，那么如果$fg\in I(Y)$，此时$Y\subseteq Z(fg)=Z(f)\cup Z(g)$，因此
\[
	Y=[Y\cap Z(f)]\cup [Y\cap Z(g)],
\]
所以$Y=Y\cap Z(f)$或$Y=Y\cap Z(g)$，即$Y\subseteq Z(f)$或者$Y\subseteq Z(g)$，即$f\in I(Y)$或者$g\in I(Y)$.因此$I(Y)$是素理想。
\end{proof}

假设$Y$是一个代数集$Y=Z(\mathfrak{a})$，且$\mathfrak{a}$是根式理想，此时
\[
I(Y)=I(Z(\mathfrak{a}))=\sqrt{\mathfrak{a}}=\mathfrak{a},
\]
这是一个一一对应的关系。对于不可约代数集们，$I(Y)=\pp$是一个素理想，因为$\pp=\sqrt{\pp}$，所以此时有$Y=Z(\pp)$.

容易看到，如果零点集越小，那么在他们上面为0的多项式就越多，反之，所以多项式集越小，那么多项式集的零点集就越多。那么假设我们有一个多项式的极大理想，他对应的零点集就应该是极小的闭集，换而言之是一个点$P$的Galois轨道，详见Lemma \ref{l1.3} 后面。对于代数闭域，可以求出这个极大理想的形式为$(x_1-a_1,\cdots,x_n-a_n).$

前面说了，一个多项式在$Y$上为$0$当且仅当他在$\bar{Y}$上为$0$。特别地，如果$\bar{Y}$是一个仿射簇，那么而$Y$是其中的一个开集，那么由于仿射簇不可约，所以$Y$在$\bar{Y}$中稠密，此时，上面的那个论断现在似乎在暗示我们多项式函数是连续函数，即在Zariski拓扑下$\bba^n\to \bba^1=\bar{k}$的连续函数。事实也正是这样，后面将会证明，一个正则函数是连续的，而多项式函数是$\bba^n$上的正则函数。

\begin{defi}
令$Y$是一个代数集，我们定义仿射坐标环为$A(Y)=A/I(Y)$.
显然，如果$Y$是一个仿射簇，那么$A/I(Y)$是一个整环，此外$A(Y)$是一个有限生成的$k$-代数。
\end{defi}

下面研究仿射簇的拓扑。

\begin{defi}
	一个拓扑空间被称为是Noetherian的，就是说闭集链满足d.c.c.
\end{defi}
对于在模范畴里面，满足a.c.c.
的才是Noetherian的，到拓扑空间反过来是因为多项式集的大小和他们零点集的大小是反向的。显然$\bba^n$在Zariski拓扑下是Noetherian的，这是因为如果代数集有一个降链，那么对应的多项式理想集是一个升链，而域上的多项式环是Noetherian的。Noetherian性各种意义上都是有限性条件，反应到拓扑空间上：

\begin{pro}
	一个Noetherian的拓扑空间，每一个非空闭子集都可以写作有限个不可约闭集的并。如果我们要求这些闭集不相互包含，那么这个并是唯一确定的。他们被称为闭子集的不可约组分。
\end{pro}
\begin{proof}
证明是简单的，设$D$是所有不能写作有限个不可约闭集的并的闭集的集合，由Noetherian性，他有极小元素，而极小元素是可约的，因此可以写作两个更小的闭集的并，但是更小的闭集必然是不可约的，所以这个极小元素也是可以写作有限个不可约闭集的并的，矛盾。唯一性使用归纳法即可。
\end{proof}
应用到仿射空间上，我们就有任意的代数集可以被唯一表示为代数簇的有限并，这些代数簇不相互包含。

\begin{defi}
	定义拓扑空间$X$的维度为所有可能的不可约闭子集的链$Z_0\subset Z_1\subset \cdots \subset Z_n$的长度$n$的上确界。
\end{defi}

$\bba^1$的维度是1，这是因为唯一的不可约闭子集只有单点集的闭包（一个有限集）和他本身。而又因为$\bba^1$中的闭集（代数集）是有限个不可约闭集的并，所以$\bba^1$中的任意闭集都是有限集。

\begin{defi}
定义环$A$中的素理想$\pp$的高度$\height(\pp)$为所有可能的素理想链$\pp_0\subset \pp_1\subset \cdots \subset \pp_n=\pp$的长度$n$的上确界，而环$A$的维度$\dim A$为所有素理想高度的上确界。
\end{defi}
\begin{pro}
设$\pp$是$A$中的一个素理想，则$\pp$的高度等于$A$关于$\pp$的局部化\footnote{即分式环$(A-\pp)^{-1}A$.}$A_{\pp}$的维度，即$\height(\pp)=\dim (A_{\pp})$.
\end{pro}
\begin{proof}
按照一般的分式环的结论，$A$中与乘法封闭的子集$S\subseteq A$不相交的素理想$\pp$按照$\pp \to S^{-1}\pp$一一对应着分式环$S^{-1}A$中的素理想。所以$A_\pp$中的素理想$\mathfrak{a}$一一对应着$A$中与$A-\pp$不相交的素理想，即$A$中包含于$\pp$的素理想。剩下的按定义就好。
\end{proof}

到了代数簇，我们可以如下判断：

\begin{pro}令$Y$是一个代数集，那么$\dim Y=\dim (A(Y))$的维度。\end{pro}

\begin{proof}
因为$Y$是一个代数集，所以是闭的，在他的拓扑（子空间拓扑）下的闭集也是$\bba^n$中的闭集，就是说，每一个$Y$中的闭集都是$Y$和$\bba^n$中的某个闭集的交。因之，$Y$中的不可约闭集也是$\bba^n$中的不可约闭集，即仿射簇，Proposition \ref{p1.2} 告诉我们他对应着素理想，当然也一一对应着坐标环中的素理想（可以回忆商环的结论），所以维度相同。
\end{proof}
到目前为止，我们已经建立了代数集和理想之间的一系列联系，下面我们将代数里面的理论应用到代数几何里面。

\begin{theo}
令$k$是一个域，$B$是整环和有限生成$k$-代数，那么

\no{1} $B$的维度等于商域$F(B)$的超越次数$\mathrm{trdeg}(F(B))$；

\no{2} 对任意$B$中的素理想$\pp$，我们有$\dim (B)=\dim (B/\pp) +\height(\pp) $.
\label{t1.2}
\end{theo}
\begin{theo}两个代数里面的结论：

\no{1}Krull主理想定理：如果环$A$是Noetherian的，那么任意包含一个非单位、非零因子元素的极小素理想高度为$1$.

\no{2}如果整环$A$是Noetherian的，那么他是唯一分解整环当且仅当他的每一个高度为$1$的素理想是主理想。
\end{theo}
\begin{pro}
$\bba^n$的维度是$n$。
\end{pro}
这等价于说$k[x_1,\cdots, x_n]$是$n$维的，这又从Theorem \ref{t1.2} 的\no{1}可以得出。

\begin{pro}
如果$Y$是拟仿射簇，那么$\dim(Y)=\dim(\bar{Y})$。
\end{pro}
\begin{proof}在这节的补充中，我们会证明，任意拓扑空间子集的维度不大于拓扑空间本身的维度。因为$\bba^n_k$的维度有限，所以$Y$的维度有限$\dim Y=n$，所以我们可以找到一个极大链
\[
	Z_0\subset \cdots \subset Z_n,
\]
因为是极大链，$Z_0$联系着极大理想，所以$Z_0$是一个有限集。将上面的链取闭包有
\[
	P=\bar{Z}_0\subset \cdots \subset \bar{Z}_n,
\]
由于$Z_i$在$\bar{Z}_i$里面是稠密的，所以这也是一条极大链。此时$P$联系着$A(\bar{Y})$的一个极大理想$\mm$，而$\bar{Z}_i$对应着素理想，因此极大理想的高度就是$n=\dim(Y)$.另一方面由于
\[
	\dim (\bar{Y})=\dim (A(\bar{Y}))=\dim (A(\bar{Y})/\mm) +\height(\mm)=\dim (A(\bar{Y})/\mm) +\dim(Y),
\]
由于$A(\bar{Y})/\mm$是一个域，因为域不存在非零素理想，也就给出了$\dim (A(\bar{Y})/\mm)=0$，所以$\dim (\bar{Y})=\dim(Y)$.
\end{proof}
\begin{pro}
一个$\bba^n$中的仿射簇是$n-1$维的当且仅当他是一个非常数不可约多项式$f$的零点集$Z(f)$.
\end{pro}
\begin{proof}
非常数不可约多项式$f$的零点集是一个仿射簇，这是因为域上的多项式环是唯一分解环，那么由一个不可约多项式生成的理想是素理想。这个素理想的高度是1，所以Theorem \ref{t1.2} 告诉我们$Z(f)=n-1$.

反之，一个$n-1$维的仿射簇，联系着一个高度为1的素理想，因为多项式环是唯一分解整环和Noetherian的，所以这是一个主理想，所以是被某一个不可约多项式生成的，故$Y=Z(f)$.
\end{proof}

\section*{Supplement}
作为补充，一些拓扑命题是有趣的：
\begin{pro}
	假设$Y$是任意拓扑空间$X$的子集，那么$Y$的维度小于等于$X$的维度。
	\label{p1.8}
\end{pro}

\begin{lem}如果$X$的一个稠密子集$Y$是不可约的，则$X$是不可约的。
\label{l1.1}
\end{lem}
\begin{proof}
假设$X$是可约的，那么存在$X$的两个非空闭子集，使得他们的并是$X$，这两个闭子集交上$Y$构成两个$Y$中的非空闭子集他们的并是$Y$，因此$Y$可约。逆否即证毕。
\end{proof}

下面给出Proposition \ref{p1.8} 的证明。
\begin{proof}
任取$Y$中的一条不可约闭子集链$Y_0\subset Y_1\subset \cdots \subset Y_n$，对应于他们在$X$中的闭包$\bar{Y}_i$也构成一条链。现在需要证明的是，闭包们确实都是不可约闭子集，而且后者的链的长度不会比前者短，也就是说不会出现相邻的两个$\bar{Y}_i=\bar{Y}_{i+1}$。

第一，注意到$Y_i=Y\cap \bar{Y}_i$即可\footnote{更广义的结论留作习题：设$A$是$Y$中的子集，$Y$是$X$的子集，如果$\bar{A}$是$A$在$X$中的闭包，则$A$在$Y$中的闭包就是$Y\cap \bar{A}$。特别地，如果$A$在$Y$中是闭的，那么$A=Y\cap \bar{A}$。}，由Lemma \ref{l1.1}，$\bar{Y}_i$确实是不可约的。

第二，假设有两个$\bar{Y}_i=\bar{Y}_{i+1}$，这样，$Y_i=Y_{i+1}$，矛盾。

所以$Y$中的不可约闭子集链，一定可以找到一个不短于他的$X$中的不可约闭子集链。
\end{proof}

前面说，如果$Y$是拟仿射簇，那么$\dim(Y)=\dim(\bar{Y})$。所以这是在Zariski拓扑下得到的更强的结论。

\begin{pro}
如果$X$有开覆盖$\{U_i\}$，那么$\dim X=\sup(\dim U_i)$.
\label{p1.9}
\end{pro}
\begin{proof}
按照前一个命题，$\dim X\geq \dim U_i$，所以$\dim X\geq \sup(\dim U_i)$，现在只要证明反向不等式$\dim X\leq \sup(\dim U_i)$就可以了。

任取$X$中的一条不可约闭子集链，$Y_0\subset Y_1\subset \cdots \subset Y_n$，那么一定存在一个$U_j$使得$Y_0$和他相交，此时所有$Y_i\cap U_j$是$U_j$中的闭子集，但是他也是在$Y_i$中的开子集，由$Y_i$的不可约性，那么$Y_i\cap U_j$在$Y_i$中稠密，也就是$Y_i\cap U_j$在$Y_i$中的闭包就是$Y_i$，也可以说$Y_i\cap U_j$在$X$中的闭包是$Y_i$。如果$Y_i\cap U_j$是可约的，不妨假设$Y_i\cap U_j=V_1\cup V_2$，在$X$中取闭包就得到了$Y_i=\bar{V}_1\cup \bar{V}_2$，这就是说$Y_i$是可约的，矛盾。因此，$Y_i\cap U_j$是不可约的\footnote{实际上我们证明了，如果$U$是$X$中的任意开集，$Y$是$X$中的不可约闭集，如果$U\cap Y\neq \varnothing$，那么$U\cap Y$是$U$中的不可约闭集。}。

现在我们可以检验
\[
	Y_0\cap U_j\subset Y_1\cap U_j\subset \cdots \subset Y_n\cap U_j
\]
是$U_j$中的一个不可约闭集链，闭的部分来自于$Y_i$是闭集，不可约的部分上面讨论过了，是来自于$U_j$是开集。

最后检验不会出现相邻的两个$Y_i\cap U_j=Y_{i+1}\cap U_j$，如果出现了，那么他们在$X$中的闭包就是$Y_i=Y_{i+1}$，这不可能出现。所以$\dim X\leq \sup(\dim U_i)$.
\end{proof}

\begin{pro}
如果一个集合$X$被赋予如下拓扑：空集是闭集，所有有限集和$X$本身是闭集，那么$X$是紧的\footnote{这里采用的定义是，他的任意开覆盖都有有限子覆盖。很多人在说紧的时候，还会加上Hausdorff条件，而将我这里采取的定义称为拟紧的。}。
\end{pro}
对任意的开覆盖，挑其中一个非空开集$U$，则$X-U$是闭集所以是有限的。因为$X$被开覆盖，所以对$X-U$中的每点$p$都可以在开覆盖中挑出一个开集$U_p$包含他，此时$U$和所有$U_p$构成了一个有限子覆盖。靠着这个简单的命题，我们知道，$\bba^1=\bar{k}$在Zariski拓扑下是紧的。下面一个关于Noetherian拓扑空间的命题甚至可以给出$\bba^n$的任意非空子集是紧的，这来自于Noetherian性各种意义上都是有限性条件，而紧本身也是有限的一种表现。
\begin{pro}
	Noetherian拓扑空间的子集在子空间拓扑下依然是Noetherian拓扑空间，并且，任意的Noetherian拓扑空间是紧的。所以任意Noetherian的子集是紧的。
\end{pro}
作为$\bba^n$的子集，任何的仿射簇和拟仿射簇都是Noetherian拓扑空间。
\begin{lem}
	拓扑空间的Noetherian性等价于开集升链满足a.c.c.，于是任意非空开集族有极大元。
\end{lem}
引理显然。从这个命题，因为$\bba^n$在Zariski拓扑下是Noetherian拓扑空间，所以他的任意非空子集是紧的。
\begin{proof}
	设$X$是Noetherian拓扑空间。

	假设$Y$是$X$的一个子集，考虑$Y$中的一个开集升链$\{P_i\}$，那么由子空间拓扑，对每一个$i$都可以在$X$中的找到开集$Q_i$使得$P_i=Y\cap Q_i$，构造$R_k=\cup_{i=1}^k Q_i$，他使得
	\[
	Y\cap R_k=\bigcup_{i=1}^k (Y \cap Q_i)=\bigcup_{i=1}^k P_i=P_k,
	\]
	由于$\{R_i\}$是$X$中的一个开集的升链，他满足a.c.c.，所以$\{P_i\}$满足a.c.c.，这就是说$Y$是Noetherian拓扑空间。

	紧性的证明就是要说明任意开覆盖都有有限子覆盖。

	假设$\{U_\alpha\}_{\alpha\in I}$是$X$的任意开覆盖，对$\{U_\alpha\}_{\alpha\in I}$的任意有限子集$\mathscr{F}$都可以构造一个开集$\cup \mathscr{F}\subseteq X$，因此存在一个非空开集族
	\[
		A=\left\{\bigcup \mathscr{F}\right\},
	\]
	而紧性就是要求$X\in A$.

	因为$X$是Noetherian拓扑空间，所以$A$中存在一个极大元$M\subseteq X$，他对应$\{U_\alpha\}_{\alpha\in I}$的子集$\mathscr{M}$，下面我们证明$X=M$.如果存在$x\in X-M$，因为$\{U_\alpha\}_{\alpha\in I}$是$X$的开覆盖，所以存在$\beta \in I$使得$x\in U_\beta$，可以构造$\mathscr{M}\cup\{U_\beta\}$也是$\{U_\alpha\}$的子集，且
	\[
		M=\bigcup \mathscr{M}\subsetneq \bigcup\left(\mathscr{M}\cup\{U_\beta\}\right),
	\]
	所以$M$就不是一个极大元。紧性得证。
\end{proof}
下面几个命题是关于Hilbert's Nullstellensatz的，首先证明Hilbert's Nullstellensatz等价于说多项式环的极大理想一定有公共零点，然后再给出后者的证明。
\begin{pro}
\label{p1.10}
$I(Z(\mathfrak{a}))=\sqrt{\mathfrak{a}}$等价于“如果$\mathfrak{a}\neq(1)$，即$\mathfrak{a}$不是单位理想，则$Z(\mathfrak{a})\neq\varnothing$”。
\end{pro}
\begin{proof}
	逆否命题是等价命题，那么我们可以先证明$I(Z(\mathfrak{a}))=\sqrt{\mathfrak{a}}$可以推出命题“如果$Z(\mathfrak{a})=\varnothing$，则$\mathfrak{a}=(1)$”.

	$I(Z(\mathfrak{a}))=I(\varnothing)=(1)$，由$I(Z(\mathfrak{a}))=\sqrt{\mathfrak{a}}$可以知道$\sqrt{\mathfrak{a}}=(1)$.现在$f\in \mathfrak{a}$，则存在正整数$n$使得$f^n\in \sqrt{\mathfrak{a}}=(1)$，这当然就是说$f\in (1)$，否则，如果$f$只在一个理想里面，那么$f^n$自然也在那个理想里面。那么$\mathfrak{a}=(1)$。

	反之，需要证明“如果$\mathfrak{a}\neq(1)$，则$Z(\mathfrak{a})\neq\varnothing$”可以推出$I(Z(\mathfrak{a}))=\sqrt{\mathfrak{a}}$.当然，逆否命题是等价命题，我们也已知“如果$Z(\mathfrak{a})=\varnothing$，则$\mathfrak{a}=(1)$”.

	因为域上的多项式环是一个Noether环，故非单位理想$\mathfrak{a}$是有限生成的，即$\mathfrak{a}=(f_1,\cdots,f_n)$，所以$Z(\mathfrak{a})\neq \varnothing$就是说$\{f_i\}$在$\bba^n$中是有解的。现在在$A=k[x_1,\cdots,x_n]$中加一个不定元$A'=k[x_0,x_1,\cdots,x_n]$，使用$\{f_i\}$构造一个$f_{0}\in A'$满足
	\[
		f_{0}=1-x_{0}\prod_{i=1}^nf_i,
	\]
	那么$\{f_0,\cdots,f_n\}$在$\bba^{n+1}$中是无解的，因为如果有$x\in \bba^{n+1}$满足后$n$个方程，则$f_{0}=1$.

	因为$\{f_0,\cdots,f_n\}$在$\bba^{n+1}$中是无解的，所以$Z(f_0,\cdots,f_n)=\varnothing$，根据命题，$(f_0,\cdots,f_n)=(1)=A'$，所以存在$\{g_i\in A'\}$使得
	\[
		1=\sum_{i=0}^{n} f_ig_i=\sum_{i=1}^{n} f_ig_i+g_{0}-x_{0}g_{0}\prod_{i=1}^nf_i,
	\]
	设$g_i=\sum_{j=0}^{N_i}h_{ij}x_{0}^j$，那么
	\[
		\sum_{j=0}^{N_i}\sum_{i=1}^{n}f_ih_{ij}x_{0}^j+\sum_{j=0}^{N_{0}}h_{0j}x_{0}^j-\sum_{j=0}^{N_{0}}h_{0j}x_{0}^{j+1}\prod_{i=1}^nf_i=1,
	\]
	这个等式左右对比$x_0$幂次的系数，对应于$x_0^0$有$\sum_{i=1}^{n}f_ih_{i0}+h_{00}=1$，
	因为$f_i\in \mathfrak{a}$，所以$h_{00}\in \mathfrak{a}$，这样做下去，当$j\neq N_0$时候
	\[
		\sum_{i=1}^{n}f_ih_{ij}+h_{0j}-h_{0,j-1}\prod_{i=1}^nf_i=0,
	\]
	其中根据$N_0$和$N_i$的相互大小，第一项中求和的部分项是不存在的，不管怎么样，可以递推知$h_{0j}\in \mathfrak{a}$.

	假设$f\in I(Z(\mathfrak{a}))$，当$x\notin Z(\mathfrak{a})$，赋值$x_0=1/f$
	\[
		\sum_{j=0}^{N_i}\sum_{i=1}^{n}\frac{f_ih_{ij}}{f^j}+\sum_{j=0}^{N_{0}}\frac{h_{0j}}{f^j}-\sum_{j=0}^{N_{0}}\frac{h_{0j}}{f^{j+1}}\prod_{i=1}^nf_i=1,
	\]
	两边乘以$f^{N+1}$，其中$N=\max_iN_i$，则
	\[
		f^{N+1}=\sum_{j=0}^{N_i}\sum_{i=1}^{n}f_ih_{ij}f^{N+1-j}+\sum_{j=0}^{N_{0}}h_{0j}f^{N+1-j}-\sum_{j=0}^{N_{0}}h_{0j}f^{N-j}\prod_{i=1}^nf_i,
	\]
	这个等式就对任意的$x$都成立了\footnote{因为若是$x\in Z(\mathfrak{a})$，那么两边都为$0$.}，注意右边$f_i$和$h_{0j}$都属于理想$\mathfrak{a}$，所以左边$f^{N+1}\in \mathfrak{a}$，于是$f\in \sqrt{\mathfrak{a}}$，这就是说$I(Z(\mathfrak{a}))\subseteq \sqrt{\mathfrak{a}}$，反方向显然，所以也即$I(Z(\mathfrak{a}))=\sqrt{\mathfrak{a}}$.
\end{proof}
	
所以，如果要证明任意域上面成立$I(Z(\mathfrak{a}))=\sqrt{\mathfrak{a}}$，可以去证明“如果$\mathfrak{a}\neq(1)$，则$Z(\mathfrak{a})\neq\varnothing$”。因为$\mathfrak{a}\neq(1)$，所以$\mathfrak{a}\subseteq \mm \neq(1)$，其中$\mm$是$A=k[x_1,\cdots,x_n]$的一个极大理想。如果命题对所有的$\mm$是成立的，即$Z(\mm)\neq \varnothing$，那么$Z(\mm)\subseteq Z(\mathfrak{a})$告诉我们$Z(\mathfrak{a})\neq \varnothing$，所以也对所有的$\mathfrak{a}\neq (1)$成立。综上，我们得到了：
\begin{pro}
$I(Z(\mathfrak{a}))=\sqrt{\mathfrak{a}}$等价于“对任意$A=k[x_1,\cdots,x_n]$中的极大理想$\mm$，$Z(\mm)\neq\varnothing$”。
\end{pro}
\begin{theo}Hilbert's Nullstellensatz另一种表述：
对任意$A=k[x_1,\cdots,x_n]$中的极大理想$\mm$，$Z(\mm)\neq\varnothing$。
\end{theo}
	由于$\mm$极大，那么$A(\mm)=k[x_1,\cdots,x_n]/\mm=k[\bar{x}_1,\cdots,\bar{x}_n]$就是一个域，如果他还是$k$的一个代数扩张，那么$\mm$上的多项式至少有公共零点$(\bar{x}_1,\cdots,\bar{x}_n)\in \bba^n$，因为对任意$f\in \mm$都成立
	\[
		f(\bar{x}_1,\cdots,\bar{x}_n)=\sum a_{i_1\cdots i_n} {\bar{x}}_1^{i_1}\cdots {\bar{x}}_n^{i_n}=\overline{\sum a_{i_1\cdots i_n} x_1^{i_1}\cdots x_n^{i_n}}=\bar{f}=0.
	\]
	所以这就推出了$Z(\mm)\neq\varnothing$。
\begin{lem}
	设$\mm$是$A=k[x_1,\cdots,x_n]$的一个极大理想，则$A(\mm)=A/\mm$是$k$的一个有限扩张。
	\label{l1.3}
\end{lem}
这个命题又可以表述为：如果$B$是有限生成$k$-代数，且$B$是一个域，那么$B$是$k$的有限扩张。有时候这个引理也被称为Hilbert's Nullstellensatz。
\begin{proof}
	只要证明是一个代数扩张就够了，因为如果$k[x_1,\cdots,x_n]/\mm$是$k$的代数扩张，所以他可以写成有限生成域扩张$k(\alpha_1,\alpha_2,\cdots,\alpha_m)$，其中$m\leq n$。而有限生成代数扩张是一个有限扩张。

	归纳证明这个命题。

	$n=1$的时候是简单的，$k[x]$中任意的极大理想$\mm$都是由一个不可约多项式$f$生成的，所以$\mm=(f)$，而单扩张的知识告诉我们，$k[\bar{x}]=k[x]/(f)$是一个代数扩张，他给$k$添加上了$f$的一个根。

	对$n$个变元的情况，假设对任意的$\mm$有$A(\mm)=k[\bar{x}_1,\cdots,\bar{x}_n]$中的$\{\bar{x}_i\}$都在$k$上代数。

	对$n+1$个变元的情况，$k[\bar{x}_0,\cdots,\bar{x}_{n}]$是$k$的一个扩张，那么他可以分解成一个一个的单扩张，$k[\bar{x}_0,\cdots,\bar{x}_{n}]=k(\bar{x}_0)[\bar{x}_1,\cdots,\bar{x}_{n}]$，其中$k(\bar{x}_0)$是一个$k$的单扩张，根据归纳假设$\bar{x}_1,\cdots,\bar{x}_{n}$都在$k(\bar{x}_0)$上是代数的。如果$k(\bar{x}_0)$在$k$上是代数的，那么所有的$\bar{x}_i$就都是在$k$上代数的，也就是$k[\bar{x}_0,\cdots,\bar{x}_{n}]$是$k$的代数扩张了。

	假设$k(\bar{x}_0)$是超越扩张，即$k(\bar{x}_0)=F(k[\bar{x}_0])$，$k(\bar{x}_0)$是$k[\bar{x}_0]$的商域。因为$\bar{x}_i$在$k(\bar{x}_0)$上是代数的，所以存在多项式
	\[
		a_{i0}\bar{x}_i^{N_i}+a_{i1}\bar{x}_i^{N_i-1}+\cdots +a_{i,N_i+1}=0,
	\]
	其中$a_{ij}\in k(\bar{x}_0)=F(k[\bar{x}_0])$。将其通分，可以得到一个新的等式，系数属于$k[\bar{x}_0]$，为了符号上的简单，不妨直接设$a_{ij}\in k[\bar{x}_0]$.

	将等式两边乘以$a_0^{N_i-1}$后得到
	\[
		(a_{i0}\bar{x}_i)^{N_i}+a_{i1}(a_{i0}\bar{x}_i)^{N_i-1}+\cdots +a_{i0}^{N_i-1}a_{i,N_i+1}=0,
	\]
	所以$a_{i0}\bar{x}_i$在$k[\bar{x}_0]$上是整的，对所有的$i>0$和$\bar{x}_0$都可以找到这么一个$a_{i0}$。由于在$k[\bar{x}_0]$上整的元素构成一个环，而且$k[\bar{x}_0]$是他的一个子环，特别地，所有的$a_{i0}\in k[\bar{x}_0]$以及$\bar{x}_0\in k[\bar{x}_0]$都是整的，所以我们可以说存在一个因子$a=\prod_{i>0}a_{i0}$，对每一个$\bar{x}_i$都成立$a\bar{x}_i$在$k[\bar{x}_0]$上是整的。

	现在任取一个$y\in k[\bar{x}_0,\cdots,\bar{x}_n]$，可以写作
	\[
		y=\sum y_{i_0 \cdots i_n}\bar{x}_0^{N_{i_0}}\cdots\bar{x}_{n}^{N_{i_n}}.
	\]
	因为在$k[\bar{x}_0]$上整的元素构成一个环，两边乘以$a^N$后可以得到$a^Ny$在$k[\bar{x}_0]$上是整的，其中$N$足够大，因为所有的求和都是有限的，所以$N$总是可以选出来的。

	随便取一个$y\in k(\bar{x}_0)$，则存在$N\in \mathbb{Z}^+$使得$a^Ny\in k(\bar{x}_0)$在$k[\bar{x}_0]$上整。由于$k[\bar{x}_0]$作为域上的多项式环是唯一分解整环
	\footnote{假设$R$是唯一分解整环，$F(R)$是他的商域，假设$x\in F(R)$在$R$上整，对于唯一分解整环有分解$x=r/s$，其中$r$和$s$互素，那么就有方程
	\[
		r^n+a_1r^{n-1}s+\cdots+a_n s^n=0,
	\]
	其中$a_i\in R$，因此$s$需要整除$r^n$，而$r$和$s$互素，所以只能有$s=\pm 1$.这就说明了$x=\pm r\in R$.}，
	所以$a^Ny=f\in k[\bar{x}_0]$，即
	\[
		y=\frac{f}{a^N}\in k[\bar{x}_0]_{a},
	\]
	其中$k[\bar{x}_0]_{a}$是$k[\bar{x}_0]$关于$\{1,a,a^2,\cdots\}$的分式环，而$a$和$y\in  k(\bar{x}_0)$的选取没有关系，只有$N$和$f$的选取和$y$有关系，但是不管取哪个$N$，他们都在同一个分式环里面，而分式环又真包含于商环里面，所以
	\[
		k(\bar{x}_0)\subseteq k[\bar{x}_0]_{a}\subsetneq k(\bar{x}_0),
	\]
	这就完成了矛盾，故$k(\bar{x}_0)$不可能是超越扩张，$k(\bar{x}_0)$是代数扩张。所以$k[\bar{x}_0,\cdots,\bar{x}_{n}]$是$k$的代数扩张。
\end{proof}

对于极大理想的零点集，上面的引理可以告诉我们更多东西。

因为$A(\mm)$是有限扩张，所以Galois群$\mathrm{Gal}(A(\mm)/k)$的群元个数是有限的。

我们已经知道$P=(\bar{x}_1,\cdots,\bar{x}_n)\in A(\mm)\times \cdots\times A(\mm)\subseteq \bba^n_k$是$\mm$的一个公共零点。更有趣的，我们可以证明$Z(\mm)$是一个有限集。如果$(\bar{y}_1,\cdots,\bar{y}_n)$也是$\mm$的一个公共零点，可以定义环同态
\[
	\sigma_{\bar{y}}:k[\bar{x}_1,\cdots,\bar{x}_n]\to k[\bar{y}_1,\cdots,\bar{y}_n]
\]
通过$\sigma_{\bar{y}}(\bar{x}_i)=\bar{y}_i$且$\sigma_{\bar{y}}(a)=a$如果$a\in k$.

他是满的。任取$f(\bar{y}_1,\cdots,\bar{y}_n)\in k[\bar{y}_1,\cdots,\bar{y}_n]$，则
\[
	f(\bar{y}_1,\cdots,\bar{y}_n)=\sigma_{\bar{y}}\bigl(f(\bar{x}_1,\cdots,\bar{x}_n)\bigr).
\]
他还是单的，因为$k[\bar{x}_1,\cdots,\bar{x}_n]$是一个域，所以$\sigma_{\bar{y}}^{-1}(0)$作为域中的素理想只能是零理想或者全集，这样$\sigma_{\bar{y}}$就是一个同构，因此$k[\bar{y}_1,\cdots,\bar{y}_n]$也是域。

对于对每一个$\bar{y}_i$都可以向上找到一个$k[x_1,\cdots,x_n]$中的一个多项式$y_i$使得其模掉$\mm$后就是$\bar{y}_i$.将所有$\bar{y}_i$的具体形式（作为$\{\bar{x}_i\}$的多项式）代入任意的$f(\bar{y}_1,\cdots,\bar{y}_n) \in k[\bar{y}_1,\cdots,\bar{y}_n]$，这样得到了
\[
	f\bigl(\bar{y}_1(\bar{x}_1,\cdots,\bar{x}_n),\cdots,\bar{y}_n(\bar{x}_1,\cdots,\bar{x}_n)\bigr) \in k[\bar{x}_1,\cdots,\bar{x}_n],
\]
所以$k[\bar{y}_1,\cdots,\bar{y}_n]$是$k[\bar{x}_1,\cdots,\bar{x}_n]$的一个子域，因为他们同构，所以$k[\bar{x}_1,\cdots,\bar{x}_n]=k[\bar{y}_1,\cdots,\bar{y}_n]$，这样$\sigma_{\bar{y}}$就是$A(\mm)=k[\bar{x}_1,\cdots,\bar{x}_n]$的一个自同态且$\sigma_{\bar{y}}(k)=k$，这其实就是说$\sigma_{\bar{y}}\in \mathrm{Gal}(A(\mm)/k)$.

结合上面说的，我们对每一个$\mm$的公共零点$(\bar{y}_1,\cdots,\bar{y}_n)$都找到了唯一的自同态$\sigma_{\bar{y}}$。反之，如果有一个自同态$\sigma$，那么$(\sigma(\bar{x}_1),\cdots,\sigma(\bar{x}_n))$就是一个$\mm$的公共零点。这是因为对任意的$f\in\mm$，都成立
\[
	f(\sigma(\bar{x}_1),\cdots,\sigma(\bar{x}_n))=\sum a_{i_1\cdots i_n} \sigma({\bar{x}}_1)^{i_1}\cdots \sigma({\bar{x}}_n)^{i_n}=\sigma\left(\sum a_{i_1\cdots i_n} \bar{x}_1^{i_1}\cdots \bar{x}_n^{i_n}\right)=0.
\]
这样，我们就在$Z(\mm)$和$\mathrm{Gal}(A(\mm)/k)$建立起了一一对应关系。

如果采用记号$\mathrm{Gal}(A(\mm)/k)\cdot P$来标记Galois群的元素作用上$P=(\bar{x}_1,\cdots,\bar{x}_n)$得到的轨道
\[
	\mathrm{Gal}(A(\mm)/k)\cdot P=\bigl\{\sigma\cdot P=(\sigma(\bar{x}_1),\cdots,\sigma(\bar{x}_n)):\forall \sigma\in \mathrm{Gal}(A(\mm)/k)\bigr\},
\]
上面的断言即$Z(\mm)=\mathrm{Gal}(A(\mm)/k)\cdot P$。从此可以直接推知$Z(\mm)$是一个有限集，因为$\mathrm{Gal}(A(\mm)/k)$有限。

最后来谈谈反问题，前面已经看到，对于任意的极大理想，他的零点集是一个有限集。反过来，对于一个任意单点$P\in \bba^n_k$，我们想要寻找极大理想，使得$P$是他的公共零点。存在性是简单的，对于任意点$P\in \bba^n_k$，因为他的闭包就是极小的闭集，对应着一个极大理想$I(\overline{\{P\}})$，所以他的闭包就是一条Galois轨道$\overline{\{P\}}=\mathrm{Gal}(A(\overline{\{P\}})/k)\cdot P$. 下面的命题保证了唯一性。
\begin{pro}
仿射簇$Y$中的任意一点$P$都处于唯一一条Galois轨道$\overline{\{P\}}\subseteq Y$上。$Y$中的Galois轨道一一对应着坐标环$A(Y)$中的一个极大理想。
\end{pro}
\begin{proof}
设$P\in Y$，因为$Y$是闭集，所以$\overline{\{P\}}\subseteq Y$，因此$Y$中轨道的存在性来自于$\bba^n_k$中轨道的存在性，而这点在命题之前已经证明了。下面证明（在$\bba^n_k$上的）轨道的唯一性，即假设$P$在其他轨道上$P\in \overline{\{Q\}}$，我们要证明$\overline{\{Q\}}=\overline{\{P\}}$。

因为$P\in \overline{\{Q\}}$，取闭包有$\overline{\{P\}}\subseteq \overline{\{Q\}}$。如果可以得到$Q\in \overline{\{P\}}$，取闭包有$\overline{\{Q\}}\subseteq \overline{\{P\}}$。结合两个包含第一点就证明完毕了。

将$\overline{\{P\}}\subseteq \overline{\{Q\}}$取理想得到$I(\overline{\{Q\}})\subseteq I(\overline{\{P\}})$，因为这是两个极大理想，所以$I(\overline{\{Q\}})=I(\overline{\{P\}})$.那么
\[
	\mathrm{Gal}\bigl(A\bigl(\overline{\{P\}}\bigr)/k\bigr)=\mathrm{Gal}\bigl(A\bigl(\overline{\{Q\}}\bigr)/k\bigr)=G,
\]
因为已有$P\in \overline{\{Q\}}$，所以$P=\sigma \cdot Q$，其中$\sigma\in G$，两边作用上$\sigma^{-1}$就有$Q=\sigma^{-1}\cdot P$，所以$Q\in \overline{\{P\}}$。

第二点，对于一条轨道$\overline{\{P\}}$，在$A$中可以找到唯一的极大理想$I(\overline{\{P\}})$，那么在$A(Y)$中就可以找到极大理想$I(\overline{\{P\}})/I(Y)$。反过来，一个$A(Y)$中的极大理想$\mathfrak{n}$，可以找到在$A$中的极大理想$\mm$使得$\mathfrak{n}=\mm/I(Y)$，这样$Z(\mm)$就是在$\bba^n_k$中的一条Galois轨道，当然也是在$Y$中的一条Galois轨道。
\end{proof}

\section*{The Solutions of Exercises}
在正文和补充里面已经证明了部分习题。
\setcounter{exe}{7}
\begin{exe}
令$Y$是$\bba^n$中的一个$r$维仿射簇，$H$是$\bba^n$中的一个超曲面（即$H=Z(f)$，$f$是一个不可约多项式），即他的维度是$n-1$，证明：每一个$Y\cap H$的不可约组分的维度为$r-1$.
\end{exe}
\begin{proof}
	令$H$包含一个理想$(f)$，由于$Y\nsubseteq H$，所以$f$在$A(Y)$中既不是单位也不是零因子，所以由Krull主理想定理，$A(Y)$中包含$(f)$的极小素理想$\pp$的高度为$1$，所以
	\[
		\dim (A(Y)/\pp)=\dim(A(Y))-\height(\pp)=\dim(Y)-1=r-1.
	\]

	现在设$U_i\neq \varnothing$是$Y\cap H$的一个不可约组分，那么$I(U_i)$就是$A(Y)$中包含$(f)$的极小素理想$\pp$，所以$\dim (U_i)=\dim (A(Y)/\pp)=r-1$.
\end{proof}
\begin{exe}
令$\mathfrak{a}$是$A$的一个理想，他由$r$个元素所生成，那么$Z(\mathfrak{a})\subseteq \bba^n$的每一个不可约组分的维度都大于等于$n-r$.
\end{exe}
\section{Projective Varieties}
定义投射空间$\bbp^n=(\bba^{n+1}-\{0\})/\sim$ ，等价关系是由
\[
(x_0,\cdots,x_n)\sim (px_0,\cdots,px_n), \quad \forall p\in \bar{k}-\{0\}
\]
确定的等价类$[x_0,\cdots,x_n]$。多项式环$k[x_1,\cdots ,x_n]$记作$S$，齐次多项式构成的子环记作$S^{\mathrm{h}}$.

多项式环$S$是一个分次环，他可以写成分解$S=\oplus_{d\geq 0} S_d$，其中$S_d$是由$0$和所有$d$次齐次多项式所并而成的子环。$S$的齐次理想$\mathfrak{a}$是指$S$的由齐次元素生成的理想，齐次理想的元素不一定是齐次的，因为一个齐次理想可以是两个或多个不同次的齐次元素生成的，他们的和一般不是齐次的。齐次理想的乘积、和、交、根式都是齐次的。不加证明地指出，对于齐次理想，成立
\[
	\mathfrak{a}=\bigoplus_{d\geq 0} (\mathfrak{a}\cap S_d).
\]
所以如果一个齐次理想是素理想，只要指出对于任意两个齐次元素$f$, $g$，$fg\in \mathfrak{a}$可以推出$f\in \mathfrak{a}$或$g\in \mathfrak{a}$.

在投射空间上不能well define多项式，但是可以指出，齐次多项式的零点是well defined。所以一样地，可以定义对于齐次多项式的集合$T$，他的零点集$Z(T)$.

\begin{defi}
	一个$\bbp^n$中的子集称为代数集如果他是某些齐次多项式的零点集。
\end{defi}
相似地（连证明过程），零点集的性质满足闭集公理，所以$\bbp^n$上也可以用零点集赋予拓扑，依旧将其称为Zariski拓扑。

\begin{defi}
	一个投射代数簇是$\bbp^n$中的不可约闭子集，一个投射代数簇的开子集称为一个拟投射代数簇。无论是投射代数簇还是拟投射代数簇，他们的维度被定义为作为拓扑空间的维度。

	如果$Y$是$\bbp^n$中的子集，定义$S$的齐次理想$I(Y)$为在$Y$上为$0$的齐次多项式生成的理想。$S(Y)=S/I(Y)$被称为齐次坐标环。
\end{defi}

\begin{pro}
homogeneous Nullstellensatz：设$\mathfrak{a}\subset S$是一个齐次理想，则如下命题成立：

\no{1} 设$f\in S_d$且$d>0$，如果$f$在$Z(\mathfrak{a})$上为零，那么$f \in \sqrt{\mathfrak{a}}$.

\no{2} 如果$Z(\mathfrak{a})\neq \varnothing$，则$I(Z(\mathfrak{a}))=\sqrt{\mathfrak{a}}$.
\end{pro}
\begin{proof}
	假设我们有一个闭集$Z(\mathfrak{a})\in \bbp^n$，我们在$\bba^{n+1}$中构造
	\[
		\bar{Z}(\mathfrak{a})=\bigl\{p\in \bba^{n+1}:\forall g\in \mathfrak{a},\, g(p)=0\bigr\},
	\]
	这样$Z(\mathfrak{a})=\bar{Z}(\mathfrak{a})/\sim$，由Hilbert's Nullstellensatz，如果一个多项式$f$，特别地一个齐次多项式，在$\bar{Z}(\mathfrak{a})$上为$0$，则$f\in \sqrt{\mathfrak{a}}$，而齐次多项式在$\bar{Z}(\mathfrak{a})$上为$0$等价于他在$Z(\mathfrak{a})$上为$0$，第一部分搞定。

	第二部分显然我们只要证明$I(Z(\mathfrak{a}))\subseteq \sqrt{\mathfrak{a}}$，这是第一部分的推论。如果$Z(\mathfrak{a})$非空，那么在$Z(\mathfrak{a})$上为$0$的齐次多项式$f\in S_d$必须$d>0$，那么第一部分就表明了反向包含。
\end{proof}

\begin{pro}
	下面命题对于投射的情况依然成立：

	\no{1} 如果$T_1\subseteq T_2 \subseteq S^{\mathrm{h}}$，则$Z(T_2)\subseteq Z(T_1)$.

	\no{2} 如果$Y_1\subseteq Y_2 \subseteq \bbp^n$，则$I(Y_2)\subseteq I(Y_1)$.

	\no{3} 如果$Y_1$, $Y_2 \subseteq \bbp^n$，则$I(Y_1\cup Y_2)=I(Y_1)\cap I(Y_2)$.

	\no{4} 如果$Y \subseteq \bbp^n$，则$Z(I(Y))=\bar{Y}$.
\end{pro}
除了最后一点都是显然的，但是靠着homogeneous Nullstellensatz，和仿射情况的证明几乎没有区别，这里略去。所以，由Nullstellensatz，投射情况下依然成立$I(Y)=I(\bar{Y})$.

类似的命题还有
\begin{pro}
	一个代数集$Y$是投射簇当且仅当$I(Y)$是一个齐次素理想。
\end{pro}
\begin{pro}
	$\bbp^n$是Noetherian拓扑空间。
\end{pro}
这些命题的证明和仿射的都类似。由于$\bbp^n$是Noetherian拓扑空间，作为他的子集，任何的投射簇和拟投射簇都是Noetherian拓扑空间。

下面的几个命题指出，投射空间实际上被仿射空间开覆盖。

在$\bbp^n$中的第$i$个坐标为$0$的点构成一个子集$H_i$，故而都是闭集，令$U_i=\bbp^n-H_i$，他们都是开集，更进一步，$U_i$是$\bbp^n$的开覆盖，因为如果$p\in \bbp^n$，那么$p$至少有一个坐标$p_i$不为$0$，所以$p\in U_i$.定义映射
\[
	\begin{array}{lccl}
		\varphi_i:&U_i&\to& \bba^n_k\\
		&[a_0,\cdots ,a_n]&\mapsto&\displaystyle{\left(\frac{a_0}{a_i},\cdots ,\frac{a_{i-1}}{a_i},\frac{a_{i+1}}{a_i},\cdots,\frac{a_n}{a_i}\right)}
	\end{array}
\]
这是well defined，因为$a_j/a_i$不依赖于等价类中代表元的选取。

\begin{pro}
$\varphi_i$是$U_i$和$\bba^n_k$在两边各自的Zariski拓扑下的同胚。
\end{pro}
\begin{proof}
双射显然，只要证明$U_i$的闭集被$\varphi_i$等同于$\bba^n_k$中的闭集就可以了。不妨将$i$取做$0$，将$U_i$简记为$U$，$\varphi_i$简记为$\varphi$.

一个齐次多项式$f(x_0,x_1,\cdots ,x_n)$可以通过$g(x_1,\cdots ,x_n)=f(1,x_1,\cdots ,x_n)$定义一个$A$中的多项式，我们记作$g=\alpha(f)$.反之，一个最高次为$N$次的多项式$g(x_1,\cdots ,x_n)$可以定义一个$N$次齐次多项式$f(x_0,x_1,\cdots ,x_n)=x_0^Ng(x_1/x_0,\cdots ,x_n/x_0)$，我们记作$f=\beta(g)$.

现在令$Y$是$U$中的一个闭子集，令$\bar{Y}$是他在$\bbp^n$中的闭包，$\bar{Y}$是一个闭子集，所以$\bar{Y}=Z(T)$，令$T'=\alpha(T)$，直接的验算可以知道$\varphi(Y)=Z(T')$，所以$\varphi(Y)$是闭集。

反之，令W是$\bba^n_k$中的闭子集，那么$W=Z(T')$，其中$T'$是$A$中的一个自己，直接的验算可以得到$\varphi^{-1}(W)=Z(\beta(T'))\cap U$，所以$\varphi^{-1}(W)$是闭集。
正反的连续性都证毕。所以是同胚。
\end{proof}
\begin{pro}
	如果$Y$是（拟）投射簇，那么$Y$被拟投射簇$\{Y_i=Y\cap U_i\}$开覆盖，且每个拟投射簇$Y_i$通过$\varphi_i$同胚于一个（拟）仿射簇。
	\label{c2:p8}
\end{pro}
\begin{proof}
因为$Y_i=Y\cap U_i$是$Y$中的开集，而$Y$是不可约的，所以$Y_i$是不可约的，由同胚，$\varphi_i(Y_i)$是不可约的。对于（拟）投射的情况，因为$Y$是（开）闭的，所以$Y_i$在$U_i$中是（开）闭的，由同胚，$\varphi_i(Y_i)$在$\bba^n$中是（开）闭的。
\end{proof}

因为$U_i$构成$\bbp^n$的开覆盖，利用Proposition \ref{p1.9}，则
\[
	\dim  \bbp^n=\sup(\dim U_i)=\max(\dim U_i).
\]
第二个等号来自于覆盖是有限的。但是$U_i$和$\bba^n_k$同胚，所以$\dim U_i=\dim \bba^n_k=n$，因此$\dim  \bbp^n=n$.

投射空间的Zariski拓扑依然使得下面命题成立，技术上依然是Proposition \ref{p1.9}：
\begin{pro}如果$Y$是拟投射簇，那么$\dim Y=\dim \bar{Y}$.\end{pro}
\begin{proof}
设$W_i=\varphi_i(Y\cap U_i)$。因为$Y$是拟投射簇，所以$W_i$是拟仿射簇。让$\bar{Y}$是$Y$在$\bbp^n$中的闭包，再设$Z_i=\varphi_i(\bar{Y}\cap U_i)$，由于是同胚，$Z_i$是$W_i$的闭包，所以由拟投射簇的结论，$\dim Z_i=\dim W_i$.最后
\[
	\dim Y=\max(\dim Y_i)=\max(\dim W_i)=\max(\dim Z_i)=\dim \bar{Y}.
\]
\end{proof}

\section*{The Solutions of Exercises}
\setcounter{exe}{5}
\begin{exe}
	如果$Y$是一个投射簇，他的齐次坐标环为$S(Y)$，则$\dim S(Y)=\dim Y+1$.
	\label{c2:e6}
\end{exe}
\begin{proof}
	令$Y_i=\varphi_i(Y\cap U_i)$非空，这是一个仿射簇，他的坐标环是$A(Y_i)$.

	观察局部化$S(Y)_{x_i}$，其中的元素具有形式$f/x_i^n$，其中$f\in S(Y)$。这个环是自然分次的，即$f/x_i^n$的分次等于$\deg(f)-n$.为使$f/x_i^n$形成投射空间上的一个函数，则其分次应该为$0$，于是我们考察$S(Y)_{x_i}$的零次子环$S(Y)_{(x_i)}$。

	通过
	\[
		\frac{f(x_0,\cdots,x_n)}{x_i^n}=f\left(\frac{x_0}{x_i},\cdots,\frac{x_n}{x_i}\right)=g(x_0,\cdots,x_{i-1},x_{i+1},\cdots,x_n),
	\]
	我们可以在$S(Y)_{(x_i)}$和$A(Y_i)$之间建立同构。这样，我们就有同构$S(Y)_{x_i}\cong A(Y_i)[x_i,x_i^{-1}]$，由于局部化的商域和它本身的商域相同，所以
	\[
	\mathrm{trdeg}(F(S(Y)))=\mathrm{trdeg}(F(S(Y)_{x_i}))=\mathrm{trdeg}\bigl(F\bigl(A(Y_i)[x_i,x_i^{-1}]\bigr)\bigr)=\mathrm{trdeg}(F(A(Y_i)))+1,
	\]
	利用Theorem \ref{t1.2}，就得到了
	\[
		\dim S(Y)=\dim A(Y_i)+1=\dim Y_i+1.
	\]
	所以，对于所有非空的$Y_i$，他们的维数实际上都等于$\dim S(Y)-1$，那么
	\[
		\dim Y=\sup (\dim Y_i)=\max (\dim Y_i)=\dim S(Y)-1,
	\]
	原命题得证。同时还可以得到，对于非空的$Y_i$，成立$\dim Y_i=\dim Y$.
\end{proof}

\setcounter{exe}{8}
\begin{exe}
	仿射簇的投射闭包：如果$Y\subseteq \bba^n$是一个仿射簇，他们通过同胚$\varphi_0^{-1}(Y)$我们将其等同到$U_0$中。定义，$\bar{Y}$为$\varphi_0^{-1}(Y)$在$\bbp^n$的闭包，称为仿射簇$Y$的投射闭包。证明：

	\no{1} $\beta(I(Y))$生成了$I(\bar{Y})$.

	\no{2} 即使$f_i$生成了$I(Y)$，$\beta(f_i)$也不一定生成$I(\bar{Y})$.
\end{exe}
\begin{proof}
	重复一下$\beta$的定义，对于一个最高次为$N$次的多项式$g(x_1,\cdots ,x_n)$定义一个$N$次齐次多项式$f(x_0,x_1,\cdots ,x_n)=x_0^Ng(x_1/x_0,\cdots ,x_n/x_0)$，我们记作$f=\beta(g)$.所以$\beta$在操作上就是用$x_0$的幂次去补齐各幂次项到最高次，比如$g=x_1+2x_3^2$，那么$\beta(g)=x_0x_1+2x_3^2$.下面开始正式证明。

	由于homogeneous Nullstellensatz，投射情况下依然成立，齐次多项式在一个集合上为0当且仅当他在集合的闭包上为0，所以$I(\bar{Y})=I(\varphi_0^{-1}(Y))$.

	设$f\in I(\varphi_0^{-1}(Y))^\mathrm{h}$，则$\alpha(f)(x_1,\cdots,x_n)=f(1,\cdots,x_n/x_0)$显然在$Y$上为0，所以$\alpha(f)\in I(Y)$。反过来，显然对于$f\in I(\varphi_0^{-1}(Y))^\mathrm{h}$成立$\beta(\alpha(f))=f$，这样，$\beta$建立了$I(Y)$到$I(\varphi_0^{-1}(Y))^\mathrm{h}$的满射，即$\beta(I(Y))=I(\varphi_0^{-1}(Y))^\mathrm{h}$。由于齐次理想$I(\varphi_0^{-1}(Y))$由$I(\varphi_0^{-1}(Y))^\mathrm{h}$生成，所以第一部分得证。

	第二部分举个反例。设$Y$是由$(t,t^2,t^3)$画出的曲线，则$I(Y)=(y-x^2,z-x^3)$，以及$\bar{Y}=[s,st,st^2,st^3]$，齐次多项式$xy-z^2$在这些点上为$0$，但是他不由$\beta(y-x^2)=wy-x^2$以及$\beta(z-x^3)=w^2z-x^3$生成。
\end{proof}
\setcounter{exe}{11}
\begin{exe}
	d-Uple嵌入：对于给定的正整数$n$, $d$，令$M_0,\cdots,M_N$是所有的以$x_0,\cdots,x_n$为变量的$d$次首一单项式，其中$N=\tbinom{n+d}{n}-1$，定义映射
	\[
	\begin{array}{lccl}
		\rho_d:&\bbp^{n}&\to& \bbp^{N}\\
		&a=[a_0,\cdots ,a_n]&\mapsto&\bigl[M_0(a),\cdots ,M_N(a)\bigr],
	\end{array}
	\]
	他被称为称为$\bbp^{n}$到$\bbp^{N}$的d-Uple嵌入。

	\no{1} 令$\theta:k[y_0,\cdots,y_N]\to k[x_0,\cdots,x_n]$被定义为$y_i\mapsto M_i$的同态。证明$\ker\theta$是一个齐次素理想以及$Z(\ker \theta)$是$\bbp^{N}$的一个投射簇。

	\no{2} 证明$\im \rho_d=Z(\ker \theta)$.
	
	\no{3} 证明$\rho_d$是$\bbp^{n}$到$Z(\ker \theta)$的同胚。

	\no{4} 考察一下$\bbp^{1}$到$\bbp^{3}$的3-Uple嵌入。
\end{exe}
\begin{proof}
	\no{1} 先标号$M_i$，记
	\[
		M_{i_1\cdots i_k}(x)=x_0^{d-k}x_{i_1}\cdots x_{i_k},
	\]
	以及$k$次齐次多项式
	\[
		f_{i_1\cdots i_k}(y_0,\cdots,y_N)=y_0^{k-1}y_{i_1\cdots i_k}-y_{i_1}\cdots y_{i_k},
	\]
	容易检验
	\begin{align*}
		\theta\bigl(f_{i_1\cdots i_k}\bigr)(x)&=M_0^{k-1}(x)M_{i_1\cdots i_k}(x)-M_{i_1}(x)\cdots M_{i_k}(x)\\
		&=\bigl(x_0^{d}\bigr)^{k-1}x_0^{d-k}x_{i_1}\cdots x_{i_k}-x_0^{d-1}x_{i_1}\cdots x_0^{d-1}x_{i_k}\\
		&=x_0^{k(d-1)}x_{i_1}\cdots x_{i_k}
		-x_0^{k(d-1)}x_{i_1}\cdots x_{i_k}=0,
	\end{align*}
	所以$f_{i_1\cdots i_k}\in \ker \theta$，实际上，$\ker \theta$都由这些$\bigl\{f_{i_1\cdots i_k}\bigr\}$生成。下面只要检验$\ker \theta$是一个素理想就好，这样$Z(\ker \theta)$就是投射簇。

	来看$f_{i_1\cdots i_k}=0$，对于$y_0=0$，这是平凡的方程，否则，该方程即
	\[
		\frac{y_{i_1\cdots i_k}}{y_0}=\frac{y_{i_1}}{y_0}\cdots \frac{y_{i_k}}{y_0},
	\]
	所以$\bigl(k[y_0,\cdots,y_N]/\sim\bigr)/\ker \theta \cong k[y_0,\cdots,y_n]/\sim$，于是$\ker \theta$是一个素理想。

	\no{2} 设$b\in Z(\ker\theta)$，我们来求解方程$\rho_d(a)=b$，即$M_\alpha(a)=A b_\alpha$。不妨设$a_0=b_0=A=1$，此时
	\[
		M_i(a)=a_0^{d-1}a_i=a_i=b_i,
	\]
	当然这还没解完，因为只用了其中的$n+1$个方程，于是还要检验这里求出来的$a_i$还是$M_{i_1\cdots i_k}(a)=b_{i_1\cdots i_k}$的解，具体写出来即方程组$a_{i_1}\cdots a_{i_k}=b_{i_1\cdots i_k}$，按照我们前面求解出来的$a_i=b_i$，所以即要检验
	\[
		b_{i_1}\cdots b_{i_k}=b_{i_1\cdots i_k}.
	\]
	而上面这个等式其实就是$f_{i_1\cdots i_k}(b)=0$，这依赖于$b\in Z(\ker\theta)$.这样，我们解出来的$a$确实是方程组$M_\alpha(a)=A b_\alpha$的解，而且唯一。所以对于任意的$b\in Z(\ker\theta)$，我们都可以找到$a$使得$\rho_d(a)=b$，于是$Z(\ker \theta)\subseteq \im \rho_d$.

	反过来，需要证明$\im \rho_d\subseteq Z(\ker \theta)$，这个更直接，直接计算
	\[
		f_{i_1\cdots i_k}\bigl(\rho_d(a)\bigr)=\theta\bigl(f_{i_1\cdots i_k}\bigr)(a)=0
	\]
	就好。所以$\im \rho_d\subseteq Z(\ker \theta)$。结合上面的反向包含，于是$\im \rho_d=Z(\ker \theta)$.

	\no{3} 上面一个小题已经求解过方程$\rho_d(a)=b$，解存在且唯一，所以$\rho_d:\bbp^{n}\to Z(\ker \theta)$即单又满，是一个双射。$\rho_d$每一个分量都是齐次多项式，所以他本身是连续的。$\rho_d^{-1}$其实上和前$n+1$个分量的投影差不多，所以也是连续的。于是$\rho_d$是一个同胚。

	\no{4} 很容易写出$\rho_d:[x_0,x_1]\mapsto \bigl[x_0^3,x_0^2x_1,x_0x_1^2,x_1^3\bigr]$，如果$x_0\neq 0$，则
	\[
		\bigl[x_0^3,x_0^2x_1,x_0x_1^2,x_1^3\bigr]=\bigl[1,x_1/x_0,(x_1/x_0)^2,(x_1/x_0)^3\bigr],
	\]
	这就是上一题出现过的曲线$(t,t^2,t^3)$的投射闭包。
\end{proof}
\setcounter{exe}{13}
\begin{exe}
	Segre嵌入：令$\psi:\bbp^r\times \bbp^s\to \bbp^N$是一个映射
	\[
		\psi:(a_0,\cdots,a_r)\times (b_0,\cdots,b_s)\mapsto (\cdots,a_ib_j,\cdots),
	\]
	其中$(\cdots,a_ib_j,\cdots)$以字典序(lexicographic order)排列，其中$N=(r+1)(s+1)-1=rs+r+s$.容易验证$\psi$是well defined以及单的。证明，$\im(\psi)$在$\bbp^N$中是一个子投射簇。
\end{exe}
\begin{proof}
	令$\{z_{ij}\}$是$\bbp^N$的齐次坐标。设映射
	\[
	\begin{array}{lccl}
		\rho:&k\bigl[\{z_{ij}\}\bigr]&\to&k[x_0,\cdots,x_r;y_0,\cdots,y_s]\\
		&z_{ij}&\mapsto&x_iy_j,
	\end{array}
	\]
	那么$\ker \rho$由齐次多项式方程组
	\[
		z_{ij}z_{lk}-z_{lj}z_{ik}=0,
	\]
	确定，因此$\ker \rho$由$z_{ij}z_{lk}-z_{lj}z_{ik}$生成。因为$k[x_0,\cdots,x_r;y_0,\cdots,y_s]$是整环，所以$\ker \rho$是一个素理想。很直接地，$\im \psi=Z(\ker \rho)$，所以$\im \psi$是一个投射簇。
\end{proof}
\section{Morphisms}
前面说了代数簇，但是没有描述代数簇之间的映射。这里就干这活，后面将会看到，代数簇构成一个范畴，而他又和$k$-代数范畴之间有着密不可分的关系。至少就仿射簇来说，一个$k$-代数如果和某个$\bba^n$中的坐标环同构，当且仅当他是有限生成的且没有幂零元。

假设$Y$是$\bba^n$中的拟仿射簇。
\begin{defi}
	一个函数$f:Y\to \bar{k}$在点$p\in Y$是正则的，就是说存在$p$的邻域$U$使得$p\in U\subseteq Y$，存在两个多项式$g$, $h$，且$h$在$U$上处处不为$0$，使得$f=g/h$. 称一个函数在$Y$上正则，就是说他在$Y$上的每一点都正则。
\end{defi}
\begin{pro}
正则函数是连续的，其中$\bar{k}$被看作$\bba^1$，即被赋予了Zariski拓扑。
\end{pro}
\begin{proof}
	按连续的定义，只要证闭集的逆象是闭的就好了。由于$\bba^1$中的闭集都是有限集，如果我们证明了单点集的逆象是闭的，那也就证明了所有闭集的逆象是闭的。

	闭集可以局部检查，如果$Z$是拓扑空间$Y$的子集，那么他是闭集当且仅当对于任意一个$Y$的开覆盖$\{U_\alpha\}$，$Z\cap U_\alpha$是$U_\alpha$中的闭集。

	找个开覆盖，在每个$U_\alpha$中，$f$都可以写作$f=g_\alpha/h_\alpha$，此时
	\[
		f^{-1}(a)\cap U_\alpha=\bigl\{p\in U| g_\alpha(p)/h_\alpha(p)=a\bigr\},
	\]
	所以$g_\alpha(p)/h_\alpha(p)=a$又等价于$g_\alpha(p)-ah_\alpha(p)=0$，所以
	\[
		f^{-1}(a)\cap U_\alpha=Z(g_\alpha-ah_\alpha)\cap U_\alpha
	\]
	是一个闭集。
\end{proof}
这个证明中告诉我们，对于正则函数，$\bar{k}$上单点集的原像是闭的。这个内容在代数闭域上和连续性是等价的，因为当$k$是代数闭的时候，$\bar{k}$上单点集是闭集，命题说明了正则函数是连续的，所以单点集的原像是闭的。但是到了非代数闭的情况，单点集的原像是闭集所包含的内容是大于连续性的，因为$\bar{k}$上单点集一般不是闭集。

假设$Y$是$\bbp^n$中的拟投射簇，正则的定义非常类似拟仿射簇。
\begin{defi}
	一个函数$f:Y\to \bar{k}$在点$p\in Y$是正则的，就是说存在$p$的邻域$U$使得$p\in U\subseteq Y$，存在两个次数相同的齐次多项式$g$, $h$，且$h$在$U$上处处不为$0$，那么$f=g/h$. 称一个函数在$Y$上正则，就是说他在$Y$上的每一点都正则。
\end{defi}
相同次数的要求保证了正则函数确实是一个函数。此外，我们一模一样地证明正则函数是连续的。不管是仿射还是投射的，如果$f$和$g$是代数簇$Y$上的正则函数，如果$f$和$g$在$Y$的某个开子集$U$上相同，则他在$Y$上相同。因为
\[
	U\subseteq (f-g)^{-1}(0)\subseteq Y,
\]
因为单点集关于正则函数的原像是闭的，所以$(f-g)^{-1}(0)$是闭集，再由于$U$稠密，两边取闭包就有
\[
	Y\subseteq (f-g)^{-1}(0)\subseteq Y,
\]
所以$(f-g)^{-1}(0)=Y$，就是说，他们在整个$Y$上是相同的。
\begin{defi}
令$k$是域，一个代数簇可以指投射、仿射、拟投射、拟仿射簇，所以代数簇的开子集都是代数簇。代数簇范畴的对象就是这些代数簇，剩下的，就是定义这些对象之间的态射。假设$X$, $Y$是两个代数簇，他们之间的连续映射$\varphi:X\to Y$如果满足，对任意的开集$V\subseteq Y$以及$V$上的正则函数$f$，拉回$\varphi^*:f\mapsto f\circ \varphi$后的函数$\varphi^* f=f\circ \varphi:\varphi^{-1}(V)\to \bar{k}$是一个$\varphi^{-1}(V)$上的正则函数，则这个连续映射就是代数簇之间的态射。
\end{defi}
态射的复合依然是态射，所以代数簇就构成一个范畴。代数簇范畴的同构就是说，对于态射$\varphi:X\to Y$，存在$\psi:Y\to X$满足$\varphi\circ \psi=\mathrm{id}_Y$以及$\psi\circ \varphi=\mathrm{id}_X$.由于每一个代数簇（投射、仿射、拟投射、拟仿射簇）都是一个Noetherian拓扑空间，所以每一个代数簇都是紧的。

下面这个引理给出了某些情况下的态射的判断方法。
\begin{lem}
	令$X$是一个代数簇，以及$Y$是一个仿射簇，$\psi:X\to Y$是态射当且仅当$\{x_i\circ \psi\}$在$X$上是正则函数，其中$\{x_i\}$是$\bba^n_k$上的坐标函数。
	\label{c3:l1}
\end{lem}
这个判据可以如下表述：$\psi=(f_1,\cdots,f_n)$是一个态射，当且仅当$\{f_i\}$都是$X$上的正则函数。
\begin{proof}
	如果$\psi$是态射，显然$\{\psi^*x_i=x_i\circ \psi\}$在$X$上是正则函数。反之，设$\{\psi^*x_i\}$在$X$上是正则函数，那么对任意多项式$f=f(x_1,\cdots,x_n)$，$\psi^*f$在$X$上依然是正则函数。

	任取$Y$中的闭集$W$，因为$Y$中的闭集是一些多项式的零点集$W=Z(f_1,\cdots,f_k)$（这是因为闭集中闭集依然是在大的空间中是闭集），如果希望证明$\psi$是连续函数，只要证明$\psi^{-1}(W)$是闭集就可以了。因为对于任意的多项式$f$，$\psi^*f=f\circ \psi$在$X$上依然是正则函数，所以$(f\circ \psi)^{-1}(0)=\psi^{-1}(f^{-1}(0))$是闭集，所以
	\[
		\psi^{-1}(W)=\psi^{-1}\left(\bigcap_{i=1}^k f_i^{-1}(0)\right)=\bigcap_{i=1}^k\psi^{-1}\left( f_i^{-1}(0)\right)
	\]
	是有限闭集之交，所以也是一个闭集。

	除去连续性，另外需要证明的是$Y$的任意子集$V$上的正则函数变成了$\psi^{-1}(V)$上的正则函数。由于$V$上任意的正则函数$f$，可以在$V$的任意一点$p$附近写作$f=g_p/h_p$，那么
	\[
		\psi^*f=f\circ \psi=\frac{g_p(x_1\circ \psi,\cdots,x_n\circ \psi)}{h_p(x_1\circ \psi,\cdots,x_n\circ \psi)}=\frac{\psi^*g_p}{\psi^*h_p}.
	\]
	由于$\psi^*g_p$和$\psi^*h_p$在点$\psi^{-1}(p)$的每一点$q$都正则，我们可以找一个$q$的邻域$U\subseteq \psi^{-1}(V)$，在上面$\psi^*g_p$和$\psi^*h_p$都可以写作两个多项式的商，通分后，他们的商还是可以写作两个多项式的商，因此$\psi^*f$在点$q$也是正则的。因为$q$是$\psi^{-1}(p)$中的任意点，$p$是$V$中的任意点，所以$\psi^*f$在$\psi^{-1}(V)$上正则。

	综合上面两点，$\psi$是一个态射。
\end{proof}

以前说过，对于投射空间，有同胚$\varphi_i:U_i\to \bba^n_k$，有了态射的概念，有了代数簇范畴，下面一个命题就说明这还是一个同构。
\begin{pro}
	$\varphi_i:U_i\to \bba^n_k$是一个两个代数簇之间的同构。
	\label{c3:p1}
\end{pro}
\begin{proof}
	既然已经知道是同胚，只要检验正则函数那部分就好。不妨假设$i=0$，记$\varphi=\varphi_0^{-1}$，在$U_i$上的正则函数某个开集$V$上可以写作两个同次齐次多项式的商
	\[
		f\bigl([x_0,\cdots,x_n]\bigr)=\frac{g(x_0,\cdots,x_n)}{h(x_0,\cdots,x_n)},
	\]
	对应着$\varphi^*f$仿射空间内$\varphi_0(V)$处上可以写作
	\[
		\varphi^*f(x_1,\cdots,x_n)=\frac{\alpha(g)(x_1,\cdots,x_n)}{\alpha(h)(x_1,\cdots,x_n)}=\frac{g(1,\cdots,x_n/x_0)}{h(1,\cdots,x_n/x_0)},
	\]
	反过来，对于仿射空间内的正则函数，在$\varphi_0(V)$处上可以写作$j=k/l$，对应着在投射空间内$V$上写作
	\[
		(\varphi^{-1})^*j\bigl([x_0,\cdots,x_n]\bigr)=\frac{x_0^Nk(x_1/x_0,\cdots,x_n/x_0)}{x_0^Nl(x_1/x_0,\cdots,x_n/x_0)}=\frac{\beta(k)(x_0,\cdots,x_n)}{\beta(l)(x_0,\cdots,x_n)}.
	\]

	因此
	\[
		(\varphi^{-1})^*\circ \varphi^*(f) \bigl([x_0,\cdots,x_n]\bigr)=(\varphi^{-1})^*\left(\frac{\alpha(g)}{\alpha(h)}\right)=\frac{\beta(\alpha(g))}{\beta(\alpha(h))}=\frac{g}{h}=f\bigl([x_0,\cdots,x_n]\bigr).
	\]
	所以$\varphi^*\circ(\varphi^{-1})^* (f)=f$，同理可以检验$(\varphi^{-1})^*\circ\varphi^* (j)=j$，所以$\varphi$是一个代数簇之间的同构。
\end{proof}

对于任意的代数簇，可以引入一个函数环，他是仿射情况的坐标环的推广。
\begin{defi}
	设$Y$是一个代数簇，记$\mathcal{O}(Y)$是所有$Y$上的正则函数按照加法和乘法构成的环。
\end{defi}
在每一点，因为有正则函数是连续函数的性质在，可以在一点$p$上如下定义一个等价关系：取$p$的邻域$U$和$V$，如果$f$是$U$上的正则函数，$g$是$V$上的正则函数，那么$(U,f)\sim (V,g)$当$f|_{U\cap V}=g|_{U\cap V}$。对称性和自反性是显然的，传递性靠着连续函数的性质也是自然的。
\begin{defi}
	设$Y$是一个代数簇，记$\mathcal{O}_{p,Y}$或直接$\mathcal{O}_{p}$是所有$p\in Y$处上述等价关系构成的环，环运算自然继承于正则函数之间的运算。$\mathcal{O}_{p}$也被称为$p$处的正则函数芽，其中的等价类称为芽。
\end{defi}
正则函数芽是一个局部环，就是他只有一个极大理想$\mm$，因为只有一个极大理想，所以局部环的元素只能分成两类，一类是单位，另一类在极大理想中，反过来，这样的性质也决定了这是一个局部环。$\mathcal{O}_{p}$中的极大理想$\mm$由在$p$处为$0$的那些芽构成，其他芽显然是可逆的，因为如果正则函数$f$不为0，那么$f=g/h$的逆就是$1/f=h/g$，也是正则函数。

类似于在一点上定义的等价关系，对于任意两个正则函数$(U,f)$和$(V,g)$，可以定义等价关系$(U,f)\sim(V,g)$，如果$f|_{U\cap V}=g|_{U\cap V}$。注意$U\cap V\neq \varnothing$，因为代数簇在拓扑上是一个不可约集，不可约集的任意两个开子集之交不可能是空的，因为他们俩都是稠密的。
\begin{defi}
	设$Y$是一个代数簇，如下定义有理函数域$K(Y)$为那些在$Y$上满足上述等价关系的等价类构成的域，其中的元素被称为有理函数。
\end{defi}
有理函数确实构成一个域，如果$(U,f)$不是一个恒为0的常函数，那么可以找到一个开集$V=U-U\cap Z(f)$，在$V$上可以定义有理函数$(V,1/f)$，$(V,1/f)$是$(U,f)$的一个逆。

对于同构的代数簇，他们的正则函数环、正则函数芽和有理函数域都是同构的。如果态射是同构的，则其是一个同胚，但反过来，如果两个代数簇之间存在同胚，他们也不一定是同构的。后面会证明，两个仿射簇同构，当且仅当他们的坐标环同构。依靠这个结论，比如$t\mapsto (t^2,t^3)$显然是同胚，但是前者的坐标环是$k[x]$，后者的坐标环是$k[x,y]/(x^3-y^2)$，坐标环不同构，所以这两个仿射簇也不同构。

\begin{pro}
	设有两个代数簇$X$, $Y$，他们之间存在态射$\varphi:X\to Y$是一个同构，当且仅当，$\varphi$是一个同胚，且这个态射在每点$p\in X$的正则函数芽上诱导的映射$\varphi^*_p:\oo_{\varphi(p),Y}\to \oo_{p,X}$是一个同构。
	\label{c3:p3}
\end{pro}
\begin{proof}
	首先证明，态射$\varphi$确实在局部环之间诱导了映射$\varphi^*_p:\oo_{\varphi(p),Y}\to \oo_{p,X}$。取$\oo_{\varphi(p),Y}$中的一个代表元和上面的任意正则函数$\langle U,f\rangle$，于是在态射的作用下就有
	\[
		\langle U,f\rangle\mapsto \langle \varphi^{-1}(U),\varphi^*f\rangle,
	\]
	再挑一个代表元$\langle V,g\rangle$，使得$g|_{U\cap V}=f|_{U\cap V}$，所以，$\varphi^{-1}(U)\cap \varphi^{-1}(V)=\varphi^{-1}(U\cap  V)\neq \varnothing$和$\varphi^*g|_{U\cap V}=\varphi^*f|_{U\cap V}$保证了$\varphi$将等价的代表元变换成等价的代表元，所以态射$\varphi$确实在正则函数芽之间诱导了映射$\varphi^*_p:\oo_{\varphi(p),Y}\to \oo_{p,X}$。

	正方向，如果$\varphi$是一个同构，那么$\varphi$是一个同胚，将$\varphi$限制在局部，那么由上面$\varphi^*_p$的构造，很容易直接看到$\varphi^*_p$他是两个局部函数芽的同构。

	反过来，假设$\varphi$是一个同胚，以及对于每一点$p\in X$，都有$\varphi^*_p:\oo_{\varphi(p),Y}\to \oo_{p,X}$是一个同构。要验证这是一个代数簇之间的同构，构造出$\psi=\varphi^{-1}$，首先需要验证这也是一个态射。

	连续性来自于$\psi:Y\to X$是一个同胚。设$f$是$X$上的一个正则函数，我们要检验$\psi^* f$是$Y$上的正则函数。正则性是局部性质，局部检验即可，设$f$在$p\in X$上正则，设$\langle U,f|_U\rangle$是一个代表元，由同构$\varphi^*_p$，$\langle \psi^{-1}(U)=\varphi(U),\psi^* f|_U\rangle$也是一个代表元，所以$\psi^* f$在点$\psi^{-1}(p)=\varphi(p)$正则。由整体的同胚，所以$\psi^* f$在$Y$的每一点都正则，即在$Y$上正则。

	证明同构需要的剩下的等式$\psi^*\circ \varphi^*=\id_{\oo(Y)}$以及$\varphi^*\circ\psi^* =\id_{\oo(X)}$，也是局部性质，在每一个局部验证成立即可，但这由构造是显然的。
\end{proof}

上面一个命题假设了态射是一个同胚以及在局部是一个同构。但实际上，这里面是有一点信息重叠的，下面一个命题将更细致地指出，只要态射是稠密的，那么在局部，他就是单的。
\begin{pro}
	如果态射$\varphi:X\to Y$使得$\varphi(X)$在$Y$中稠密，则$\varphi^*_p:\oo_{\varphi(p),Y}\to \oo_{p,X}$在每一个$p\in X$上都是单的。
	\label{c3:p4}
\end{pro}
\begin{proof}
	取$\langle U,f\rangle\in \oo_{\varphi(p),Y}$，假设$\varphi^*f=0$在$\varphi^{-1}(U)\subseteq X$上成立，即$\varphi^*_p \langle U,f\rangle=\langle \varphi^{-1}(U),\varphi^*f\rangle=0$，我们要证明存在$\varphi(p)$的邻域$V\subseteq U$使得$V\subseteq Z(f)$，这样$\langle V,f|_V\rangle=\langle U,f\rangle=0$，于是$\varphi^*_p:\oo_{\varphi(p),Y}\to \oo_{p,X}$是单的。

	由于
	\[
		\varphi^*(f)\bigl(\varphi^{-1}(U)\bigr)=f\bigl(\varphi(\varphi^{-1}(U))\bigr)=0,
	\]
	所以$f$在$\varphi(\varphi^{-1}(U))=\varphi(X)\cap U$上为零，即
	\[
		\varphi(X)\cap U\subseteq Z(f)\subseteq U.
	\]
	在$U$中取闭包，因为$\varphi(X)$在$Y$中的稠密性，$\varphi(X)\cap U$在$U$中稠密，所以他在$U$中的闭包即$U$，而正则函数$f:U\to \bar{k}$是一个连续函数，所以$Z(f)$是$U$中的闭集，于是取闭包的结果是$U\subseteq Z(f) \subseteq U$，这样即得到了$Z(f)=U$。
\end{proof}
下面我们将具体研究仿射簇和投射簇的正则函数环与正则函数芽。
\begin{theo}
	如果$Y$是一个仿射簇，他的坐标环为$A(Y)$，那么

	\no{1} 存在环同构：$\mathcal{O}(Y)\cong A(Y)$.

	\no{2} 对于每一点$p\in Y$，令$\mm_p\subseteq A(Y)$是在点$p$上为$0$的多项式构成的极大理想，存在环同构：$\mathcal{O}_p\cong A(Y)_{\mm_p}$，其中$A(Y)_{\mm_p}$是$A(Y)$关于$\mm_p$的局部化。其次，$\dim \mathcal{O}_p=\dim Y$.所以可以看到，维度是局部性质。

	\no{3} 存在域同构：$K(Y)\cong F(A(Y))$，即$K(Y)$同构于$A(Y)$的商域。因此$K(Y)$是一个$k$的有限生成域扩张，其超越次数等于$\dim Y$.
	\label{c3:t12}
\end{theo}
\begin{proof}
	一步一步来。因为每个多项式是在$\bba^n_k$上的正则函数，当然也是在$Y$上的正则函数，所以我们有一个同态$A\to \mathcal{O}(Y)$，这个同态的核就是$I(Y)$，所以我们存在一个单同态$\alpha: A(Y)\to\mathcal{O}(Y)$.

	对每一个$p\in Y$，单同态$\alpha$自然诱导了映射$A(Y)_{\mm_p}\to \mathcal{O}_p$，所以是单的。由于局部正则函数都写成两个多项式的商，所以这个映射也是满的，于是$\mathcal{O}_p\cong A(Y)_{\mm_p}$。而维数上有$\dim \mathcal{O}_p=\height(\mm_p)$，因为$A(Y)/\mm_p$是域，所以$\dim (A(Y)/\mm_p)=0$，于是
	\[
		\dim \mathcal{O}_p=\height(\mm_p)=\dim Y-\dim (A(Y)/\mm_p)=\dim Y.
	\]
	第二点证明完毕。

	关于最后一点，因为$\mathcal{O}_p\cong A(Y)_{\mm_p}$，所以对每一点$p\in Y$，$A(Y)$的商域都同构于$\mathcal{O}_p$的商域，所以$F(A(Y))\cong K(Y)$，因为$A(Y)$是一个有限生成$k$-代数，所以$K(Y)$是$k$的一个有限生成域扩张，而其超越次数就是$A(Y)$的维度，当然也就是$Y$的维度。

	最后证明第一点，即单同态$\alpha: A(Y)\to\mathcal{O}(Y)$也是满射。首先可以注意到$\mathcal{O}(Y)\subset \cap_{p\in Y}\mathcal{O}_p$，由于有同构$\mathcal{O}_p\cong A(Y)_{\mm_p}$，不妨将这两者等同起来，则
	\[
		\mathcal{O}(Y)\subseteq \bigcap_{p\in Y}\mathcal{O}_p=\bigcap_{p\in Y}A(Y)_{\mm_p},
	\]
	而后者又等同于所有$A(Y)_{\mm}$的交\footnote{对于多项式环极大理想在第一章已经非常详尽地考察过了，所有的极大理想实际上都具有$\mm_p$的形式。}，所以
	\[
		A(Y)\subseteq \mathcal{O}(Y)\subseteq \bigcap_{\mm}A(Y)_{\mm}.
	\]
	所有$A(Y)_{\mm}$中的元素都具有形式$f/g$，其中$g\in A(Y)-\mm$，所以如果$f/g\in \cap_{\mm}A(Y)_{\mm}$，即$g$不在任何一个极大理想里面，只能是一个单位，因此$f/g=fg^{-1}\in A(Y)$，这样我们就证明了
	\[
		A(Y)\subseteq \mathcal{O}(Y)\subseteq \bigcap_{\mm}A(Y)_{\mm}\subseteq A(Y),
	\]
	所以$\mathcal{O}(Y)=A(Y)$，得证。顺便，对于仿射簇来说，正则函数环与正则函数芽成立
	\[
		\oo(Y)=\bigcap_{p\in Y}\oo_{p}.
	\]
\end{proof}

下一个结论是关于投射簇的，和上面仿射簇的结论至少结构上是类似的，我们要讨论局部化。设$\pp$是$S$的一个齐次素理想，那么根据$(S-\pp)^{\mathrm{h}}$我们可以定义一个局部化$S_\pp$，他是自然分次的，$\deg(f/g)=\deg (f)-\deg (g)$，那么我们记$S_{(\pp)}$是$S_\pp$中的零次齐次子环。考虑零次齐次项是自然的，因为正则函数是写作两个同次齐次多项式的商。在上述记法下，商域写作$S_{(0)}$，零次齐次子域为$S_{((0))}$.

\begin{theo}
	如果$Y$是一个投射簇，他的坐标环为$S(Y)$，那么

	\no{1} 存在域同构：$\mathcal{O}(Y)\cong k$和$K(Y)\cong S(Y)_{((0))}$.

	\no{2} 对于每一点$p\in Y$，令$\mm_p\subseteq S(Y)$是在$p$处为$0$的齐次多项式生成的极大理想，存在环同构：$\mathcal{O}_p\cong S(Y)_{(\mm_p)}$.
\end{theo}
\begin{proof}
	先证明第二点，思维其实很朴素，由于投射簇是由被仿射簇覆盖，所以局部完全可以放到仿射簇里面，利用仿射簇的局部结论。

	设$U_i$是$x_i\neq 0$构成的$\bbp^n$中的开集，记$Y_i=Y\cap U_i$，因为Proposition \ref{c3:p1} 告诉我们，作为代数簇，存在$\varphi_i:U_i\to \bba^n_k$是一个同构，所以我们可以认为$Y_i$是一个仿射簇。如同Exercise \ref{c2:e6} 的证明中看到的那样，$Y_i$的坐标环$A(Y_i)$和$S(Y)_{(x_i)}$同构，事实上，映射
	\[
	\begin{array}{lcccl}
		\varphi^*_i&:&k[y_0,\cdots,y_{i-1},y_{i+1},\cdots,y_n]&\to& k[x_0,\cdots,x_n]_{(x_i)}\\
		&&f(y_1,\cdots,y_{i-1},y_{i+1},\cdots,y_n)&\mapsto &\bar{f}(x_0/x_i,\cdots,x_n/x_i)=\bar{f}/x_i^n
	\end{array}
	\]
	是一个同构，他将$I(Y_i)$变成了$I(Y)S_{(x_i)}$，所以$\varphi^*_i:A(Y_i)\to S(Y)_{(x_i)}$是一个同构。

	由于$p\in Y$一定属于某个$Y_i$，那么作为仿射簇上的点，利用仿射簇的结论，可以得到$\oo_p\cong A(Y_i)_{\mm'_p}$，其中$\mm'_p$是$A(Y_i)$中在点$p$处为零的函数构成的极大理想。所以，由同构$\varphi^*_i$有
	\[
		\oo_p\cong A(Y_i)_{\mm'_p}\cong \bigl(S(Y)_{(x_i)}\bigr)_{\varphi^*_i(\mm'_p)}=S'.
	\]
	由同构的构造，设$f\in \mm'_p$，则$\varphi^*_i(f)=\bar{f}/x_i^n$，其中$\bar{f}\in \mm_p$，所以$S'$中的任意元素$a$具有形式
	\[
		a=\frac{\bar{f}/x_i^n}{{\bar{g}/x_i^m}}=\frac{\bar{f} x_i^m}{\bar{g} x_i^n},
	\]
	其中$\bar{g}$是不属于$\mm_p$的齐次多项式，可以看到$a\in S(Y)_{(\mm_p)}$。反之，对于任意$f/g\in S(Y)_{(\mm_p)}$，我们可以看到
	\[
		\frac{f}{g}=\frac{f/x_i^n}{g/x_i^n}\in S',
	\]
	因此，我们就得到了同构$\oo_p\cong S(Y)_{(\mm_p)}$.

	由于$Y_i$在$Y$中稠密，所以任意在$Y$的某个开集$U$上的正则函数$f$，也属于等价类$\langle U\cap Y_i,f\rangle$，于是可以断言$K(Y)=K(Y_i)$，而$Y_i$作为仿射簇，$K(Y_i)\cong F(A(Y_i))$，通过同构$\varphi^*_i$，我们就可以得到同构$F(A(Y_i))\cong S(Y)_{((0))}$，于是$K(Y) \cong S(Y)_{((0))}$.

	最后来证明唯一的整体结论$\mathcal{O}(Y)\cong k$，不妨将那些同构看成相等的。设$f$是$Y$上的正则函数，他当然也是$Y_i$上的正则函数，所以$f\in A(Y_i)= S(Y)_{(x_i)}$，所以$f=g_i/x_i^{n_i}$，其中$g_i$是$n_i$次齐次多项式。所以$x_i^{n_i}f\in S(Y)_{n_i}$，对任意的$i$成立。

	选一个$N>\sum_i n_i$，那么$S(Y)_N$是由那些$N$次的首一单项式张成的$k$-矢量空间，由于$N$足够大，所以对每一个首一单项式$M$都存在某个$i$使得$M$中含有因子$x^n_i$且$n\geq n_i$.于是，对所有的首一多项式都成立$Mf\subseteq S(Y)_N$，这样$S(Y)_N\cdot f^k\subseteq S(Y)_N$就对任意的正整数$k$成立了，特别地，$x_0^Nf^k\subseteq S(Y)$成立。

	考察$F(S(Y))$的子环$S(Y)[f]$，由于$x_0^Nf^k\subseteq S(Y)$成立，所以$S(Y)[f]\subseteq x_0^{-N}S(Y)$.因为$x_0^{-N}S(Y)$是一个有限生成$S(Y)$-模，所以$f$在$S(Y)$上是整的\footnote{等价的判据有：$S(Y)[f]$是一个有限生成$S(Y)$-模；$S(Y)[f]$包含于一个有限生成$S(Y)$-模内；存在一个忠实$S(Y)[f]$-模$M$，使得$M$被看成$S(Y)$-模时是有限生成的。见[Atiyah-Macdonald, p59].}，即存在一个首一多项式
	\[
		f^m+a_1f^{m-1}+\cdots+a_m=0,
	\]
	系数$a_i\in S(Y)$，由于$f$是零次的，所以上面的等式的零次项构成了一个新的等式。但是$S(Y)_0=k$，所以上面的等式的零次项就是一个方程
	\[
		f^m+b_1f^{m-1}+\cdots+b_m=0,
	\]
	其中$b_i\in k$。可以解得$f\in \bar{k}$是一个常数，所以$\oo(Y)\subseteq \bar{k}$.然而$\oo(Y)$中的元素在局部都写作两个多项式的商，由于现在元素是常数，所以这个常数只能处于$k$中，即$\oo(Y)\subseteq k$.反之，每一个$k$中的元素也是$Y$上的正则函数，所以$\oo(Y)= k$.
\end{proof}

从上面一个定理来看，投射空间和仿射空间差别很大，作为一个例子，考察$k=\mathbb{C}$的情况，由于$\bbp^1_{\mathbb{C}}$的元素要么具有形式$[1,a]$，要么具有形式$[0,b]$，前者同构于$\mathbb{C}$，后者可以看成一个无穷远点，所以$\bbp^1_{\mathbb{C}}$即$\mathbb{C}\cup \{\infty\}$，而$\bba^1_{\mathbb{C}}=\mathbb{C}$是清楚的。因为$\mathbb{C}\cup \{\infty\}$是$\mathbb{C}$的紧致化，所以对于一般的投射空间，也大概可以理解成仿射空间的紧致化。

复变函数的例子可以更加深化上面这层联系，重温一下复变函数的里面的定理，在扩充复平面上全纯的函数必须是常值函数，这就说明$\mathcal{O}(\mathbb{C}\cup \{\infty\})\cong \mathbb{C}$，这里的$\mathcal{O}$指的是全纯函数，这和上面的定理中的第一点很相似。复变函数还告诉我们，在整个复平面上以无穷远点为极点的全纯函数只能是多项式，这又暗合$\mathcal{O}(\mathbb{C})\cong \mathbb{C}[z]$.

\begin{pro}
令$X$是一个代数簇，而$Y$是一个仿射簇，那么存在自然的双射$\alpha$使得
\[
\begin{array}{lcccl}
	\alpha&:&\mathrm{Hom}_{\mathrm{Var}}(X,Y)&\cong& \mathrm{Hom}_{\mathrm{Alg}}(\mathcal{O}(Y),\mathcal{O}(X))\cong \mathrm{Hom}_{\mathrm{Alg}}(A(Y),\mathcal{O}(X))\\
	\alpha&:&f&\mapsto &f^*
\end{array}
\]
其中$f$是$X\to Y$的态射。
\label{c3:p14}
\end{pro}
这命题说明了，两个范畴之间的态射是一一对应的，特别地，因为同构一一对应同构，因此，如果一个代数簇和一个仿射簇同构，此时代数簇的正则函数环和仿射簇的坐标环同构。反过来不一定，正则函数环和坐标环之间虽然是同构，但是他们诱导的态射可能连同胚都不是，那自然不是代数簇的同构。

\begin{proof}
	$\alpha$的定义如同上面的图所显示地一样，对于给定的态射$\varphi$，他在正则函数之间自然诱导了一个映射$\varphi^*$.

	反过来，给一个$k$-代数之间的同态$\psi^*:\oo(Y)\to \oo(X)$。由于$Y$是$\bba^n_k$中的一个仿射簇，那么$\oo(Y)\cong A(Y)=k[x_1,\cdots,x_n]/I(Y)$，令$\bar{x}_i$是$x_i$在$\oo(Y)$中的象，以及$y_i=\psi^*(\bar{x}_i)\in \oo(X)$，于是我们可以用他们定义映射$\psi:X\to \bba^n_k$通过$\psi(p)=(y_1(p),\cdots,y_n(p))$。

	下面要证明$\im \psi\subseteq Y$，因为$Y=Z(I(Y))$，所以只要证明对任意的$f\in I(Y)$成立$f(\psi(p))=0$即可，但是这由
	\[
		f(\psi(p))=f(y_1(p),\cdots,y_n(p))=\psi^*(f(\bar{x}_1,\cdots,\bar{x}_n))(p)=0
	\]
	保证。所以$\psi$定义了从$X$到$Y$的映射，他诱导了映射$\psi^*$。最后，$\psi$是一个态射，这来自于Lemma \ref{c3:l1}.
\end{proof}

将视线缩小到仿射簇范畴，那么
\begin{pro}
函子$A:X\to A(X)$引出了一个$k$上的仿射簇范畴到$k$上的有限生成整代数范畴之间的反箭头等价。特别地，两个仿射簇是同构的，当且仅当他们的坐标环是同构的。
\end{pro}

考虑正则函数环的同构是比考虑代数簇的同构在操作上简单的东西。作为例子，我们来判断$\bba^1_k$中的任意真开子集作为拟仿射簇不同构于$\bba^1_k$。这是因为$\bba^1_k$中的任意真开子集都具有形式$\bba^1_k-U$，其中$U$是一个有限集，所以他的正则函数环中的元素不仅允许多项式存在，而且还允许有$f/g+h$的形式出现，其中$f$, $g$, $h$是多项式，且$Z(g)\subseteq U$。因为他们的正则函数环不同构，所以这两个代数簇不同构。

再看一个例子，对于代数闭域中的二次曲线\footnote{需要除去直线的情况，比如$y-x=0$和$xy=0$确定的曲线。}，可以适当地对变量进行线性组合来调整二次项系数，使得他是多项式
\[
	f(x,y)=ax^2+by^2+cx+dy+e
\]
的零点，其中$a$和$b$不同时为$0$。

如果$ab=0$，不妨设$b=0$，那么$f(x,y)=0$就给出了$y=-(ax^2+cx+e)/d$，所以$A(f)\cong k[x]$，这种情况下，$Z(f)$和$\bba^1_k$作为代数簇同构。

如果$ab\neq 0$，那么适当平移$x$和$y$，总可以消去$f(x,y)$中的一次项，此时
\[
	f(x,y)=ax^2-by^2+c,
\]
因为是代数闭域，令$w=\sqrt{a}x+\sqrt{b}y$和$z=\sqrt{a}x-\sqrt{b}y$，则$f(x,y)=0$的解则约化成方程
\[
	g(z,w)=zw+c=0
\]
的解，容易看到$A(g)=k[z,w]/(zw+c)$中的元素具有形式
\[
	p(z)+\frac{q(z)}{z^n},
\]
其中$p$, $q$为多项式，所以$A(g)\cong \mathcal{O}(\bba^1_k-\{0\})$.于是在这种情况下$Z(g)\cong \bba^1_k-\{0\}$.

因为$ab$就是二次项系数的行列式，所以对于代数闭域上面二次曲线的分类即：如果二次项系数的行列式为零，他就同构于$\bba^1_k$，如果不为零就同构于$\bba^1_k-\{0\}$.

\section*{Supplement}
在证明投射簇的局部结论的时候，我们在局部找了一个仿射覆盖，这样我们就将问题放到了仿射的情况下。下面的引理说明了在任意代数簇上，开的仿射子集\footnote{自此以后，我们称一个代数簇是仿射的，如果他同构于一个仿射簇。}将构成一组拓扑基。所以，如果我们在局部考虑问题，很大程度上就是在仿射簇上考虑问题。
\begin{lem}
	令$Z(f)$是$\bba^n_k$中的超曲面，那么拟仿射簇$\bba^n_k-Z(f)$同构于$\bba^{n+1}_{k}$中的$Z(x_{n+1}f-1)$，所以$\bba^n_k-Z(f)$仿射，且他的坐标环为$k[x_1,\cdots,x_n]_f$，即$k[x_1,\cdots,x_n]$关于$\{1,f,f^2,\cdots\}$的分式环。
\end{lem}
\begin{proof}
	设$\varphi:Z(x_{n+1}f-1)\to \bba^n_k-Z(f)$是前$n$个坐标的投影函数，这是一个态射。很清楚，$\varphi$给出了$Z(x_{n+1}f-1)$到$\bba^n_k-Z(f)$的双射，为了证明$\varphi$是一个同构，所以需要证明$\varphi^{-1}$是一个态射。然而$\varphi^{-1}(a_1,\cdots,a_n)=(a_1,\cdots,a_n,1/f(a_1,\cdots,a_n))$，使用Lemma \ref{c3:l1} 就知道这是一个态射。于是$\bba^n_k-Z(f)$仿射，他的坐标环就是$Z(x_{n+1}f-1)$的坐标环，即$k[x_1,\cdots,x_n]_f$.
\end{proof}

\begin{lem}
	令$X$是代数簇，在每一点$p\in X$，他的任意开邻域$U$里面都可以找到一个开的仿射集$V$使得$p\in V\subseteq U$.
\end{lem}
\begin{proof}
	因为$U$也是一个代数簇，所以不妨令$U=X$。其次，按照Proposition \ref{c2:p8}，$X$被拟仿射集开覆盖，所以我们可以假设$X$是一个$\bba^n_k$中的拟仿射簇。

	$\forall p\in X$，我们来找一个他的仿射邻域。由于$\bar{X}-X$是$\bba^n_k$中的闭集，如果$p\notin \bar{X}-X$，我们可以找到一个不可约多项式$f\in I(\bar{X}-X)$使得$f(p)\neq 0$。显然$\bar{X}-X\subseteq Z(f)$但$p\notin Z(f)$，所以$p\in X-X\cap Z(f)$，而$X-X\cap Z(f)$是一个$X$中的开集。并且，由$X$是不可约的以及$X-X\cap Z(f)$是一个$X$的开子集，则$X-X\cap Z(f)$是一个不可约集。

	此外，$X-X\cap Z(f)$是一个$\bba^n_k-Z(f)$的闭子集，由上一个引理，$\bba^n_k-Z(f)$仿射，而$X-X\cap Z(f)$是一个仿射集的不可约闭子集，所以也是一个仿射集。于是$X-X\cap Z(f)$是$p$的一个仿射邻域。
\end{proof}
来说个显然的推论，设$X$是一个代数簇，则$\dim \oo_{p,X}=\dim X$，所以维度是一个局部性质。为了证明他，在$p$附近找一个仿射邻域，那么通过仿射簇的局部结论，自然得证。

既然这节讨论了代数簇范畴，那么就可以谈谈在任意范畴上都谈论的一些东西，比如直积，从仿射簇范畴开始。
\begin{pro}
	如果$X\subseteq \bba^{m}$, $Y\subseteq \bba^{n}$是闭集，那么$X\times Y\subseteq \bba^{m+n}$是闭集。
\end{pro}
\begin{proof}
	设$X=Z(f_{1},\cdots,f_{r})$, $Y=Z(g_{1},\cdots,g_{s})$，构造$\mathfrak{a}_{ij}=(f_i)+(g_j)=f_iA^{m+n}+g_jA^{m+n}$，且
	\[
		Z(\mathfrak{a}_{ij})=Z(f_i)\times Z(g_j),
	\]
	现在
	\[
		\bigcap_{i,j}Z(\mathfrak{a}_{ij})=\bigcap_{i,j}Z(f_i)\times Z(g_j)=\bigcap_i Z(f_i)\times \bigcap_j Z(g_j)=X\times Y,
	\]
	所以$X\times Y\subseteq \bba^{m+n}$是闭集。
\end{proof}

一般而言，$\bba^{m+n}$的拓扑一般不同于$\bba^{m}\times \bba^n$的乘积拓扑。举个例子，假设$k$是代数闭的，按照Zarisk拓扑，$\bba^{2}$中$\{(0,0)\}$是闭集。但是按照乘积拓扑，$\bba^1\times \bba^1$中$\{(0,0)\}$不是闭集，或者说$\bba^1\times \bba^1-\{(0,0)\}$不是开集。事实上，$\bba^1$中的闭集都是有限集，开集就是$\bba^1$去掉某些点，所以任意两个开集生成了$\bba^1\times \bba^1$中的开集
\[
	(\bba^1-U)\times (\bba^1-V)=\bba^1\times\bba^1-U\times\bba^1-\bba^1\times V,
\]
其中$U$和$V$都是有限集。其他的开集都是这样开集的并，特别地，$\bba^1\times \bba^1-\{(0,0)\}$如果是开集，那么应该是某些$0\in U$和$0\in V$所对应的开集的并，令$U=\{0\}\cup U'$和$V=\{0\}\cup U'$，这样的开集写作
\[
	\bba^1\times\bba^1-\{0\}\times\bba^1-U'\times\bba^1-\bba^1\times \{0\}-\bba^1\times V',
\]
所以，所有这样的开集都包含于$W=\bba^1\times\bba^1-\{0\}\times\bba^1-\bba^1\times \{0\}$，他们的任意并也包含于$W$，但$W\subsetneq\bba^1\times\bba^1-\{(0,0)\}$，所以这就可以推出$\bba^1\times\bba^1-\{(0,0)\}$不能写成那些开集的并，所以不是开集。

反过来，如果$X$和$Y$是开的，因为
\[
	X\times Y=\bba^{m+n}-\bigl((\bba^{m}-X)\times \bba^n\cup\bba^{m}\times (\bba^{m}-Y)\bigr),
\]
所以$X\times Y$是开的。因此，$\bba^{m}\times \bba^n$的乘积拓扑中的开集一定是$\bba^{m+n}$中的开集。所以，作为仿射簇的直积，$\bba^{m}\times \bba^n$被赋予的Zariski拓扑要比乘积拓扑更良好一些。这一优势使得我们对于乘积拓扑的直觉都可以直接套上来却不会产生问题。

\begin{pro}
	如果$X\subseteq \bba^{m}$, $Y\subseteq \bba^{n}$是仿射簇，那么$X\times Y\subseteq \bba^{m+n}$是仿射簇。
	\label{c3:p18}
\end{pro}
\begin{proof}
	闭集的部分已经证明了，下面只要证明$X\times Y$在$\subseteq \bba^{m+n}$中的不可约性。

	假如$X\times Y=Z_1\cup Z_2$，其中$Z_1$, $Z_2$是$X\times Y$中的闭集，如果证明$X\times Y=Z_i$，则$X\times Y$是不可约的。

	设$Z_i=Z(f_{i1},\cdots,f_{in_i})$，其中$f_{ij}\in A^{m+n}$。定义$X_i=\bigl\{x\in X:\{x\}\times Y\subseteq Z_i\bigr\}$或
	\[
		X_i=\bigl\{x\in X:\forall y\in Y,\,f_{i1}(x,y)=0,\cdots ,f_{in_i}(x,y)=0\bigr\},
	\]
	即对任意的$x\in X_i$和$y\in Y$，都有$f_{ij}(x,y)=0$。

	首先证明$X=X_1\cup X_2$，由于$X_1\cup X_2\subseteq X$是显然的，剩下的只要证明，对于固定的$a\in X$，可以得到$\{a\}\times Y\subseteq Z_1$或$\{a\}\times Y\subseteq Z_2$，这样前者意味着$a\in X_1$后者意味着$a\in X_2$，于是$a\in X_1\cup X_2$.也就有了$X\subseteq X_1\cup X_2$.

	固定$a\in X$，定义$g_{ij}(y)=f_{ij}(a,y)$，考虑$V_i=Z(g_{1i},\cdots,g_{in_i})$，可以知道$V_i\cap Y$是$Y$中的闭集。$\forall y\in Y$，$(a,y)\in Z_1 \cup Z_2$，所以$y$满足$\{g_{1j}(y)=0\}$或者$\{g_{2j}(y)=0\}$，可知$Y=(V_1\cap Y)\cup (V_2\cap Y)$。由$Y$的不可约性，$Y=V_i\cap Y$或者$Y\subseteq V_i$，这就是$\{a\}\times Y\subseteq Z_i$。

	其次，我们想要证明$X_i$是$\bba^{m}$中的闭集，即他是一族多项式的零点集。由于$X$是闭的，$X_i$如果是$\bba^{m}$中的闭集，也当然是$X$中的闭集。下面的证明固定$i$取$1$或$2$。

	固定$x\in X_i$，定义$g_{ij}(y)=f_{ij}(x,y)$，由$X_i$定义知$g_{ij}\in I(Y)$，所以$g_{ij}$由一些多项式$h_{ijk}\in I(Y)$所生成，即
	\[
		g_{ij}(y)=\sum_{k=1}^N\alpha_{ijk}(y)h_{ijk}(y),
	\]
	改变$x\in X_i$，上式右边的形式都不变，所以
	\[
		f_{ij}(x,y)=\sum_{k=1}^N\alpha_{ijk}(x,y)h_{ijk}(y).
	\]
	任取$b\notin Y$，并记
	\[
		\beta_{ij}^b(x)=f_{ij}(x,b)-\sum_{k=1}^N\alpha_{ijk}(x,b)h_{ijk}(b),
	\]
	则任意的$x\in X_i$都是多项式族$\{\beta_{ij}^b\}$的零点。

	反过来，固定$x\in X$是$\{\beta_{ij}^b\}$的零点，那么
	\[
		F_{ij}(b)=f_{ij}(x,b)-\sum_{k=1}^N\alpha_{ijk}(x,b)h_{ijk}(b)=0
	\]
	对任意的$b\in \bba^{n}-Y$都成立。因为$\bba^{n}$是不可约的，而$\bba^{n}-Y$是一个开集，所以$\overline{\bba^{n}-Y}=\bba^{n}$。而一个多项式在一个集合上为$0$当前仅当其在闭包上也为$0$，所以
	\[
		f_{ij}(x,y)=\sum_{k=1}^N\alpha_{ijk}(x,y)h_{ijk}(y)
	\]
	对任意的$y\in \bba^{n}$都成立，当然也就对$y\in Y$成立，由于$h_{ijk}(Y)=0$，所以对$y\in Y$，我们有$f_{ij}(x,y)=0$，这也就是说$x\in X_i$。

	综上，$X_i$就是多项式族$\{\beta_{ij}^b\}$的零点集，所以$X_i$就是$\bba^{m}$中的闭集，也是$X$中的闭集。已知$X=X_1\cup X_2$，由$X$的不可约性，$X=X_i$，这就告诉我们$X\times Y\subseteq Z_i$，因此$X\times Y$是不可约的。
\end{proof}

\begin{pro}
	$A(X\times Y)\cong A(X)\otimes_k A(Y)$.
\end{pro}
\begin{proof}
由于是仿射簇，所以上面的同构等价于$\mathcal{O}(X\times Y)\cong \mathcal{O}(X)\otimes_k \mathcal{O}(Y)$，两边都是$k$-代数，定义一个$k$-线性映射$\alpha : \mathcal{O}(X)\otimes_k \mathcal{O}(Y)\to \mathcal{O}(X\times Y)$满足
\[
	\alpha:f\otimes g \mapsto fg.
\]
如果$f$和$g$是正则函数，那么$fg$也是正则函数，所以定义合理。此外，这还是一个代数同态，因为
\[
	\alpha(f_1\otimes g_1)\alpha(f_2\otimes g_2)=f_1f_2g_1g_2=\alpha\bigl((f_1f_2)\otimes (g_1g_2)\bigr).
\]
显然的部分是$\alpha$满，因为对于任意的坐标函数成立$x_i=\alpha(x_i\otimes 1)$以及$y_j=\alpha(1\otimes y_j)$.

剩下要证明他是一个单射。设$f\in \mathcal{O}(X)\otimes_k \mathcal{O}(Y)$且$\alpha(f)=0$，将其展开有
\[
	f=\sum_{i,j}c_{ij}f_i\otimes g_j,
\]
所以
\[
	\alpha(f)(x,y)=\sum_{i,j}c_{ij}f_i(x)g_j(y)=0,
\]
固定$x$，从$\{g_i\}$的线性无关，推知系数有$\sum_{i}c_{ij}f_i(x)=0$。从$\{f_i\}$的线性无关，推知系数有$c_{ij}=0$，所以也就是$f=0$，因此$\alpha$是单射。
\end{proof}
\begin{pro}
	设$X$, $Y$是仿射簇，则$X\times Y$是代数簇范畴的直积，即满足如下图演示的universe property：设$Z$是一个代数簇，对于任意的态射$r_1:Z\to X$与$r_2:Z\to Y$，存在态射$s:Z\to X\times Y$使得下面的交换图成立。
	\[
		\xymatrix{
			X&\ar[l]_{\mathrm{proj}_1}X\times Y\ar[r]^{\mathrm{proj}_2}&Y \\
			&Z\ar@{-->}[u]^s\ar[ul]^{r_1}\ar[ur]_{r_2}&
			}
	\]
\end{pro}
\begin{proof}
	按照直觉可以构造$s=r_1\times r_2:z\mapsto (r_1(z),r_2(z))$，交换图的成立显然。要证明$s$是一个态射，直接应用Lemma \ref{c3:l1} 就可以了。
\end{proof}
\begin{pro}
	$\dim (X\times Y)=\dim X+\dim Y$.
\end{pro}
\begin{proof}
	因为维度等于商域的超越次数，所以如果$X$的商域的代数无关超越元是$\{t_1,\cdots,t_m\}$，而$Y$的是$\{s_1,\cdots,s_n\}$，那么$A(X\times Y)$的商域由$\{t_1,\cdots,t_m,s_1,\cdots,s_n\}$生成，只要证明他们是超越无关的，那么$A(X\times Y)$的商域的超越次数就是$n+m$。假设存在多项式$f(t,s)=0$在$X\times Y$上成立，固定$x$，由$\{s_1,\cdots,s_n\}$的代数无关，可以知道所有$y$前的系数$a(x)=0$，再由$\{t_1,\cdots,t_m\}$的代数无关，$a(x)$恒等于$0$，所以$f$恒等于$0$，证毕。
\end{proof}
当然，我们对于仿射簇的直积也可以形式地移到拟仿射簇上面，下面一个命题保证了两个拟仿射簇的直积依然是拟仿射的。
\begin{pro}
	设$X\subseteq \bba^{m}$, $Y\subseteq \bba^{n}$是拟仿射簇，那么$X\times Y\subseteq \bba^{m+n}$是拟仿射簇。
	\label{c3:p23}
\end{pro}
\begin{proof}
	由于$\bar{X}$和$\bar{Y}$是仿射簇，则$\bar{X}\times \bar{Y}$是仿射簇。因为$X$和$Y$分别在$\bar{X}$和$\bar{Y}$中开，按照乘积拓扑的直觉，$X\times Y$在$\bar{X}\times \bar{Y}$中开，实际上，存在开集$V$和$W$使得$X=V\cap \bar{X}$和$Y=W\cap \bar{Y}$，同时
	\[
		X\times Y=(V\times W)\cap(\bar{X}\times \bar{Y}),
	\]
	因此$X\times Y$在$\bar{X}\times \bar{Y}$中开。而$\bar{X}\times \bar{Y}$不可约，所以他的开集$X\times Y$不可约。这样$X\times Y$就是一个拟仿射簇了。
\end{proof}

接着来看看（拟）投射簇的情况。为了考虑两个（拟）投射簇的直积，我们至少应该赋予$\bbp^m\times \bbp^n$投射簇的结构，就像通过等同$\bba^{m}\times \bba^n$和$\bba^{m+n}$来给予前者投射簇结构一样。

如果有两个（拟）投射簇$X$和$Y$，给予$X\times Y$（拟）投射簇结构的一个简单明快的方式就是将其嵌入到一个投射空间中去，即$\varphi:X\times Y\hookrightarrow \bbp^N$.更进一步地，我们希望局部仿射的性质依然保持，即如果$U$是$p\in X$的仿射邻域，$V$是$q\in Y$的仿射邻域，则$U\times_{\mathrm{aff}} V$作为仿射簇的直积和同构于$\varphi(U\times_{\mathrm{proj}} V)$，这样$U\times_{\mathrm{proj}} V$是$(p,q)\in X\times Y$的仿射邻域。

上面陈述的性质能够完全确定$X\times Y$的嵌入。设我们有两种嵌入$\varphi$和$\psi$，那么$\varphi\circ \psi^{-1}$是$\varphi(X\times Y)$和$\psi(X\times Y)$的同构。然后考虑局部，设$\varphi(U\times V)$和$\psi(U\times V)$都是我们需要的仿射邻域，则他们都同构于$U\times_{\mathrm{aff}} V$。

这样的嵌入上一章的习题已经提到了，就是Segre嵌入，将$\bbp^m\times \bbp^n$等同于他在$\bbp^N$中的象，这样他就有了投射簇的结构。
\begin{pro}
	设$X\subseteq \bbp^m$和$Y\subseteq \bbp^n$是两个（拟）投射簇，$X\times Y\subseteq \bbp^m\times \bbp^n$是一个（拟）投射簇。
\end{pro}
\begin{proof}
	设$X=Z(f_1,\cdots,f_r)$和$Y=Z(g_1,\cdots,g_s)$是投射簇，首先证明$X\times Y$是一个闭集。设映射
	\[
		\mathrm{proj}_1:a\times b\mapsto a,\quad \mathrm{proj}_2:a\times b\mapsto b,
	\]
	这并不难构造，对于每一个点$(a,b)\in X\times Y$，我们总可以找到一个$b_i\neq 0$，这样$\mathrm{proj}_1$的作用就是$[\cdots,a_ib_j,\cdots]\mapsto [a_0b_j,\cdots,a_mb_j]=a$，$\mathrm{proj}_2$同理。容易验证
	\[
		X\times Y=\bigcap_{i,j}\bigl(Z(f_i\circ \mathrm{proj}_1)\cap Z(g_j\circ \mathrm{proj}_2)\bigr),
	\]
	所以$X\times Y$是一个闭集。这样，和仿射情况是类似的，$X\times Y$上的拓扑比乘积拓扑更好一些。剩下的不可约部分的证明和仿射的情况是相似的，即Propostion \ref{c3:p18}。

	如果$X$和$Y$是拟投射簇，那么只需要证明$X\times Y$是$\bar{X}\times \bar{Y}$中的开集即可，不可约的部分来自于$\bar{X}\times \bar{Y}$是一个投射簇。至于开集，和拟仿射簇的证明是一样的，即Propostion \ref{c3:p23}。
\end{proof}

\section*{The Solutions of Exercises}
\setcounter{exe}{3}
\begin{exe}
	证明$\bbp^n$的d-uple嵌入$\rho:\bbp^n\to \im \rho_d\subseteq \bbp^N$是一个代数簇之间的同构。
\end{exe}
\begin{proof}
	$\rho:\bbp^n\to \im \rho_d\subseteq \bbp^N$前面已经证明了是一个同胚。为了证明这是一个同构，首先需要说明$\rho^*$是一个态射，然后可以使用Proposition \ref{c3:p3}，检验正则函数芽之间的同构即可。因为是同胚，由Proposition \ref{c3:p4}，态射诱导的正则函数芽之间的映射已经是单的了，最后剩下的只要证明这是满的即可。

	首先写出$\rho:[x_0,\cdots,x_n]\mapsto [M_0(x),\cdots,M_{1\cdots d}(x)]$，其中
	\[
		M_{i_1\cdots i_k}(x)=x_0^{d-k}x_{i_1}\cdots x_{i_k}.
	\]
	然后证明$\rho$是一个态射，设$f$是$\im \rho$上的正则函数，局部写作两个同次齐次多项式的商$g/h$，因为
	\[
		\rho^*f(x_0,\cdots,x_n)=\frac{\rho^*g}{\rho^*h}(x_0,\cdots,x_n)=\frac{g}{h}(M_0(x),\cdots,M_{1\cdots d}(x))
	\]
	依然是两个多项式的商，所以$\rho$是一个态射。

	然后局部检查，不妨假设$p\in \bbp$处$x_0\neq 0$，否则总有个$x_i\neq 0$，我们可以改一下标号就又得到了$x_0\neq 0$。由投射簇的结论，
	\[
		\oo_{\rho(p),\im\rho}=S(\im\rho)_{\bigl(\mm_{\rho(p)}\bigr)}=S_1, \quad \oo_{p,\bbp^n}=S_{(\mm_{p})},
	\]
	要证明的是$\rho^*_p:S_1\to S_{(\mm_{p})}$是一个满射，即对于$f/g\in S_{(\mm_{p})}$，找到同次齐次多项式$F,\,G\in S^{\mathrm{h}}(\im\rho)$以及$G\notin \mm_{\rho(p)}$使得$F\circ \rho/G\circ \rho=f/g$.

	设
	\[
		f=\sum_{i_0+\cdots +i_n=N} a_{i_0\cdots i_n} x_0^{i_0}x_1^{i_1}\cdots x_n^{i_n},\quad g=\sum_{i_0+\cdots +i_n=N} b_{i_0\cdots i_n} x_0^{i_0}x_1^{i_1}\cdots x_n^{i_n},
	\]
	然后注意到$M_i/M_0=x_i/x_0$，将其代入上式，整理得
	\[
		f=\sum_{i_0+\cdots +i_n=N} a_{i_0\cdots i_n} \frac{x_0^N}{M_0^{N-i_0}}M_1^{i_1}\cdots M_n^{i_n},\quad g=\sum_{i_0+\cdots +i_n=N} b_{i_0\cdots i_n} \frac{x_0^N}{M_0^{N-i_0}}M_1^{i_1}\cdots M_n^{i_n},
	\]
	所以
	\[
		\frac{f}{g}=\sum_{i_0+\cdots +i_n=N} a_{i_0\cdots i_n} M_1^{i_1}\cdots M_n^{i_n}\Bigg/\sum_{i_0+\cdots +i_n=N} b_{i_0\cdots i_n} M_1^{i_1}\cdots M_n^{i_n},
	\]
	设
	\[
		F=\sum_{i_0+\cdots +i_n=N} a_{i_0\cdots i_n} y_1^{i_1}\cdots y_n^{i_n},\quad G=\sum_{i_0+\cdots +i_n=N} b_{i_0\cdots i_n} y_1^{i_1}\cdots y_n^{i_n},
	\]
	这是两个齐次多项式，且$F\circ \rho/G\circ \rho=f/g$.剩下的还需要验证$G\notin \mm_{\rho(p)}$，这由$g(p)\neq 0$可以推知$G(\rho(p))\neq 0$得出。
\end{proof}
\begin{exe}
	设$H$是$\bbp^n$中的超曲面，证明$\bbp^n-H$是仿射的。
\end{exe}
\begin{proof}
	$\bbp^n$每一个超曲面都是一个不可约齐次多项式的零点集，设$H=Z(f)$，$f$是$d$阶齐次多项式，所以$f$由$M_\alpha$线性组合而成，即$f=\sum_\alpha a_\alpha M_\alpha$。使用$d$-uple嵌入，将$\bbp^n$嵌入到$\bbp^N$中，此时$H$的像即一个线性方程$\sum_\alpha a_\alpha y_\alpha=0$的零点集$H'$，$H'$是一个超平面。然后只要考察$\im \rho-H'$同构于一个仿射簇就可以了。
\end{proof}
\section{Rational Maps}
像很多的几何学要实现分类一样，代数几何致力于完成代数簇的分类。既然要谈及分类，就会问分类到何种程度，比如拓扑空间范畴就是分类到一个同胚的程度。代数簇虽然本身就有态射，但是代数几何特有的有理映射在一般情况下就足够完成任务，所以分类，也往往是对所谓的双有理映射而言的。

有理映射只定义在开集上，但是代数簇中的开集都是稠密的，所以开集就可能携带着足够多的信息了。虽然叫做映射，但有理映射一般来说不是一个映射。同样叫有理，有理映射的定义方法和任意代数簇上的有理函数差不多。
\begin{defi}
令$X$, $Y$是代数簇，他们之间的一个有理映射$\varphi : X\to Y$是一个等价类$\langle U,\varphi_U\rangle$，其中$U$是$X$上的开集，而$\varphi_U:U\to Y$是一个态射，等价关系为，如果在$U\cap V$上$\varphi_U|_{U\cap V}=\varphi_V|_{U\cap V}$，则$\langle U,\varphi_U\rangle$和$\langle V,\varphi_V\rangle$等价。如果存在一个$\langle U,\varphi_U\rangle$使得$\im(\varphi_U)$在$Y$中稠密，这个有理映射被称为优势有理映射。
\end{defi}
在验证等价关系的时候需要这个引理。
\begin{lem}
	令$X$, $Y$是代数簇，而$\varphi$, $\psi$是之间的两个态射，假如存在一个开集$U\subseteq X$使得$\varphi|_U=\psi|_U$，那么$\psi=\varphi$.
\end{lem}
\begin{proof}
	不管$Y$是（拟）投射簇还是（拟）仿射簇，我们就可以假设存在某个$n$使得在同构意义上$Y\subseteq \bbp^n$，利用嵌入态射$i:Y\hookrightarrow \bbp^n$，还可以假设$Y=\bbp^n$.

	利用Segre嵌入，考虑投射簇$\bbp^n\times \bbp^n$，$\varphi,\psi$的直积$\varphi\times \psi$依然是态射。设$\Delta$是$\bbp^n\times \bbp^n$中的对角元素，即$(a,a)$们所构成的集合，他由方程$x_iy_j=x_jy_i$确定，所以$\Delta$是$\bbp^n\times \bbp^n$中的闭集。由命题的假设$\varphi\times \psi(U)\subseteq \Delta$，于是
	\[
		U\subseteq (\varphi\times \psi)^{-1}(\Delta)\subseteq X,
	\]
	因为$\varphi\times \psi$连续，所以中间这项在$X$中是闭的。两边取闭包，由$U$在$X$中的稠密性就得到了$(\varphi\times \psi)^{-1}(\Delta)=X$，
	于是$\varphi\times \psi(X)=\Delta$，这就是说$\varphi=\psi$在$X$上成立。
\end{proof}
之所以需要定义优势映射，是因为当定义有理映射之间的复合$X\to Y \to Z$的时候，会发现从代表元$\varphi_U(U)\subseteq Y$可能和$Y$中的代表元$\langle V,\varphi_V\rangle$作为集合不相交。而稠密性保证了相交，也就保证了复合的合法性。

双有理映射就是对有理映射概念而言的“同构”。可以看到，代数簇之间的一个态射决定了一个有理映射，反之不然，所以我们之前定义的代数簇范畴要比现在定义的代数簇范畴（态射是优势有理映射）限制要多一些。特别地，如果两个代数簇是同构的，他们也是双有理等价的。
\begin{defi}
令$X$, $Y$是代数簇，他们之间的一个有理映射$\varphi : X\to Y$被称为是双有理的，如果存在一个有理映射$\psi:Y\to X$满足$\varphi\circ \psi=\id_Y$和$\psi\circ \varphi=\id_X$，其中$\id_X$和$\id_Y$都看作有理映射。如果两个代数簇之间存在双有理映射，则称呼他们是双有理等价的。
\end{defi}

这节的主要结论是代数簇范畴（态射是优势有理映射）等价于$k$的有限生成域扩张范畴，当然箭头是反过来的。

下面我们就来证明这个结论。首先，令$\varphi:X\to Y$是一个优势有理映射，表示为$\langle U,\varphi_U\rangle$，令$f\in K(Y)$是$Y$上的有理函数，表示为$\langle V,f\rangle$，其中$U$和$V$都是$X$中的开集，而$f$是$V$上的正则函数。因为$\varphi_U(U)$在$Y$中稠密，那么$\varphi_U^{-1}(V)$是$X$中的非空开集，因此这就定义了$\varphi_U^*f$是$\varphi_U^{-1}(V)\subseteq X$上的正则函数，所以也就定义了一个$K(X)$中的有理函数$\langle \varphi_U^{-1}(V),\varphi_U^*f\rangle$。

所以任何一个优势有理映射$\varphi:X\to Y$都定义了一个域同态$K(\varphi):K(Y)\to K(X)$，这也是一个$k$-代数同态。
\begin{theo}
	上面定义的$\varphi\mapsto K(\varphi)$是$X$和$Y$之间的优势有理映射到$k$-代数同态之间的双射。并且，他给出了代数簇范畴（态射是优势有理映射）和$k$的有限生成域扩张范畴之间的反箭头等价。
\end{theo}
\begin{proof}
	前面已经证明，任何一个优势有理映射$\varphi:X\to Y$都定义了一个$k$-代数同态$K(\varphi):K(Y)\to K(X)$。现在假设$\theta:K(Y)\to K(X)$是一个$k$-代数同态，我们来构造一个有理映射$\varphi_\theta:X\to Y$。

	由于代数簇上每一点都可以找到仿射邻域，因此$Y$被仿射簇开覆盖。因为每个邻域都在$Y$上稠密，故不妨假设$Y$本身就是一个仿射簇。令$A(Y)$为$Y$的坐标环，这是一个有限生成$k$-代数，设他的生成元为$\{y_i\}$，$\theta(y_i)$是$X$上的有理函数。对$\theta(y_i)$可以找一个开集$U_i$，使得$\theta(y_i)$在上面正则，再设$U=\cap_i U_i$，则所有的$\theta(y_i)$在$U$上都正则，这样$\theta$就诱导了单同态$A(Y)\to \oo(U)$，由Proposition \ref{c3:p14}，这个同态对应了一个稠密\footnote{因为$\theta$是单同态，所以如果$\theta f$在$U$上为$0$，即$f$在$\varphi_\theta(U)$为$0$，则$f$在$Y$上为$0$.由于$I(\varphi_\theta(U))$中的每个元素都在$\varphi_\theta(U)$为$0$，所以他们都在$Y$上为$0$，故$I(\varphi_\theta(U))\subseteq I(Y)$，两边取零点集就有$Y \subseteq \overline{\varphi_\theta(U)}$，这样稠密性就得证了。}态射$\varphi_\theta:U\to Y$。这样$\langle U,\varphi_\theta\rangle$就是一个优势有理映射。

	剩下我们还要检验，对每一个代数簇$X$，$K(X)$是$k$的有限生成域扩张，反之，如果$L$是$k$的一个有限生成域扩张，那么存在一个代数簇$X$使得$L=K(X)$.

	如果$X$是一个代数簇，那么$K(X)=K(U)$对任意的仿射子集成立，所以不妨假设$X$是一个仿射簇，按照Theorem \ref{c3:t12}，$K(X)$是$k$的有限生成域扩张。反过来，如果$L$是$k$的有限生成域扩张，令$\{y_i\}$是生成元，再令$B$是$\{y_i\}$生成的子$k$-代数，因为是有限生成的，所以$B$同构于$k[x_1,\cdots,x_n]$模掉一个理想，这个理想相关于一个仿射簇$X$，于是$B\cong A(X)$，再按照Theorem \ref{c3:t12}，就有$L\cong K(X)$.
\end{proof}
\begin{pro}
	下面三个命题等价：

	\no{1} $X$和$Y$双有理等价。

	\no{2} 存在$X$的开子集$U$和$Y$的开子集$V$，$U$和$V$作为代数簇同构。

	\no{3} 作为$k$-代数，$K(Y)\cong K(X)$。
\end{pro}
\begin{proof}
	\no{2}到\no{3}由有理函数域的定义，\no{3}到\no{1}由上一定理。剩下的只要证明\no{1}到\no{2}即可。令$\varphi:X\to Y$和$\psi:Y\to X$是互逆的有理映射，分别表示为$\langle U,\varphi \rangle$和$\langle V,\psi \rangle$。于是$\psi\circ\varphi$被表示为$\langle \varphi^{-1}(V),\psi\circ\varphi \rangle$，因为$\psi\circ\varphi$是$X$上的恒等有理映射，即作为态射，$\psi\circ\varphi=\id_{\varphi^{-1}(V)}$，同理$\varphi\circ\psi=\id_{\psi^{-1}(U)}$.我们现在取$\varphi^{-1}(\psi^{-1}(U))\subseteq X$和$\psi^{-1}(\varphi^{-1}(U))\subseteq X$，由构造，他们通过态射$\psi$和$\varphi$同构。
\end{proof}
\begin{pro}
	任意一个$r$维代数簇双有理等价于$\bbp^{r+1}$中的一个超曲面。
\end{pro}
\section*{Blowing up}
\section*{The Solutions of Exercises}
\section{Nonsingular Varieties}
代数几何中的非奇异代数簇和拓扑中的流形相关联。在复数（解析）情况上，非奇异代数簇就是那些在寻常的拓扑中的复流形。历史上，最自然定义非奇异性的方式就是利用代数簇上的函数的导数。
\begin{defi}
	令$X\subseteq \bba^n_k$是一个$r$维仿射簇，$I(X)$的生成元为$\{f_i\}$。如果在$p\in X$上矩阵$(\partial_i f_j)(p)$的秩为$n-r$，则称$p$是$X$的一个非奇异点，否则就称他是奇异的。如果仿射簇上处处非奇异，则称这个仿射簇是非奇异的。
\end{defi}
\section{Nonsingular Curves}

\section{Intersection in Projective Space}
\end{document}