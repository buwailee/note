%!TEX program = xelatex
\documentclass[8pt]{book}
\usepackage{noteheader}
\usepackage{ctex}
\usepackage[all]{xy}
\usepackage{tikz}
\usepackage{titletoc}%使用目录
	\theoremstyle{plain}%定理环境样式
	\newtheorem{pro}{Proposition}[section]% 定义命题环境
	\newtheorem{theo}{Theorem}[section]% 定义定理环境
	%\newtheorem{lem}{Lemma}[section]% 定义引理环境
	\newtheorem*{rem}{Remark}% 定义注记环境
	\newtheorem{defi}{Definition}[section]% 定义定义环境
	\newtheorem{exa}{Example}[section]% 定义例子环境

\input{defs}

\begin{document}
\title{流形与几何}
\author{理不歪}
\date{\today}
\maketitle %标题
\clearpage
主要参考的是《From Calculus to Cohomology》,基本就是其笔记。还间杂着许多来自GTM 166、Zorich第二卷、Chern《微分几何讲义》和《微分几何基础》的思想吧。符号记法可能和有些书不太一样。

本文对许多细节（比如分析上的）并不怎么感兴趣，所以很多东西会非常快的跳过。
\clearpage
\chapter{Tangent Space and Cotangent Space}
\section{欧氏空间背景下的切空间}
这个故事要从导数开始。首先是$\rr\to \rr$的函数的导数。
\begin{defi}
	令$U$为$\rr$里面的一个开集，以及令$f:U\rightarrow \rr$是一个连续函数。我们说$f$在点 $x \in U$可微，就是说对于很小的$h \in \rr$存在一个数$L(x)\in \rr$满足
	\begin{equation}
		f(x+h)=f(x)+L(x)h+r(x,h),
	\end{equation}
	其中的$r(x,h)$指当$h\to 0$时
	\begin{equation}
		\frac{\arrowvert r(x,h) \arrowvert}{\arrowvert h \arrowvert} \to 0.
	\end{equation}
	我们称呼$L(x)$为$f$在$x$点的导数，记作$f'(x)=L(x)$或者$D_xf$.
\end{defi}
如果一个函数$f$在$U$的每一点都可微，称为$f$在$U$上可微。对于在$U$上可微的函数，他每一点的导数构成了一个函数，称为他的导函数（在不混淆的情况下还叫导数），记作$f'$或者$Df$.对于导函数，我们当然还可以讨论他的导函数，这类问题就叫高阶导数。假如一个$U$上的函数的任意阶导函数都是存在的，那么称呼其在$U$上光滑。
\begin{defi}
	所有在$U$上光滑的函数的集合记作$C^\infty(U)$,他是一个$\rr$-代数。
\end{defi}
\begin{pro}
	导数运算满足下列规则：
	
	\no{1}假如$f$和$g$在$U$可微，则$f'+g'=(f+g)'$.
	
	\no{2}假如$f$和$g$在$U$可微，则$(fg)'=f'g+fg'$.
	
	\no{3}假如$f$在$W$可微，$g:U\to W$在$U$可微，则$(f\circ g)'=f'g'$.
\end{pro}
假设$c$是$U$上的一个常函数，那么很容易证明$c'\equiv 0$，所以由上面的2有$(cf)'=cf'$，再由1可以得到$D$是一个线性算子。

\begin{proof}
	\no{1}的证明是很简易的，我们略去。我们从2的证明开始，因为
	\[
		\begin{split}
			f(x+h)&=f(x)+f'(x)h+r_1(x,h),\\
			g(x+h)&=g(x)+g'(x)h+r_2(x,h),\\
		\end{split}
	\]
	我们可以得到
	\[
		\begin{split}
			(fg)(x+h)&=\left(f(x)+f'(x)h+r_1(x,h)\right)\left(g(x)+g'(x)h+r_2(x,h)\right)\\
			&=(fg)(x)+f'(x)g(x)+f(x)g'(x)h+r(x,h)
		\end{split}
	\]
	其中$r(x,h)=f'(x)g'(x)h^2+r_1(x,h)\left(\cdots\right)+r_2(x,h)\left(\cdots\right)$.所以$fg$在$x$点可微，且$(fg)'=f'g+fg'$.

	最后，
	\[
		\begin{split}
			f\left(g\left(x+h\right)\right)=&f\left(g(x)+g'(x)h+r_2(x,h)\right)\\
			=&f\left(g\left(x\right)\right)+f'\left(g(x)\right)(g'(x)h+r_2(x,h))\\
			&+r_1\left(g(x),g'(x)h+r_2(x,h)\right)\\
			=&f\left(g\left(x\right)\right)+f'\left(g(x)\right)g'(x)h+r(x,h).
		\end{split}
	\]
	其中
	\[
		\lim_{h\to 0}\frac{\arrowvert r(x,h) \arrowvert}{\arrowvert h \arrowvert}=
		\lim_{h\to 0}\left(\arrowvert f'\left(g(x)\right)\arrowvert\frac{\arrowvert r_2(x,h) \arrowvert}{\arrowvert h \arrowvert}+\frac{\arrowvert r_1\left(g(x),g'(x)h+r_2(x,h)\right) \arrowvert}{\arrowvert h \arrowvert}\right)=0,
	\]
	所以$f\circ g$在$x$点可微，且$(f\circ g)'=f'g'$.
\end{proof}
为了把这个故事说下去，拓展到$\rr^n\to \rr^m$函数的导数。首先我们要换一个视角，把$\rr$看成$\rr$上的一个矢量空间。那么$f'(x)$对$h\in \rr$的实数乘法，我们就有两种途径引申到$f'(x)$对$h\in \rr^n$的作用上面去，一种是标量乘法，一种是线性算子，而这两者在$\rr$上是统一的。

我们选择后者，一方面是因为标量乘法$ch$也可以看成$(cE)h$，其中$E$是单位线性算子。另一个理由是根本的，如果我们希望继续使用$f(x+h)=f(x)+L(x)h+r(x,h)$来定义$f:\rr^n \to \rr^m$的导数，如果$L(x)$对$h$就是标量乘法，那么$L(x)h\in \rr^n$，但是$f(x)\in \rr^m$，这时候，$f(x)+L(x)h$中的加法就不是那么自然的了。
\begin{defi}
	令$U$为$\rr^n$里面的一个开集，以及令$f:U\rightarrow \rr^m$是一个连续函数。我们说$f$在点 $x \in U$可微，就是说对于很小的$h \in \rr^n$（指模很小）存在一个线性算子$L(x)\in L\left(\rr^n,\rr^m\right)$满足
	\begin{equation}
		f(x+h)=f(x)+L(x)h+r(x,h),
	\end{equation}
	其中的$r(x,h)$指当$h\to 0$时
	\begin{equation}
		\frac{\arrowvert r(x,h) \arrowvert}{\arrowvert h \arrowvert} \to 0.
	\end{equation}
	我们称呼$L(x)$为$f$在$x$点的导数，记作$f'(x)=L(x)$或者$Df(x)$再或者$f_{*x}$.
\end{defi}
\begin{pro}
	类似地，导数运算满足下列规则：	
	\no{1}假如$f$和$g$在$U$可微，则$f'+g'=(f+g)'$.
	
	\no{2}假如$f$和$g$在$U$可微，且有一个为实函数，则$(fg)'=f'g+fg'$.
	
	\no{3}假如$f$在$W$可微，$g:U\to W$在$U$可微，则$(f\circ g)'=f'\circ g'$.
\end{pro}
既然$f'$是一个线性映射，那么我们可以谈论他的矩阵。为此我们选取$\rr^n$和$\rr^m$的标准基$\{e_i\}$。记$f=(f_1,\dots,f_m)$，然后记$h=(h_1,\dots,h_n)$，则
\begin{equation}
	\begin{split}
		f_i(x+h_je_j)&=f_i(x)+f'_i(x)\left(h_je_j\right)+r_i(x,h_je_j)\\
		&=f_i(x)+h_jf'_i(x)\left(e_j\right)+r_i(x,h_je_j).
	\end{split}
	\label{partial}
\end{equation}
我们记$f'_i(x)\left(e_j\right)=\left(\partial f_i/\partial x_j\right)_x$，称为$f_i$对$x_j$的偏导数，同时也是$f'(x)$的$ij$分量。那么
\[
	f'(x)=\left(\left(\frac{\partial f_i}{\partial x_j}\right)_x\right),
\]
或者显式地写出来
\[
	f'(x)=
		\begin{pmatrix}
			\displaystyle{\frac{\partial f_1}{\partial x_1}}&\cdots&\displaystyle{\frac{\partial f_1}{\partial x_n}}\\
			\vdots&\ddots&\vdots\\
			\displaystyle{\frac{\partial f_m}{\partial x_1}}&\cdots&\displaystyle{\frac{\partial f_m}{\partial x_n}}\\
		\end{pmatrix}.
\]
为了求偏导数的求法，我们在式\eqref{partial} 中令$f_i=g$以及$h_j=h\in \rr$，然后改写为
\[
	g(x_1,\dots,x_j+h,\dots,x_n)=g(x)+\frac{\partial g}{\partial x_j}h+r(x,h)
\]
可以看到，只要把$x_i\,(i\neq j)$看作常数，然后对$g$求关于$x_j$的$\rr\to \rr$的导数即得到了$\partial g/\partial x_j$.

\begin{pro}
设$\xi \in \rr^n$，沿着这个方向的实函数$f$的导数为
\[
\left.\frac{\dd}{\dd t}f(p+\xi t)\right|_{t=0}=f'(p)\xi=
\begin{pmatrix}
\frac{\partial f}{\partial x_1}&\cdots&\frac{\partial f}{\partial x_n}
\end{pmatrix}
\begin{pmatrix}
\xi_1\\
\vdots\\
\xi_n
\end{pmatrix}
=\sum_{i=1}^n \frac{\partial f}{\partial x_i}\xi_i.
\]
\end{pro}
考虑$U\subset \rr^m$上的实函数$f:U\to \rr$是重要的，如果他在$U$上是可微的，那么他就有$m$个偏导数，而每个又是$U$上的新的实函数，如果又每个是可微的，那么我们又可以考虑对他对每一个变元求偏导数（第二阶），每个也有$m$个，那么就是$m^2$个第二阶的偏导数，如果能继续下去，以此类推，$k$阶偏导数一共有$m^k$个。这又是一个高阶导数问题，前面所说的光滑函数概念这里可以拓展过来。
\begin{defi}
	如果一个$U$上的实函数$f$，在$U$上每一点任意阶的偏导数全部存在，则我们称呼其为$U$上的光滑函数。所有在$U$上光滑的函数的集合记作$C^\infty(U)$,他是一个$\rr$-代数。
\end{defi}
上面考虑了$U\subset \rr^m$上的实函数$f:U\to \rr$,现在反过来，我们考虑$I=(-a,a)\subset \rr$上的函数$\gamma=(\gamma_1,\dots,\gamma_n):I\to \rr^n$.如果他的每一个分量$\gamma_i$都是$I$上的光滑函数，我们称$\gamma$为$\rr^n$内的光滑曲线。
\begin{pro}
	光滑曲线$\gamma=(\gamma_1,\dots,\gamma_n):I\to \rr^n$的导数为
	\[
		\gamma'=(\gamma'_1,\dots,\gamma'_n).
	\]
\end{pro}
现在若$\gamma:I=(-a,a)\to \rr^n$且$\gamma(0)=p\in \rr^n$，则$\gamma'(0)\in \rr^n$定义了一个矢量，这个矢量我们称其为$p$点的切矢量。事实上，我们可以有其他曲线$\eta:I\to \rr^n$且$\eta(0)=p\in \rr^n$满足$\eta'(0)=\gamma'(0)$.特别地，$\eta$就是一个直线$\eta(t)=p+vt$，其中$v$是一个常矢量，那么他$v=\eta'(0)$就是切矢量。如果我们改变$v$，那么可以发现切矢量随着曲线的改变而改变。

所以，我们可以等同切矢量和曲线，但是为了实现这种等同，我们要消去的就是一个切矢量可以对应许多曲线的可能性，为此我们定义一个等价关系：如果$\gamma_1(0)=\gamma_2(0)=p$且$\gamma'_1(0)=\gamma'_2(0)$，则$\gamma_1 \sim \gamma_2$,并且记作$\left[\gamma \right]$.那么一个切矢量$v$就对应着一个曲线等价类$\left[\gamma \right]$,或者说有一个同构$\varphi_p$满足$\left[\gamma \right]=\varphi_p\left(v\right)$.

\begin{defi}
	所有在$p\in \rr^n$的$[\gamma]$构成的集合记作$T_p\rr^n$,称为$\rr^n$在$p$的切空间。
\end{defi}
\begin{theo}
	$\varphi_p$赋予了$T_p\rr^n$线性结构，使其成为了一个矢量空间，且$T_p\rr^n\cong \rr^n$.
\end{theo}

对于任意一个定义在$U\subset \rr^n$上的函数$f:U\rightarrow V\subset \rr^m$，在任意的点$p\in U$，我们都可以用$U$中的一条曲线$\gamma$构造一个新的曲线$f\circ \gamma:I\to V$，他在$p$的导数为$f'\circ \gamma'(0)$,对于同一个等价类$[\gamma]$中的任意$\gamma$来说，其实$f'\circ \gamma'(0)$都是相等的。

与此同时$f\circ \gamma$也是$V$中的一条曲线，在$f(p)$点的切矢量为$\left[f\circ \gamma\right]$.
\begin{defi}
	我们可以定义线性映射$f_{*p}[\gamma]=\left[f\circ \gamma\right]$使得交换图
	\[
		\xymatrix{
		\rr^m\ar[d]_\cong^{\varphi_p}\ar[r]^{f'(p)}&\rr^n\ar[d]_\cong^{\varphi_{f(p)}}\\
		T_{p}\rr^m\ar[r]^{f_{*p}}&T_{p}\rr^n
		}
	\]
成立。$f_{*p}$也被称为$f$在点$p$的导数。
\end{defi}
既然$\varphi_p$是同构，对应着$\rr^n$的标准基$\{e_i\}$，我们记对应的基为
\[
	\varphi_p\left(e_i\right)=\left(\partial_i\right)_p\in T_p\rr^n
\]
任取一个可微的函数$f:\rr^n\to\rr^m$，我们来求一下$f_{*p}$.首先$\gamma(t)=p+te_j$对应的切矢量为$e_j$,那么同构给出$\varphi_p\left(e_j\right)=\left[p+te_j\right]=\left(\partial_j\right)_p$,因此$f_{*p}\left[p+te_j\right]=\left[f(p+te_j)\right]$以及

\[
	\varphi_{f(p)}^{-1}\left(\left[f(p+te_j)\right]\right)=f'\circ \gamma'(0)=f'(p)\left(e_j\right)=\sum_{i=1}^n f'_i(p)\left(e_j\right)e_i=\sum_{i=1}^n \left(\frac{\partial f_i}{\partial x_j}\right)_p e_i,
\]
综上，
\[
	f_{*p}\left(\partial_j\right)_p=\varphi_{f(p)}\left(\varphi_{f(p)}^{-1}\left(\left[f(p+te_j)\right]\right)\right)=\sum_{i=1}^n \left(\frac{\partial f_i}{\partial x_j}\right)_p\varphi_{f(p)}(e_i) =\sum_{i=1}^n\left(\frac{\partial f_i}{\partial x_j}\right)_p\left(\partial_i\right)_{f(p)}.
\]
这就是说，在对应的基下，我们的导数们$f'(p)$和$f_{p*}$有着相同的矩阵，这有上面的交换图可以很直接看出来。

有趣的是，我们还可以用一种完全不同的方式来引入切空间的概念。这种方式并不那么直观，先给出定义。然后讨论一些有趣的命题，最后回答这两种定义方式的殊途同归。
\begin{defi}
	设$U \subset \rr^m$是一个开集，$p\in U$处的切矢量是定义在$C^\infty(U)$的实值线性算子$D:C^\infty(U)\to \rr$，他要满足$D(fg)=D(f)g(p)+f(p)D(g)$.该点的切空间$T'_p\rr^m$（这里和后面一段时间我们把这个新定义的切空间记作$T'$以和前面定义的$T$做区分）定义为所有这样的线性算子的集合，是一个$\rr$上的矢量空间。
\end{defi}
下面做两个计算。
\begin{pro}
$\forall D \in T'_p\rr^m$，下列两种情况下有$Df=0$.

\no{1}$f$是常值函数；

\no{2}$f:U \to \rr$可以写成$f(x)=|x-p|r(x)$，其中$r:U\to \rr$是光滑函数且$r(p)=0$.
\end{pro}
\begin{proof}
	考虑$f=1$，那么$D(1)=D(1\cdot1)=1D(1)+D(1)1=2D(1)$，所以$D(1)=0$。再根据$D$是线性的，那么第一条就得证了。

	第二条的证明很简单，因为$|x-p|$和$r(x)$都是光滑的，那么
	\[
		Df=|x-p|_{x=p}Dr+D(|x-p|)r(p)=0.
	\]
\end{proof}
\begin{defi}
	设$U \subset \rr^m$和$V \subset \rr^n$是开集，$f:U\to V$是光滑函数。那么$f$在$p$点的导数$f_{\star p}:T'_p\rr^m \to T'_{f(p)}\rr^n$定义为$(f_{\star p}D)h=D(h\circ f)$.（和上面理由一样，我们用$f_\star$和$f_*$作区分）
\end{defi}
这样定义的$f_{\star p}$是线性的，因为
\[
	\begin{split}
		&(aD_1+bD_2)(h\circ f)=aD_1(h\circ f)+bD_2(h\circ f)\\
		\Leftrightarrow\quad &f_{\star p}(aD_1+bD_2)=af_{\star p}D_1+bf_{\star p}D_2.
	\end{split}
\]
此外还有一个漂亮的性质，若$f:U\to V$以及$g:V\to W$，则
\[
	\left((f\circ g)_{\star p}D\right)h=D(h\circ f\circ g)=(g_{\star p}D)(h\circ f)=\left(f_{\star g(p)}\circ g_{\star p}D\right)h,
\]
或者写作
\[
	(f\circ g)_{\star p}=f_{\star g(p)}\circ g_{\star p}.
\]
\begin{theo}
	对于$U\in \rr^m$上的实函数$f$可以定义这样的线性算子$\left(\partial/\partial x_i\right)_p\in T'_p\rr^m$满足
	\[
		\left(\frac{\partial}{\partial x_i}\right)_p f=\left(\frac{\partial f}{\partial x_i}\right)_p.
	\]
	$\{\left(\partial/\partial x_i\right)_p\}$构成$T'_p\rr^m$一组基。所以$T'_p\rr^m$是$m$维的，根据线性代数中的基本结论，他同构于$\rr^m$.
\end{theo}
\begin{proof}
	$\forall f\in C^\infty(U)$，根据熟知的导数定义，稍稍改写一下有
	\[
		\begin{split}
			f(x)&=f(p)+f'(p)(x-p)+a(x)\\
			&=f(p)+a(x)+\sum_{i=1}^m \left(\frac{\partial f}{\partial x_i}\right)_p(x_i-p_i),
		\end{split}
	\]
	其中$x$是变化的$p$是固定的，$a(x)$是$x$的实值光滑函数且
	\[
		\lim_{x\to p}\frac{\arrowvert a(x)\arrowvert }{\arrowvert x-p\arrowvert }=0.
	\]
	那么$a(x)$就可以写作$|x-p|r(x)$，其中$r$光滑且$r(p)=0$.

	任取一个$D$我们有
	\[
		Df=D\left(f(p)\right)+D\left(a(x)\right)+D\left(\sum_{i=1}^m \left(\frac{\partial f}{\partial x_i}\right)_p(x_i-p_i)\right),
	\]
	根据其线性性和前面求过的两种特殊的函数，我们有
	\[
		Df=\sum_{i=1}^m Dx_i\left(\frac{\partial f}{\partial x_i}\right)_p=\sum_{i=1}^m Dx_i\left(\frac{\partial }{\partial x_i}\right)_pf,
	\]
	或者
	\[
		D=\sum_{i=1}^m Dx_i\left(\frac{\partial }{\partial x_i}\right)_p.
	\]
	
	所以对任意的$D$，我们都可以分解到基$\{\left(\partial/\partial x_i\right)_p\}$上。这就完成了证明。
\end{proof}

最后，来回答一下这两种切空间和其上面导数定义方式的等价性。首先$T'_p\rr^m$和$T_p\rr^m$间的同构由
\[
	\tau_p\left((\partial_i)_p\right)=\left(\frac{\partial }{\partial x_i}\right)_p
\]
给出。剩下的，只要再检验$f_\star$和$f_*$的等价性就可以了。换而言之，检验交换图
\[
	\xymatrix{
	T_{p}\rr^n\ar[d]_\cong^{\tau_p}\ar[r]^{f_{*p}}&T_{f(p)}\rr^m\ar[d]_\cong^{\tau_{f(p)}}\\
	T'_{p}\rr^n\ar[r]^{f_{\star p}}&T'_{f(p)}\rr^m
	}
\]
成立即可。

考虑$\pi_i(x)=x_i$,将$f_{\star p}$作用到$\left(\partial/\partial x_j\right)_p$上面去
\[
	f_{\star p}\left(\frac{\partial}{\partial x_j}\right)_p(\pi_i)=\left(\frac{\partial}{\partial x_j}\right)_p(\pi_i\circ f)=\left(\frac{\partial f_i}{\partial x_j}\right)_p,
\]
那么
\[
	f_{\star p}\left(\frac{\partial}{\partial x_j}\right)_p=\sum_{i=1}^n\left(\frac{\partial f_i}{\partial x_j}\right)_p \left(\frac{\partial}{\partial x_i}\right)_{f(p)}.
\]

至此以后，我们将切空间的两种定义方法看成是等价的，符号不加区分，而且称呼其中的元素为切矢量。可以看到，后面一种定义，切空间的线性结构是很自然产生的，当以后在流形上处理切空间的时候，这一点也是直接沿承过去的。

鉴于第一个定义的几何直观，我们以后使用$T_p\rr^n=\rr^n$，当然这也意味着$f_{*p}=f'(p)$.
\section{欧氏空间背景下的微分形式}
$\rr$中的标准基记做$\{e_i\}$，而他的对偶基记做$\{\epsilon_i\}$，满足$\epsilon_i(e_j)=\delta_{ij}$.
\begin{defi}
	设$V$是$\rr$上的矢量空间，一个映射
	\[
		f:\underbrace{V\times\cdots\times V}_{k\text{个}}\to \rr
	\]
	如果对每一个变元都线性，称为k-线性映射。如果他还是反对称的（即对调一组变量，整个函数的值就乘以一个$-1$），就称为反对称k-线性映射。所有反对称k-线性映射的集合记作$\Lambda^k(V)$，此外再约定$\Lambda^1(V)=V^*$（即$V$的对偶空间）和$\Lambda^0(V)=\rr$.
\end{defi}

\begin{defi}
	设$\xi \in \Lambda^m(V)$和$\eta \in \Lambda^n(V)$，定义$\xi$和$\eta$的外积$\xi \wedge \eta \in \Lambda^{m+n}(V)$为
	\[
		\xi \wedge \eta=\frac{1}{m!n!}\sum_{\sigma}(-1)^{\mathrm{sign}(\sigma)}\sigma (\xi \otimes \eta).
	\]
	其中$\sigma$属于$m+n$阶置换群且$\sigma (\xi \otimes \eta)$被定义为
	\[
		\sigma (\xi \otimes \eta)(v_1,\dots,v_{m+n})=(\xi \otimes \eta)(v_{\sigma(1)},\dots,v_{\sigma(m+n)}).
	\]
	而$\xi \otimes \eta$（称为张量积）被定义为双线性的运算
	\[
		\xi \otimes \eta(v_1,\dots,v_m,v_{m+1},\dots,v_{m+n})
		=\xi(v_1,\dots,v_m)\eta(v_{m+1},\dots,v_{m+n}).
	\]
	容易验证张量积满足结合律。
\end{defi}
\begin{theo}
	设$\xi,\xi_1,\xi_2 \in \Lambda^m(V)$和$\eta,\eta_1,\eta_2\in \Lambda^n(V)$还有一个$\zeta\in \Lambda^h(V)$，有\\
	\no{1}分配律：
	\[
		\begin{split}
			(\xi_1+\xi_2)\wedge \eta&=\xi_1 \wedge \eta+\xi_2 \wedge \eta, \\
			\xi \wedge (\eta_1+\eta_2)&=\xi \wedge \eta_1+\xi \wedge \eta_2.
		\end{split}
	\]
	\no{2}反变换律：$\xi \wedge \eta=(-1)^{mn}\eta \wedge \xi$.\\
	\no{3}结合律：$(\xi \wedge \eta)\wedge \zeta=\xi \wedge (\eta\wedge \zeta)$.
\end{theo}
\begin{proof}
	(1)由$\sigma$线性和张量积线性显然。\\
	(2)设置换
	\[
		\tau=
		\begin{pmatrix}
			1& \cdots & m & m+1 &\cdots &m+n\\
			1+n& \cdots & m+n & 1 &\cdots &n
		\end{pmatrix},
	\]
	容易证明$(-1)^{\mathrm{sign}(\tau)}=(-1)^{mn}$.

	由线性性，我们只要对一个分量证明就可以了。按基打开直接写出
	\[
		\begin{split}
			\xi \wedge \eta&=\frac{\xi^{i_1\dots i_m}\eta^{j_1 \dots j_n}}{m!n!}\sum_{\sigma}(-1)^{\mathrm{sign}(\sigma)}\sigma(v_{i_1}\otimes \cdots \otimes v_{i_m}\otimes v_{j_1}\otimes \cdots \otimes v_{j_n})\\
			\eta \wedge \xi&=\frac{\xi^{i_1\dots i_m}\eta^{j_1 \dots j_n}}{m!n!}\sum_{\sigma}(-1)^{\mathrm{sign}(\sigma)}\sigma(v_{j_1}\otimes \cdots \otimes v_{j_n}\otimes v_{i_1}\otimes \cdots \otimes v_{i_m})
		\end{split}
	\]
	注意到$\sigma$跑遍所有置换，那么$\sigma$和$\tau$的复合$\sigma'=\sigma\circ\tau$也跑遍所有置换，且$(-1)^{\mathrm{sign}(\sigma')}=(-1)^{\mathrm{sign}(\sigma)}(-1)^{\mathrm{sign}(\tau)}$，所以
	\[
		\begin{split}
			\eta \wedge \xi&=\frac{\xi^{i_1\cdots i_m}\eta^{j_1 \cdots j_n}}{m!n!}\sum_{\sigma'}(-1)^{\mathrm{sign}(\sigma')}\sigma'(v_{j_1}\otimes \cdots \otimes v_{j_n}\otimes v_{i_1}\otimes \cdots \otimes v_{i_m})\\
			&=\frac{\xi^{i_1\cdots i_m}\eta^{j_1 \cdots j_n}}{m!n!}\sum_{\sigma}(-1)^{\mathrm{sign}(\sigma)}(-1)^{\mathrm{sign}(\tau)}\sigma(v_{i_1}\otimes \cdots \otimes v_{i_m}\otimes v_{j_1}\otimes \cdots \otimes v_{j_n})\\
			&=(-1)^{\mathrm{sign}(\tau)}\frac{\xi^{i_1\cdots i_m}\eta^{j_1 \cdots j_n}}{m!n!}\sum_{\sigma}(-1)^{\mathrm{sign}(\sigma)}\sigma(v_{i_1}\otimes \cdots \otimes v_{i_m}\otimes v_{j_1}\otimes \cdots \otimes v_{j_n})\\
			&=(-1)^{\mathrm{sign}(\tau)} \xi \wedge \eta.
		\end{split}
	\]
	代入$(-1)^{\mathrm{sign}(\tau)}=(-1)^{mn}$即得证\no{2}.

	第三个性质，也就是结合律的证明就是死算，略去计算最后得到：
	\[
		(\xi \wedge \eta) \wedge \zeta=\frac{1}{m!n!h!}\sum_{\sigma}(-1)^{\mathrm{sign}(\sigma)}\sigma(\xi \otimes \eta \otimes \zeta)=\xi \wedge (\eta \wedge \zeta).
	\]
	这里$\sigma$属于$m+n+h$阶置换群。
\end{proof}
留意$v,w\in \Lambda^1(V)=V^*$的外积$v\wedge w$是有趣的，很好检验
\[
	v\wedge w=v\otimes w- w\otimes v.
\]
很容易看到这和二阶行列式展开之间的相似性。容易证明对$a,b\in V$
\[
	v\wedge w(a,b)=v(a)w(b)- w(a)v(b)=\begin{vmatrix}v(a)&v(b)\\w(a)&w(b)\end{vmatrix}.
\]
对于多个$\omega_i \in \Lambda^1(V)$的外积，我们可以用归纳法证明
\[
	\omega_1\wedge \cdots \wedge\omega_p(v_1,\dots,v_p)=
	\begin{vmatrix}
		\omega_1(v_1)&\cdots&\omega_p(v_p)\\
		\vdots&\ddots&\vdots\\
		\omega_p(v_1)&\cdots&\omega_p(v_p)
	\end{vmatrix}.
\]

还有一个很类似的结论，对于多个$\omega_i \in \Lambda^1(V)$的外积来说我们有$\omega_i \wedge \omega_j=-\omega_j \wedge \omega_i$，而且是线性的。我们考虑$p$个$\omega_i \in \Lambda^1(V)$之间的外积
\[
	F(\omega_1, \dots,\omega_n)=\omega_1\wedge \cdots \wedge \omega_p,
\]
如果矢量空间$V^*$的基是$\{v_i\}$，由于$F$是反对称线性映射，我们有熟知的分解：
\[
	F(\omega_1, \dots,\omega_p)=\det(\omega_1, \dots,\omega_p)F(v_1, \dots,v_p),
\]
或者写作
\[
	\omega_1\wedge \cdots \wedge \omega_p=
	\begin{vmatrix}
		\omega_{11}&\cdots&\omega_{p1}\\
		\vdots&\ddots&\vdots\\
		\omega_{1p}&\cdots&\omega_{pp}
	\end{vmatrix}
	v_1\wedge \cdots \wedge v_p.
\]
其中$\omega_{ij}$值的是$\omega_i$在$v_j$方向的分量值。从这里可以看到，若$\omega_i$们线性相关的，则$\omega_1\wedge \cdots \wedge \omega_p=0$.若$V^*$的维度是$n$，而$p>n$，则$\omega_i$必然线性相关，则$\omega_1\wedge \cdots \wedge \omega_p=0$.

现设$\{v_i\}$为$V^*$的基。因为张量积是双线性的，所以任意一个$\omega \in \Lambda^k(V)$都可以写为
\[
\omega=\sum_I\omega_I \epsilon_I,
\]
其中$\omega_I $是实数而
\[
\epsilon_I=v_{i_1}\wedge \cdots \wedge v_{i_k}.
\]

如果在一个开集$U\subset \rr^n$的每一点赋予一个$\Lambda^p(\rr^n)$的矢量，那么
\[
\omega(x)=\sum_I\omega_I(x) \epsilon_I,
\]
其中$\omega_I(x)$是实函数。所以，如果所有的$\omega_I(x)$是可微的，我们称呼他是可微的。
\begin{defi}
现设开集$U\subset \rr^n$,U上的微分形式定义为可微的$\omega:U \to \Lambda^p(\rr^n)$，所有这样的$\omega$的集合记作$\Omega^p(U)$.我们此时一般简称$\omega$为一个$p$-形式。
\end{defi}

既然称呼其为可微的，我们定义他的方向导数为在各个分量求方向导数而成的$p$-形式：
\begin{defi}
设$\xi \in \rr^n$，那么沿着这个方向的$p$-形式的导数为
\[
\omega'_x(\xi)=\sum_I\omega'_I(x)\xi \epsilon_I.
\]
\end{defi}
如果这里有一个$0$-形式，或者说实函数$f$，那么他的方向导数就是$f'_x(\xi)=f'(x)\xi$.注意了，$f'(x)$是这样一个线性算子$f'(x):\rr^n\to \rr$，或者说$f'(x)\in \Lambda^1(\rr^n)$.那么$f'$就是一个$1$-形式。这里实现了一个从$0$-形式到$1$-形式的转变。

下面定义的外微分算子$\dd$，他实现了$p$-形式到$(p+1)$-形式的转变。
\begin{defi}
外微分算子$\dd:\Omega^p(U)\to\Omega^{p+1}(U)$是一个线性算子，满足
\[
\dd_x\omega(\xi_1,\dots,\xi_{p+1})=\sum_{l=1}^{p+1}(-1)^{l-1}\omega'_x(\xi_l)(\xi_1,\dots,\hat{\xi_l},\dots,\xi_{p+1}),
\]
其中$(\xi_1,\dots,\hat{\xi_l},\dots,\xi_{p+1})=(\xi_1,\dots,\xi_{l-1},\xi_{l+1},\dots,\xi_{p+1})$.
\end{defi}
所以说最前面$0$-形式方向导数演示的就是$\dd_x f=f'(x)$，那么$\dd f=f'$.考察最简单的投影函数$x_i(x)=x_i$，他的外微分为$\dd x_i=x_i'=\epsilon_i$.最后，我们就可以改写$\dd f$如下
\begin{equation}
\label{dd1}
\dd f =\sum_{i=1}^n\frac{\partial f}{\partial x_i}\dd x_i,
\end{equation}
一元函数的情况就是我们熟知的
\[
\dd f =\frac{\dd f}{\dd x}\dd x.
\]
当然，这里的记号们已经产生了概念性的转变。

\begin{pro}
如果$\omega(x)=f(x)\epsilon_I$,那么$\dd_x \omega=\dd_x f\wedge \epsilon_I$,或者$\dd \omega=\dd f\wedge \epsilon_I$.
\end{pro}
\begin{theo}
\label{dd2}
$\dd^2=\dd \circ \dd=0$.
\end{theo}
\begin{proof}
\[
\dd \omega =\dd f\wedge \epsilon_I=\sum_{i=1}^n\frac{\partial f}{\partial x_i}\dd x_i\wedge \epsilon_I,
\]
\[
\dd^2 \omega=\sum_{i,j=1}^n\frac{\partial^2 f}{\partial x_i\partial x_j}\dd x_j \wedge \dd x_i\wedge \epsilon_I=\sum_{i>j}\left(\frac{\partial^2 f}{\partial x_i\partial x_j}-\frac{\partial^2 f}{\partial x_j\partial x_i}\right)\dd x_i \wedge \dd x_j\wedge \epsilon_I=0.
\]
\end{proof}
所以说$\dd$是这样的一个算子，使得任意的$p\geq 0$下复合
\[
\Omega^p(U)\to\Omega^{p+1}(U)\to\Omega^{p+2}(U)
\]
恒为0.
\begin{theo}\label{dd3}
如果$\omega_1\in\Omega^p(U)$,
\[
\dd\left(\omega_1\wedge \omega_2\right)=\dd\omega_1\wedge \omega_2+(-1)^p\omega_1\wedge \dd\omega_2.
\]
\end{theo}
\begin{theo}满足式\eqref{dd1},{\rm Theorem \ref{dd2}} 和 {\rm Theorem \ref{dd3}} 的线性算子$\dd:\Omega^p(U)\to\Omega^{p+1}(U)$是唯一的。
\end{theo}
\begin{proof}
假设有另一个线性算子$\dd'$也满足上面三个性质，那么$\dd'f=\dd f$和$\dd' \dd' x_i=\dd'\epsilon=0$,所以$\dd' \epsilon_I=0$.最后
\[
\dd' \omega= \dd' f\wedge \epsilon_I+f\wedge \dd'\epsilon_I= \dd' f\wedge \epsilon_I= \dd f\wedge \epsilon_I=\dd \omega.
\]
\end{proof}
假设，$\omega=(\omega_1,\dots,\omega_n)$是一个形式的有序列，而$A=(A_1,\dots,A_n)$是一个矢量。约定记号
\[
\langle A, \omega \rangle=\sum_{i=1}^n A_i \omega_i.
\]
那么，如果记$\nabla f=(\partial f/\partial x_1,\dots,\partial f/\partial x_n)$和$\dd x =(\dd x_1,\dots,\dd x_n)$，那么
\[
\dd f = \langle \nabla f, \dd x \rangle.
\]
而$\nabla f$正是我们熟知的梯度。

现在我们限制到$\rr^3$上面，1-形式可以写作$\langle f, \dd x \rangle$，他的外微分为
\[
\dd\langle f, \dd x \rangle=\sum_{i=1}^3\dd f_i\wedge \dd x_i.
\]
现在我们记$\dd x \wedge \dd x' =(\dd x_2 \wedge \dd x_3,\dd x_3 \wedge \dd x_1,\dd x_1 \wedge \dd x_2)$，对每一个$\dd f_i$打开，那么
\[
\dd\langle f, \dd x \rangle=\langle \nabla\times f, \dd x \wedge \dd x'  \rangle,
\]
其中
\[
\nabla\times f=\left(\frac{\partial f_3}{\partial x_2}-\frac{\partial f_2}{\partial x_3},\frac{\partial f_1}{\partial x_3}-\frac{\partial f_3}{\partial x_1},\frac{\partial f_2}{\partial x_1}-\frac{\partial f_1}{\partial x_2}\right)
\]
正是我们熟知的旋度。

最后，2-形式可以写作$\langle f, \dd x \wedge \dd x'  \rangle$,那么
\[
\dd \langle f, \dd x \wedge \dd x'  \rangle=\left(\frac{\partial f_1}{\partial x_1}+\frac{\partial f_2}{\partial x_2}+\frac{\partial f_3}{\partial x_3}\right)\dd x_1 \wedge \dd x_2\wedge \dd x_3=\nabla\cdot f \dd x_1 \wedge \dd x_2\wedge \dd x_3.
\]

那么$\dd^2=0$就有两个著名的对应：
\[
\begin{split}
0&=\dd^2 f =\dd \langle \nabla f, \dd x \rangle = \langle \nabla\times (\nabla f),\dd x \wedge \dd x'  \rangle,\\
0&=\dd^2 \langle f, \dd x \rangle=\dd \langle \nabla\times  f,\dd x \wedge \dd x'  \rangle = \nabla\cdot( \nabla\times  f )\dd x_1 \wedge \dd x_2\wedge \dd x_3.
\end{split}
\]
这就是两个著名的恒等式$\nabla\times (\nabla f)=0$和$\nabla\cdot( \nabla\times  f )=0$.梯度的旋度为0，旋度的散度为0.

\begin{defi}
$U$上的$p$阶(de Rham)上同调群是下面的商矢量空间
\[
H^p(U)=\frac{\mathrm{ker}\left(\dd:\Omega^p(U)\to\Omega^{p+1}(U)\right)}{\mathrm{Im}\left(\dd:\Omega^{p-1}(U)\to\Omega^{p}(U)\right)}.
\]
此外约定当$p<0$的时候，$H^p(U)=0$.
\end{defi}
所以，$H^0(U)$就是$\mathrm{ker}\left(\dd:C^\infty(U)\to\Omega^1(U)\right)$.如果$U$是连通的，$\dd f=0$就昭示着$f$在恒为常数，$H^0(U)$就是这些函数构成的矢量空间。那么如果有着不同的连通分支，那么$H^0(U)$就是在在各个连通分支上为常数（整体不一定是一样的）的那些函数构成的矢量空间。而他的维度就是连通分支的个数。

\begin{defi}
$\dd \omega=0$的形式$\omega$称为闭形式。而$\dd \alpha$这样的形式称为恰当形式。
\end{defi}
可以看到恰当形式必定是闭形式，因为$\dd \dd \alpha=0$恒成立。但很反过来就不一定成立了。当在$U$上的任意闭形式都是恰当形式的时候，$\mathrm{ker}\left(\dd:\Omega^p(U)\to\Omega^{p+1}(U)\right)=\mathrm{Im}\left(\dd:\Omega^{p-1}(U)\to\Omega^{p}(U)\right)$,或者$H^p(U)=0$.所以说上同调群就是描述了闭形式和恰当形式之间的关系。而这关系，可以从$H^0$中看到，是拓扑性质。
\begin{theo}
Poincaré引理：设$U$是$\rr^n$中的可缩（即同伦到一个点的）开子集，其上的任意的闭形式都是恰当形式。
\end{theo}

现在来看$H^p(U)$中的元素，由于这是商矢量空间，所以任意的闭形式加上一个恰当形式其实还在同一个等价类里面的，或者说
\[
[\omega]=\omega+\dd\alpha.
\]
这个定义对于外积是良定义的，即
\[
[\omega_1]\wedge[\omega_2]=[\omega_1\wedge\omega_2].
\]
因此外积定义了这样的线性结合反对称运算$H^{m}(U)\times H^{n}(U)\to H^{m+n}(U)$.
\section{光滑流形背景下的切空间}
\begin{defi}
一个第二可数的Hausdorff空间，如果对于其任意一点，都存在一个邻域同胚于$\rr^n$，那么这个拓扑空间就被称为$n$维拓扑流形（或简称一个流形）。
\end{defi}
设$\mathcal{M}$是一个$n$维流形，其上的一个开集$U$和同胚映射$h:U\to \rr^n$构成的二元组$(U,h)$称为坐标卡。如果坐标卡们$\{U_i,h_i\}$中$\{U_i\}$是流形的一个开覆盖，那么称呼其为流形的一个图册。
\begin{defi}
一个图册是可微的就是说对于任意的$U_\alpha \cap U_{\beta}\neq \varnothing$，坐标转换$h_\beta\circ h_\alpha^{-1}: h_\alpha(U_\alpha\cap U_\beta) \to h_\beta(U_\alpha\cap U_\beta)$为可微函数。（注意：由于下标是任意的，这里还暗含着$h_\beta\circ h_\alpha^{-1}$的逆也是可微的。）
\end{defi}

我们称呼上面这样的坐标卡为相容的，并且约定两个不相交的坐标卡也是相容的。那么如果两个图册的任意坐标卡相容，那么这两个图册的并也是一个图册。所以相容的图册就确定了一个等价类，我们选取所有相容的图册并在一起形成一个极大图册。注意，一个流形可以有不同的极大图册。

选定了一个流形的一个极大图册，这时候我们称呼赋予了这个流形光滑结构。为了避开数学证明上的麻烦，以后我们的讨论在极大图册上完成。但一般来说选取极大图册是麻烦的事情，比如三维球面的图册只要两个坐标卡在应用上就够了。

至此以后，我们只考虑无穷阶可微，即光滑的情况。流形$\mathcal{M}$上光滑实函数的集合记做$\mathcal{F}(\mathcal{M})$.而那些定义域包含$p$的一个邻域的光滑实函数们的集合就记做$\mathcal{F}_p$.

现在选定两个赋予了光滑结构的流形$\mathcal{M}$和$\mathcal{N}$以及映射$f:\mathcal{M}\to \mathcal{N}$。任意一点$p\in \mathcal{M}$在坐标卡$\{U,h_1\}$里，对应的$f(p)\in \mathcal{N}$在坐标卡$\{V,h_2\}$里，我们称呼$f$是光滑的就是说$h_2 \circ f\circ h_1^{-1}:\rr^m\to \rr^n$在$h_1(p)$的邻域内是光滑的。这个定义和选取的坐标卡是无关的，因为变换坐标卡不过是复合上了坐标变换罢了。而坐标变换也是光滑的，且光滑函数的复合是光滑的。
\begin{defi}
如果两个流形$\mathcal{M}$和$\mathcal{N}$间存在光滑函数$f:\mathcal{M}\to \mathcal{N}$和$g:\mathcal{N}\to \mathcal{M}$满足$f\circ g =\mathrm{id}_\mathcal{N}$以及$g\circ f =\mathrm{id}_\mathcal{M}$，那么这两个流形就是微分同胚的，$f$和$g$称为微分同胚。比如坐标转换是微分同胚。
\end{defi}

在流形上定义切空间还是可以像欧氏空间内一样使用曲线的等价类的方式。
\begin{defi}
假设$p\in \mathcal{M}$附近的坐标卡是$(U,h)$，那么可微曲线$\gamma_1,\gamma_2:I\to \mathcal{M}$的等价关系定义为若$(h\circ\gamma_1)'(0)=(h\circ\gamma_2)'(0)$则$\gamma_1\sim\gamma_2$，还是记作$\left[\gamma\right]$，所有切矢量的集合就是切空间。
\end{defi}
这里我们不采用这个定义，转而用另一个更加方便引入线性结构的定义。

\begin{defi}
$p\in \mathcal{M}$处的切矢量是一个实值线性算子$D:\mathcal{F}_p\to\rr$满足使得对任意的$f,g\in \mathcal{F}_p$成立$D(fg)=D(f)g(p)+f(p)D(g)$.该点的切空间$T_p\mathcal{M}$定义为所有的切矢量的集合。
\end{defi}
假设$a$是一个实数，任取$f$，定义$aD$为$(aD)f=a(Df)$，定义$D_1+D_2$为$(D_1+D_2)f=D_1f+D_2f$。这样切空间就成为了一个实数域上的矢量空间。

现在考虑光滑映射$f:\mathcal{M}\to \mathcal{N}$.我们可以定义$f$在点$p \in \mathcal{M}$的导数为：
\begin{defi}
	$f$在点$p$的导数$f_{*p}:T_p\mathcal{M} \to T_{f(p)}\mathcal{N}$定义为满足$\left(f_{*p}D\right)g=D(g\circ f)$的线性映射。
\end{defi}

从导数的定义可以看到$\mathrm{id}_{*p}=\mathrm{id}_{T_p\mathcal{M}}$，同欧氏空间内一样很直接可以证明\[(f\circ g)_{*p}=f_{*g(p)}\circ g_{*p}.\]
现在如果两个流形间存在同胚映射，那么
\[\mathrm{id}_{T_{f(p)}\mathcal{N}}=\mathrm{id}_{*f(p)}=(f\circ g)_{*f(p)}=f_{*p}\circ g_{*f(p)}\]
以及
\[\mathrm{id}_{T_p\mathcal{M}}=\mathrm{id}_{*p}=(g\circ f)_{*p}=g_{*f(p)}\circ f_{*p},\]
也就是说两切空间作为矢量空间同构。

借助坐标卡，我们可以更加细致地讨论切空间的线性结构。任取一个坐标卡$(U,h)$，交换图
\[
	T_{p}\mathcal{M}\xrightarrow[\cong]{h_{*p}}T_{h(p)}\rr^m=\rr^m
\]
描述了切空间的线性结构。这个交换图告诉我们，$m$维流形的切空间也是$m$维的。

如果我们选取不同的坐标卡，可以通过坐标转换相互变换。由于坐标转换是微分同胚，那么就自然引入了两个切空间中的同构。所以切空间的维度是和坐标卡的选取没有关系的。

稍稍提一下导数的另一个定义：
\begin{defi}
	$f$在点$p$的导数$f_{*p}$是指使得$f_{*p}[\gamma]=\left[f\circ \gamma\right]$成立的线性映射。
\end{defi}

既然$h_{*p}$是同构，对应着$\rr^m$的标准基$\{e_i\}$，我们记
\[
	\partial^i_p=\left(\frac{\partial}{\partial x_i}\right)_p=h_{*p}^{-1}\left(e_i\right)
\]
所以对于任何的矢量值函数$f$我们有
\[
	\partial^i_pf=\frac{\partial}{\partial x_i}\left(f\circ h^{-1}\right)(h(p)).
\]

综上，对于光滑映射$f:\mathcal{M}\to \mathcal{N}$，他的导数$f_{*p}$满足下列交换图：
	\[
		\xymatrix{
T_{p}\mathcal{M}\ar[d]_\cong^{h_{*p}}\ar[rr]^{f_{*p}}&&T_{f(p)}\mathcal{N}\ar[d]_\cong^{h_{*f(p)}}\\
		\rr^m\ar[rr]^{\left(h_2\circ f\circ h_1^{-1}\right)'(h_1(p))}&&\rr^n
		}
	\]
\begin{defi}
光滑流形的切空间的不交并称为这个光滑流形的切丛，记做$T\mathcal{M}$，每一个切空间称为切丛的纤维。
\end{defi}
\section{光滑流形背景下的微分形式}
在前面已经看到了，欧氏空间下，一个$p$-形式在一点取值为一个$\Lambda^p(\rr^n)$中的矢量，通过一个同构，我们也可以看做一个$p$-形式在一点取值为一个$\Lambda^p(T_q\rr^n)$中的矢量，而这正适合推广到流形上面来。所以我们需要的是$\Lambda^p(T_q\mathcal{M})$.

在流形的每一点赋予$\Lambda^p(T_q\mathcal{M})$中的一个矢量，这样构成了一个矢量的分布，或者说矢量场，我们把这样的矢量场的集合记做$\Lambda^p(T\mathcal{M})$.
%$\Lambda^1(T_p\mathcal{M})$其实就是$T_p\mathcal{M}$的对偶空间$T^*_p\mathcal{M}$,是那些$\omega:T_p\mathcal{M}\to \rr$的构成的矢量空间。

那么接着就可以定义形式了，这里直接定义到整个流形上。
\begin{defi}
光滑流形$\mathcal{M}$上的$p$-形式是$\omega:\mathcal{M} \to \Lambda^p(T\mathcal{M})$.所有$\mathcal{M}$上的$p$-形式的集合依然记做$\Omega^p(\mathcal{M})$.
\end{defi}
定义微分形式，我们还需要明确形式是光滑的。为此，我们可以用局部平凡化$h$拉到$\rr^n$中去考虑。换而言之，我们需要用$h$构造一个$\Lambda^k(T_p\mathcal{M})\to\Lambda^k(\rr^n)$的线性映射，那么$\Lambda^k(T_p\mathcal{M})$也通过这个映射平凡化了。更一般的问题如下，假设有两个流形$\mathcal{M}$和$\mathcal{N}$以及$f:\mathcal{M}\to \mathcal{N}$，我们如何用$f$构造一个$\Lambda^k(T_p\mathcal{M}) \to \Lambda^k(T_{f(p)}\mathcal{N})$的线性映射。

因为$f$给出了$f_{*p}:T_{f(p)}\mathcal{N}\to T_{p}\mathcal{M}$,那么对应的也有外矢量空间间的线性映射
$f^*_{p}=\Lambda\left(f_{*p}\right):\Lambda^k\left(T_{f(p)}\mathcal{N}\right)\to \Lambda^k\left(T_{p}\mathcal{M}\right)$.而$\Lambda$是一个反变函子，
\[
(\Lambda\left(f_{*p}\right)\left(\omega\right))_p(v_1,\dots,v_k)=\omega_{f(p)}\left(f_{*p}v_1,\dots,f_{*p}v_k\right),
\]
或者写作
\[
(f_{p}^*\left(\omega\right))_p(v_1,\dots,v_k)=\omega_{f(p)}\left(f_{*p}v_1,\dots,f_{*p}v_k\right).
\]
$k=1$的话其实就是我们熟知的转置。当$k=0$的时候，$f^*\omega=\omega\circ f$,其中$\omega$是一个实光滑函数。因为是反变函子，所以有$(f\circ g)^*=g^*\circ f^*$.

因为局部平凡化$g^{-1}=h$给出了$g_{*p}:T_{p}\rr^m\to T_{g(p)}\mathcal{M}$是一个同构，那么对应的也有外矢量空间间的同构$g^*_p:\Lambda^k\left(T_{g(p)}\mathcal{M}\right)\to \Lambda^k\left(T_{p}\rr^m\right)$。
\[
	(g^*\omega)_p(v_1,\dots,v_k)=\omega_{g(p)}\left(g_{*p}v_1,\dots,g_{*p}v_k\right).
\]
现在可以定义形式的光滑了。一个形式$\omega$是光滑的，就是说在每一个局部平凡化后$g^*\omega$是光滑的。

两个形式的外积是逐点定义的，就是说$(\omega\wedge\eta)_p=\omega_p\wedge\eta_p$.因此，外积的那些性质在流形上依旧成立。
\begin{theo}
$f^*(\omega\wedge\eta)=(f^*\omega)\wedge(f^*\eta)$.
\end{theo}
现在来定义流形上的外微分。
\begin{defi}
设$p$的局部有坐标卡$(U,h)$而$h=g^{-1}$，则一个$k$-形式在$p$点的外微分为
\[
	\dd_p\omega=h^* \dd_{h(p)}\left(g^*\omega\right).
\]
\end{defi}
我们需要证明$\dd$的定义是独立于坐标卡的。现在设坐标转换是$\varphi$，是一个微分同胚。新的坐标卡下的局部平凡化就是$g\circ \varphi$.我们选$\xi_1,\dots,\xi_k \in T_p\mathcal{M}$.然后挑选$v_1,\dots,v_k \in T_x\rr^m$使得$(g\circ \varphi)_*v_i=\xi_i$.只要证明
\[
h^* \dd_{\varphi(x)}(g^*\omega)(w_1,\dots,w_k)=\left(\varphi^{-1}\circ h\right)^*\dd_{x}(g\circ \varphi)^*(\omega)(v_1,\dots,v_k)
\]
即可，其中$w_i=\varphi_*v_i$.

关于这点，我们将右侧稍稍改写一下
\[
h^*\left(\varphi^{-1}\right)^*\dd_{x}\varphi^*g^*(\omega)(v_1,\dots,v_k),
\]
这里的关键是，如果$\varphi^* \dd_{\varphi(x)} \eta=\dd _x\varphi^* \eta$，其中$\eta=g^*\omega$，那么
\[
h^*\left(\varphi^{-1}\right)^*\varphi^*\dd_{\varphi(x)}\eta=h^*\dd_{\varphi(x)}\eta.
\]
因为在$\eta$是在欧氏空间背景下的，所以只要在欧氏空间内证明就可以了。

\begin{pro}在欧氏空间背景下\[\varphi^*\dd x_i=\dd \varphi_i.\]
\end{pro}
\begin{proof}
任取一个矢量$\xi \in T\rr^n=\rr^n$,
\[
\varphi^*\dd x_i(\xi)=\dd x_i (\varphi_*\xi)=\dd x_i \left(\sum_{k=1}^m\sum_{l=1}^n\frac{\partial \varphi_k}{\partial x_l}\xi_l e_k\right)= \sum_{k=1}^m\sum_{l=1}^n\frac{\partial \varphi_k}{\partial x_l}\xi_l \dd x_i(e_k)=\sum_{l=1}^n\frac{\partial \varphi_i}{\partial x_l}\xi_l.
\]
而$\xi_l=\dd x_l(\xi)$,所以
\[
\varphi^*\dd x_i(\xi)=\sum_{l=1}^n\frac{\partial \varphi_i}{\partial x_l}\dd x_i(\xi)=\dd \phi_i (\xi)
\]
\end{proof}
\begin{pro}在欧氏空间背景下\[\varphi^* \dd_{\varphi(x)} \eta=\dd _x\varphi^* \eta.\]
\label{dd4}
\end{pro}
\begin{proof}
任取一个实函数$f$
\[
\dd f =\sum_k \frac{\partial f}{\partial x_k}\dd x_k=\sum_k \frac{\partial f}{\partial x_k}\wedge\dd x_k
\]
所以
\[
\begin{split}
\varphi^* \dd f =\sum_k \varphi^*\left(\frac{\partial f}{\partial x_k}\right)\wedge\varphi^*\dd x_k&=\sum_k\left(\frac{\partial f}{\partial x_k}\circ \varphi\right)\wedge \dd \varphi_k\\
&=\sum_k\left(\frac{\partial f}{\partial x_k}\circ \varphi\right)\wedge \left( \sum_l\frac{\partial\varphi_k}{\partial x_l} \dd x_l\right)\\
&=\sum_{l}\left(\sum_k\left(\frac{\partial f}{\partial x_k}\circ \varphi\right) \left(\frac{\partial\varphi_k}{\partial x_l} \right)\right)\dd x_l\\
&=\sum_{l}\frac{\partial (f\circ \varphi)}{\partial x_l}\dd x_l=\dd(f\circ \varphi)=\dd(\varphi^*f)
\end{split}
\]

由于$\dd$和$\varphi^*$都是线性的，我们只要证明对$\omega=f_I\epsilon_I$成立就可以了。
\[
\varphi^*\dd \omega=\varphi^*(\dd f \wedge \epsilon_I)=\varphi^*\dd f \wedge \varphi^*\epsilon_I=\dd(\varphi^* f) \wedge \varphi^*\epsilon_I.
\]
展开
\[
\dd(\varphi^* f \wedge \varphi^*\epsilon_I)=\dd(\varphi^* f) \wedge \varphi^*\epsilon_I+(-1)^k\varphi^* f \wedge \dd(\varphi^*\epsilon_I),
\]
对于第二项中的$\dd(\varphi^*\epsilon_I)$再展开，每一项中有$\dd\varphi^*(\epsilon_i)=\dd^2\varphi_i=0$.所以整个第二项就消失了，于是
\[
\varphi^*\dd \omega=\dd(\varphi^* f \wedge \varphi^*\epsilon_I)=\dd (\varphi^* \omega).
\]
\end{proof}
至此，流形上的外微分$\dd$也是良定义的了。由于$\dd^2=0$是局部性质，所以他在流形上也是成立的。同样Theorem \ref{dd3} 也是逐点的局部性质，所以在流形上也是成立的。此外，Theorem \ref{dd4} 也是局部性质，所以在流形上也成立。

\begin{defi}
流形$\mathcal{M}$每一点的切空间的对偶空间（称为余切空间）的不交并称为余切丛，记做$T^*\mathcal{M}$.
\end{defi}

类似于切丛，余切丛的矢量场其实就是1-形式。更明确一点说，就是在每一点赋予一个余切矢量（余切空间中的元素）。

由于$\varphi:\mathcal{M}\to\mathcal{N}$，以及$\varphi^*:\Omega^p(\mathcal{N})\to\Omega^p(\mathcal{M})$,那么他也引入了上同调群之间的线性映射$H^p(\varphi):H^p(\mathcal{N})\to H^p(\mathcal{M})$.更简练地说，$H^p$是一个反变函子：
\[
\begin{split}
&H^p(\varphi_1\circ\varphi_2)=H^p(\varphi_2)\circ H^p(\varphi_1),\\
&H^p(\mathrm{id})=\mathrm{id}.
\end{split}
\]

\chapter{Others}
\section{链复形和他们的同调}

一系列矢量空间和上面的线性映射
\[
A\xrightarrow{f}B\xrightarrow{g}C
\]
称为正和列，就是说$\ker g=\mathrm{Im} f$.而
\[
0\to A\xrightarrow{f}B
\]
就是说$f$是单射，而
\[
B\xrightarrow{g}C\to 0
\]
就是说$g$是满射。而正和列
\[
0\to A\xrightarrow{f}B\xrightarrow{g}C\to 0
\]
称为短正合列。

一个矢量空间和线性映射链$A^*=\{A_i,\dd_i\}$
\[
\cdots\to A^{i-1}\xrightarrow{\dd^{i-1}}A^i\xrightarrow{\dd^i}A^{i+1}\to \cdots
\]
称为链复形，如果对于任意的$i$都有$\dd^i \circ \dd^{i+1}=0$.当对任意的$i$都有$\ker \dd^i=\mathrm{Im}\, \dd^{i-1}$,则这个链复形称为正和的。

很容易看到，$\Omega^*(\mathcal{M})$和外微分算子$\dd$构成一个链复形。那么同样，对于任意的链复形都可以定义上同调群$H^p(A^*)=\ker (\dd^p)/\mathrm{Im} (\dd^{p-1})$，其中的元素同样用等价类符号$[a]$记。

如果在两条链的每一个对应链的对象之间，譬如说$A_i$和$B_i$之间，存在线性映射$f^i$，那么自然就在两条链之间引入了一个映射$f:A^*\to B^*$，需要交换图如下：
	\[
		\xymatrix{
\cdots\ar[r]&A^{p-1}\ar[r]^{\dd_A^{p-1}}\ar[d]^{f^{p-1}}&A^p\ar[r]^{\dd_A^p}\ar[d]^{f^{p}}&A^{p+1}\ar[r]\ar[d]^{f^{p+1}}&\cdots\\
\cdots\ar[r]&B^{p-1}\ar[r]^{\dd_B^{p-1}}&B^p\ar[r]^{\dd_B^p}&B^{p+1}\ar[r]&\cdots
		}
	\]
从交换图可以看到，应该满足$\dd^{p}_B\circ f^p=f^{p+1}\circ \dd^{p}_A$.

既然在链复形之间引入了映射，同样的引入了上同调群之间的映射。我们引入
\[
f^*=H^p(f):H^p(A^*)\to H^p(B^*)
\]
通过$f^*([a])=[f^p(a)]$.这里$H^p$是协变函子。
\begin{pro}
两条链复形和两个映射$f,g:A^*\to B^*$如果对每一个$p$都存在线性映射$s^p:A^p \to B^{p-1}$满足
\[
\dd_B^{p-1}s^p+s^{p+1}\dd_A^p=f^p-g^p:A^p\to B^p.
\]
则$f^*=g^*$.这样的两个映射被称为链同伦的。
\end{pro}
\begin{proof}
对任意的$[a]\in H^p(A^*)$，我们有$\dd_A^p(a)=0$，所以
\[
(f^*-g^*)[a]=[(f^p-g^p)a]=[\dd^{p-1}_Bs^p(a)+s^{p+1}\dd_A^p(a)]=[\dd^{p-1}_Bs^p(a)],
\]
而$\dd^{p-1}_Bs(a)$显然被等价为0，所以$f^*=g^*$.
\end{proof}
链复形也可以构成一个链，尤其重要的是短正合列
\[
0\to A^*\xrightarrow{f}B^*\xrightarrow{g}C^*\to 0.
\]
链的短正和列就是当对任意的$p$都有短正合列
\[
0\to A^p\xrightarrow{f^p}B^p\xrightarrow{g^p}C^p\to 0.
\]
\begin{pro}
链复形的短正合列
\[
0\to A^*\xrightarrow{f}B^*\xrightarrow{g}C^*\to 0
\]
引入了上同调群的正合列
\[
H^p(A^*)\xrightarrow{f^*}H^p(B^*)\xrightarrow{g^*}H^p(C^*).
\]
\end{pro}
\begin{proof}
其实就是证明$\ker g^*=\mathrm{Im}\, f^*$.

首先证明$\mathrm{Im}\, f^* \subset \ker g^*$，任取$[a]\in H^p(A^*)$，我们有
\[
g^*\circ f^*([a])=[g^p\circ f^p(a)]=[0]=0.
\]
这是从正合列$A^p\xrightarrow{f^p}B^p\xrightarrow{g^p}C^p$中得知的。

然后证明$\ker g^*\subset \mathrm{Im}\, f^*$.这就是说，任意的$g^*[b]=0$的$[b]$都可以找到$[a]$使得$f^*[a]=[b]$.

因为对任意的$p$有$0=g^*[b]=[g^p(b)]$，因此存在一个$c$使得$g^p(b)=\dd^{p-1}_C(c)$，而$g^{p-1}$又是满射，所以可以找到$b'$使得$g^{p-1}(b')=c$,因此用交换图变换
\[
g^p(\dd^{p-1}_B(b'))=d^{p-1}_C(g^{p-1}(b'))=g^p(b).
\]

所以$g^p(b-\dd^{p-1}_B(b'))=0$，所以存在$a$使得$f^p(a)=b-\dd^{p-1}_B(b')$。现在只要证明这个$a$确实在$\ker \dd^p_A$里面就可以了。为此只要证明$\dd^p_A a=0$就可以，但是因为$f^{p+1}$是单射，所以也等价于证明$f^{p+1}\circ \dd^p_A (a)=0$.用交换图变换
\[
f^{p+1}\circ \dd^p_A (a)=\dd^p_B\circ f^p (a)=\dd^p_B(b-\dd^{p-1}_B(b'))=\dd^p_B(b)=0.
\]
因为$a$确实在$\ker \dd^p_A$里面，所以他在$H^p(A^*)$里面对应了一个等价类$[a]$，成立$f^*[a]=[b]$.
\end{proof}
链复形的短正和列还引入了其他两个正合列。
\begin{defi}
对于链复形的短正合列
\[
0\to A^*\xrightarrow{f}B^*\xrightarrow{g}C^*\to 0,
\]
定义$\partial^*:H^p(C^*)\to H^{p+1}(A^*)$为线性映射
\[
\partial^*([c])=\left[(f^{p+1})^{-1}\left(\dd^p_B\left((g^p)^{-1}(c)\right)\right)\right].
\]
\end{defi}
$\partial^p$即交换图
	\[
		\xymatrix{
		&0\ar[d]&0\ar[d]&0\ar[d]&\\
\cdots\ar[r]&A^{p-1}\ar[r]^{\dd_A^{p-1}}\ar[d]^{f^{p-1}}&A^p\ar[r]^{\dd_A^p}\ar[d]^{f^{p}}&A^{p+1}\ar[r]\ar[d]^{f^{p+1}}&\cdots\\
\cdots\ar[r]&B^{p-1}\ar[r]^{\dd_B^{p-1}}\ar[d]^{g^{p-1}}&B^p\ar[r]^{\dd_B^p}\ar[d]^{g^{p}}&B^{p+1}\ar[r]\ar[d]^{g^{p+1}}&\cdots\\
\cdots\ar[r]&C^{p-1}\ar[r]^{\dd_B^{p-1}}\ar[d]&C^p\ar[r]^{\dd_B^p}\ar[d]\ar[ruu]&C^{p+1}\ar[r]\ar[d]&\cdots\\
&0&0&0&
		}
	\]
中的斜线。这里就不证明这是良定义的了。

\begin{pro}
链复形的短正合列
\[
0\to A^*\xrightarrow{f}B^*\xrightarrow{g}C^*\to 0
\]
引入了上同调群的正合列
\[
\begin{split}
&H^p(B^*)\xrightarrow{g^*}H^p(C^*)\xrightarrow{\partial^*}H^{p+1}(A^*),\\
&H^p(C^*)\xrightarrow{\partial^*}H^{p+1}(A^*)\xrightarrow{f^*}H^{p+1}(B^*).
\end{split}
\]
\end{pro}
\begin{theo}
\label{changzhenghelie}
链复形的短正合列
\[
0\to A^*\xrightarrow{f}B^*\xrightarrow{g}C^*\to 0
\]
引入了上同调群的正合列
\[
\cdots\to H^p(A^*)\xrightarrow{f^*}H^p(B^*)\xrightarrow{g^*}H^p(C^*)\xrightarrow{\partial^*}H^{p+1}(A^*)\xrightarrow{f^*}H^{p+1}(B^*)\to\cdots.
\]
\end{theo}
链复形可以谈论直和，即是对链中每一个矢量空间进行直和。那么从$\ker$和$\mathrm{Im}$对于直和的显然性质，我们有
\begin{pro}
\label{zhihe}
$H^p(A^*\oplus B^*)=H^p(A^*)\oplus H^p(B^*)$.
\end{pro}
$\Omega^*(U)$和外微分算子$\dd$构成一个链复形，下面的定理给出了有关于欧氏空间两个开集和他们的并与交的短正合列。
\begin{theo}
设$U_1$和$U_2$是$\rr^n$中的开集，记$i_\nu:U_\nu \to U_1 \cup U_2$和$j_\nu:U_1\cap U_2 \to U_\nu$是嵌入，则有如下的短正合列：
\[
0\to \Omega^p(U_1\cup U_2)\xrightarrow{I^p}\Omega^p(U_1)\oplus\Omega^p(U_2)\xrightarrow{J^p}\Omega^p(U_1\cap U_2)\to 0.
\]
其中$I^p(\omega)=(i_1^*(\omega),i_2^*(\omega))$,$J^p(\omega_1,\omega_2)=j_1^*(\omega_1)-j_2^*(\omega_2)$.
\end{theo}
\begin{proof}
先证明$I^*$是单射，这就是说除了$I^*(\omega)=0$只有解$\omega=0$.

设$\varphi$是$\rr^n$中的开集的嵌入，则对于任意的$p$-形式$\dd x_I=\dd x_{i_1}\wedge\dots\wedge\dd x_{i_p}$都有$\varphi^* \dd x_I =\dd x_I$，因此
\[
\varphi^*\omega=\varphi^*\sum_If_I\dd x_I=\sum_If_I\circ\varphi \dd x_I.
\]

现在证明$J^*$是一个满射。将单位分解应用到$U_1$和$U_2$上面取，存在$p_\nu$为定义在$U_1\cup U_2$上的光滑函数，而他的非零点集包含于$U_\nu$，且$p_1(x)+p_2(x)=1$.

设$f$定义在$U_1\cap U_2$上。定义$U_1$上的光滑函数$f_1$，他在$U_1\cap U_2$上的限制为$f(x)p_2(x)$和$U_2$上的光滑函数$f_2(x)$，他在$U_1\cap U_2$上的限制为$-f(x)p_1(x)$.那么在$U_1\cap U_2$上
\[
f_1(x)-f_2(x)=f(x).
\]

所以任选一个$U_1\cap U_2$上的$p$-形式$\omega$，系数$f_I$都可以定义出$f_{1,I}$和$f_{2,I}$，并且在$U_1\cap U_2$上满足$f_{1,I}-f_{2,I}=f$,因此也定义了两个$\omega_1$和$\omega_2$得到$J^p(\omega_1,\omega_2)=\omega$.

那么$I^*(\omega)=0$就是说$i_1^*(\omega)=i_2^*(\omega)=0$，这就是说$f_I\circ i_1=f_I\circ i_2=0$，但是由于$U_1$和$U_2$是$U_1\cup U_2$的一个开覆盖，所以这就等价于$f_I=0$，所以$\omega=0$.

然后证明$\ker J^p=\mathrm{Im}\, I^p$.分两个包含。

\no{1} $\mathrm{Im}\, I^p\subset \ker J^p$
\[
J^p\circ I^p(\omega)=j_2^*\circ i_2^*(\omega)-j_1^*\circ i_1^*(\omega)
\]
但其实$i_2\circ j_2=i_1\circ j_1$,所以$J^p\circ I^p(\omega)=0$.

\no{2} $\ker J^p\subset \mathrm{Im}\, I^p$

设$\omega_1=\sum_I f_I \dd x_I\in \Omega^p(U_1)$和$\omega_2=\sum_I g_I \dd x_I\in \Omega^p(U_2)$，从$J^p(\omega_1,\omega_2)=0$我们有
\[
j_1^*(\omega_1)=j_2^*(\omega_2),
\]
这就是说$f\circ j_1=g\circ j_2$，或者说$f$和$g$在$U_1\cap U_2$恒等。我们可以构成一个光滑函数$h_I$，他在$U_1$上的限制恒等于$f_I$，而$U_2$上恒等于$g_I$.那么
\[
I^p\left(\sum_Ih_I\dd x_I\right)=(\omega_1,\omega_2).
\]

这样就证毕$\ker J^p=\mathrm{Im}\, I^p$.
\end{proof}
将Theorem \ref{changzhenghelie} 和 Proposition \ref{zhihe} 应用到上面这个定理。就得到下面这个定理。
\begin{theo}Mayer-Vietoris列：
设$U_1$和$U_2$是$\rr^n$中的开集，则有如下的正合列：
\[
\cdots\to H^p(U_1\cup U_2)\xrightarrow{I^*}H^p(U_1)\oplus H^p(U_2)\xrightarrow{J^*}H^p(U_1\cap U_2)\xrightarrow{\partial^*}H^{p+1}(U_1\cup U_2)
\to \cdots
\]
其中$I^*([\omega])=(i_1^*([\omega]),i_2^*([\omega]))$,$J^*([\omega_1],[\omega_2])=j_1^*([\omega_1])-j_2^*([\omega_2])$.
\end{theo}
如果$U_1\cap U_2=\varnothing$，那么$H^p(U_1\cap U_2)=0$.所以
\[
0\xrightarrow{\partial^*} H^p(U_1\cup U_2)\xrightarrow{I^*}H^p(U_1)\oplus H^p(U_2)\xrightarrow{J^*}0,
\]
那么$I^*$既单又满，故而是个同构。

如果我们已知$U_1$和$U_2$的上同调群，那么通过Mayer-Vietoris列我们就有可能计算他们的并或者交的上同调群。

通过Poincaré引理，我们知道可缩开集$U$的上同调群如下，$H^0(U)=\rr$，而对于$p>0$，则为$H^p(U)=0$.

光滑函数的同伦有如下技术性的定理。
\begin{theo}
在欧氏空间背景下，任何一个连续映射都同伦于一个光滑映射。如果两个光滑函数$f_1,f_2:U\to V$是同伦的，则存在光滑函数$F:U\times \rr\to V$满足$F(x,0)=f_1(x)$和$F(x,1)=f_2(x)$.
\end{theo}

下面一个定理展示了链复形同伦与光滑函数同伦之间的关系。
\begin{theo}
如果两个光滑函数$f,g:U\to V$是同伦的，则
\[
f^*,g^*:\Omega^*(V)\to \Omega^*(U)
\]
是链同伦的，即$f^*=g^*$。
\end{theo}
因此Poincaré引理说的就是$0^*=\mathrm{id}^*$.
\begin{proof}
由于$f,g:U\to V$是同伦的，所以存在光滑函数$F:U\times \rr \to V$使得$F(x,0)=f(x)$和$F(x,1)=g(x)$.

注意到任意的$U\times \rr$上的$p$形式可以写作
\[
\omega=\sum_If_I(x,t)\dd x_I+\sum_J g_J(x,t)\dd t\wedge \dd x_J.
\]

让$\varphi_0:x\mapsto (x,0)$和$\varphi_1:x\mapsto (x,1)$，则$F\circ \varphi_0=f$和$F\circ \varphi_1=g$，且将上面的形式分别拉回到
\[
\varphi_0^*\omega=\sum_I f_I(x,0)\dd x_I,
\]
\[
\varphi_1^*\omega=\sum_I f_I(x,1)\dd x_I.
\]

现在我们需要构造一个$S^p:\Omega^p(U\times \rr)\to \Omega^{p-1}(U)$使得
\[
(\dd \circ S^p+S^{p+1}\circ \dd)(\omega)=(\varphi_1^*-\varphi_0^*)(\omega),
\]
如果这样，对于任意$U$中的形式我们有
\[
(\dd \circ S^p+S^{p+1}\circ \dd)(F^*\omega)=(\varphi_1^*-\varphi_0^*)(F^*\omega)=((F\circ \varphi_1)^*-(F\circ \varphi_0)^*)(\omega)=(g^*-f^*)(\omega),
\]
而最左边又有
\[
(\dd \circ S^p\circ F^*+S^{p+1}\circ F^* \circ \dd)(\omega)
\]
所以只要定义$s^p=S^p\circ F^*$,这就是链同伦。

为此定义
\[
S^p(\omega)=\sum_J\left(\int_0^1g_J(x,t)\dd t\right)\dd x_J.
\]
\end{proof}

这个定理即可推论出Poincaré引理。

两个集合$X$和$Y$称为同伦等价的，如果存在$f:X\to Y$和$g:Y\to X$满足$f\circ g$和$\mathrm{id}_Y$同伦以及$g\circ f$和$\mathrm{id}_X$同伦。

于是同构上面这个定理对应到上同调群就有了上同调群的同构，因此上同调群只依赖于同伦型。

\begin{exa}
用Mayer-Vietoris列计算$H^{p}(\rr^2-{0})$.

设$U_1$为去掉正实轴（包括原点）的平面，$U_2$为去掉负实轴（包括原点）的平面，因此$U_1\cup U_2=\rr^2-{0}$.两者都是可缩的，所以由Poincaré引理可以知道，$H^0(U_1)=H^0(U_2)=\rr$以及如果$p>0$有$H^p(U_1)=H^p(U_2)=0$.

注意到$U_1\cap U_2$为去掉实轴的平面$I_1\cup I_2$，两个部分无交且各自可缩，所以
\[
H^p(U_1\cap U_2)=H^p(I_1\cup I_2) \cong H^p(I_1)\oplus H^p(I_2) =\begin{cases}
\rr\oplus\rr&,p=0;\\
0&,p>0.
\end{cases}
\]
而$\rr^2-{0}$是连通的，所以$H^0(\rr^2-{0})=\rr$.

当$p>0$的时候，代入Mayer-Vietoris列
\[
H^p(U_1\cap U_2)\xrightarrow{\partial^*}H^{p+1}(U_1\cup U_2)\xrightarrow{I^*}H^{p+1}(U_1)\oplus H^{p+1}(U_2)\xrightarrow{J^*}H^{p+1}(U_1\cap U_2),
\]
头尾通过计算都为$0$，所以
\[
H^{p+1}(\rr^2-{0})=H^{p+1}(U_1\cup U_2)\cong H^{p+1}(U_1)\oplus H^{p+1}(U_2)=0.
\]
这就是说，平面挖一个洞的$2$阶以上的上同调群为$0$.

现在考察一阶$\rr^2-{0}$的上同调群，由于负阶都为$0$，所以
 \[
0\to H^0(U_1\cup U_2)\xrightarrow{I^*}H^0(U_1)\oplus H^0(U_2)\xrightarrow{J^*}H^0(U_1\cap U_2)\xrightarrow{\partial^*}H^{1}(U_1\cup U_2)\to 0
\]
或者
 \[
0\to \rr\xrightarrow{f}\rr\oplus\rr\xrightarrow{g}\rr\oplus\rr\xrightarrow{h}H^{1}(\rr^2-{0})\to 0.
\]
由于$f$是单射而且正和性给出$\ker g = \mathrm{Im}\,f$，所以$\ker g =\rr$，而由线性代数基本定理，有$\mathrm{Im}\,g \cong \rr$，因此正合列给出$\ker h \cong \rr$，而因为$h$是满射，所以根据同构基本定理$H^{1}(\rr^2-{0})\cong(\rr\oplus\rr)/\ker h \cong \rr$.

综上，\[H^{p}(\rr^2-{0})\cong
\begin{cases}
\rr&,p=0,1;\\
0&,p>1.
\end{cases}\]
\end{exa}
下面的一个定理也可以用Mayer-Vietoris列计算得到。
\begin{theo}
将$\rr^n$看做$\rr^{n+1}$的子空间，设$A$是$\rr^n$中的闭子集，
\[
\begin{split}
H^{p+1}(\rr^{n+1}-A)&\cong H^p(\rr^n-A),\text{当}\,p>1,\\
H^{1}(\rr^{n+1}-A)&\cong H^0(\rr^n-A)/\rr,\\
H^{0}(\rr^{n+1}-A)&\cong \rr.
\end{split}
\]
\end{theo}
通过归纳法可以得到
\[H^{p}(\rr^n-{0})\cong
\begin{cases}
\rr&,p=0,n-1;\\
0&,otherwise.
\end{cases}\]
这个结论可以用来证明$\rr^m$和$\rr^n$之间不存在同胚，如果存在，将同胚调整为$0$映射到$0$，而由于同胚将产生上同调群间的同构，所以$H^{p}(\rr^n-{0})$与$H^{p}(\rr^m-{0})$对于任意$p$都是同构的，但这不可能。

上面一些计算出的上同调群可以产生许多有名经典的拓扑结论，比如Jordan-Brouwer分割定理，Brouwer不动点定理等。

\section{流形上的积分}
\begin{defi}
一个光滑流形$n$维流形称为定向的，就是说其上存在一个处处不为$0$的$n$-形式。而这个形式称为定向形式。
\end{defi}
定向形式乘以一个恒正或者恒负的实函数显然还是定向形式，将乘以恒正的函数取做一个等价类，则存在两个等价类，所以说，定向流形上有两种定向。
\end{document}