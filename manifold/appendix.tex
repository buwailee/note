\appendix
\renewcommand{\thepara}{\Alph{chapter}.\arabic{para}}
\chapter{Tensors and Exterior Algebra}

张量抽象了多线性函数，尤其是双线性函数。

\para 设$A$是右$R$-模，$B$是左$R$-模，那么我们称$f:A\times B\to G$，其中$G$是一个交换群，为一个双线性函数，如果他满足
\[
	f(a+b,a')=f(a,a')+f(b,a'),\quad f(a,a'+b')=f(a,a')+f(a,b'),
\]
以及对$r\in R$满足$f(ar,b)=f(a,rb)$.

特别地，如果我们存在一个双线性函数$\varphi$，以及一个交换群$G$，使得每一个$A\times B$上的双线性函数$f:A\times B\to H$都可以唯一分解为
\[
	f:A\times B\xrightarrow{\varphi} G\xrightarrow{h_f}H,
\]
其中$h_f$对每一个双线性函数$f$存在且唯一，则称呼$G$为$A$与$B$的张量积，记做$A\otimes_R B$，而$\varphi(a,b)$记做$a\otimes_R b$，如果下标$R$不重要，那么我们可以省略他。

\lem 在模范畴内，张量积存在。而且由上面的泛性质，他确定到一个同构。

\proof 对于唯一性，我们考虑两个张量积$(G,\varphi)$和$(G',\varphi')$，那么根据张量积的性质，有分解
\[
	\varphi:A\times B\xrightarrow{\varphi'} G'\xrightarrow{h_{\varphi}}G,\quad \varphi':A\times B\xrightarrow{\varphi} G\xrightarrow{h_{\varphi'}}G',
\]
所以只要验证$h_\varphi\circ h_{\varphi'}=\id_{G}$和$h_{\varphi'}\circ h_{\varphi}=\id_{G'}$就好了，这样我们就得到了$G$和$G'$之间的同构。而上述等式来自于分解的唯一性，显然，我们有分解
\[
	A\times B\xrightarrow{\varphi'} G'\xrightarrow{h_{\varphi}}G\xrightarrow{h_{\varphi'}}G',\quad A\times B\xrightarrow{\varphi'} G'\xrightarrow{\id_{G'}}G',
\]
显然，所以由唯一性得到了$h_{\varphi'}\circ h_{\varphi}=\id_{G'}$，同理有另一个等式。

对于存在性，我们可以直接构造，首先，我们知道在交换群范畴有直和存在，那么我们可以构造自由交换群$F=\bigoplus_{(a,b)\in A\times B} \zz\langle (a,b)\rangle$.令$1_{a,b}$是$\zz\langle (a,b)\rangle$中的$1$，我们令$H$是由
\[
	1_{a,b}+1_{a',b}-1_{a+a',b},\quad 1_{a,b}+1_{a,b'}-1_{a,b+b'},\quad 1_{ar,b}-1_{a,rb}
\]
生成的子群，那么我们$A\otimes B$就可以构造为$F/H$，令$\varphi(a,b)=a\otimes b=[1_{a,b}]$，即$1_{a,b}$的陪集。这确实是张量积，具体的检验这里就不进行了。\qed

设$R$是交换环，$A$和$B$都是双边模，那么$A\otimes_R B$显然有一个$R$-模结构，比如$r(a\otimes b)$可以定义为$(ra)\otimes b$.特别地，如果交换环$T$是一个$R$-代数\footnote{设$f:R\to T$是一个环同态，那么我们可以通过$r\cdot t=f(r)t$在$T$上定义一个$R$-模结构，此时称$T$是一个$R$-代数。此外，$R$-代数同态是一个环同态，同时也是一个$R$-模同态。}，设$A$是一个$R$-模，则$A\otimes_R T$就是一个$T$-模。这是因为，我们可以通过$t(a\otimes b)=a\otimes (tb)$来定义标量乘法。

由于矢量空间是域上的模，那么矢量空间之间也存在张量积，两个矢量空间的张量积还是一个矢量空间。设$V$和$W$都是$\rr$上的矢量空间，那么$V\otimes W$也是$\rr$上的矢量空间。如果他们都是有限维的，且$\{v_i\}_{i\in I}$和$\{w_j\}_{i \in J}$分别是他们的基，则可以检验$\{v_i\times w_j\}_{(i,j)\in I\times J}$构成$V\otimes W$的一组基，所以如果$V$是$m$维的，$W$是$n$维的，则$V\otimes W$是$mn$维的。

\para 有同构$A\otimes\bigoplus_i B_i\cong \bigoplus_i (A\otimes B_i)$，$R\otimes A\cong A$以及$(R/I)\otimes B\cong B/IB$，其中$I$是$R$的一个理想。这俩的证明完全是利用泛性质，这里就不说了。

\para 有了两个模的张量积，我们自然也可以拓展为三个模的张量积，我们可以通过模仿两个模的张量积的泛性质\footnote{即三线性的函数可以唯一分解。}，定义一个新的三个模之间的张量积$A\otimes B\otimes C$，然后可以检验$(A\otimes B)\otimes C$和$A\otimes (B\otimes C)$同时也满足泛性质，所以他们之间是同构的。在这层意义上，我们可以认为张量积满足结合律，因此我们自然也有了有限个模的张量积。

将一个矢量空间$V$自己张量自己$k$次得到的空间$V\otimes \cdots \otimes V$记做$V^k$.

\para 设我们有$n$维度矢量空间$V$，那么我们多线性函数（即对每个变元都线性）
\[
	f:\underbrace{V\times\cdots\times V}_{k\text{个}}\to \rr
\]
所构成的矢量空间自然同构于$(V\otimes \cdots \otimes V)^*=(V^k)^*$，这是因为对多线性函数我们有唯一分解$f=h_f\circ\varphi$，其中$h_f\in (V^k)^*$，令$\alpha:f\mapsto h_f$，显然这是双射，剩下只要检验这是线性的就好了。因为$af+bg$同时有两个分解$h_{af+bg}\circ \varphi$和$ah_f+bh_g$，那么由分解的唯一性，我们就得到了$h_{af+bg}=ah_f+bh_g$，故而同构。以后我们就直接认为$(V^k)^*$是多线性函数构成的矢量空间。

因为这个等同，所以多线性函数通常直接写成$f:V^k\to \rr$.

\para 类似于$V^k$，我们可以将$V$的对偶空间和自己张量$k$次，即$V_k=V^*\otimes \cdots \otimes V^*$构成一个新的矢量空间，他和$(V^k)^*$是自然同构的。

显然他们的维数相同，剩下只要找两个空间之间的一个单或者满线性映射就可以了。设$f_1\otimes \cdots\otimes f_k\in V_k$，那么$f_1(v_1)f_2(v_2)\cdots f_k(v_k)$自然定义了$F\in (V^k)^*$.而且由构造，这是一个单射，所以同构成立。这样，我们以后也不区分$(V_k)^*$和$V_k$.

特别地，利用上面这种等同，我们有$V_m\otimes V_n=V_{m+n}$。对于两个多线性函数$f\in V_m$和$g\in V_n$，张量积$f\otimes g\in V_{m+n}$具体写出来即
\[
	f \otimes g(v_1,\cdots,v_m,v_{m+1},\cdots,v_{m+n})
	=f(v_1,\cdots,v_m)g(v_{m+1},\cdots,v_{m+n}).
\]

\para 设$V$是$k$-矢量空间，记$V^0=k$，那么$\bigoplus_{n\leq 0} V^k$就构成了一个结合代数，记做$\bigotimes V$.我们称为张量代数。

设$f:V\to W$是一个线性映射，其中$W$是一个$k$-代数，那么通过$F(v_1\otimes \cdots \otimes v_n)=f(v_1)\cdots f(v_n)$我们可以定义出一个$k$-代数同态$F:\bigotimes V\to W$，他满足泛性质：记$i:V\to \bigotimes V$是自然的$k$-线性映射，那么对于任意的$\phi:V\to W$，其中$W$是$k$-代数，我们都存在唯一的$k$-代数同态$\Phi:\bigotimes V\to W$使得分解$\phi:V\xrightarrow{i}\bigotimes V \xrightarrow{\Phi}W$成立。

\para 设$S^k$是对称群，我们可以将其线性地作用在$(V^k)^*$的元素上，设$\sigma\in S^k$，而$f\in (V^k)^*$是一个多线性函数，那么我们可以定义一个新的多线性函数$\sigma(f)$通过$\sigma(f)(v_1,\cdots,v_k)=f(v_{\sigma(1)},\cdots,v_{\sigma(k)})$.

一个多线性函数如果有$\sigma(f)=(-1)^{\sign(\sigma)}f$，则被称为是反对称的，特别地，对于交换一对元素，反对称多线性函数变号。因为任意一个置换都可以由交换一对元素复合而来，所以上面这个性质也完全描述了反对称多线性函数。

类似的，对称多线性函数即满足$\sigma(f)=f$的函数。

\para 这里复习一下外代数的内容。设$V$是一个$n$维矢量空间，记$\Omega^k(V)$为所有反对称多线性函数$f\in V_k$的集合。这个集合有一个显然的线性结构，构成$V_k$的一个子空间。此外再约定$\Omega^1(V)=V^*$和$\Omega^0(V)=\rr$.我们将$\Omega^k(V)$称为$V$的$k$-次外代数。

\para 	设$\xi \in \Omega^m(V)$和$\eta \in \Omega^n(V)$，定义$\xi$和$\eta$的外积$\xi \wedge \eta \in \Omega^{m+n}(V)$为
	\[
		\xi \wedge \eta=\frac{1}{m!n!}\sum_{\sigma\in S^{m+n}}(-1)^{\sign(\sigma)}\sigma (\xi \otimes \eta),
	\]
	其中$\sigma$属于$m+n$阶置换群。

\pro 设$\xi$, $\xi_1$, $\xi_2 \in \Omega^m(V)$和$\eta$, $\eta_1$, $\eta_2\in \Omega^n(V)$还有一个$\zeta\in \Omega^h(V)$，有

	\no{1}分配律：
	\[
		\begin{split}
			(\xi_1+\xi_2)\wedge \eta&=\xi_1 \wedge \eta+\xi_2 \wedge \eta, \\
			\xi \wedge (\eta_1+\eta_2)&=\xi \wedge \eta_1+\xi \wedge \eta_2.
		\end{split}
	\]

	\no{2}反变换律：$\xi \wedge \eta=(-1)^{mn}\eta \wedge \xi$.

	\no{3}结合律：$(\xi \wedge \eta)\wedge \zeta=\xi \wedge (\eta\wedge \zeta)$.

\proof \no{1} 由$\sigma$线性和张量积线性显然。

	\no{2} 设置换
	\[
		\tau=
		\begin{pmatrix}
			1& \cdots & m & m+1 &\cdots &m+n\\
			1+n& \cdots & m+n & 1 &\cdots &n
		\end{pmatrix},
	\]
	容易证明$(-1)^{\sign(\tau)}=(-1)^{mn}$.

	由线性性，我们只要对一个分量证明就可以了。按基打开直接写出
	\[
		\begin{split}
			\xi \wedge \eta&=\frac{\xi^{i_1\dots i_m}\eta^{j_1 \dots j_n}}{m!n!}\sum_{\sigma\in S^{m+n}}(-1)^{\sign(\sigma)}\sigma(v_{i_1}\otimes \cdots \otimes v_{i_m}\otimes v_{j_1}\otimes \cdots \otimes v_{j_n})\\
			\eta \wedge \xi&=\frac{\xi^{i_1\dots i_m}\eta^{j_1 \dots j_n}}{m!n!}\sum_{\sigma\in S^{m+n}}(-1)^{\sign(\sigma)}\sigma(v_{j_1}\otimes \cdots \otimes v_{j_n}\otimes v_{i_1}\otimes \cdots \otimes v_{i_m})
		\end{split}
	\]
	注意到$\sigma$跑遍所有置换，那么$\sigma$和$\tau$的复合$\sigma'=\sigma\circ\tau$也跑遍所有置换，且
	\[(-1)^{\sign(\sigma')}=(-1)^{\sign(\sigma)}(-1)^{\sign(\tau)},\]所以
	\[
		\begin{split}
			\eta \wedge \xi&=\frac{\xi^{i_1\cdots i_m}\eta^{j_1 \cdots j_n}}{m!n!}\sum_{\sigma'\in S^{m+n}}(-1)^{\sign(\sigma')}\sigma'(v_{j_1}\otimes \cdots \otimes v_{j_n}\otimes v_{i_1}\otimes \cdots \otimes v_{i_m})\\
			&=\frac{\xi^{i_1\cdots i_m}\eta^{j_1 \cdots j_n}}{m!n!}\sum_{\sigma\in S^{m+n}}(-1)^{\sign(\sigma)}(-1)^{\sign(\tau)}\sigma(v_{i_1}\otimes \cdots \otimes v_{i_m}\otimes v_{j_1}\otimes \cdots \otimes v_{j_n})\\
			&=(-1)^{\sign(\tau)}\frac{\xi^{i_1\cdots i_m}\eta^{j_1 \cdots j_n}}{m!n!}\sum_{\sigma\in S^{m+n}}(-1)^{\sign(\sigma)}\sigma(v_{i_1}\otimes \cdots \otimes v_{i_m}\otimes v_{j_1}\otimes \cdots \otimes v_{j_n})\\
			&=(-1)^{\sign(\tau)} \xi \wedge \eta.
		\end{split}
	\]
	代入$(-1)^{\sign(\tau)}=(-1)^{mn}$即得证\no{2}.

	第三个性质，也就是结合律的证明可以类比张量积结合律的证明，定义
	\[
		\xi \wedge \eta\wedge \zeta=\frac{1}{m!n!h!}\sum_{\sigma\in S^{m+n+h}}(-1)^{\sign(\sigma)}\sigma(\xi \otimes \eta \otimes \zeta),
	\]
	然后就是直接的计算
	\[
		(\xi \wedge \eta) \wedge \zeta=\xi \wedge \eta\wedge \zeta=\xi \wedge (\eta \wedge \zeta).
	\]
	\qed

\para 留意$v,w\in \Omega^1(V)=V^*$的外积$v\wedge w$是有趣的。首先，显然地，$\omega\wedge\omega=0$。然后容易证明对$a,b\in V$
\[
	v\wedge w(a,b)=v(a)w(b)- w(a)v(b)=\begin{vmatrix}v(a)&v(b)\\w(a)&w(b)\end{vmatrix}.
\]
对于多个$\omega_i \in \Omega^1(V)$的外积，我们可以用归纳法证明
\[
	\omega_1\wedge \cdots \wedge\omega_p(v_1,\dots,v_p)=
	\begin{vmatrix}
		\omega_1(v_1)&\cdots&\omega_p(v_p)\\
		\vdots&\ddots&\vdots\\
		\omega_p(v_1)&\cdots&\omega_p(v_p)
	\end{vmatrix}.
\]

\para 还有一个很类似的结论，对于多个$\omega_i \in \Omega^1(V)$的外积来说我们有$\omega_i \wedge \omega_j=-\omega_j \wedge \omega_i$，而且是线性的。我们考虑$p$个$\omega_i \in \Omega^1(V)$之间的外积$F(\omega_1, \dots,\omega_n)=\omega_1\wedge \cdots \wedge \omega_p$，
如果矢量空间$V^*$的基是$\{v_i\}$，由于$F$是反对称线性映射，我们有熟知的分解：
\[
	F(\omega_1, \dots,\omega_p)=\det(\omega_1, \dots,\omega_p)F(v_1, \dots,v_p),
\]
或者写作
\[
	\omega_1\wedge \cdots \wedge \omega_p=
	\begin{vmatrix}
		\omega_{11}&\cdots&\omega_{p1}\\
		\vdots&\ddots&\vdots\\
		\omega_{1p}&\cdots&\omega_{pp}
	\end{vmatrix}
	v_1\wedge \cdots \wedge v_p.
\]
其中$\omega_{ij}$值的是$\omega_i$在$v_j$方向的分量值。从这里可以看到，若$\omega_i$们线性相关的，则$\omega_1\wedge \cdots \wedge \omega_p=0$.若$V^*$的维度是$n$，而$p>n$，则$\omega_i$必然线性相关，则$\omega_1\wedge \cdots \wedge \omega_p=0$.

\para 特别地，如果$\omega'=\dd x'$和$\eta'=\dd y'$，且$x'$和$y'$可以看做$x$和$y$的函数，而
\[
	\dd x'=\partial_x x' \dd x+\partial_y x' \dd y,\quad \dd y'=\partial_x y' \dd x+\partial_y y' \dd y,
\]
因此
\[
	\dd x'\wedge \dd y'=\det\left(\frac{\partial(x',y')}{\partial (x,y)}\right)\dd x\wedge \dd y,
\]
其中$\partial(x',y')/\partial (x,y)$是$(x',y')$关于$(x,y)$的Jacobian. 如果还记得积分学的一些基本事实，会发现这就是和重积分变量替换公式是如此的相似。实际上，对于二个变量的重积分变换公式，他写作
\[
	\int_S\dd x' \dd y'=\int_S\left|\det\left(\frac{\partial(x',y')}{\partial (x,y)}\right)\right|\dd x \dd y,
\]
其中绝对值的引入是因为换变量可能会改变积分区域的定向。

所以，从这个角度来看，正如我们对于$\dd x$是无穷小距离的直观一样，我们可以认为$\dd x\wedge \dd y$是无穷小面积。

\para 设$\{e^i:1\leq i \leq n\}$是$V^*$的一组基，则$\{e^{i_1}\wedge \cdots \wedge e^{i_k}\}$是$\Omega^k(V)$的一组基。于是当$k>n$时$\Omega^k(V)=0$，当$0\leq k \leq n$时，$\dim \Omega^k(V)=\tbinom nk$.

\lem （Cartan引理）设$\{v_i:1\leq i \leq r\}$和$\{w_i:1\leq i \leq r\}$是$V^*$中的两组矢量，且$\sum_{i=1}^rv_i\wedge w_i=0$。如果$\{v_i\}$线性无关，则每个$w_i$可以由$\{v_i\}$线性组合而成$w_i=\sum_{i=1}^r\alpha_{ij}v_j$，且$\alpha_{ij}=\alpha_{ji}$.

\proof
	将$\{v_i\}$扩充为一组基，则$w_i=\sum_{i=1}^r\alpha_{ij}v_j$，将其代入条件$\sum_{i=1}^rv_i\wedge w_i=0$有
	\[
		0=\sum_{j=1}^n\sum_{i=1}^r \alpha_{ij}v_i \wedge v_j=\sum_{1\leq i < j \leq n}(\alpha_{ij}-\alpha_{ji}) v_i \wedge v_j+\sum_{j=r+1}^n\sum_{i=1}^r \alpha_{ij}v_i \wedge v_j,
	\]
	由于$v_i \wedge v_j$是$\Omega^2(V)$的一组基，所以$\alpha_{ij}=0$当$j>r$，且$\alpha_{ij}=\alpha_{ji}$当$j\leq r$.\qed

% \lem 设$\{v_i:1\leq i \leq r\}$是$V^*$中的一族线性无关的矢量，设$w$是一个$V$上的$p$-形式，则存在$\{\psi_i\in \Omega^{k-1}(V):1\leq i \leq r\}$使得$w=\sum_{i=1}^rv_j\wedge \psi_i$，当且仅当$v_1\wedge\cdots\wedge v_r\wedge w=0$.

\chapter{Partition of Unity}

函数$f$的支集$\supp(f)$被定义为$\{x\in M:f(x)\neq 0\}$的闭包。

\para \label{POUdef} 单位分解：设$\{U_\alpha\}_{\alpha\in I}$是$M$的一个开覆盖，如果存在至多可数个光滑函数$g_i\in \cal(M)$满足：

\no{1} 对于任意的$x\in M$和$i\in I$，都有$0\leq g_i(x)\leq 1$.

\no{2} 对每个$g_i$，都存在一个${\alpha_i}$使得$\supp(g_i)\subset U_{\alpha_i}$.

\no{3} 集族$\{\supp(g_i)\}$局部有限，即任取$p\in M$，存在$p$的邻域$U$使得$U$只和集族$\{\supp(g_i)\}$中的有限个集合相交非空。

\no{4} 因为上一个性质，所以在一点累加$g_i$时，只有有限项非零。我们最后的要求就是$\sum_i g_i=1$.

则称$\{g_i\}$是从属于开覆盖$\{U_\alpha\}_{\alpha\in I}$的一个单位分解。

\lem \label{POU}流形$M$上的每一个开覆盖都存在从属于他的单位分解。

\para （$\rr$上的截断函数）在$\rr$上存在光滑函数$h:\rr\to\rr$，使得
\[
	h(x)=
		\begin{cases}
		0,&|x|\geq 1;\\
		1,&|x|\leq 1/2.
		\end{cases}
\]
他的图像大概就是在$0$附件鼓起来一块，然后其他地方全都为零，所以有时候也叫他鼓包函数。单位分解中的任意一个函数都长得和他差不多。

构造这样的函数，我们可以只构造$x<0$的部分，然后将其偶函数拓展到$\rr$上，因为在$0$附近是常值函数，所以这样构造出的函数是$\rr$上的光滑函数。剩下的关键在于找一个$\rr$上的光滑函数，他在一段区间上可以光滑连接两个阶梯$0$和$1$。

可以证明
\[
	\varphi(x)=
		\begin{cases}
			\exp(-1/x),&x> 0;\\
			0,&x\leq 0,
		\end{cases}
\]
是一个光滑函数，正半轴的图像大概是在原点为0，在无穷远为1，中间光滑连接。那么光滑函数
\[
	g(x)=\frac{\varphi(x)}{\varphi(x)+\varphi(1-x)},
\]
就是在$[0,1]$上连接两个阶梯的光滑函数。实际上，他在$x<0$的时候是0，而在$x>1$的时候是1，中间光滑连接。

那么我们所需的$h$就可以如下构造：在$x<0$的时候，$h(x)=g(2x+2)$，仍然扩充为$\rr$上的偶函数。

\para （$\rr^n$上的截断函数）由于$\rr^n$上的范数、或者标准内积是光滑的，则$\rr^n$上存在光滑函数$f(x)=h(\|x\|)$，使得
\[
	f(x)=
		\begin{cases}
		0,&\|x\|\geq 1;\\
		1,&\|x\|\leq 1/2.
		\end{cases}
\]

\para 设$M$是一个局部紧的第二可数空间，则存在一列开集$\{G_i\}$，使得每个$\bar{G}_i$都是紧集，$\bar{G}_i\subset G_{i+1}$，且$\cup_iG_i=M$.这样的一列开集被称为$M$上的一个穷竭。

\proof 任取$x\in M$，由于$M$是局部紧的，所以我们可以找一个邻域$V_x$使得$\bar{V}_x$是紧集。由于$M$第二可数，有可数基，所以我们可以找至多可数个$x$使得$V_x$构成$M$的一个开覆盖，由于至多可数，所以我们可以利用正数将其编号。随便选定一个编号就好，我们令$G_1=V_1$，然后假设在$0<i<n$的时候$G_i$都已经定义，那么考虑紧集$\cup_{i<n}\bar{G}_i$，开覆盖$\{V_j\}$中可以找到一个有限子覆盖，对应着有限指标集$I$，使得$\cup_{j\in I}V_j$也是$\cup_{i<n}\bar{G}_i$的开覆盖，取$k=\sup(I)$，则
\[
	\bigcup_{i<n}\bar{G}_i\subset \bigcup_{j\leq k}V_j,
\]
那么定义$G_n=\cup_{j\leq k}V_j$，我们就归纳地找到了$M$上的一个穷竭。\qed

由于任意的微分流形都是局部紧且第二可数的，所以任意的微分流形上都存在穷竭。现在，我们来证明\lemref{POU}：

\proof 设$\{U_{\alpha}\}$是流形$M$的一个开覆盖。在$M$上找一个穷竭$\{G_i:i>0\}$，并令$G_0=\varnothing$，现在取$A_i=\bar{G}_i-G_{i-1}$，则显然$\{A_i:i>1\}$是一组闭集，而流形Hausdorff性告诉我们，因为$A_i$是紧集$\bar{G}_i$的闭子集，所以他也是紧的。

此外，$\{A_i:i>1\}$是$M$的一个覆盖。这是因为，如果集合$U\cap A_i=\varnothing$，则$U\subset G_{i-1}\cup (M-\bar{G}_{i})$。如果对每一个$i$都成立的话，则$U$属于$\{G_{i-1}\cup (M-\bar{G}_{i})\}_i$的交，但按照穷竭的定义，这是一个空集。

固定一个$A_i$，取$x\in A_i$，找一个坐标卡$(U_x,\varphi_x)$，使得$\varphi_x(U_x)$是欧式空间中半径为$2$的开球，$U_x$位于某个开覆盖$U_{\alpha(x)}$之中，且$U_x\cap A_j=\varnothing$当$|j-i|>1$。

前面两点是显然的，关于第三点，由于处理$A_i\cap A_{i-1}= \bar{G}_{i-1}-G_{i-1}$以及平凡的$A_i\cap A_i=A_i$，其他的$A_i\cap A_j=\varnothing$，所以对于$|j-i|>1$的$A_j$，我们有$A_i\subset M-A_j$，而$M-A_j$是一个开集，所以只要把$U_x$选得足够小，使得$U_x\subset M-A_j$，我们就有$U_x\cap A_j=\varnothing$当$|j-i|>1$成立。或者稍微弱一点的说法，$U_x$只与有限个$A_j$相交。

设$h$是$\rr^n$上的截断函数，那么我们定义
\[
	h_x(p)=\begin{cases}h\circ \varphi_x(p),& p\in U_x,\\
	0,&\text{otherwise},
	\end{cases}
\]
显然$h_x$是$M$上的光滑函数，实际上，同胚意义下，在半径为2的开球内，在半径大于1的时候以及是常值函数0了，所以在外面拼上0就构成了$M$上的光滑函数。

令开球内半径为$r$的闭球为$B_r$，那么$B_{1/2}$着截断函数恒为1的部分，$B_{1}$对应着截断函数非零的部分，以及开集$V_x=\varphi_x^{-1}(B_{1/2})$，则$h_x|_{V_x}=1$.显然，$\supp(h_{x})=\overline{\varphi_x^{-1}(B_1)}$，因为$\varphi_x$是一个同胚，所以$\supp(h_{x})=\varphi_x^{-1}(\bar{B}_1)\subset U_x$是一个紧闭集。

由于$A_i$是紧的，所以存在有限个点$\{x_{ij}\in A_i:1\leq j\leq k_i\}$使得
\[
	A_i\subset \bigcup_{j=1}^{k_i}V_{x_{ij}}.
\]
这样选取的$\{\supp(h_{x_{ij}})\}$局部有限，这是因为对固定的$i>1$和$j$，$\supp(h_{x_{ij}})\subset U_{x_{ij}}\subset A_{i-1}\cup A_i\cup A_{i+1}$，然后任取$p\in M$，我们都有$U_p$只和有限个$A_i$相交，而对每一个$i$，$j$都是有限的，所以$U_p$最多只和有限个$\supp(h_{x_{ij}})$相交\footnote{这里用了一个直观：设$A\subset B$，则只有当$C\cap B$非空的时候才有可能$C\cap A$非空。}。

设$\varphi(p)=\sum_{i,j}h_{x_{ij}}(p)$，由于在每一点$U_p$至多只和有限个$\supp(h_{x_{ij}})$相交，所以这个求和有意义。此外，因为$U_p$总和某个$A_i$相交，那么也总和某个$V_{x_{ij}}$相交，而$h_{x_{ij}}$在$V_{x_{ij}}$非零。所以$\varphi(p)\geq h_{x_{ij}}(p)>0$.

最后，我们验证$\{h_{x_{ij}}/\varphi\}_{i,1\leq j\leq k_i}$就是$M$上从属于开覆盖$\{U_\alpha\}$的单位分解。首先，他是至多可数的，然后任取$p\in M$，由于$\varphi$的定义，
\[
	\sum_{i,j}h_{x_{ij}}(p)/\varphi(p)=1
\]
显然成立。并且$\supp(h_{x_{ij}}/\varphi)=\supp(h_{x_{ij}})\subset U_{x_{ij}}$，因为选坐标的时候$U_{x_{ij}}$选在某一个开覆盖$U_{\alpha(x_{ij})}$里面，所以上面的一切就告诉我们$\{h_{x_{ij}}/\varphi\}_{i,1\leq j\leq k_i}$就是$M$上从属于开覆盖$\{U_\alpha\}$的单位分解。\qed

其实我们构造地得比单位分解引理要求还要多一点。在这里，我们找到了开覆盖$U_{\alpha}$的一个局部有限开加细$\{V_{ij}\}$，设我们找到的单位分解为$h_{ij}$，令$\Gamma=\{\alpha(x_{ij}):i,1\leq j\leq k_i\}$（我们是可能存在$\beta$不包含任意一个$U_{x_{ij}}$的，就是说，$\beta\notin \Gamma$），以及
\[
	h_{\alpha}=\sum_{\alpha(x_{ij})=\alpha}h_{ij},
\]
如果再令$h_{\alpha}=0$当$\alpha\notin \Gamma$，则$\{h_{\alpha}\}$是$M$上的光滑函数族，$0\leq h_\alpha\leq 1$，$\sum_{\alpha}h_\alpha=1$且$\supp(h_\alpha)\subset U_{\alpha}$. 当然，前面$\supp(h_{ij})$还是紧的，这里$\supp(h_\alpha)$就不一定是紧的了。

\lem 设$A\subset U$，其中$U$是$M$中的开集，而$A$是闭集。再设$f:M\to V$是一个连续映射，其中$V$是一个$\rr^n$中的开集，并且$f|_{U}$是光滑的，那么对任意$M$上的正连续函数$\epsilon(x)$，则存在光滑函数$g:M\to W$使得$f|_A=g|_A$且$\|f(x)-g(x)\|\leq \epsilon(x)$.

\proof
	先对$U=\varnothing$的情况证明。如果$V\neq \rr^n$，那么我们可以定义
	\[
		\epsilon'(x)=\min\left(\epsilon(x),\frac{1}{2}\inf\bigl(\|h(x)-y\|,y\in \rr^n-V\bigr)\right),
	\]
	如果使用$\epsilon'(x)$代替$\epsilon(x)$且存在$g$，则我们自然会有$g(M)\subset V$.所以我们不妨设$V=\rr^n$.

	由$f$和$\epsilon$的连续性，任意的$x\in M$都存在开邻域$U_x$使得对任意的$y\in U_x$都成立$\epsilon(y)\leq \epsilon(x)/2$以及$\|f(y)-f(x)\|\leq \epsilon(x)/2$，找从属于$\{U_x\}$的一个单位分解$\{h_i\}$，则对于每一个$i$，取$x_i\in M$使得$\supp h_i\subset U_{x_i}$。我们定义$g(x)=\sum_i h_i(x)f(x_i)$，则
	\[
	\begin{split}
		\|g(x)-f(x)\|&=\left\|\sum_i h_i(x)(f(x_i)-f(x))\right\|\leq \sum_i h_i(x)\|f(x_i)-f(x)\|\\
		&=\sum_{h_i(x)\neq 0} h_i(x)\|f(x_i)-f(x)\|\leq  \sum_{h_i(x)\neq 0} h_i(x)\epsilon(x_i)/2\\
		&\leq  \sum_{h_i(x)\neq 0} h_i(x)\epsilon(x)=\epsilon(x).
	\end{split}
	\]
	这样我们就证明完了特殊情况。

	现在对于$M$的开子流形$M-A$，我们可以应用这个特殊情况，在$M-A$对$\epsilon|_{M-A}$可以找到一个函数$M-A$上的光滑函数$g:M-A\to U$，使得在$M-A$上成立$\|f|_{M-A}(x)-g(x)\|\leq \epsilon|_{M-A}(x)$.

	然后对$U$和$M-A$应用单位分解，找到两个光滑函数$h_1$和$h_2$，$h_1$在$A$上恒为1，在$U$外恒为0，$h_2$则正好相反，因为$h_1+h_2=1$.那么$h_1f+h_2g$就是一个$M$上的光滑函数，而且满足所有我们需要的条件。
\qed

\pro 设$f:M\to U$是一个连续映射，$U$是$\rr^n$中的开集，则他同伦于一个光滑映射$g:M\to U$.

\proof 设$U$是$\rr^n$中的开集，如果$f:M\to U$是一个连续函数，则在$M$的每一点$x$，我们连续地找一个$\epsilon(x)>0$使得以$f(x)$为球心的，$\epsilon(x)$为半径的开球完全处于$U$内，那么按上面的引理，我们可以找到$M$上的一个光滑函数$g$使得$\|g(x)-f(x)\|<\epsilon(x)$对$x\in M$恒成立，则我们定义$H(x,t)=tf(x)+(1-t)g(x)$，由于
\[
	\|H(x,t)-f(x)\|=(1-t)\|f(x)-g(x)\|\leq \epsilon(x),
\]
所以$H(x,t)\in U$，这样$H(x,t):M\times [0,1]\to U$就是$f$和$g$的一个同伦映射。\qed

\lem 设光滑映射$f:M\to U$和$g:M\to U$同伦，其中$U$是$\rr^n$中的开集，则我们可以找到一个光滑的同伦映射$H:M\times \rr\to U$满足$F(x,0)=f_1(x)$和$F(x,1)=f_2(x)$.

\proof 令$\varphi:R\to [0,1]$为这样一个光滑函数，他在$t\leq 1/3$的时候恒为0，他在$t\geq 2/3$的时候恒为1，中间光滑连接。因为$f$和$g$是同伦的，必然存在连续的同伦映射$F:M\times [0,1]\to N$，令$G(x,t)$为$F(x,\varphi(t))$，则这样我们定义了连续函数$G:M\times \rr \to N$，他在$M\times (-\infty,1/3)\cup M\times (2/3,\infty)$上光滑。因为，$M\times \{0,1\}$是他的一个闭子集，所以根据上面的引理，我们可以找一个$M\times \rr$上的光滑函数$H$使得$G$和$H$在$M\times \{0,1\}$上相同。\qed

虽然我们没有证明，但实际上，每一个光滑流形都可以嵌入欧式空间内。所以这些命题也就推出了看上去更广义的命题：光滑流形间的一个连续映射可以同伦于一个光滑映射；流形间同伦的光滑映射之间有光滑的同伦映射。所以按照这俩命题，两个光滑流形间的同伦类只要对光滑的情况讨论就好。

\chapter{The Covering Space and Topological Group}

\section*{Covering Space}

\textbf{\eqref{homotopy}} 复习一下：两个连续函数$f$, $g:X\to Y$被称为{\kaishu 同伦}的，就是说存在一个连续函数$H:X\times [0,1]\to Y$使得$H(0,x)=f(x)$以及$H(1,x)=g(x)$.同伦是等价关系，就是说，如果还有$h$和$f$同伦，则$g$和$h$也同伦。一个空间$X$是可缩的，如果$\id_X$同伦于映到自身的常值映射。比如$\rr^n$或者与他同胚的开实心球$D^n$都是可缩的。

两个拓扑空间$X$和$Y$称为同伦等价的，如果存在$f:X\to Y$和$g:Y\to X$满足$f\circ g$和$\id_Y$同伦以及$g\circ f$和$\id_X$同伦。

\para 如果$p$和$q$是连续路径$[0,1]\to X$，其中$X$是拓扑空间，如果存在一个同伦$H$满足$H(t,0)=p(0)=q(0)$, $H(t,1)=p(1)=q(1)$，那么我们就称这两条路径为{\kaishu 道路同伦}的，记做$p \approx q$.容易看到，道路同伦是一个等价关系，道路同伦的道路构成的等价类被称为道路类，设$p$是其中一个代表元，则道路类记做$[p]$.

如果$f:[0,1]\to[0,1]$是一个连续函数满足$f(0)=0$以及$f(1)=1$，那么$p\approx p\circ f$因为有道路同伦$H(t,u)=p\bigl(tf(u)+(1-t)u\bigr)$. 我们称$p\circ f$是道路$p$的一个重参数化，所以道路在重参数化后依然道路同伦于自己。

设$p : [0,1] \to X$和$q : [0,1] \to X$是拓扑空间$X$中的两条路径，他们头尾相接，即$p(1)=q(0)$，那么我们能构造一个新的连续路径$p\cdot q$通过
\[
	(p\cdot q)(t)=
	\begin{cases}
		p(2t) &0 \leq t\leq 1/2,\\
		q(2t-1)&1/2 \leq t\leq 1.\\
	\end{cases}
\]
不难检验$(p\cdot q)\cdot r \approx p\cdot (q\cdot r)$因为这俩条路径不过差一个重参数化而已。同时我们也能定义道路逆$\bar{p}$通过$p^{-1}(t)=p(1-t)$.

\para 设$x_0\in X$，则所有满足$p(0)=p(1)=x_0$（被称为一个{\kaishu 回路}）的连续路径$p:[0,1]\to X$按上述运算在道路同伦意义下构成一个群。换句话说，回路$p$在道路同伦下确定到一个等价类$[p]$，我们定义的回路的乘法和逆在等价类上诱导的乘法和逆满足群公理。具体检验，比如乘法结合律，可以利用重参数化等手段，这里不具体展开了。这个群被称为$X$在$x_0$处的{\kaishu 基本群}，记做$\pi_1(X,x_0)$，下标$1$的意思其实是指他是第一同伦群。

如果$X$是道路连通的，那么基本群处处同构，实际上，我们可以找一个路径连接$x_0$和$x_1$，记做$\alpha$，则基点在$x_0$处的回路$p$，我们可以通过$\alpha \cdot p \cdot \alpha^{-1}$定义出$x_1$处的回路，然后不难检验$f:[p]\mapsto [\alpha] \cdot [p] \cdot [\alpha]^{-1}$是基本群的同构。

如果$X$的基本群是平凡的，则他被称为{\kaishu 单连通}的。

\para 设$f:X\to Y$是一个连续映射，则他自然诱导了基本群同态$f_*:\pi_1(X,x)\to \pi_1(Y,f(x))$通过$f_*[p]=[f\circ p]$.

不难验证，$(f\circ g)_*=f_*\circ g_*$，于是两个同伦等价的拓扑空间的基本群是同构的。因此，我们建立了一个拓扑空间范畴到群范畴的协变函子。

\textbf{\eqref{bundle}} 设$E$, $B$, $F$是三个拓扑空间，$\pi:E\to B$是一个光滑映射，若在每一点$p\in B$，都存在一个邻域$U$和同胚$\varphi$使得$\pi^{-1}(U)$同胚于$U \times F$，且如下交换图成立
\[
	\xymatrix{
		\pi^{-1}\left(U\right)\ar[rr]^\varphi \ar[dr]_\pi&&U\times F \ar[dl]^{\mathrm{proj}_1}\\
		&U&
		}
\]
则我们称$(E, B, \pi, F)$是一个以$B$为底，以$F$为纤维的纤维丛(fiber bundle)。此外，一般称呼$B\times F$为平凡丛，所以，纤维丛是局部平凡的。

\textbf{\eqref{covering_space}} 设$M$是底空间为$B$的一个纤维丛，他的纤维被赋予离散拓扑（比如继承了$\rr$拓扑的$\zz$，或者一个有限集），此时，$M$被称为$B$的一个覆叠空间，投影$\pi$现在被称为覆叠映射。一般来说，我们要求覆叠空间是连通的，如果覆叠空间还是单连通的，则被称为万有覆叠空间。

显然$\pi:t\mapsto \exp(2\pi it)$，是一个$\pi:\rr \to S^1$的覆叠映射，其中$S^1$是$\cc$内的单位圆周。

\pro 设$\pi:E\to B$是一个覆叠映射，那么对于路径$p:[0,1]\to B$是一条路径，且$y\in \pi^{-1}(p(0))$，那么存在唯一一条路径$P:[0,1]\to E$使得$\pi\circ P=p$且$P(0)=y$，这样的$P$被称为$p$的一个提升。

\proof 首先注意到，平凡覆叠空间上提升是一定唯一存在的，实际上，如果$y=(p(0),f)$，那么$P(t)=(p(t),f)$就是唯一的提升。然后，因为$[0,1]$是紧的，所以$p([0,1])$是紧的，那么存在有限个开集$\{U_i\}$覆盖$p([0,1])$，且存在一个划分$0<x_1<\cdots<x_n=1$使得对于每个$[x_i,x_{i+1}]$成立$p([x_i,x_{i+1}])\subset U_i$。因为局部平凡性导出了局部提升存在，然后把这有限条路径拼起来就好。唯一性由构造显然。\qed

\pro 如果$p$和$q$是$E$上的路径，满足$p(0)=q(0)$且$\pi\circ p$和$\pi\circ q$道路同伦，则$p$和$q$道路同伦。

假设同伦$h(t,s)$，固定$t$，$h_t(s)=h(t,s)$是一个路径，我们将其提升上去变成$H_t(s)$，剩下只要检验他还对$t$连续且$H_0=P$以及$H_1=Q$即可，这里略去。

\para 覆叠映射$\pi$诱导的基本群同态$\pi_*$是单同态，这是因为，覆叠空间的道路类自然地由$\pi_*$诱导出了底空间的道路类，又由上一条，这诱导出的道路类提升后又恰好是原道路类。

这意味着，一般而言，覆叠空间的基本群比底空间的基本群简单。因为，万有覆叠空间的基本群已经是最简单的了，所以在这意义上，万有覆叠空间是最大的覆叠空间。

\para 如果$B$是单连通的，$E$是$B$的道路连通的覆叠空间，则$E$同胚于$B$.

实际上，因为覆叠映射局部是同胚，所以我们只要证明他是双射就好了，首先他肯定是满的。现在设$\pi(x)=\pi(y)$，以及设$p$连接$x$和$y$，那么$\pi\circ p$在底空间中是一个回路，因为底空间道路连通，他的基本群平凡，所以$\pi\circ p$道路同伦于平凡回路（即一个常值映射），那么$p$也道路同伦于一个平凡回路，因此$x=y$.

这又再一次佐证了万有覆叠空间是最大的覆叠空间。

\para 对拓扑空间而言，研究他的覆叠空间，通常会做一些方便的假设，比如流形会被取作道路连通以及局部道路连通。而对流形的覆叠空间，我们一般会加强定义中条件，要求局部微分（对光滑流形就是光滑）同胚，这样，覆叠空间就有了自然的流形结构。因为流形很强的拓扑结构，所以上面那些方便的假设在流形的语境里面就变得相当自然。

\theo 对于道路连通以及局部道路连通的拓扑空间，如果他局部可缩，即每一点都存在一个可缩的邻域，那么他存在万有覆叠空间。

证明就不证明了，事实上，适当改弱结论，我们甚至可以得到一个充分必要条件。在流形上，局部可缩是自然满足的，因为流形上每一点都有一个邻域同胚于欧式空间的开集，而欧式空间里，开球们组成了拓扑基且开球显然是可缩的。所以对于连通的流形，他就有万有覆叠空间。

\para 设$\pi:E\to B$是一个覆叠映射，如果$X$道路连通以及局部道路连通以及连续映射$f:X\to B$，取定$x\in X$以及$e\in \pi^{-1}(f(x))$，则存在分解$f:X\xrightarrow{f'} E\xrightarrow{\pi} B$满足$f'(x)=e$的充要条件是$f_*(\pi_1(X,x))\subset \pi_*(\pi_1(E,e))$.

这个命题被称为映射提升定理，从范畴角度来看，这里定理可以理解为，群范畴上分解
\[f_*:\pi_1(X,x)\xrightarrow{f'_*} \pi_1(E,e)\xrightarrow{\pi_*} \pi_1(B,f(x))\]
和拓扑空间范畴上有分解
\[f:X\xrightarrow{f'} E\xrightarrow{\pi} B\]
的存在性等价。当然这比上面充要条件还强一些。

必要性是显然的，充分性是直接的构造。

假设$f_*(\pi_1(X,x))\subset \pi_*(\pi_1(E,e))$，任取$y\in X$，然后取一个$x$到$y$的道路$\alpha$，那么可以把$f'(y)$定义为道路类$[\beta]=f_*([\alpha])$从$e$出发的提升的道路类（道路类的提升）的终点。这样定义的$f'(y)$和$\alpha$的选取没有关系，因为如果有两条$\alpha_1$和$\alpha_2$，则$\alpha_1\cdot\alpha_2^{-1}\in \pi_1(X,x)$，由假设条件$\beta_1\cdot\beta_2^{-1}\in \pi_*(\pi_1(E,e))$，他的提升是一个闭道路，即$\beta_1$和$\beta_2$有着相同的终点。

至于构造的$f'$的连续性，以及在流形语境下的$f'$的光滑性，这里就略去检验了。

\para 假设$X$是单连通的，则上述定理条件一定满足，因为$f_*(\pi_1(X,x))$就是单位元。考虑两个万有覆叠映射$\pi_1:M'\to M$以及$\pi_2:N'\to N$，由于$M'$是单连通的，所以按照上面的映射提升定理，存在提升$f':M'\to N'$使得下面的图表成立。
\[
\xymatrix{
	M'\ar@{-->}[rr]^{f'} \ar[d]_{\pi_1}&&N' \ar[d]^{\pi_2}\\
	M\ar[rr]^{f}&& N
}
\]
这就构成了万有覆叠空间的函子性质，就是说，拓扑空间之间的连续映射将诱导出他们万有覆叠空间之间的连续映射。

前面我们已经知道，覆叠映射诱导的基本群同态是单同态，这里要更加细化这些关系。

\pro 设覆叠映射$\pi:E\to B$，且$\pi(e)=b$，记$\pi_*(\pi_1(E,e))=H_e$，则他是$\pi_1(B,b)$的子群。那么$\pi^{-1}(b)$的元素和$H_e$在$\pi_1(B,b)$中的右陪集一一对应。特别地，如果$\pi$是万有覆叠映射，那么$\pi^{-1}(b)$和$\pi_1(B,b)$之间存在双射。

\proof 由于$\pi_1(B,b)$中的每一个道路类$[\alpha]$都存在从$e$出发提升的道路类$[p(\alpha)]$，设他的终点为$q([\alpha])$，这样就定义了映射$q:\pi_1(B,b)\to \pi^{-1}(b)$，他是满的，因为任取$e'\in \pi^{-1}(b)$，我们取一条$e$到$e'$的道路$a$，令$\alpha=\pi\circ a$，则$q([\alpha])=e'$.

下面证明$q([\alpha])=q([\beta])$当且仅当$[\alpha][\beta^{-1}]\in H_e$. 如果$q([\alpha])=q([\beta])$，则$[p(\alpha)]$和$[p(\beta)]$的终点相同，因此，我们可以讨论$[p(\alpha)\cdot p(\beta)^{-1}]$，他是$[\alpha][\beta^{-1}]$的提升，同时也是一个以$e$为基点的闭道路，所以$[\alpha][\beta^{-1}]\in H_e$.

反之，记$[\gamma]$为$[\beta^{-1}]$以起点为$q([\alpha])$的提升，如果$[\alpha][\beta^{-1}]\in H_e$，则$\gamma$的终点就是$e$，此时$\gamma^{-1}$就是$\beta$的提升的道路，他两个端点都与$p([\alpha])$相同，所以$q([\alpha])=q([\beta])$.

因为$q([\alpha])=q([\beta])$当且仅当$[\alpha][\beta^{-1}]\in H_e$，也当且仅当$H_e[\alpha][\beta^{-1}]=H_e$或者$H_e[\alpha]=H_e[\beta]$.\qed

\section*{Topological Group}

\para 群$G$被称为一个拓扑群，如果他有拓扑空间结构且群运算是连续的群。

\para 显然左乘或者右乘是一个同胚，所以如果$U$是一个开集，那么$gU=\{gh:h\in U\}$也是一个开集。

\para 设$G$是拓扑群$G$是T$_1$的当且仅当含有单位元的开集们的交集$H$是$G$的子群。如果$x\in H$，那么$e\in xU^{-1}$里面，$U$是任意包含$e$的邻域而$U^{-1}=\{x^{-1}|x\in U\}$，因此$x\in \overline{\{e\}}$，反之亦然，所以$H=\overline{\{e\}}$，因此$H$是一个闭集，同样，他的陪集也都是闭集，故而商拓扑而得的拓扑群$G/H$中的单点集都是闭集。故而，$G$中的单点集是闭集当且仅当$H=\{e\}$.

所以拓扑群是T$_1$的当且仅当$\{e\}$是闭集。

\para 因为$\mu:(x,y)\mapsto x^{-1}y$是连续映射，所以如果$\{e\}$闭集，那么$\Delta=\mu^{-1}(e)\subset G\times G$是闭集，其中$\Delta=\{(x,x):x\in G\}$，故而$G$是一个Hausdorff空间（利用Hausdorff性的对角线判别法），所以在拓扑群语境下，T$_1$和T$_2$是等价的。

因此拓扑群是T$_2$的当且仅当$\{e\}$是闭集。

上面讨论了所有单位元邻域的交，由此产生了分离性的讨论。下面说明，任意一个单位元邻域都可以生成整个含有单位元的连通分支。

\para 对于连通拓扑群，设$U$是单位元的任意一个邻域，则$G=\bigcup_{n\geq 1}U^n$，其中$U^k=\{g_1\cdots g_k:g_i\in U,\, 1\leq i \leq k\}$是开集。

\proof 令$V=U\cap U^{-1}$，其中$U^{-1}=\{g^{-1}:g\in U\}$，显然$V=V^{-1}\subset U$以及$H=\bigcup_{n\geq 1}V^n\subset \bigcup_{n\geq 1}U^n$，而且$H$还是一个子群。下面我们只要证明$H=\bigcup_{n\geq 1}V^n$既是开的也是闭的，那么连通性自然给出了结论。

他是开的，如果$\sigma\in V^k$，那么$\sigma V\in V^{k+1}\subset H$就是他的一个开邻域。他是闭的，因为每一个$\sigma H$都是开的，于是$H=G-\bigcup_{\sigma\notin H}\sigma H$是一个闭集。\qed

结合上面两点不难看到，因为拓扑群有着代数结构，一般而言，这就使得拓扑群的很多拓扑性质都来自于其单位元附近的性质。

\para 设$f$和$g$是$G$中的道路，每一个时刻，利用群乘法我们有一个新的道路$t\mapsto f(t)g(t)$，记做$fg$. 显然，如果$f$和$f'$道路同伦，那么$fg$和$f'g$道路同伦，这可以很显然地直接构造出道路同伦映射。同理如果$g$和$g'$道路同伦，则$fg$和$fg'$道路同伦。

还记得，我们定义了道路的连接$f\cdot g$，在基点为单位元的回路情况下，$fg$和$f\cdot g$是两种运算，但我们指出，这两种乘法在道路同伦意义下是等价的，即，$[fg]=[f][g]$.

首先，$fg$显然是基于单位元$e$的连续回路。其次，注意到$(f_1\cdot g_1)(f_2\cdot g_2)=(f_1f_2)\cdot (g_1g_2)$.最后，因为$f \approx f\cdot e \approx e\cdot f$和$g\approx e\cdot g \approx g\cdot e$，所以成立
\[
\begin{split}
	fg&\approx f(g\cdot e)\approx (e\cdot f)(g\cdot e) \approx g\cdot f,\\
	fg&\approx f(e\cdot g)\approx (f\cdot e)(e\cdot g) \approx f\cdot g,
\end{split}
\]
因此$fg \approx f\cdot g\approx g\cdot f \approx gf$.

\para 故而，拓扑群$G$的基本群$\pi_1(G,e)$是交换群。

\para 我们知道，$\pi_1(G,e)$和$\pi^{-1}(e)$之间存在着双射$q$，所以短正合列
\[
	0\to \pi_1(G,e)\hookrightarrow G' \xrightarrow{\pi} G\to 0
\]
至少在集合意义下是成立的，其中正和性来自于$\pi_1(G,e)$被嵌入到$G'$中即是$\pi^{-1}(e)$，他经$\pi$作用就变成了$G$中的单位元。那么在群的情况下呢？这至少要求我们给$G'$一个群结构，使得$\pi$和$i\circ q$是群同态，其中$i:\pi^{-1}(e)\hookrightarrow G'$.

\theo 设$G$是道路连通的拓扑群，而$G'$是他的一个万有覆叠空间，覆叠映射为$\pi$，选定一个$e'\in \pi^{-1}(e)$，则$G'$上存在一个群结构，使得$e'$是$G'$的单位元，且使得短正合列
\[
	0\to \pi_1(G,e)\hookrightarrow G' \xrightarrow{\pi} G\to 0
\]
成立。

\proof 设$[\alpha_{g'}]$是$G'$中连接$e'$与$g'$的道路类，那么我们得到了道路类$[\pi\circ \alpha_{g'}]=[\beta_{g'}]$连接$e$和$\pi(g')$.反过来，$G$的道路类$[\alpha]$在$G'$中以$e'$为起点提升的唯一的道路类的终点记做$q([\alpha])$，和我们以前的习惯一样。显然$q([\beta_{g'}])=g'$，这是因为$[\alpha_{g'}]$是$[\beta_{g'}]$以$e'$为起点的提升，而提升是唯一的。

设$g'$和$h'$都是$G'$中的元素，此时由于$G$的群结构，在$G$中有道路类$[\beta_{g'}\beta_{h'}]$，我们定义$g'h'=q([\beta_{g'}\beta_{h'}])$.可以看到，我们定义的乘法即$q([\beta_{g'}])q([\beta_{h'}])=q([\beta_{g'}\beta_{h'}])$

这样定义的$g'h'$显然是唯一的，而且满足结合律$g'(h'k')=(g'h')k'$，这是因为$[(\beta_{g'}\beta_{h'})\beta_{k'}]=[\beta_{g'}(\beta_{h'}\beta_{k'})]$.

此外，单位元就是$e'$.因为$G'$万有覆叠空间，即他是单连通的，所以$\alpha_{e'}$道路同伦于$e'$处的平凡回路，则$\beta_{e'}=\pi\circ \alpha_{e'}$道路同伦于$G$中$e$处的平凡回路，所以$[\beta_{g'}\beta_{e'}]=[\beta_{g'}]=[\beta_{e'}\beta_{g'}]$.

最后是逆元的存在性，即对$g'$要存在一个$h'$使得$g'h'=e'$，再即$[\beta_{g'}\beta_{h'}]=[\beta_{e'}]$。设$\gamma$是$G$中$e$处的平凡回路，所以我们直接来解方程$\beta_{g'}\eta=\gamma$，可以解出$\eta(t)=\beta_{g'}(t)^{-1}$，我们定义$h'=q([\eta])$，不难验证$[\beta_{g'}\beta_{h'}]=[\gamma]$，所以这就是我们要求的逆元。

构造完了，我们检验$\pi$确实是群同态。这只要检验$\pi(g'h')=\pi(g')\pi(h')$，因为$g'h'=q([\beta_{g'}\beta_{h'}])$，即$\pi(g'h')$就是道路类$[\beta_{g'}\beta_{h'}]$的终点，也就是$\pi(g')\pi(h')$.此外$\pi(e')=e$这是显然的。

最后，我们检验$\pi_1(G,e)\hookrightarrow G'$是一个群同态，这就是要检验$q([\eta][\xi])=q([\eta])q([\xi])$，其中$[\eta]$, $[\xi]\in \pi_1(G,e)$，因为基本群里的元素都是回路，所以有$[\eta\xi]=[\eta][\xi]$，所以我们只要检验$q([\eta\xi])=q([\eta])q([\xi])$即可。

将$[\eta]$和$[\xi]$以$e'$为起点往上提升，然后再用$\pi$下降回来，他总可以写成某种$[\beta_{g'}]$和$[\beta_{h'}]$的形式，所以我们只要检验
$q([\beta_{g'}\beta_{h'}])=q([\beta_{g'}])q([\beta_{h'}])$，而这就是我们乘法的定义。\qed

\para 给予群结构之后，验证运算的连续性这里就不进行了。于是，道路连通的拓扑群的万有覆叠空间也有拓扑群结构。

\para 由上面这个定理，我们有群同构$\pi_1(G,e)\cong \ker(\pi)$.所以，对于道路连通的拓扑群，我们只要找到他的一个万有覆叠空间，那么覆叠映射的核就将给出拓扑群的基本群。

作为一个例子，我们知道$e^{2\pi it}:\rr\to S^1=\mathrm{U}(1)$是一个覆叠映射，且$\rr$可缩，所以$\rr$单连通，因此这还是一个万有覆叠映射，故$\pi_1(S^1,e)\cong \ker{\pi}=\zz$.

再来一个例子，$\mathrm{SU}(2)$是$\mathrm{SO}(3)$的万有覆叠，$\ker(\pi)=\{-I,I\}=\zz/2\zz$，所以$\pi_1(\mathrm{SO}(3),e)\cong \ker(\pi)=\zz/2\zz$.


\chapter{表示论基础}

\para 令$V$是一个域$k$（后面我们只会考虑$\rr$和$\cc$的情况）上的有限维矢量空间，群$G$的一个表示$(\pi, V)$指存在这样的一个群同态$\pi:G\rightarrow \mathrm{Gl}(V)$，使得
\[
	\pi(g)\pi(g')=\pi(gg'),\quad \pi(g^{-1})=\pi(g)^{-1},\quad \pi(e_G)=e_{\mathrm{Gl}(V)}
\]
成立。表示$(\pi, V)$的维度被定义为$V$的维度。

如果没什么会混淆的话，就直接略去$\pi$，写$gx$来表达$\pi(g)x$，当然还有用$Gx$来表达$\pi(G)x=\{\pi(g)x:g\in G\}$。如果$\pi$是一个单同态，那么我们称这个表示为忠实表示。

\para 同一个群$G$的两个表示$(\pi_1,V_1)$和$(\pi_2,V_2)$可以构造出新的表示：

\no{1} 直和：$(\pi_1\oplus \pi_2,V_1\oplus V_2)$即满足
\[
	(\pi_1\oplus \pi_2)(g)(x,y)=(\pi_1(g)x,\pi_2(g)y).
\]
或者简单地写作$g(x,y)=(gx,gy)$.

\no{2} 直积：$(\pi_1\otimes \pi_2,V_1\otimes V_2)$即满足
\[
	(\pi_1\otimes \pi_2)(g)(x\otimes y)=(\pi_1(g)x)\otimes (\pi_2(g)y).
\]
或者简单地写作$g(x\otimes y)=(gx)\otimes(gy)$.

\para 设$G$是一个群，$(\pi,V)$是他的一个表示，$W\subset V$是一个子空间，如果$\pi(G)W\subset W$则$W$称为不变子空间。显然，$\{0\}$和$V$是两个不变子空间，略去这两个平凡不变子空间，如果没有其他不变子空间了，则$V$被称为是不可约的，此时表示被称为不可约表示。如果一个表示能被分解成几个不可约表示的直和，则称该表示为完全可约的。

下面的一系列定义涉及表示的等价，当然还有很重要的Schur引理。

\para 设$G$有两个表示$(\pi_1,V_1)$和$(\pi_2,V_2)$，如果存在线性映射$T:V_1\to V_2$，对任意的$g\in G$都满足$\pi_2(g)\circ T=T\circ \pi_1(g)$. 这样的$T$被称为缠结映射。当缠结映射是同构的时候，两个表示被称为是等价的。显然，这是一个等价关系。自反对称显然，而传递性自然来自两个同构复合还是同构。

\lem 如果$\pi_1$和$\pi_2$之间存在缠结映射$T$，那么$\ker T$是$\pi_1$的不变子空间，而$\im T$是$\pi_2$的不变子空间。

\proof 因为$T(\pi_1(g)x)=\pi_2(g)Tx$对于任何$x$使得$Tx=0$的，都有$\pi_1(g)x$使得$T(\pi_1(g)x)=0$，所以前半句话证明完了。对于$\im T$中的元素$y$可以找到原象$x$，由于$\pi_2(g)y=\pi_2(g)Tx=T(\pi_1(g)x)$，则$\pi_2(g)y$也在$\im T$中，后半句话证完。\qed

\lem 相当有名的Schur引理：如果$(\pi_1,V_1)$和$(\pi_2,V_2)$是不等价的不可约表示，若存在缠结映射$T$，则$T=0$.换句话说，不等价的表示没有非平凡的缠结映射。

\proof 如果两个表示不等价，则$T$不是双射，所以$\ker T\neq \{0\}$，而他是不变子空间，由不可约性，则$\ker T= V_2$，同理$\im  T= \{0\}$，这就是说$T=0$。\qed

\para 反之，在复表示情况下，我们考虑不可约表示$(\pi_1,V_1)=(\pi_2,V_2)$的情况下。此时如果存在一个非平凡的双的缠结映射$T\neq I$使得$T\circ \pi(g)=\pi(g)\circ T$.

在复数域上，$T$一定存在一个本征值$\lambda$，令$E_\lambda$是$\lambda$的本征空间，任取$v\in E_\lambda$，我们有$T(\pi(g)(v))=\pi(g)\circ T(v)=\lambda\pi(g)(v)$，所以$\pi(G)E_\lambda\subset E_\lambda$，由$\pi$的不可约性，所以他要么是零空间，要么是全空间。而本征值的存在性说明了零空间不可能，所以本征空间就是全空间，这也就是说$T=\lambda I$.

\para 如果我们遇到的群是Abel群，那么他的不可约群表示也是可交换的，同时其本身就构成了一个缠结映射，即$T=\pi(g)$对任意的$h$成立$T\circ \pi(h)=\pi(h)\circ T$，所以通过上面的定理我们就可以知道，$\pi(g)=T=\lambda I$。

如果$V$是大于$1$维的，那么任意的$V$的子空间都是$\pi$的不变子空间，但不可约性否决了这点，所以我们得到了：凡Abel群的不可约复表示都是一维的。

\para 如果$(\star,\star)$是$V$上的一个内积，如果对任意的$g\in G$,$u,v\in V$有$(u,v)=(gu,gv)$，则我们称呼这个表示为幺正表示，幺正表示也可以写作$\pi(g)^{-1}=\pi(g)^\dag$。对于有限群我们总可以找到幺正表示，因为我们可以重新构造内积
\[
	(u,v)'=\frac{1}{|G|}\sum_{g\in G}(gu,gv),
\]
那么
\[
	(hu,hv)'=\frac{1}{|G|}\sum_{g\in G}(hgu,hgv)=\frac{1}{|G|}\sum_{hg\in G}(hgu,hgv)=\frac{1}{|G|}\sum_{k\in G}(ku,kv)=(u,v)'.
\]

幺正表示的好处是，一个不变子空间的正交空间也是不变的。对于一个有限维的幺正表示，如果不是完全可约的，那么就分解出一个不变子空间，他是不可约的，然后对这个不变子空间的正交空间，我们又得到了一个可约或不可约的不变子空间，靠着有限归纳（因为有限维），我们就得到了如果群存在一个有限维幺正表示，则这个表示一定是完全可约的。

\theo 结合上面所说的，我们就得到了Maschke定理：有限群的有限维表示总是完全可约的。 

\theo 在局部紧的拓扑群上存在Haar测度$\mu$，他是一个正则的左不变的Borel测度。所谓的左不变就是指对于一个集合$S$，通过左作用$L_g$，我们有$\mu(S)=\mu(L_gS)$，当然还有右作用和右不变的概念。

对于$G$上的可测函数$f$，上述测度满足
\[
	\int_G f(l_h g)\dd \mu(g)=\int_G f(g)\dd \mu(g),
\]
可以从中直接看出左不变的意义。以后我们将$\dd \mu(g)$直接写作$\dd g$.

\para 上面的定理我们不证明，同时也不证明如下命题：如果$G$是紧Lie群，则我们存在双不变（既左不变也右不变）测度$\mu$，且$\mu(G)$有限。

\pro 紧Lie群上存在幺正表示，所以紧Lie群的有限维表示总是完全可约的。 

换而言之，我们可以找到内积$\langle \star,\star\rangle$使得$\langle gx,gy\rangle=\langle x,y\rangle$。假设原本存在内积$\langle \star,\star \rangle$，那么再设$\dd g$是$G$上的Haar测度（因为紧所以存在，而且已经归一化），那么
\[
	\langle x,y\rangle'=\int_G \langle gx,gy \rangle \dd g
\]
就满足了要求。下面我们谈论紧Lie群的表示的时候，总使用幺正表示。

\para 对于Lie群$G$上的复值光滑函数$f$和$g$，我们可以定义内积为
\[
	(f,g)=\int_G f(h)g^*(h)\dd h,
\]
其中$*$代表的是复共轭。

\para 对于矢量空间$V$和$W$，$\Hom(V,W)$也有自然的矢量空间结构，所以如果已知$V$上有群表示$\pi_1$，以及$W$上有群表示$\pi_2$，则对于$A\in \Hom(V,W)$，我们可以定义群表示$(\pi_1^*\otimes\pi_2,\Hom(V,W))$如下
\[
	\pi_1^*\otimes\pi_2(g)A=\pi_2(g)A\pi_1(g)^{-1}.
\]
很容易验证$\pi_1^*\otimes\pi_2(g)\pi_1^*\otimes\pi_2(h)=\pi_1^*\otimes\pi_2(gh)$，所以这是一个群表示。为了省略空间，我们经常也直接记做$gA$.

对每一个群元$g$，表示诱导了映射$g:A\mapsto gA$，现在如果$A$是该映射的不动点$gA=A$，则有$A\pi_1(g)=\pi_2(g)A$。如果对每一个$g$，$A$都是其不动点，那么我们就称$A$是表示$\pi_1^*\otimes\pi_2$的不动点。那么对于群表示$(\pi_1,V)$和$(\pi_2,W)$，$A$就是一个缠结映射。

\para 利用Schur引理，假若$\pi_1$, $\pi_2$都是不可约的且不等价的，则群表示$(\pi_1^*\otimes\pi_2,\Hom(V,W))$的不动点集平凡（即只有$A=0$这一个不动点）。

假如$\pi$, $\rho$都是不可约的且不等价的，现在我们考虑线性映射$A\in \Hom(V,W)$在紧Lie群上的平均\footnote{在有限群上也有平均，所以下面一套对有限群也成立。}$\bar{A}=\int_G \pi^*\otimes\rho(g)A \dd g$，显然$\bar{A}$是一个不动点，因此由Schur引理，
\[
	\bar{A}=\int_G \rho(g)A\pi(g)^{-1}\dd g=0
\]
对任意的线性映射$A\in \Hom(V,W)$都成立。

同样，如果$\pi$, $\rho$等价，此时不妨就直接记$\pi=\rho$.因为$\bar{A}$是一个缠结映射，那么由Schur引理，$\bar{A}=\lambda_{\bar{A}} I$，所以
\[
	\int_G \pi(g)A\pi(g)^{-1}\dd g=\lambda_{\bar{A}} I
\]
对任意的线性映射$A\in \Hom(V,V)$都成立，但是由于$\lambda_{\bar{A}}$并不已知，所以这公式用着不是很方便。为了求出$\lambda_{\bar{A}}$，两边求迹，就有$\tr(A)=\lambda_{\bar{A}} \dim V$，即$\lambda_{\bar{A}}=\tr(A)/\dim V$，所以我们也可以将上式写作更实用的形式
\[
	\bar{A}=\int_G \pi(g)A\pi(g)^{-1}\dd g=\frac{\tr(A)}{\dim V}I.
\]

\para 现在，为了做一点小小的计算，我们将固定矢量空间的基，此时任意的线性算子都可以看做矩阵。记$E_{ij}$为只在$(a,b)$位置为1，其他位置为0的矩阵。很容易可以计算得到$E_{ij}AE_{kl}=A_{jk}E_{il}$.现在对
\[
	\bar{A}=\int_G \rho(g)A\pi(g)^{-1}\dd g
\]
左乘$E_{ij}$，右乘$E_{kl}$，并令$A=E_{ab}$，可以得到
\[
	\int_G E_{ij}\rho(g)E_{ab}\pi(g)^{-1}E_{kl}\dd g=\int_G \rho(g)_{ja}E_{ib}\pi(g)^{-1}E_{kl}\dd g=\int_G (\rho(g))_{ja}\left(\pi(g)^{-1}\right)_{bk}E_{il}\dd g,
\]
由于$\pi$是幺正表示，所以$\left(\pi(g)^{-1}\right)_{bk}=\left(\pi(g)^{\dag}\right)_{bk}=\pi(g)_{kb}^*$，并记$\pi_{ia}:g\to \pi(g)_{ia}$为分量函数，则利用复函数内积的写法，上式可以写作
\[
	E_{ij}\overline{E_{ab}}E_{kl}=\left(\rho_{ja},\pi_{kb}\right)E_{il}.
\]

\para 设$\rho$和$\pi$都是不可约的，对于$\rho$和$\pi$不等价的情况，我们有$\overline{E_{ab}}=0$，所以$\left(\rho_{ja},\pi_{kb}\right)=0$.类似地，对于$\rho=\pi$的情况，我们有$\overline{E_{ab}}=\tr(E_{ab})I/\dim V=\delta_{ab}I/\dim V$，所以
\[
	\left(\pi_{ja},\pi_{kb}\right)E_{il}=E_{ij}\overline{E_{ab}}E_{kl}=\frac{\delta_{ab}}{\dim V}E_{ij}IE_{kl}=\frac{\delta_{ab}\delta_{jk}}{\dim V}E_{il},
\]
或者
\[
	\left(\pi_{ja},\pi_{kb}\right)=\frac{\delta_{ab}\delta_{jk}}{\dim V}.
\]

\para 令$\phi:G\to \mathrm{GL}(V)$是一个$G$的复表示，那么复值函数$\chi_\phi:G\xrightarrow{\phi}\mathrm{GL}(V)\xrightarrow{\tr}\cc:g\mapsto \tr(\phi(g))$被称为$\phi$的特征标。

对于紧Lie群的不可约幺正表示，我们有
\[
(\chi_\pi, \chi_\pi)=\sum_{i,j}(\pi_{ii},\pi_{jj})=\sum_{i,j}\frac{\delta_{ij}^2}{\dim V}=\sum_{i}\frac{1}{\dim V}=1,
\]
对于两个不可约的不等价表示，我们有$(\chi_\pi, \chi_\rho)=0$.

令$\hat{G}$是紧Lie群$G$的复不可约表示的等价类，那么由于是紧Lie群，有限维表示必然是完全可约的，就是说任何一个有限维表示能写作$\rho=\sum_{\pi\in\hat{G}}m(\rho,\pi)\pi$，其中$m(\rho,\pi)$是乘数，是一个自然数，就是说分解出来的等价的$\pi$各数。直接计算就可以得到$m(\rho,\pi)=(\chi_\rho,\chi_\pi)$,以及
\[
	(\chi_{\rho_1},\chi_{\rho_2})=\sum_{\pi\in\hat{G}}m(\rho_1,\pi)m(\rho_2,\pi).
\]

前面说过，紧Lie群的一个不可约的复有限维表示$\pi$满足$(\chi_\pi, \chi_\pi)=1$，反过来，如果$(\chi_\pi, \chi_\pi)=1$，则$(\chi_{\pi},\chi_{\pi})=\sum_{\rho\in\hat{G}}m(\rho,\pi)^2=1$，因此存在一个$\rho\in\hat{G}$使得$m(\rho,\pi)=1$,而其他的$\pi\in\hat{G}$都有$m(\rho,\psi)=0$.这样我们就得到了：

\para 一个复有限维表示$\pi$是不可约的当且仅当$(\chi_{\pi},\chi_{\pi})=1$.

\pro 如果$G$是一个紧Lie群，那么两个表示$\pi_1$, $\pi_2$等价当且仅当$\chi_{\pi_1}=\chi_{\pi_2}$.

实际上，假若$\pi_1$和$\pi_2$等价，那么存在$A$使得
$A\pi_1(g)=\pi_2(g)A$，于是$\tr(\pi_1(g))=\tr(A^{-1}\pi_2(g)A)=\tr(\pi_2(g))$.反过来，如果两个表示$\pi_1$, $\pi_2$特征标相等，则$	m(\pi_1,\pi)=(\chi_{\pi_1},\chi_\pi)=(\chi_{\pi_2},\chi_\pi)=m(\pi_2,\pi)$，对任意的$\pi\in\hat{G}$都成立，因此$\pi_1$, $\pi_2$等价。