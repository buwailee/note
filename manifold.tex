\documentclass[8pt]{book}
\usepackage{noteheader}
\usepackage[fontset=windowsnew]{ctex}

\newtheorem{para}{}[section]
\newcommand{\paracount}[1]{\refstepcounter{para}\textbf{#1 (\thepara)}\hspace{0.5em}}
	\renewcommand{\para}{\paracount{}}
	\newcommand{\theo}{\paracount{Theorem}}
	\newcommand{\pro}{\paracount{Proposition}}
	\newcommand{\lem}{\paracount{Lemma}}

\usepackage[xetex]{hyperref}%使用xetex引擎
	\hypersetup %一些选项
{
	bookmarksnumbered=true,%书签中章节编号
	colorlinks=true,  % 彩色链接 false:边框链接 ; true: 彩色链接
}

\include{defs}

\begin{document}
\chapter{Manifold}
\section{Foundation}

\para 一个局部$n$维欧几里得空间是一个Hausdorff空间$M$满足，对每一个点$p\in M$，存在一个$p$的邻域$U\osub M$和一个同胚$\varphi:U\to V$,其中$V$是一个$\rr^n$中的开集。这个同胚有时候被称为一个坐标、坐标映射等，而资料$(U,\varphi)$被称为一个{\kaishu 坐标卡}。

坐标$\varphi$经常写成分量形式，$\varphi=(x^1,\cdots,x^n)$，其中$x^i:U\to \rr$.

\para 局部欧几里得空间$M$上的一个光滑微分结构$\mathscr{F}$是这样一族坐标卡$(U_\alpha,\varphi_\alpha)$，满足：$\{U_\alpha\}$构成$M$的开覆盖，$\varphi_\alpha\circ\varphi^{-1}_\beta|_{U_\alpha\cap U_\beta}$是光滑映射，后者被称为坐标卡的相容性条件。此外，如果有一个坐标卡$(U,\varphi)$和每一个坐标卡都相容，那么可以推断出他在$\mathscr{F}$中，这样的微分结构被称为极大微分结构。极大微分结构当然不一定是唯一的，不过我们不担心这个，因为我们往往是固定一个微分结构来研究流形的，下面假设出现的微分结构总是极大的。

\para 一个$n$维光滑流形$(M,\mathscr{F})$是一个赋予了光滑微分结构$\mathscr{F}$的第二可数的局部欧几里得空间$M$.

我们想要做一个范畴，现在已经有了对象，那么自然需要态射，态射被如下定义：

\para 设$(M,\mathscr{F})$和$(N,\mathscr{G})$是两个光滑流形，连续函数$f:M\to N$被称为一个{\kaishu 光滑映射}，如果$\psi\circ f\circ \varphi^{-1}$是一个光滑函数对任意的$\mathscr{F}$中的坐标卡$(U,\varphi)$和$\mathscr{G}$中的坐标卡$(V,\psi)$成立。

这样，光滑流形就构成了一个范畴，其中态射是流形间的光滑映射。他是拓扑空间范畴的子范畴。

从此以后，我们对一个固定的流形$(M,\mathscr{F})$，常常会略去他的微分结构，只写作$M$。对于一个光滑流形$M$的非空开子集$U$，显然，他有继承自$M$的一个拓扑结构和微分结构，所以$U$也是一个光滑流形。很容易看到，$\rr^n$是一个光滑流形，按照上面的结论，我们可以得到一类光滑流形，$\rr^n$的开子集。比如把$n\times n$矩阵放入$\rr^{n^2}$内，那么行列式不为零的那些矩阵就构成一个光滑流形，记作$\mathrm{GL}(n,\rr)$，称作一般线性群。

特别地，$\rr$也是一个光滑流形。我们称光滑映射$f:M\to \rr$是一个$M$上的光滑函数。光滑函数$f$限制在$U\osub M$上也是一个光滑函数$f|_U$.

\para 设$M$是一个光滑流形，$U\osub M$上的光滑函数的集合记作$\calf(U)$，$\calf$被称为$M$上的光滑函数{\kaishu 层}。由于可以逐点定义加法和乘法，所以$\calf(U)$拥有$\rr$-代数结构。设$p\in M$，我们定义如下等价关系：设$U$和$V$都是$p$的邻域，以及$f\in \calf(U)$和$g\in \calf(V)$，如果在一个$W\osub U\cap V$上，$f|_W=g|_W$，则$f\sim g$.所有这样的等价类记作$\calf_p$，称为$p$处的光滑函数{\kaishu 茎}，他的代表元素可以写成$f_p=\langle U,f\rangle$，称为{\kaishu 芽}. 显然$\calf_p$有继承自$\calf(U)$的自然的$\rr$-代数结构。

设$p\in M$，茎$\calf_p$是一个局部环。实际上，$\langle U,f\rangle \in \calf_p$且$f(p)= 0$的元素构成了$\calf_p$的一个理想。不在这个理想内的$\langle U,f\rangle$，由于$f(p)\neq 0$，那么适当缩小$U$到$V$，由$f$的连续性，总可以找到$V$使得$f|_V$处处不为零，这样$\langle V,1/f|_V\rangle$便是$\langle U,f\rangle$的一个逆。因此上面这个理想即$\calf_p$唯一的极大理想，我们其记作$\mm_p$。容易看到$\calf_p/\mm_p\cong \rr$，实际上，对每一个芽$f_p\in\calf_p$，都成立$f_p=f_p-f(p)+f(p)$，在$\calf_p/\mm_p$中看，他和$f(p)\in\rr$也就没区别了。

\lem 设$f:\rr^n\to \rr$光滑，则
\[
	f(x)=f(0)+\partial_if(0)x^i+\frac{1}{2}g_{ij}(x)x^ix^j,
\]
其中$g_{ij}$光滑。

为了证明这点，利用微积分基本定理
\[
	f(x)-f(0)=\int_0^1f'(tx)\dd t=\int_0^1\partial_i f(tx)x^i\dd t=h_i(x)x^i,
\]
可以得到$h_i(0)=\partial_i f(0)$，然后再对$h_i$使用上面的步骤即可得到我们想要的表达式。

\para 使用一个局部坐标$\varphi=(x^1,\cdots,x^n)$且$\varphi(p)=0$，可以将上面的引理翻译到流形上。设设$f:U\to \rr$光滑，则在$p$的一个邻域$V$上对任意的$q\in V$成立
\[
	f(q)=f(p)+\frac{\partial f\circ \varphi^{-1}}{\partial x^i}(p)x^i(q)+\frac{1}{2}g_{ij}(q)x^i(q)x^j(q),
\]
其中$g_{ij}$在$V$上光滑，以后我们就将那个偏微分记作$\partial_i f(p)$.


\para 设$p\in M$，$p$处的茎为$\calf_p$，他的极大理想为$\mm_p$，此时$p$处的 余切空间被定义为自然的矢量空间$T_p^*M:=\mm_p/\mm_p^2$。余切空间的元素被称为余切矢量。

$\mm_p/\mm_p^2$确实是一个矢量空间。首先它显然是一个$\calf_p$-模，然后任取$a\in \mm_p$，由于$a\mm_p/\mm_p^2=0$，所以$\mm_p/\mm_p^2$是一个$\calf_p/\mm_p$-模，即$\rr$-矢量空间。这样定义的余切空间，可以看到，是所有的那些一阶小量构成的集合，即其中的元素为“微分”。


\para 设$p\in M$，$M$是一个$n$维流形，则$T_p^*M:=\mm_p/\mm_p^2$是$n$维的。

我们可以选取一组局部坐标来算维数，由于选取不同的局部坐标都是通过同胚联系的，所以不同的选取对维数没什么影响。由上面的引理，设$f_p\in \mm_p$，则他可以写作
\[
	f_p=\partial_i f(p)x^i_p+\frac{1}{2}g_{ij}(q)x^i_px^j_p
\]
考虑一个局部坐标$\varphi=(x^1,\cdots,x^n)$，设自然同态$\dd_p:\mm_p\to \mm_p/\mm_p^2$，很简单就可以看到$\dd_p(x^i_p)\neq 0$.实际上，如果$x^i_p\in \mm_p^2$，那么$x^i_p=rs$，其中$r$, $s\in \mm_p$，然后根据上面的引理$r=a_ix^i_p+\cdots$以及$s=b_ix^i_p+\cdots$，于是$x^i=rs=a_jb_kx^j_px^k_p+\cdots$，但显然这是不可能的。

所以，如果$f_p\in \mm_p$，则
\begin{equation}
\label{c1:e1}
	\dd_p(f_p)=\partial_i f(p)\dd_p(x^i_p).
\end{equation}
这样所有的$T_p^*M=\mm_p/\mm_p^2$中的元素都可以由$\dd_p(x^i_p)$展开，他们都是非零的，而且容易证明是线性无关的，所以这是$T_p^*M$的一组基，余切空间的维数计算完毕。

以后我们用$\dd_p(f)$乃至$\dd_pf$来记$\dd_p(f_p)$。实际上，我们可以将$\dd_p$定义在$\calf_p$上，设$a$是一个常值芽，补充定义$\dd_pa=0$，可以看到，此时式\eqref{c1:e1}依旧满足。以后我们就这样来看$\dd_p:\calf_p\to T_p^*M$，他被称为{\kaishu 外微分}算子。

\para $\dd_p (fg)=\dd_p\bigl(\bigl(f-f(p)\bigr)\bigl(g-g(p)\bigr)+f(p)\bigl(g-g(p)\bigr)+\bigl(f-f(p)\bigr)g(p)\bigr)=f(p)\dd_pg+\dd_pf g(p)$.

\para 设$f:M\to N$是一个光滑映射，上面的光滑函数层分别为$\calf$和$\calg$。任取$\varphi\in \calg(V)$，可以通过$f^*\varphi=\varphi\circ f$定义$f^*\varphi\in \calf(f^{-1}(V))$.

下面我们考虑两个流形余切空间之间的映射。设$\langle V,\varphi\rangle\in \calg_{f(p)}$，于是$\langle f^{-1}(V),\varphi\circ f\rangle\in \calf_p$，所以$f^*$诱导了一个$\rr$-代数同态$f^*_p:\calg_{f(p)}\to \calf_p$，特别地，可以看到$f^*_p:\mm_{f(p)}\to \mm_{p}$，于是$f^*_p:\mm^2_{f(p)}\to \mm^2_{p}$.

\para 设$f:M\to N$是一个光滑映射，他诱导了一个线性映射\footnote{这里我们滥用一下记号。}$f^*_p:T_{f(p)}^*N\to T_p^*M$.

\para 对于复合，$(f\circ g)^*_p=g^*_p\circ f^*_{g(p)}$.很容易看到$\id^*_p=\id_{T_p^*M}$，所以如果$f:M\to N$是同胚，则$f_p^*:T_{f(p)}^*N\to T_p^*M$是同构。

\para 利用复合公式，设$f:M\to N$是光滑映射，则$f^*_p\bigl(\dd_{f(p)}g\bigr)=\dd_{p}(f^*g)=\dd_p(g\circ f)$.

\para 设$p\in M$，$M$是$n$维光滑流形，则{\kaishu 切空间}$T_pM$被定义为余切空间$T_p^*M$的对偶空间。切空间的元素被称为{\kaishu 切矢量}。由于余切空间是有限维的，他的对偶空间也和他有着相同的维度，即$n$维。

\para 由于切空间是余切空间的对偶空间，所以他是余切空间上的线性函数构成的空间，反过来，由于是有限维的，所以可以认为对偶空间的对偶空间就是原本的空间，这就是说可以将余切空间的矢量看成切空间矢量的线性函数：设$\dd_p f\in T_p^*M$和$v\in T_pM$，定义$\dd_p f(v):=v(\dd_p f)$.

虽然上面这些个定义都很短也很清楚，不过操作上却没有那么简单。下面，我们将一个切矢量扩张到$\calf_p^*$上面去。


\para 设$f$是在$p$附近的光滑函数，而$v\in T_pM$，可以通过$D_v(f_p):=v(f_p-f(p))$定义线性映射$i_p:v\mapsto i_p(v)=D_v\in \calf_p^*$，他是一个单射。

注意到$(fg)_p=f_pg_p$，所以
\begin{align*}
	D_v(f_pg_p)&=v(f_pg_p-f(p)g(p))\\
	&=v\bigl((f_p-f(p))(g_p-g(p))+f(p)(g_p-g(p))+(f_p-f(p))g(p)\bigr)\\
	&=f(p)D_v(g_p)+D_v(f_p)g(p),
\end{align*}
我们将满足这条性质的线性映射$D_v\in \calf_p^*$称为$p$处的导子，所有$p$处的导子构成的空间暂时记作$V_p$，而他其实和$T_pM$是同构的。

为了证明这点，任取导子$D\in V_p$，由于$D(1)=D(1\times 1)=2D(1)$，所以$D(1)=0$，继而靠着$D$的线性性，对于常值函数的芽$a$来说，$D(a)=aD(1)=0$。因为每一个$\calf_p$中的元素$f_p$都可以写成$f_p-f(p)+f(p)$的形式，所以$D(f_p)=D(f_p-f(p))$，这就是说，一个导子的性质完全由他在$\mm_p$上的值决定，这种关系是一对一的。即$\pi_p:D\mapsto D|_{\mm_p}$是一个线性同构。

同时，设$f_p$, $g_p\in \mm_p$，则$\pi_p(D)(f_pg_p)=f(p)\pi_p(D)(g_p)+g(p)\pi_p(D)(f_p)=0$，于是$\pi_p(D)(\mm_p^2)=0$，所以，$\pi_p(D)\in T_pM$，即$D|_{\mm_p}$是一个切矢量，因此导子$D$完全由一个切矢量$D|_{\mm_p}=\pi_p(D)$决定。这样，$i_p:T_pM\to V_p$也是一个满射，所以他是一个同构。当然我们也可以直接计算验证$\pi_p\circ i_p=\id_{T_pM}$以及$i_p\circ \pi_p=\id_{V_p}$。

因为有这个同构，所以以后我们用$T_pM$来标记导子构成的矢量空间，一个导子才是一个切矢量。这样的好处是，我们在具体计算的时候，可以直接在$\calf_p$上进行而非$\mm_p$上，特别地，现在对于一个切向量$v$来说，成立$\dd_pf(v)=v(f_p)$，这是因为对一个导子$v$来说$v(f_p)=v(\dd_pf)$.


\para 设$f:M\to N$是一个光滑映射，定义它在$p\in M$处的导数为$T_pf=f_{*p}:T_pM\to T_{f(p)}N$使得对任意的$v\in T_p M$和任意的$g_{f(p)}\in \mm_{f(p)}$成立$(f_{*p}v)(g_{f(p)})=v(f_p^*g_{f(p)})$.

为以后的处理方便，不妨通过等同$\partial_i$和标准基$e_i$来等同$T_p\rr^n$和$\rr^n$。此外，通过坐标卡上的同胚$\varphi$，我们用$\partial_i$来标记$\varphi^{-1}_{*p}(e_i)$，这显然是$T_pM$处的一组基。


\para 设$f$是在$p$附近的光滑函数，任取$v\in T_pM$.因为$f_{*p}:T_pM\to T_{f(p)}\rr=\rr$，所以$f_{*p}(v)$是一个数，故而
	\[
		f_{*p}(v)=f_{*p}(v)(\id_{\rr})=v\bigl((\id_{\rr}\circ f)_p\bigr)=v(f_p)=\dd_p f(v).
	\]
	因为对所有的切矢量$v$都成立上式，所以$f_{*p}=\dd_p f$.

选定一个局部坐标，因为$\dd_p x^i(\partial_j)=\partial_jx^i(p)=\delta^i_j$，所以$\dd_p x^i$就是$\partial_i$的对偶基。下面我们来计算一个特别的例子，设$f:M\to \rr^n$是一个流形$M$上的矢量值光滑函数，则$f^i:M\to \rr$是一个光滑函数，那么$f_{*p}=\dd_pf^i e_i$，其中$e_i$是$\rr^n$的标准基。再设$f:\rr^m\to \rr^n$，则$\dd_pf^i=\partial_j f^i(p) \dd x^j=\partial_j f^i(p) e^j$.写成矩阵即
\[
	(f_{*p})^{i}_{\phantom{i}j}=\partial_j f^i(p),
\]
此即$f$的Jacobian.

\para 复合函数求导法则：$(f\circ g)_{*p}=f_{*g(p)}\circ g_{*p}$.抽象表现出来是线性映射复合，表现在矩阵（即Jacobian）上就是两个矩阵相乘。

\section{Submanifold}

\para $\varphi:M\to N$是一个光滑映射，\no{a}. 称$\varphi$是一个浸入，如果$\varphi_{*p}$处处非退化。\no{b}. 称$(M,\varphi)$是一个子流形，如果$\varphi$是单的。不是所有浸入都是子流形，比如圆周的参数表示$(\cos t,\sin t)$是一个浸入，但不是单的。

显然，对于光滑流形的一个开子集，他可以继承大流形的流形结构而形成一个新的流形，他是一个子流形，被称为开子流形。

后面我们经常会说“设流形$M$上有某某”这样的话，但一般来说，某某在流形上的整体存在性是很难保证的，往往他只是局部存在，即可以在流形$M$的某个开集上存在。但是注意到$M$的开集现在也有流形结构，即开子流形结构，于是我们的命题就可以在这个新的流形上正常工作了。所以经常为了方便，对于不少命题的陈述，我们会把对象直接定义到整个流形上。

\para 设$\varphi:M\to N$，如果$M$微分同胚于$N$的开子流形$\varphi(M)$，则称子流形$(M,\varphi)$是一个嵌入。

浸入子流形不一定是嵌入子流形，比如秩为$1$的单的光滑曲线$f(t)=((t^3+t)/(t^4+1),(t^3-t)/(t^4+1))$，在$\rr^2$中他的图像看起来是可以有自交点的。

\para 设$U$是$M$的一个子集，但$U$本身有一个流形的结构，如果此时$i:U\hookrightarrow M$是一个嵌入，则称$U$是$M$的一个正则子流形。

所谓的正则子流形就是说，它本身的流形结构和从大的流形那里继承来的流形结构是相同的的。

\para 设$M$和$N$是光滑流形，$f:M\to N$是一个单浸入。我们可以赋予$f(M)$一个微分结构通过把$f:M\to f(M)$做成一个微分同胚。此时，$f(M)$是$N$的正则子流形当且仅当$f$是一个嵌入。

\theo 反函数定理：设$U\subset \rr^n$是一个开集，映射$f:U\to \rr^n$光滑，如果Jacobian在$p$处非奇异，即$f_{*p}$可逆，则存在$p$的一个邻域$V\osub U$，使得$f|_V:V\to f(V)$是一个（光滑）同胚。

证明见微积分教材，常见的证明有比如压缩映像定理。该定理说明，如果函数局部线性化后性质不错，那么在那点附近性质也不错。由于是局部性质，所以可以直接翻译到流形上没什么改变。

\theo 流形上的反函数定理：设$M$和$N$的维度相同，映射$f:M\to N$光滑，如果$f_{*p}$可逆，则存在$p$的一个邻域$U$，使得$f|_U:U\to f(U)\subset N$是一个（光滑）同胚。换句话说，浸入局部是嵌入。

\para 称一族$M$上的光滑函数$\{f_i\}_{1\leq i\leq n}$在点$p$相互无关，即指$\{\dd_p (f_i)=(f_i)_{*p}\in T_p^*M：1\leq i\leq n\}$们线性无关。

如果$\{f_i\}_{1\leq i\leq n}$相互无关，则函数$f=(f_1,\cdots,f_n):M\to \rr^n$在点$p$上的导数$f_{*p}$可逆，所以按照反函数定理，可以在$p$附近找一个领域，使得$f|_V$是一个$V$到$\rr^n$中开集的同胚，这样$(V,f|_V)$就是一张坐标卡。如果$\{f_i\}$个数不到$n$，那么补几个进去，照样可以找到一张坐标卡，其中前几个分量是$\{f_i\}$.

\lem 设$f_*:V\to W$是一个有限维矢量空间间的线性映射以及他的对偶映射是$f^*:W^*\to V^*$，则$\rank(f_*)=\rank(f^*)$. 特别地，当$f_*$是单（满）的时候，$f^*$是满（单）的。

\para 设$\varphi:M\to N$光滑，且$\varphi_{*p}$是单射。令$(x_1,\cdots,x_n)$是$\varphi(p)$附近的一个坐标，那么$x_i\circ\varphi$是$p$附近的一个坐标。特别地，$\varphi$在$p$附近是一个单射。如果$\varphi_{*p}$是满射，则$x_i\circ\varphi$是$p$附近的一个坐标中的一部分。

若$\varphi_{*p}$是单射，他的对偶映射$\varphi^*_p$就是满射，于是$\varphi^*_p(x_i)_{*\varphi(p)}=(x_i\circ\varphi)_{*p}=\dd_p(x_i\circ \varphi)$张成了$T_p^*M$，在其中选出一组极大线性无关组（不妨设为前$m$个），这就构成了$p$附近的一组坐标。而$(x_1,\cdots,x_m)\circ \varphi$局部是同胚，所以$\varphi$局部是单射。

若$\varphi_{*p}$是满射，他的对偶映射$\varphi^*_p$就是单射，于是$\varphi^*_p\dd_{\varphi(p)}x_i=\dd_p(x_i\circ \varphi)$相互独立，一般来说，他数量不够构成坐标，但是却可以构成坐标中的一部分。

\para 设$f:M\to N$是一个光滑映射，则$\rank_p f$被定义为$\rank_p f_{*p}$.取$p$和$f(p)$附近的坐标$\varphi$和$\psi$且使得$\varphi(p)=0$，则$f$在点$p$的秩就是Jacobian矩阵$(\psi\circ f \circ \varphi^{-1})_{*0}$的秩。

选取$f(p)$附近的坐标$\psi$，则$\psi\circ f:M\to \rr^n$，不妨将其写作$(f_1,\cdots,f_n)$，则$\rank_p f$就是${\dd_pf_1,\cdots,\dd_pf_n}$张成的线性空间的维度。实际上，因为这是局部结果，所以可以直接假设$N=\rr^n$，而此时$f_{*p}=(\dd_pf_1,\cdots,\dd_pf_n)$。

\theo 设$M$是一个$m$维流形且$f:M\to N$是一个光滑映射，如果存在常数$l$使得$\rank_p f$处处等于$l$，那么对于$q\in N$，$f^{-1}(q)$要么是空集，要么是$M$的一个正则子流形，维度为$m-l$。

这个定理我们就不证明了。特别当$N=\rr$的时候，$f$如果是一个秩处处为$1$的光滑函数（即$\dd_p f$处处不为零），则$f^{-1}(a)$或者是一个空集，或者是一个$m-1$维正则子流形。这就是所谓的等能面，或等势面。

\section{Vector Field}
	和我们以前的直观一样，所谓的矢量场就是每一点赋予一个矢量。

\para 设$U\osub M$，$U$上的映射$X:p\mapsto X(p)\in T_pM$被称为$U$上的（切）矢量场。因为在$U$的每一个局部$V$（至少一个坐标卡内），矢量场$X$都可以写作$X=X^i\partial_i$，其中$X^i$是$V$上的实值函数，而$\partial_i$在不同的点分属不同的切空间。如果$\{X^i\}$在点$p$是光滑函数，则称$X$在$p$处光滑。如果$X$在$U$处处光滑，则称$X$是$U$上的一个光滑矢量场。

对矢量场而言，他可以作用在光滑函数上得到一个函数，在局部的作用效果即$Xf=X^i\partial_if$. 显然，如果$X$是要给光滑矢量场，则$Xf$是一个光滑函数。反过来，如果$X^i\partial_if$对任意的光滑函数都光滑，则$X^i$自然也是光滑的，所以有下面一个结论。

\para 设$X$是一个$U$上的矢量场，如果$Xf$对任意的光滑函数$f$也是光滑的，那么$X$是一个光滑矢量场。

这个命题可以看作矢量场光滑性的一个坐标无关的定义。


\para 设$f:M\to N$是一个光滑单射，而$X$是$M$上的一个光滑矢量场，则$f_*X:p\mapsto f_{*f^{-1}(p)}X_{f^{-1}(p)}$是$N$上的一个矢量场。因为$(f_*X)g=X(g\circ f)$成立，所以这也是一个光滑矢量场。

设$\sigma:\rr\to U$是一个光滑曲线，$\sigma_{*p}\in T_pM$，所以$\sigma_*=\dot{\sigma}(t)$局部写作
\[
	\dot{\sigma}(t)=\frac{\dd x^i\circ \sigma}{\dd t}(t)\partial_i.
\]

\para 设$X$是一个$U$上的光滑矢量场，如果一条光滑曲线$\sigma:(-\epsilon,\epsilon)\to U$且$\sigma(0)=p$，满足$X(\sigma(t))=\dot{\sigma}(t)$，则称$\sigma$是$X$在$p$附近的一条积分曲线。

将矢量场局部写出来，$X(\sigma(t))=X^i(\sigma(t))\partial_t$，所以问题归结到了求解微分方程
\[
	\frac{\dd x^i\circ \sigma}{\dd t}(t)=X^i(\sigma(t)),
\]
他的初值为$\sigma(0)=p$。微分方程的（光滑）解在局部存在且唯一，所以我们得到了：

\para 在$p$附近，对$X$存在唯一的积分曲线$\sigma:(-\epsilon,\epsilon)\to U$.

设$X$是$U$上的光滑矢量场，对$U$上的每一点$p$，都可以在$p$附近找到他的一条光滑积分曲线$\sigma_p$，上面的点$\sigma_p(t)$我们也记作$\sigma_t(p)$，这样我们就得到了一个新的一族映射$\{\sigma_t:U\to U\}$，当$t=0$的时候，$\sigma_0=\id$.这样的一族映射$\{\sigma_t\}$被称为矢量场$X$的流。如果需要明确是那个矢量场的时候写作$\{\sigma^X_t\}$. 由微分方程解的唯一性可以发现$\sigma_t\circ \sigma_s=\sigma_{s+t}$.

对于一个矢量场，整体流的存在性是不能保证的，比如对$t=1$的时候，是否对每一个$p$变换$\sigma_1$都有意义？但是，至少在局部，我们可以保证在一定范围内的参数都是有意义的，对于局部的问题，这个存在性已经基本够使了。

\para 光滑流形$M$上的光滑矢量场$X$的支集被定义那些使$X$不为$0$的点集的闭包。如果$X$有紧支集，则$X$的流的参数可以全局定义到$\rr$上面去。特别地，如果流形是紧的，则对每一个光滑矢量场都成立。

设支集为$K$，找一个他的开覆盖，使得每一个开覆盖内$\sigma_t$都对某一个小区间$t\in (-\epsilon,\epsilon)$上有定义，由于紧，所以可以找到有限的子覆盖，所以在这些子覆盖里面，把最小的$\epsilon_{\text{min}}$挑出来，则在$K$上，对$t\in(-\epsilon_{\text{min}},\epsilon_{\text{min}})$，$\sigma_t$都有定义。现在对$p\notin K$定义$\sigma_t(p)=p$，容易检验$\epsilon_t$定义良好且还是光滑映射。最后，对$t>\epsilon_{\text{min}}$，我们可以从某个$t_0\in (-\epsilon_{\text{min}},\epsilon_{\text{min}})$反复复合$\sigma_{\epsilon_{\text{min}}/2}$，反之对$t<-\epsilon$亦然。

现在我们将积分曲线的问题稍稍拓展一下，比如我们现在有两个矢量场$X$和$Y$，他们在每一点张成一个平面，类比于积分曲线，我们要问是否存在一个光滑曲面，使得这个曲面在每一点的切空间都是这俩矢量场张成的平面？

可以直接想象一下怎么处理这样的问题，直观来看，积分曲面可以由积分曲线拼成，即在$p$附近，$X$的一条一条积分曲线和$Y$的一条积分曲线编成一张网，这张网其实应该就在积分曲面上。因此积分曲面存在与否当且仅当这张网足够光滑，不能突然错开。此时的错开，就是说，从网格的一个端点处，沿着两条路径走到的终点处于积分曲面的两侧。

为简单见，我们看看这样一个曲边四边形。从$p$出发，沿着$X$的积分曲线走$s$，走到了$\sigma^X_s(p)$，再从这点出发，沿着$Y$的积分曲线走$t$，走到$\sigma^Y_t\circ\sigma^X_s(p)$.同样，从$p$出发，沿着$Y$的积分曲线走$t$，走到了$\sigma^Y_t(p)$，再从这点出发，沿着$X$的积分曲线走$s$，走到$\sigma^X_s\circ\sigma^Y_t(p)$。

这样我们就得到了弯曲的四边形，$p$是其中一个端点，但是一般来说，沿着两条路径并不会有相同的终点，即$p$的对角线方向的另一端点不存在，此时两条路径并不能闭合成一个弯曲的四边形。甚至，即使积分曲面存在，我们也不能得到一个闭合的四边形（网格），但是，如果沿着两条路径的终点是错开的，则积分曲面依然不存在。

实际上，因为$X$和$Y$的光滑，我们可以适当延长（或缩短）相比$s$和$t$小量的在一条路径上走的时间使得弯曲的四边形变成一个网格（此时局部积分曲面存在），或者，永远是错开的（此时局部积分曲面不存在）。

我们现在需要比较两条路径两个终点的差，在欧式空间里面，我们可以比较这两个点的距离。但是在流形上这样做是不方便的，我们可能连一个很直接的计算两个点距离的手段都没有。为了克服这个困难，我们可以采用“表示”的手段，取一个$U$上的光滑函数$f$，比较$f(\sigma^Y_t\circ\sigma^X_s(p))$和$f(\sigma^X_s\circ\sigma^Y_t(p))$。但光取一个$f$肯定是不够的，取而代之，我们可以取遍$U$上所有的光滑函数，如果我们关于所有的光滑函数都计算出了$f(\sigma^Y_t\circ\sigma^X_s(p))-f(\sigma^X_s\circ\sigma^Y_t(p))$（在$s$, $t$都很小时），那么就可以确认这两个坐标相差很小的程度。所以现在就是要计算在$s$, $t$都很小时的
\[
	g(s,t)=f(\sigma^Y_t\circ\sigma^X_s(p))-f(\sigma^X_s\circ\sigma^Y_t(p)).
\]

因为$g$是光滑函数，我们在$(0,0)$局部展开他，求导就可以得到系数。显然，他到二阶为止的导数都为$0$，并且$\partial_s^2g(0,0)=\partial_t^2g(0,0)=0$，所以他最低阶不为零的只可能是$\partial_s\partial_t g(0,0)$，这就是说，我们要求$\lim_{s,t\to 0}g(s,t)/st$.

\para 在$t$很小的时候，$f(\sigma_t^X p)=f(p)+tXf(p)+o(t^2)$.为了证明他，只要求$p$处的导数就行了，设$\sigma^X(t)$是$\sigma^X(0)=p$的$X$的积分曲线，则
	\[
		\frac{\dd}{\dd t}\biggr|_{t=0}f(\sigma_t^X p)=\frac{\dd}{\dd t}\biggr|_{t=0}f\circ \sigma^X (t)=f_{* p}X=Xf(p).
	\]

所以（暂时在记号上略去高阶项）
\[
	f(\sigma^Y_t\circ\sigma^X_s(p))=f(\sigma^X_s(p))+tYf(\sigma^X_s(p))=f(p)+sXf(p)+tY(\sigma^X_s\circ f(p)),
\]
以及
\[
	g(s,t)=sXf(p)+tY(\sigma^X_s\circ f(p))-tYf(p)-sX(\sigma^Y_t\circ f(p)),
\]
其中
\[
	Y(\sigma^X_s\circ f(p))-Yf(p)=sX(Y(f))(p),
\]
所以
\[
	g(s,t)=st\bigl(X(Y(f))(p)-Y(X(f))(p)\bigr),
\]
这就是说$\partial_s\partial_t g(0,0)=X(Y(f))(p)-Y(X(f))(p)$.

\para 定义两个矢量场$X$, $Y$的Lie括号为$[X,Y]$，他满足$[X,Y](f)=X(Y(f))-Y(X(f))$。

如果采用局部表示$X=X^i\partial_i$和$X=Y^i\partial_j$，则我们可以计算出
	\begin{align*}
	[X,Y](f)&=X^i\partial_i(Y^j\partial_j f)-Y^i\partial_i(X^j\partial_j f)\\
	&=X^i\partial_iY^j\partial_j f-Y^i\partial_i X^j\partial_j f\\
	&=(X^i\partial_iY^j-Y^i\partial_i X^j)\partial_jf.
	\end{align*}
	因此，尽管形式上是二阶的，但$[X,Y]$还是一个切矢量场，局部写作$[X,Y]=(X^i\partial_iY^j-Y^i\partial_i X^j)\partial_j$.


\para 设$X_1$, $\cdots$, $X_k$是一族切矢量场，记
	\[
		D=\{f_1X_1+\cdots+f_kX_k:\forall 1\leq i \leq k,\,\, f_i\in \calf(M)\},
	\]
	称他为流形$M$上的一个被$\{X_i\}$张成的分布。

\para 设$X$和$Y$张成一个分布$D$，则局部积分曲面存在当且仅当在$[X,Y]\in D$.

如果局部积分曲面存在，那么曲边四边形完全处于积分曲面上面，尽管沿着两条路径得到的终点可能不同，但是这两个点的连线（或者他的切矢量）应该在$s\to 0$, $t\to 0$的时候确定了一个切矢量（由于$X$和$Y$的光滑性，所以这个切矢量并不依赖于连线的选取），他处于积分曲面的切子空间（由$X_p$和$Y_p$张成）里面，且正比于$[X,Y]_p$，所以$[X,Y]_p=a(p)X_p+b(p)Y_p$.而$a$和$b$的光滑性是显然的。

如果不存在，就是说两个端点分处$X_p$和$Y_p$张成的切子空间两侧，所以两个点的连线确定的那个切矢量应该不在和$X_p$和$Y_p$张成的切子空间里，即$[X,Y]_p\neq aX_p+bY_p$.


\para 问题可以问得更广一点，设$X_1$, $\cdots$, $X_k$是一族切矢量场，他们是否（至少在局部）有积分“曲面”存在？回答是Frobenius定理：设$X_1$, $\cdots$, $X_k$在点$p$张成的分布为$D$，则局部存在积分“曲面”当且仅当对任意的$i$和$j$成立$[X_i,X_j]\in D$。

当然，这个结论可以更加形式地证明他，如果不信任上面的直观想法，则可以参看任何一本微分流形的教材，我这里就略去了。


\para 令$\varphi$是流形$M$上的光滑可逆变换，设矢量场$X$的流为$\sigma_t$，则$\varphi_*X$的流为$\varphi\circ \sigma_t\circ\varphi$.

设在$p$处的切矢量为$X_p$，经过$p$的$X$的积分曲线为$\sigma(t)$，使用变换$\varphi$，变成了$q=\varphi(p)$，$q$处的切矢量$\varphi_{*p}X_p=(\varphi_*X)_q$以及积分曲线$\varphi(\sigma(t))=\varphi(\sigma_t q)=\varphi\circ\sigma_t\circ \varphi^{-1}(p)$.此即结论。

\para 所以，$\varphi_*X=X$当且仅当$\varphi\circ \sigma^X_t=\sigma^X_t\circ \varphi$成立。

\para 直接的计算，我们有：
	\[
		[X,Y]=\lim_{t\to 0}\frac{1}{t}\bigl(Y-(\sigma_t^X)_*Y\bigr).
	\]

所以，如果$\sigma_t^X$和$\sigma_s^Y$可交换，即$\sigma_t^X\circ \sigma_s^Y=\sigma_s^Y\circ \sigma_t^X$，则$(\sigma_t^X)_*Y=Y$以及$[X,Y]=0$.

设$\varphi:M\to N$是一个光滑映射，$X$和$Y$分布是$M$和$N$上的光滑函数，称他们是$\varphi$相关的，如果$\varphi_*X(f)=Y(f)\circ \varphi$对任意光滑函数$f$成立。局部来看，$X_p(f\circ \varphi)=Y_{\varphi(p)}(f)$.

若$X_1$与$Y_1$是$\varphi$相关的，$X_2$与$Y_2$是$\varphi$相关的，则$[X_1,X_2]$和$[Y_1,Y_2]$是$\varphi$相关的，因为
\begin{align*}
	\varphi_*[X_1,X_2](f)&=X_1(X_2(f\circ \varphi))-[1\leftrightarrow 2]\\
	&=X_1(Y_2(f)\circ\varphi)-[1\leftrightarrow 2]\\
	&=Y_1(Y_2(f))\circ \varphi-[1\leftrightarrow 2]\\
	&=[Y_1,Y_2](f)\circ \varphi.
\end{align*}
因为对于一个同胚而言，$\varphi_*(X)$被定义为$p\mapsto \varphi_{*\varphi^{-1}(p)}X_{\varphi^{-1}(p)}$，或者$\varphi(p)\mapsto \varphi_{*p}X_p$，这就是说
\[
	X_p(f)=\varphi_*(X)_{\varphi(p)}(f),
\]
因此$X$与$\varphi_*X$是$\varphi$相关的。


\para 令$\varphi$是$U$上的光滑同胚$\varphi:U\to \varphi(U)$，$X$和$Y$是$U$上的矢量场，则在$U$上$\varphi_{*}[X,Y]=[\varphi_{*}X,\varphi_{*}Y]$.

因此，作为局部的同胚，$\sigma_s^X$可以适用
\[
	(\sigma_s^X)_*[X,Y]=[X,(\sigma_s^X)_*Y]=\lim_{t\to 0}\frac{1}{t}\bigl((\sigma_s^X)_*Y-(\sigma_{s+t}^X)_*Y\bigr)=\frac{\dd}{\dd t}\biggr|_{t=s}(\sigma_t^X)_*Y.
\]

如果$[X,Y]=0$，则$(\sigma_t^X)_*Y$是一个常矢量（局部来看，系数为常数），因此$Y$在$(\sigma_t^X)_*$作用下不变，这就是说$Y=(\sigma_t^X)_*Y$，于是$\sigma_t^X$和$\sigma_s^Y$可交换.

\para $[X,Y]=0$当且仅当$\sigma_t^X$和$\sigma_s^Y$可交换。

既然流是可交换的，那么以前我们谈的那个曲边四边形总是可以闭合的，所以这种情况下积分流形局部肯定存在，因为在局部我们可以一块一块曲边四边形拼起来。由于显然的$[\partial_i,\partial_j]=0$，如果我们能够选取局部坐标使得一族矢量场$\{X_i:1\leq i \leq k\}$变成$\{\partial_i:1\leq i \leq k\}$，则积分曲面存在。那么什么时候$\{X_i\}$是可以变成$\{\partial_i\}$呢？答案前面已经有了，$[X_i,X_j]\in D$，分布$D$由$\{X_i\}$生成。当然，这可以直接证明，所以这也是证明积分曲面存在性的一种思路。

最后给个例子，$n$维欧式空间，$\{\partial_i:1\leq i \leq k\}$的可能的积分曲面$\{x_i=c_i:k+1\leq i \leq n\}$，其中$c_i$是常数。如果这个积分曲面还是连通的，设$\pi$是往最后$n-k$个坐标的投影，则$\pi_*\partial_i=0$，其中$1\leq i \leq k$，因此$(\pi\circ i)_*=0$，其中$i$是积分流形往欧式空间的嵌入，此时由积分流形的连通性，$\pi\circ i$是常值映射。此时的积分流形就是上面的$\{x_i=c_i:k+1\leq i \leq n\}$.
\section{Cotangent Vector Field}

\para 设$U\osub M$，$U$上的映射$X:p\mapsto \omega(p)\in T_p^*M$被称为$U$上的余切矢量场。因为在$U$的每一个局部$V$（至少一个坐标卡内），余切矢量场$\omega$都可以写作$\omega=a_i\dd x^i$，其中$a_i$是$V$上的实值函数，而$\dd x^i$在不同的点分属不同的余切空间。如果$\{a_i\}$在点$p$是光滑函数，则称$\omega$在$p$处光滑。如果$\omega$在$U$处处光滑，则称$\omega$是$U$上的一个光滑余切矢量场（或者叫做一个1-形式场）。

一个余切矢量场和一个切矢量场之间存在作用$\omega(X)=X(\omega)$可以得到一个光滑函数，具体来说就是在每一点$p$，$\omega_p(X_p)\in \rr$.

\para 设$f$是$U$上的光滑函数，显然$\dd f$是一个$U$上的光滑余切矢量场。记$U$上的光滑函数的集合为$\Omega^0(U)$，记$U$上的光滑余切矢量场的集合为$\Omega^1(U)$，则$\dd: \Omega^0(U)\to \Omega^1(U)$.

下面我们要把Frobenius定理改写成余切矢量场的形式，这就变成了经典的Pfaff方程，正是当年关于Pfaff方程的研究，Cartran第一次提出了（高阶）外微分和微分形式的概念（我们现在只谈了一阶的情况），在他那里，1-形式之间的乘法被定义成反对称的。从前一节谈论Frobenius定理来看，Pfaff方程是一个关于积分曲面的问题，所以从这个角度来看，反对称的来由归根结底是为了积分。

\para $\mm_p^n/\mm_p^{n+1}$自然同构于$T^*_pM\otimes \cdots \otimes T^*_pM$，其中张量积$n$次。

\para 设$\omega=f\dd g$，其中$f$和$g$是光滑函数，则
\begin{align*}
	\omega([X,Y])=f\dd g([X,Y])&=f [X,Y](g)\\
	&=fX(Y(g))-fY(X(g))\\
	&=X(fY(g))-X(f)Y(g)-Y(fX(g))+Y(f)X(g)\\
	&=X(\omega(Y))-Y(\omega(X))-\bigl(X(f)Y(g)-Y(f)X(g)\bigr).
\end{align*}

\para 称一个1-形式$\omega$是完全可积的，如果存在两个光滑函数$f$和$g$使得$\omega=f\dd g$，此时$f$被称为$\omega$的积分因子。

1-形式的完全可积性联系着所谓的首次积分问题。

设$f$是一个光滑函数且$\dd_p f$处处不为零，则$f(p)=a$（如果解存在）决定了$M$中的一个正则子流形$N_a$（有时候叫做一个曲面）。再设$X$是$M$内的光滑矢量场，则$\dd f(X)=0$恒成立当且仅当处处成立$X_p\in T_pN_{f(p)}$。

实际上，任取一点$p\in M$，只要检验$X_p(f)=0$即可，选一条$N_{f(p)}$上的一条光滑曲线$c$，使得$c(0)=p$且$c'(0)=X_p\in T_pN_{f(p)}$，由于$f(c(t))=f(p)$恒成立，对其在$t=0$处求导就得到了$\dd_pf(X_p)=X_p(f)=0$.反过来，如果在一点处$X_p\notin T_pN_{f(p)}$，则$X_p(f)\neq 0$。

固定$f$，将所有$\dd f(X)=0$的$X$拿出来，他组成一个$n-1$维的分布，$N_a$就是这个分布的积分流形，因为$X$在每一点都完全位于$N_a$在那一点的切空间内。我们称$N_a=\{p\in M:f(p)=a\}$是Paffa方程$\dd f=0$的解。从上面来看，一个Paffa方程要有解，那么解应该是一个积分曲面才是。

\para 设分布$D$使得1-形式$\omega$满足$\omega(X)=0$对$X\in D$恒成立，则这个$\omega$完全可积当且仅当$D$存在积分曲面。

\end{document}